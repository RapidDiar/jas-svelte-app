var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,s=(t,r,o)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[r]=o,a=(e,t)=>{for(var r in t||(t={}))n.call(t,r)&&s(e,r,t[r]);if(o)for(var r of o(t))i.call(t,r)&&s(e,r,t[r]);return e},l=(e,o)=>t(e,r(o));function c(){}function d(e,t){for(const r in t)e[r]=t[r];return e}function u(e){return e()}function p(){return Object.create(null)}function f(e){e.forEach(u)}function h(e){return"function"==typeof e}function E(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let m;function _(e,t){return m||(m=document.createElement("a")),m.href=t,e===m.href}function g(e,t,r){e.$$.on_destroy.push(function(e,...t){if(null==e)return c;const r=e.subscribe(...t);return r.unsubscribe?()=>r.unsubscribe():r}(t,r))}function T(e,t,r,o){if(e){const n=I(e,t,r,o);return e[0](n)}}function I(e,t,r,o){return e[1]&&o?d(r.ctx.slice(),e[1](o(t))):r.ctx}function y(e,t,r,o){if(e[2]&&o){const n=e[2](o(r));if(void 0===t.dirty)return n;if("object"==typeof n){const e=[],r=Math.max(t.dirty.length,n.length);for(let o=0;o<r;o+=1)e[o]=t.dirty[o]|n[o];return e}return t.dirty|n}return t.dirty}function R(e,t,r,o,n,i){if(n){const s=I(t,r,o,i);e.p(s,n)}}function A(e){if(e.ctx.length>32){const t=[],r=e.ctx.length/32;for(let e=0;e<r;e++)t[e]=-1;return t}return-1}function O(e){const t={};for(const r in e)"$"!==r[0]&&(t[r]=e[r]);return t}function D(e,t,r){return e.set(r),t}let w,v=!1;function S(e,t,r,o){for(;e<t;){const n=e+(t-e>>1);r(n)<=o?e=n+1:t=n}return e}function M(e,t){if(v){for(!function(e){if(e.hydrate_init)return;e.hydrate_init=!0;let t=e.childNodes;if("HEAD"===e.nodeName){const e=[];for(let r=0;r<t.length;r++){const o=t[r];void 0!==o.claim_order&&e.push(o)}t=e}const r=new Int32Array(t.length+1),o=new Int32Array(t.length);r[0]=-1;let n=0;for(let l=0;l<t.length;l++){const e=t[l].claim_order,i=(n>0&&t[r[n]].claim_order<=e?n+1:S(1,n,(e=>t[r[e]].claim_order),e))-1;o[l]=r[i]+1;const s=i+1;r[s]=l,n=Math.max(s,n)}const i=[],s=[];let a=t.length-1;for(let l=r[n]+1;0!=l;l=o[l-1]){for(i.push(t[l-1]);a>=l;a--)s.push(t[a]);a--}for(;a>=0;a--)s.push(t[a]);i.reverse(),s.sort(((e,t)=>e.claim_order-t.claim_order));for(let l=0,c=0;l<s.length;l++){for(;c<i.length&&s[l].claim_order>=i[c].claim_order;)c++;const t=c<i.length?i[c]:null;e.insertBefore(s[l],t)}}(e),(void 0===e.actual_end_child||null!==e.actual_end_child&&e.actual_end_child.parentElement!==e)&&(e.actual_end_child=e.firstChild);null!==e.actual_end_child&&void 0===e.actual_end_child.claim_order;)e.actual_end_child=e.actual_end_child.nextSibling;t!==e.actual_end_child?void 0===t.claim_order&&t.parentNode===e||e.insertBefore(t,e.actual_end_child):e.actual_end_child=t.nextSibling}else t.parentNode!==e&&e.appendChild(t)}function b(e,t,r){v&&!r?M(e,t):t.parentNode===e&&t.nextSibling==r||e.insertBefore(t,r||null)}function P(e){e.parentNode.removeChild(e)}function L(e,t){for(let r=0;r<e.length;r+=1)e[r]&&e[r].d(t)}function C(e){return document.createElement(e)}function N(e){return document.createTextNode(e)}function G(){return N(" ")}function x(){return N("")}function F(e,t,r,o){return e.addEventListener(t,r,o),()=>e.removeEventListener(t,r,o)}function U(e){return function(t){return t.preventDefault(),e.call(this,t)}}function q(e,t,r){null==r?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function B(e){return""===e?null:+e}function V(e){return Array.from(e.childNodes)}function $(e,t,r,o,n=!1){!function(e){void 0===e.claim_info&&(e.claim_info={last_index:0,total_claimed:0})}(e);const i=(()=>{for(let o=e.claim_info.last_index;o<e.length;o++){const i=e[o];if(t(i)){const t=r(i);return void 0===t?e.splice(o,1):e[o]=t,n||(e.claim_info.last_index=o),i}}for(let o=e.claim_info.last_index-1;o>=0;o--){const i=e[o];if(t(i)){const t=r(i);return void 0===t?e.splice(o,1):e[o]=t,n?void 0===t&&e.claim_info.last_index--:e.claim_info.last_index=o,i}}return o()})();return i.claim_order=e.claim_info.total_claimed,e.claim_info.total_claimed+=1,i}function k(e,t,r,o){return $(e,(e=>e.nodeName===t),(e=>{const t=[];for(let o=0;o<e.attributes.length;o++){const n=e.attributes[o];r[n.name]||t.push(n.name)}t.forEach((t=>e.removeAttribute(t)))}),(()=>o?function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}(t):C(t)))}function Y(e,t){return $(e,(e=>3===e.nodeType),(e=>{const r=""+t;if(e.data.startsWith(r)){if(e.data.length!==r.length)return e.splitText(r.length)}else e.data=r}),(()=>N(t)),!0)}function H(e){return Y(e," ")}function W(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function z(e,t){e.value=null==t?"":t}function X(e,t,r,o){e.style.setProperty(t,r,o?"important":"")}function j(e,t=document.body){return Array.from(t.querySelectorAll(e))}function Q(e){w=e}function Z(){if(!w)throw new Error("Function called outside component initialization");return w}function K(e){Z().$$.on_mount.push(e)}function J(e){Z().$$.after_update.push(e)}function ee(e,t){Z().$$.context.set(e,t)}const te=[],re=[],oe=[],ne=[],ie=Promise.resolve();let se=!1;function ae(e){oe.push(e)}let le=!1;const ce=new Set;function de(){if(!le){le=!0;do{for(let e=0;e<te.length;e+=1){const t=te[e];Q(t),ue(t.$$)}for(Q(null),te.length=0;re.length;)re.pop()();for(let e=0;e<oe.length;e+=1){const t=oe[e];ce.has(t)||(ce.add(t),t())}oe.length=0}while(te.length);for(;ne.length;)ne.pop()();se=!1,le=!1,ce.clear()}}function ue(e){if(null!==e.fragment){e.update(),f(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ae)}}const pe=new Set;let fe;function he(){fe={r:0,c:[],p:fe}}function Ee(){fe.r||f(fe.c),fe=fe.p}function me(e,t){e&&e.i&&(pe.delete(e),e.i(t))}function _e(e,t,r,o){if(e&&e.o){if(pe.has(e))return;pe.add(e),fe.c.push((()=>{pe.delete(e),o&&(r&&e.d(1),o())})),e.o(t)}}function ge(e,t){const r={},o={},n={$$scope:1};let i=e.length;for(;i--;){const s=e[i],a=t[i];if(a){for(const e in s)e in a||(o[e]=1);for(const e in a)n[e]||(r[e]=a[e],n[e]=1);e[i]=a}else for(const e in s)n[e]=1}for(const s in o)s in r||(r[s]=void 0);return r}function Te(e){return"object"==typeof e&&null!==e?e:{}}function Ie(e){e&&e.c()}function ye(e,t){e&&e.l(t)}function Re(e,t,r,o){const{fragment:n,on_mount:i,on_destroy:s,after_update:a}=e.$$;n&&n.m(t,r),o||ae((()=>{const t=i.map(u).filter(h);s?s.push(...t):f(t),e.$$.on_mount=[]})),a.forEach(ae)}function Ae(e,t){const r=e.$$;null!==r.fragment&&(f(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function Oe(e,t){-1===e.$$.dirty[0]&&(te.push(e),se||(se=!0,ie.then(de)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function De(e,t,r,o,n,i,s,a=[-1]){const l=w;Q(e);const d=e.$$={fragment:null,ctx:null,props:i,update:c,not_equal:n,bound:p(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:t.context||[]),callbacks:p(),dirty:a,skip_bound:!1,root:t.target||l.$$.root};s&&s(d.root);let u=!1;if(d.ctx=r?r(e,t.props||{},((t,r,...o)=>{const i=o.length?o[0]:r;return d.ctx&&n(d.ctx[t],d.ctx[t]=i)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](i),u&&Oe(e,t)),r})):[],d.update(),u=!0,f(d.before_update),d.fragment=!!o&&o(d.ctx),t.target){if(t.hydrate){v=!0;const e=V(t.target);d.fragment&&d.fragment.l(e),e.forEach(P)}else d.fragment&&d.fragment.c();t.intro&&me(e.$$.fragment),Re(e,t.target,t.anchor,t.customElement),v=!1,de()}Q(l)}class we{$destroy(){Ae(this,1),this.$destroy=c}$on(e,t){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const e=r.indexOf(t);-1!==e&&r.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ve=[];function Se(e,t=c){let r;const o=new Set;function n(t){if(E(e,t)&&(e=t,r)){const t=!ve.length;for(const r of o)r[1](),ve.push(r,e);if(t){for(let e=0;e<ve.length;e+=2)ve[e][0](ve[e+1]);ve.length=0}}}return{set:n,update:function(t){n(t(e))},subscribe:function(i,s=c){const a=[i,s];return o.add(a),1===o.size&&(r=t(n)||c),i(e),()=>{o.delete(a),0===o.size&&(r(),r=null)}}}}var Me={exports:{}},be=function(e,t){return function(){for(var r=new Array(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];return e.apply(t,r)}},Pe=be,Le=Object.prototype.toString;function Ce(e){return"[object Array]"===Le.call(e)}function Ne(e){return void 0===e}function Ge(e){return null!==e&&"object"==typeof e}function xe(e){if("[object Object]"!==Le.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function Fe(e){return"[object Function]"===Le.call(e)}function Ue(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),Ce(e))for(var r=0,o=e.length;r<o;r++)t.call(null,e[r],r,e);else for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(null,e[n],n,e)}var qe={isArray:Ce,isArrayBuffer:function(e){return"[object ArrayBuffer]"===Le.call(e)},isBuffer:function(e){return null!==e&&!Ne(e)&&null!==e.constructor&&!Ne(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:Ge,isPlainObject:xe,isUndefined:Ne,isDate:function(e){return"[object Date]"===Le.call(e)},isFile:function(e){return"[object File]"===Le.call(e)},isBlob:function(e){return"[object Blob]"===Le.call(e)},isFunction:Fe,isStream:function(e){return Ge(e)&&Fe(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:Ue,merge:function e(){var t={};function r(r,o){xe(t[o])&&xe(r)?t[o]=e(t[o],r):xe(r)?t[o]=e({},r):Ce(r)?t[o]=r.slice():t[o]=r}for(var o=0,n=arguments.length;o<n;o++)Ue(arguments[o],r);return t},extend:function(e,t,r){return Ue(t,(function(t,o){e[o]=r&&"function"==typeof t?Pe(t,r):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}},Be=qe;function Ve(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var $e=function(e,t,r){if(!t)return e;var o;if(r)o=r(t);else if(Be.isURLSearchParams(t))o=t.toString();else{var n=[];Be.forEach(t,(function(e,t){null!=e&&(Be.isArray(e)?t+="[]":e=[e],Be.forEach(e,(function(e){Be.isDate(e)?e=e.toISOString():Be.isObject(e)&&(e=JSON.stringify(e)),n.push(Ve(t)+"="+Ve(e))})))})),o=n.join("&")}if(o){var i=e.indexOf("#");-1!==i&&(e=e.slice(0,i)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e},ke=qe;function Ye(){this.handlers=[]}Ye.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},Ye.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},Ye.prototype.forEach=function(e){ke.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var He=Ye,We=qe,ze=function(e){return!(!e||!e.__CANCEL__)},Xe=qe,je=function(e,t,r,o,n){return e.config=t,r&&(e.code=r),e.request=o,e.response=n,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e},Qe=function(e,t,r,o,n){var i=new Error(e);return je(i,t,r,o,n)},Ze=Qe,Ke=qe,Je=Ke.isStandardBrowserEnv()?{write:function(e,t,r,o,n,i){var s=[];s.push(e+"="+encodeURIComponent(t)),Ke.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),Ke.isString(o)&&s.push("path="+o),Ke.isString(n)&&s.push("domain="+n),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},et=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)},tt=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e},rt=qe,ot=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],nt=qe,it=nt.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function o(e){var o=e;return t&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=o(window.location.href),function(t){var r=nt.isString(t)?o(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0},st=qe,at=function(e,t,r){var o=r.config.validateStatus;r.status&&o&&!o(r.status)?t(Ze("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)},lt=Je,ct=$e,dt=function(e,t){return e&&!et(t)?tt(e,t):t},ut=function(e){var t,r,o,n={};return e?(rt.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=rt.trim(e.substr(0,o)).toLowerCase(),r=rt.trim(e.substr(o+1)),t){if(n[t]&&ot.indexOf(t)>=0)return;n[t]="set-cookie"===t?(n[t]?n[t]:[]).concat([r]):n[t]?n[t]+", "+r:r}})),n):n},pt=it,ft=Qe,ht=function(e){return new Promise((function(t,r){var o=e.data,n=e.headers;st.isFormData(o)&&delete n["Content-Type"];var i=new XMLHttpRequest;if(e.auth){var s=e.auth.username||"",a=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";n.Authorization="Basic "+btoa(s+":"+a)}var l=dt(e.baseURL,e.url);if(i.open(e.method.toUpperCase(),ct(l,e.params,e.paramsSerializer),!0),i.timeout=e.timeout,i.onreadystatechange=function(){if(i&&4===i.readyState&&(0!==i.status||i.responseURL&&0===i.responseURL.indexOf("file:"))){var o="getAllResponseHeaders"in i?ut(i.getAllResponseHeaders()):null,n={data:e.responseType&&"text"!==e.responseType?i.response:i.responseText,status:i.status,statusText:i.statusText,headers:o,config:e,request:i};at(t,r,n),i=null}},i.onabort=function(){i&&(r(ft("Request aborted",e,"ECONNABORTED",i)),i=null)},i.onerror=function(){r(ft("Network Error",e,null,i)),i=null},i.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),r(ft(t,e,"ECONNABORTED",i)),i=null},st.isStandardBrowserEnv()){var c=(e.withCredentials||pt(l))&&e.xsrfCookieName?lt.read(e.xsrfCookieName):void 0;c&&(n[e.xsrfHeaderName]=c)}if("setRequestHeader"in i&&st.forEach(n,(function(e,t){void 0===o&&"content-type"===t.toLowerCase()?delete n[t]:i.setRequestHeader(t,e)})),st.isUndefined(e.withCredentials)||(i.withCredentials=!!e.withCredentials),e.responseType)try{i.responseType=e.responseType}catch(d){if("json"!==e.responseType)throw d}"function"==typeof e.onDownloadProgress&&i.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&i.upload&&i.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){i&&(i.abort(),r(e),i=null)})),o||(o=null),i.send(o)}))},Et=qe,mt=function(e,t){Xe.forEach(e,(function(r,o){o!==t&&o.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[o])}))},_t={"Content-Type":"application/x-www-form-urlencoded"};function gt(e,t){!Et.isUndefined(e)&&Et.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var Tt,It={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(Tt=ht),Tt),transformRequest:[function(e,t){return mt(t,"Accept"),mt(t,"Content-Type"),Et.isFormData(e)||Et.isArrayBuffer(e)||Et.isBuffer(e)||Et.isStream(e)||Et.isFile(e)||Et.isBlob(e)?e:Et.isArrayBufferView(e)?e.buffer:Et.isURLSearchParams(e)?(gt(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Et.isObject(e)?(gt(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};It.headers={common:{Accept:"application/json, text/plain, */*"}},Et.forEach(["delete","get","head"],(function(e){It.headers[e]={}})),Et.forEach(["post","put","patch"],(function(e){It.headers[e]=Et.merge(_t)}));var yt=It,Rt=qe,At=function(e,t,r){return We.forEach(r,(function(r){e=r(e,t)})),e},Ot=ze,Dt=yt;function wt(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var vt=qe,St=function(e,t){t=t||{};var r={},o=["url","method","data"],n=["headers","auth","proxy","params"],i=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function a(e,t){return vt.isPlainObject(e)&&vt.isPlainObject(t)?vt.merge(e,t):vt.isPlainObject(t)?vt.merge({},t):vt.isArray(t)?t.slice():t}function l(o){vt.isUndefined(t[o])?vt.isUndefined(e[o])||(r[o]=a(void 0,e[o])):r[o]=a(e[o],t[o])}vt.forEach(o,(function(e){vt.isUndefined(t[e])||(r[e]=a(void 0,t[e]))})),vt.forEach(n,l),vt.forEach(i,(function(o){vt.isUndefined(t[o])?vt.isUndefined(e[o])||(r[o]=a(void 0,e[o])):r[o]=a(void 0,t[o])})),vt.forEach(s,(function(o){o in t?r[o]=a(e[o],t[o]):o in e&&(r[o]=a(void 0,e[o]))}));var c=o.concat(n).concat(i).concat(s),d=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===c.indexOf(e)}));return vt.forEach(d,l),r},Mt=qe,bt=$e,Pt=He,Lt=function(e){return wt(e),e.headers=e.headers||{},e.data=At(e.data,e.headers,e.transformRequest),e.headers=Rt.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Rt.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||Dt.adapter)(e).then((function(t){return wt(e),t.data=At(t.data,t.headers,e.transformResponse),t}),(function(t){return Ot(t)||(wt(e),t&&t.response&&(t.response.data=At(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},Ct=St;function Nt(e){this.defaults=e,this.interceptors={request:new Pt,response:new Pt}}Nt.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=Ct(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[Lt,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)r=r.then(t.shift(),t.shift());return r},Nt.prototype.getUri=function(e){return e=Ct(this.defaults,e),bt(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},Mt.forEach(["delete","get","head","options"],(function(e){Nt.prototype[e]=function(t,r){return this.request(Ct(r||{},{method:e,url:t,data:(r||{}).data}))}})),Mt.forEach(["post","put","patch"],(function(e){Nt.prototype[e]=function(t,r,o){return this.request(Ct(o||{},{method:e,url:t,data:r}))}}));var Gt=Nt;function xt(e){this.message=e}xt.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},xt.prototype.__CANCEL__=!0;var Ft=xt,Ut=Ft;function qt(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;e((function(e){r.reason||(r.reason=new Ut(e),t(r.reason))}))}qt.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},qt.source=function(){var e;return{token:new qt((function(t){e=t})),cancel:e}};var Bt=qt,Vt=qe,$t=be,kt=Gt,Yt=St;function Ht(e){var t=new kt(e),r=$t(kt.prototype.request,t);return Vt.extend(r,kt.prototype,t),Vt.extend(r,t),r}var Wt=Ht(yt);Wt.Axios=kt,Wt.create=function(e){return Ht(Yt(Wt.defaults,e))},Wt.Cancel=Ft,Wt.CancelToken=Bt,Wt.isCancel=ze,Wt.all=function(e){return Promise.all(e)},Wt.spread=function(e){return function(t){return e.apply(null,t)}},Wt.isAxiosError=function(e){return"object"==typeof e&&!0===e.isAxiosError},Me.exports=Wt,Me.exports.default=Wt;var zt=Me.exports;
/*!
 * FilePond 4.28.2
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const Xt=(e,t)=>{for(const r in e)e.hasOwnProperty(r)&&t(r,e[r])},jt=e=>{const t={};return Xt(e,(r=>{((e,t,r)=>{"function"!=typeof r?Object.defineProperty(e,t,a({},r)):e[t]=r})(t,r,e[r])})),t},Qt=(e,t,r=null)=>{if(null===r)return e.getAttribute(t)||e.hasAttribute(t);e.setAttribute(t,r)},Zt=["svg","path"],Kt=e=>Zt.includes(e),Jt=(e,t,r={})=>{"object"==typeof t&&(r=t,t=null);const o=Kt(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return t&&(Kt(e)?Qt(o,"class",t):o.className=t),Xt(r,((e,t)=>{Qt(o,e,t)})),o},er=(e,t)=>(e,r)=>(void 0!==r?t.splice(r,0,e):t.push(e),e),tr=(e,t)=>r=>(t.splice(t.indexOf(r),1),r.element.parentNode&&e.removeChild(r.element),r),rr="undefined"!=typeof window&&void 0!==window.document,or=()=>rr,nr="children"in(or()?Jt("svg"):{})?e=>e.children.length:e=>e.childNodes.length,ir=(e,t,r,o)=>{const n=r[0]||e.left,i=r[1]||e.top,s=n+e.width,l=i+e.height*(o[1]||1),c={element:a({},e),inner:{left:e.left,top:e.top,right:e.right,bottom:e.bottom},outer:{left:n,top:i,right:s,bottom:l}};return t.filter((e=>!e.isRectIgnored())).map((e=>e.rect)).forEach((e=>{sr(c.inner,a({},e.inner)),sr(c.outer,a({},e.outer))})),ar(c.inner),c.outer.bottom+=c.element.marginBottom,c.outer.right+=c.element.marginRight,ar(c.outer),c},sr=(e,t)=>{t.top+=e.top,t.right+=e.left,t.bottom+=e.top,t.left+=e.left,t.bottom>e.bottom&&(e.bottom=t.bottom),t.right>e.right&&(e.right=t.right)},ar=e=>{e.width=e.right-e.left,e.height=e.bottom-e.top},lr=e=>"number"==typeof e,cr=e=>e<.5?2*e*e:(4-2*e)*e-1,dr={spring:({stiffness:e=.5,damping:t=.75,mass:r=10}={})=>{let o=null,n=null,i=0,s=!1;const a=jt({interpolate:(l,c)=>{if(s)return;if(!lr(o)||!lr(n))return s=!0,void(i=0);i+=-(n-o)*e/r,n+=i,i*=t,((e,t,r,o=.001)=>Math.abs(e-t)<o&&Math.abs(r)<o)(n,o,i)||c?(n=o,i=0,s=!0,a.onupdate(n),a.oncomplete(n)):a.onupdate(n)},target:{set:e=>{if(lr(e)&&!lr(n)&&(n=e),null===o&&(o=e,n=e),o=e,n===o||void 0===o)return s=!0,i=0,a.onupdate(n),void a.oncomplete(n);s=!1},get:()=>o},resting:{get:()=>s},onupdate:e=>{},oncomplete:e=>{}});return a},tween:({duration:e=500,easing:t=cr,delay:r=0}={})=>{let o,n,i=null,s=!0,a=!1,l=null;const c=jt({interpolate:(d,u)=>{s||null===l||(null===i&&(i=d),d-i<r||(o=d-i-r,o>=e||u?(o=1,n=a?0:1,c.onupdate(n*l),c.oncomplete(n*l),s=!0):(n=o/e,c.onupdate((o>=0?t(a?1-n:n):0)*l))))},target:{get:()=>a?0:l,set:e=>{if(null===l)return l=e,c.onupdate(e),void c.oncomplete(e);e<l?(l=1,a=!0):(a=!1,l=e),s=!1,i=null}},resting:{get:()=>s},onupdate:e=>{},oncomplete:e=>{}});return c}},ur=(e,t,r,o=!1)=>{(t=Array.isArray(t)?t:[t]).forEach((t=>{e.forEach((e=>{let n=e,i=()=>r[e],s=t=>r[e]=t;"object"==typeof e&&(n=e.key,i=e.getter||i,s=e.setter||s),t[n]&&!o||(t[n]={get:i,set:s})}))}))},pr=e=>null!=e,fr={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},hr=(e,t)=>{if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const r in t)if(t[r]!==e[r])return!0;return!1},Er=(e,{opacity:t,perspective:r,translateX:o,translateY:n,scaleX:i,scaleY:s,rotateX:a,rotateY:l,rotateZ:c,originX:d,originY:u,width:p,height:f})=>{let h="",E="";(pr(d)||pr(u))&&(E+=`transform-origin: ${d||0}px ${u||0}px;`),pr(r)&&(h+=`perspective(${r}px) `),(pr(o)||pr(n))&&(h+=`translate3d(${o||0}px, ${n||0}px, 0) `),(pr(i)||pr(s))&&(h+=`scale3d(${pr(i)?i:1}, ${pr(s)?s:1}, 1) `),pr(c)&&(h+=`rotateZ(${c}rad) `),pr(a)&&(h+=`rotateX(${a}rad) `),pr(l)&&(h+=`rotateY(${l}rad) `),h.length&&(E+=`transform:${h};`),pr(t)&&(E+=`opacity:${t};`,0===t&&(E+="visibility:hidden;"),t<1&&(E+="pointer-events:none;")),pr(f)&&(E+=`height:${f}px;`),pr(p)&&(E+=`width:${p}px;`);const m=e.elementCurrentStyle||"";E.length===m.length&&E===m||(e.style.cssText=E,e.elementCurrentStyle=E)},mr={styles:({mixinConfig:e,viewProps:t,viewInternalAPI:r,viewExternalAPI:o,view:n})=>{const i=a({},t),s={};ur(e,[r,o],t);const l=()=>n.rect?ir(n.rect,n.childViews,[t.translateX||0,t.translateY||0],[t.scaleX||0,t.scaleY||0]):null;return r.rect={get:l},o.rect={get:l},e.forEach((e=>{t[e]=void 0===i[e]?fr[e]:i[e]})),{write:()=>{if(hr(s,t))return Er(n.element,t),Object.assign(s,a({},t)),!0},destroy:()=>{}}},listeners:({mixinConfig:e,viewProps:t,viewInternalAPI:r,viewExternalAPI:o,viewState:n,view:i})=>{const s=[],a=(l=i.element,(e,t)=>{l.addEventListener(e,t)});var l;const c=(e=>(t,r)=>{e.removeEventListener(t,r)})(i.element);return o.on=(e,t)=>{s.push({type:e,fn:t}),a(e,t)},o.off=(e,t)=>{s.splice(s.findIndex((r=>r.type===e&&r.fn===t)),1),c(e,t)},{write:()=>!0,destroy:()=>{s.forEach((e=>{c(e.type,e.fn)}))}}},animations:({mixinConfig:e,viewProps:t,viewInternalAPI:r,viewExternalAPI:o})=>{const n=a({},t),i=[];return Xt(e,((e,s)=>{const l=((e,t,r)=>{const o=e[t]&&"object"==typeof e[t][r]?e[t][r]:e[t]||e,n="string"==typeof o?o:o.type,i="object"==typeof o?a({},o):{};return dr[n]?dr[n](i):null})(s);if(!l)return;l.onupdate=r=>{t[e]=r},l.target=n[e];ur([{key:e,setter:e=>{l.target!==e&&(l.target=e)},getter:()=>t[e]}],[r,o],t,!0),i.push(l)})),{write:e=>{let t=document.hidden,r=!0;return i.forEach((o=>{o.resting||(r=!1),o.interpolate(e,t)})),r},destroy:()=>{}}},apis:({mixinConfig:e,viewProps:t,viewExternalAPI:r})=>{ur(e,r,t)}},_r=(e={},t={},r={})=>(t.layoutCalculated||(e.paddingTop=parseInt(r.paddingTop,10)||0,e.marginTop=parseInt(r.marginTop,10)||0,e.marginRight=parseInt(r.marginRight,10)||0,e.marginBottom=parseInt(r.marginBottom,10)||0,e.marginLeft=parseInt(r.marginLeft,10)||0,t.layoutCalculated=!0),e.left=t.offsetLeft||0,e.top=t.offsetTop||0,e.width=t.offsetWidth||0,e.height=t.offsetHeight||0,e.right=e.left+e.width,e.bottom=e.top+e.height,e.scrollTop=t.scrollTop,e.hidden=null===t.offsetParent,e),gr=({tag:e="div",name:t=null,attributes:r={},read:o=(()=>{}),write:n=(()=>{}),create:i=(()=>{}),destroy:s=(()=>{}),filterFrameActionsForChild:c=((e,t)=>t),didCreateView:d=(()=>{}),didWriteView:u=(()=>{}),ignoreRect:p=!1,ignoreRectUpdate:f=!1,mixins:h=[]}={})=>(E,m={})=>{const _=Jt(e,`filepond--${t}`,r),g=window.getComputedStyle(_,null),T=_r();let I=null,y=!1;const R=[],A=[],O={},D={},w=[n],v=[o],S=[s],M=()=>_,b=()=>R.concat(),P=()=>I||(I=ir(T,R,[0,0],[1,1]),I),L={element:{get:M},style:{get:()=>g},childViews:{get:b}},C=l(a({},L),{rect:{get:P},ref:{get:()=>O},is:e=>t===e,appendChild:(G=_,(e,t)=>{void 0!==t&&G.children[t]?G.insertBefore(e,G.children[t]):G.appendChild(e)}),createChildView:(N=E,(e,t)=>e(N,t)),linkView:e=>(R.push(e),e),unlinkView:e=>{R.splice(R.indexOf(e),1)},appendChildView:er(0,R),removeChildView:tr(_,R),registerWriter:e=>w.push(e),registerReader:e=>v.push(e),registerDestroyer:e=>S.push(e),invalidateLayout:()=>_.layoutCalculated=!1,dispatch:E.dispatch,query:E.query});var N,G;const x={element:{get:M},childViews:{get:b},rect:{get:P},resting:{get:()=>y},isRectIgnored:()=>p,_read:()=>{I=null,R.forEach((e=>e._read()));!(f&&T.width&&T.height)&&_r(T,_,g);const e={root:U,props:m,rect:T};v.forEach((t=>t(e)))},_write:(e,t,r)=>{let o=0===t.length;return w.forEach((n=>{!1===n({props:m,root:U,actions:t,timestamp:e,shouldOptimize:r})&&(o=!1)})),A.forEach((t=>{!1===t.write(e)&&(o=!1)})),R.filter((e=>!!e.element.parentNode)).forEach((n=>{n._write(e,c(n,t),r)||(o=!1)})),R.forEach(((n,i)=>{n.element.parentNode||(U.appendChild(n.element,i),n._read(),n._write(e,c(n,t),r),o=!1)})),y=o,u({props:m,root:U,actions:t,timestamp:e}),o},_destroy:()=>{A.forEach((e=>e.destroy())),S.forEach((e=>{e({root:U,props:m})})),R.forEach((e=>e._destroy()))}},F=l(a({},L),{rect:{get:()=>T}});Object.keys(h).sort(((e,t)=>"styles"===e?1:"styles"===t?-1:0)).forEach((e=>{const t=mr[e]({mixinConfig:h[e],viewProps:m,viewState:D,viewInternalAPI:C,viewExternalAPI:x,view:jt(F)});t&&A.push(t)}));const U=jt(C);i({root:U,props:m});const q=nr(_);return R.forEach(((e,t)=>{U.appendChild(e.element,q+t)})),d(U),jt(x)},Tr=(e,t)=>({root:r,props:o,actions:n=[],timestamp:i,shouldOptimize:s})=>{n.filter((t=>e[t.type])).forEach((t=>e[t.type]({root:r,props:o,action:t.data,timestamp:i,shouldOptimize:s}))),t&&t({root:r,props:o,actions:n,timestamp:i,shouldOptimize:s})},Ir=(e,t)=>t.parentNode.insertBefore(e,t),yr=(e,t)=>t.parentNode.insertBefore(e,t.nextSibling),Rr=e=>Array.isArray(e),Ar=e=>null==e,Or=e=>e.trim(),Dr=e=>""+e,wr=e=>"boolean"==typeof e,vr=e=>wr(e)?e:"true"===e,Sr=e=>"string"==typeof e,Mr=e=>lr(e)?e:Sr(e)?Dr(e).replace(/[a-z]+/gi,""):0,br=e=>parseInt(Mr(e),10),Pr=e=>parseFloat(Mr(e)),Lr=e=>lr(e)&&isFinite(e)&&Math.floor(e)===e,Cr=(e,t=1e3)=>{if(Lr(e))return e;let r=Dr(e).trim();return/MB$/i.test(r)?(r=r.replace(/MB$i/,"").trim(),br(r)*t*t):/KB/i.test(r)?(r=r.replace(/KB$i/,"").trim(),br(r)*t):br(r)},Nr=e=>"function"==typeof e,Gr={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},xr=(e,t,r,o,n)=>{if(null===t)return null;if("function"==typeof t)return t;const i={url:"GET"===r||"PATCH"===r?`?${e}=`:"",method:r,headers:n,withCredentials:!1,timeout:o,onload:null,ondata:null,onerror:null};if(Sr(t))return i.url=t,i;if(Object.assign(i,t),Sr(i.headers)){const e=i.headers.split(/:(.+)/);i.headers={header:e[0],value:e[1]}}return i.withCredentials=vr(i.withCredentials),i},Fr=e=>"object"==typeof e&&null!==e,Ur=e=>Rr(e)?"array":(e=>null===e)(e)?"null":Lr(e)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(e)?"bytes":(e=>Fr(e)&&Sr(e.url)&&Fr(e.process)&&Fr(e.revert)&&Fr(e.restore)&&Fr(e.fetch))(e)?"api":typeof e,qr={array:(e,t=",")=>Ar(e)?[]:Rr(e)?e:Dr(e).split(t).map(Or).filter((e=>e.length)),boolean:vr,int:e=>"bytes"===Ur(e)?Cr(e):br(e),number:Pr,float:Pr,bytes:Cr,string:e=>Nr(e)?e:Dr(e),function:e=>(e=>{let t=self,r=e.split("."),o=null;for(;o=r.shift();)if(t=t[o],!t)return null;return t})(e),serverapi:e=>(e=>{const t={};return t.url=Sr(e)?e:e.url||"",t.timeout=e.timeout?parseInt(e.timeout,10):0,t.headers=e.headers?e.headers:{},Xt(Gr,(r=>{t[r]=xr(r,e[r],Gr[r],t.timeout,t.headers)})),t.process=e.process||Sr(e)||e.url?t.process:null,t.remove=e.remove||null,delete t.headers,t})(e),object:e=>{try{return JSON.parse(e.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",'))}catch(t){return null}}},Br=(e,t,r)=>{if(e===t)return e;let o=Ur(e);if(o!==r){const t=(n=e,qr[r](n));if(o=Ur(t),null===t)throw`Trying to assign value with incorrect type to "${option}", allowed type: "${r}"`;e=t}var n;return e},Vr=e=>{const t={};return Xt(e,(r=>{const o=e[r];t[r]=((e,t)=>{let r=e;return{enumerable:!0,get:()=>r,set:o=>{r=Br(o,e,t)}}})(o[0],o[1])})),jt(t)},$r=(e,t="-")=>e.split(/(?=[A-Z])/).map((e=>e.toLowerCase())).join(t),kr=e=>(t,r,o)=>{const n={};return Xt(e,(e=>{const r=$r(e,"_").toUpperCase();n[`SET_${r}`]=n=>{try{o.options[e]=n.value}catch(i){}t(`DID_SET_${r}`,{value:o.options[e]})}})),n},Yr=e=>t=>{const r={};return Xt(e,(e=>{r[`GET_${$r(e,"_").toUpperCase()}`]=r=>t.options[e]})),r},Hr=1,Wr=2,zr=3,Xr=4,jr=5,Qr=()=>Math.random().toString(36).substr(2,9),Zr=(e,t)=>e.splice(t,1),Kr=()=>{const e=[],t=(t,r)=>{Zr(e,e.findIndex((e=>e.event===t&&(e.cb===r||!r))))},r=(t,r,o)=>{e.filter((e=>e.event===t)).map((e=>e.cb)).forEach((e=>((e,t)=>{t?e():document.hidden?Promise.resolve(1).then(e):setTimeout(e,0)})((()=>e(...r)),o)))};return{fireSync:(e,...t)=>{r(e,t,!0)},fire:(e,...t)=>{r(e,t,!1)},on:(t,r)=>{e.push({event:t,cb:r})},onOnce:(r,o)=>{e.push({event:r,cb:(...e)=>{t(r,o),o(...e)}})},off:t}},Jr=(e,t,r)=>{Object.getOwnPropertyNames(e).filter((e=>!r.includes(e))).forEach((r=>Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))))},eo=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],to=e=>{const t={};return Jr(e,t,eo),t},ro=1,oo=2,no=9,io=3,so=5,ao=6,lo=10,co=7,uo=8,po=1,fo=2,ho=3,Eo=e=>/[^0-9]+/.exec(e),mo=()=>Eo(1.1.toLocaleString())[0],_o={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},go=[],To=(e,t,r)=>new Promise(((o,n)=>{const i=go.filter((t=>t.key===e)).map((e=>e.cb));if(0===i.length)return void o(t);const s=i.shift();i.reduce(((e,t)=>e.then((e=>t(e,r)))),s(t,r)).then((e=>o(e))).catch((e=>n(e)))})),Io=(e,t,r)=>go.filter((t=>t.key===e)).map((e=>e.cb(t,r))),yo=(e,t)=>go.push({key:e,cb:t}),Ro=()=>a({},Ao),Ao={id:[null,_o.STRING],name:["filepond",_o.STRING],disabled:[!1,_o.BOOLEAN],className:[null,_o.STRING],required:[!1,_o.BOOLEAN],captureMethod:[null,_o.STRING],allowSyncAcceptAttribute:[!0,_o.BOOLEAN],allowDrop:[!0,_o.BOOLEAN],allowBrowse:[!0,_o.BOOLEAN],allowPaste:[!0,_o.BOOLEAN],allowMultiple:[!1,_o.BOOLEAN],allowReplace:[!0,_o.BOOLEAN],allowRevert:[!0,_o.BOOLEAN],allowRemove:[!0,_o.BOOLEAN],allowProcess:[!0,_o.BOOLEAN],allowReorder:[!1,_o.BOOLEAN],allowDirectoriesOnly:[!1,_o.BOOLEAN],storeAsFile:[!1,_o.BOOLEAN],forceRevert:[!1,_o.BOOLEAN],maxFiles:[null,_o.INT],checkValidity:[!1,_o.BOOLEAN],itemInsertLocationFreedom:[!0,_o.BOOLEAN],itemInsertLocation:["before",_o.STRING],itemInsertInterval:[75,_o.INT],dropOnPage:[!1,_o.BOOLEAN],dropOnElement:[!0,_o.BOOLEAN],dropValidation:[!1,_o.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],_o.ARRAY],instantUpload:[!0,_o.BOOLEAN],maxParallelUploads:[2,_o.INT],allowMinimumUploadDuration:[!0,_o.BOOLEAN],chunkUploads:[!1,_o.BOOLEAN],chunkForce:[!1,_o.BOOLEAN],chunkSize:[5e6,_o.INT],chunkRetryDelays:[[500,1e3,3e3],_o.ARRAY],server:[null,_o.SERVER_API],fileSizeBase:[1e3,_o.INT],labelDecimalSeparator:[mo(),_o.STRING],labelThousandsSeparator:[(()=>{const e=mo(),t=1e3.toLocaleString();return t!==1e3.toString()?Eo(t)[0]:"."===e?",":"."})(),_o.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',_o.STRING],labelInvalidField:["Field contains invalid files",_o.STRING],labelFileWaitingForSize:["Waiting for size",_o.STRING],labelFileSizeNotAvailable:["Size not available",_o.STRING],labelFileCountSingular:["file in list",_o.STRING],labelFileCountPlural:["files in list",_o.STRING],labelFileLoading:["Loading",_o.STRING],labelFileAdded:["Added",_o.STRING],labelFileLoadError:["Error during load",_o.STRING],labelFileRemoved:["Removed",_o.STRING],labelFileRemoveError:["Error during remove",_o.STRING],labelFileProcessing:["Uploading",_o.STRING],labelFileProcessingComplete:["Upload complete",_o.STRING],labelFileProcessingAborted:["Upload cancelled",_o.STRING],labelFileProcessingError:["Error during upload",_o.STRING],labelFileProcessingRevertError:["Error during revert",_o.STRING],labelTapToCancel:["tap to cancel",_o.STRING],labelTapToRetry:["tap to retry",_o.STRING],labelTapToUndo:["tap to undo",_o.STRING],labelButtonRemoveItem:["Remove",_o.STRING],labelButtonAbortItemLoad:["Abort",_o.STRING],labelButtonRetryItemLoad:["Retry",_o.STRING],labelButtonAbortItemProcessing:["Cancel",_o.STRING],labelButtonUndoItemProcessing:["Undo",_o.STRING],labelButtonRetryItemProcessing:["Retry",_o.STRING],labelButtonProcessItem:["Upload",_o.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',_o.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',_o.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',_o.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',_o.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',_o.STRING],oninit:[null,_o.FUNCTION],onwarning:[null,_o.FUNCTION],onerror:[null,_o.FUNCTION],onactivatefile:[null,_o.FUNCTION],oninitfile:[null,_o.FUNCTION],onaddfilestart:[null,_o.FUNCTION],onaddfileprogress:[null,_o.FUNCTION],onaddfile:[null,_o.FUNCTION],onprocessfilestart:[null,_o.FUNCTION],onprocessfileprogress:[null,_o.FUNCTION],onprocessfileabort:[null,_o.FUNCTION],onprocessfilerevert:[null,_o.FUNCTION],onprocessfile:[null,_o.FUNCTION],onprocessfiles:[null,_o.FUNCTION],onremovefile:[null,_o.FUNCTION],onpreparefile:[null,_o.FUNCTION],onupdatefiles:[null,_o.FUNCTION],onreorderfiles:[null,_o.FUNCTION],beforeDropFile:[null,_o.FUNCTION],beforeAddFile:[null,_o.FUNCTION],beforeRemoveFile:[null,_o.FUNCTION],beforePrepareFile:[null,_o.FUNCTION],stylePanelLayout:[null,_o.STRING],stylePanelAspectRatio:[null,_o.STRING],styleItemPanelAspectRatio:[null,_o.STRING],styleButtonRemoveItemPosition:["left",_o.STRING],styleButtonProcessItemPosition:["right",_o.STRING],styleLoadIndicatorPosition:["right",_o.STRING],styleProgressIndicatorPosition:["right",_o.STRING],styleButtonRemoveItemAlign:[!1,_o.BOOLEAN],files:[[],_o.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],_o.ARRAY]},Oo=(e,t)=>Ar(t)?e[0]||null:Lr(t)?e[t]||null:("object"==typeof t&&(t=t.id),e.find((e=>e.id===t))||null),Do=e=>{if(Ar(e))return e;if(/:/.test(e)){const t=e.split(":");return t[1]/t[0]}return parseFloat(e)},wo=e=>e.filter((e=>!e.archived)),vo={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4};let So=null;const Mo=[uo,ao,lo],bo=[co,io,no,ro],Po=[so],Lo=e=>Mo.includes(e.status),Co=e=>bo.includes(e.status),No=e=>Po.includes(e.status),Go=e=>Fr(e.options.server)&&(Fr(e.options.server.process)||Nr(e.options.server.process)),xo=e=>({GET_STATUS:()=>{const t=wo(e.items),{EMPTY:r,ERROR:o,BUSY:n,IDLE:i,READY:s}=vo;return 0===t.length?r:t.some(Lo)?o:t.some(Co)?n:t.some(No)?s:i},GET_ITEM:t=>Oo(e.items,t),GET_ACTIVE_ITEM:t=>Oo(wo(e.items),t),GET_ACTIVE_ITEMS:()=>wo(e.items),GET_ITEMS:()=>e.items,GET_ITEM_NAME:t=>{const r=Oo(e.items,t);return r?r.filename:null},GET_ITEM_SIZE:t=>{const r=Oo(e.items,t);return r?r.fileSize:null},GET_STYLES:()=>Object.keys(e.options).filter((e=>/^style/.test(e))).map((t=>({name:t,value:e.options[t]}))),GET_PANEL_ASPECT_RATIO:()=>/circle/.test(e.options.stylePanelLayout)?1:Do(e.options.stylePanelAspectRatio),GET_ITEM_PANEL_ASPECT_RATIO:()=>e.options.styleItemPanelAspectRatio,GET_ITEMS_BY_STATUS:t=>wo(e.items).filter((e=>e.status===t)),GET_TOTAL_ITEMS:()=>wo(e.items).length,SHOULD_UPDATE_FILE_INPUT:()=>e.options.storeAsFile&&(()=>{if(null===So)try{const e=new DataTransfer;e.items.add(new File(["hello world"],"This_Works.txt"));const t=document.createElement("input");t.setAttribute("type","file"),t.files=e.files,So=1===t.files.length}catch(e){So=!1}return So})()&&!Go(e),IS_ASYNC:()=>Go(e)}),Fo=(e,t,r)=>Math.max(Math.min(r,e),t),Uo=e=>/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(e),qo=e=>e.split("/").pop().split("?").shift(),Bo=e=>e.split(".").pop(),Vo=(e,t="")=>(t+e).slice(-t.length),$o=(e=new Date)=>`${e.getFullYear()}-${Vo(e.getMonth()+1,"00")}-${Vo(e.getDate(),"00")}_${Vo(e.getHours(),"00")}-${Vo(e.getMinutes(),"00")}-${Vo(e.getSeconds(),"00")}`,ko=(e,t,r=null,o=null)=>{const n="string"==typeof r?e.slice(0,e.size,r):e.slice(0,e.size,e.type);return n.lastModifiedDate=new Date,e._relativePath&&(n._relativePath=e._relativePath),Sr(t)||(t=$o()),t&&null===o&&Bo(t)?n.name=t:(o=o||(e=>{if("string"!=typeof e)return"";const t=e.split("/").pop();return/svg/.test(t)?"svg":/zip|compressed/.test(t)?"zip":/plain/.test(t)?"txt":/msword/.test(t)?"doc":/[a-z]+/.test(t)?"jpeg"===t?"jpg":t:""})(n.type),n.name=t+(o?"."+o:"")),n},Yo=(e,t)=>{const r=window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(r){const o=new r;return o.append(e),o.getBlob(t)}return new Blob([e],{type:t})},Ho=e=>(/^data:(.+);/.exec(e)||[])[1]||null,Wo=e=>{const t=Ho(e);return((e,t)=>{const r=new ArrayBuffer(e.length),o=new Uint8Array(r);for(let n=0;n<e.length;n++)o[n]=e.charCodeAt(n);return Yo(r,t)})((e=>atob((e=>e.split(",")[1].replace(/\s/g,""))(e)))(e),t)},zo=e=>{if(!/^content-disposition:/i.test(e))return null;const t=e.split(/filename=|filename\*=.+''/).splice(1).map((e=>e.trim().replace(/^["']|[;"']{0,2}$/g,""))).filter((e=>e.length));return t.length?decodeURI(t[t.length-1]):null},Xo=e=>{if(/content-length:/i.test(e)){const t=e.match(/[0-9]+/)[0];return t?parseInt(t,10):null}return null},jo=e=>{if(/x-content-transfer-id:/i.test(e)){return(e.split(":")[1]||"").trim()||null}return null},Qo=e=>{const t={source:null,name:null,size:null},r=e.split("\n");for(let o of r){const e=zo(o);if(e){t.name=e;continue}const r=Xo(o);if(r){t.size=r;continue}const n=jo(o);n&&(t.source=n)}return t},Zo=e=>{const t={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},r=r=>{e?(t.timestamp=Date.now(),t.request=e(r,(e=>{t.duration=Date.now()-t.timestamp,t.complete=!0,e instanceof Blob&&(e=ko(e,e.name||qo(r))),o.fire("load",e instanceof Blob?e:e?e.body:null)}),(e=>{o.fire("error","string"==typeof e?{type:"error",code:0,body:e}:e)}),((e,r,n)=>{n&&(t.size=n),t.duration=Date.now()-t.timestamp,e?(t.progress=r/n,o.fire("progress",t.progress)):t.progress=null}),(()=>{o.fire("abort")}),(e=>{const r=Qo("string"==typeof e?e:e.headers);o.fire("meta",{size:t.size||r.size,filename:r.name,source:r.source})}))):o.fire("error",{type:"error",body:"Can't load URL",code:400})},o=l(a({},Kr()),{setSource:e=>t.source=e,getProgress:()=>t.progress,abort:()=>{t.request&&t.request.abort&&t.request.abort()},load:()=>{const e=t.source;var n,i;o.fire("init",e),e instanceof File?o.fire("load",e):e instanceof Blob?o.fire("load",ko(e,e.name)):Uo(e)?o.fire("load",ko(Wo(e),n,null,i)):r(e)}});return o},Ko=e=>/GET|HEAD/.test(e),Jo=(e,t,r)=>{const o={onheaders:()=>{},onprogress:()=>{},onload:()=>{},ontimeout:()=>{},onerror:()=>{},onabort:()=>{},abort:()=>{n=!0,s.abort()}};let n=!1,i=!1;r=a({method:"POST",headers:{},withCredentials:!1},r),t=encodeURI(t),Ko(r.method)&&e&&(t=`${t}${encodeURIComponent("string"==typeof e?e:JSON.stringify(e))}`);const s=new XMLHttpRequest;return(Ko(r.method)?s:s.upload).onprogress=e=>{n||o.onprogress(e.lengthComputable,e.loaded,e.total)},s.onreadystatechange=()=>{s.readyState<2||4===s.readyState&&0===s.status||i||(i=!0,o.onheaders(s))},s.onload=()=>{s.status>=200&&s.status<300?o.onload(s):o.onerror(s)},s.onerror=()=>o.onerror(s),s.onabort=()=>{n=!0,o.onabort()},s.ontimeout=()=>o.ontimeout(s),s.open(r.method,t,!0),Lr(r.timeout)&&(s.timeout=r.timeout),Object.keys(r.headers).forEach((e=>{const t=unescape(encodeURIComponent(r.headers[e]));s.setRequestHeader(e,t)})),r.responseType&&(s.responseType=r.responseType),r.withCredentials&&(s.withCredentials=!0),s.send(e),o},en=(e,t,r,o)=>({type:e,code:t,body:r,headers:o}),tn=e=>t=>{e(en("error",0,"Timeout",t.getAllResponseHeaders()))},rn=e=>/\?/.test(e),on=(...e)=>{let t="";return e.forEach((e=>{t+=rn(t)&&rn(e)?e.replace(/\?/,"&"):e})),t},nn=(e="",t)=>{if("function"==typeof t)return t;if(!t||!Sr(t.url))return null;const r=t.onload||(e=>e),o=t.onerror||(e=>null);return(n,i,s,c,d,u)=>{const p=Jo(n,on(e,t.url),l(a({},t),{responseType:"blob"}));return p.onload=e=>{const o=e.getAllResponseHeaders(),s=Qo(o).name||qo(n);i(en("load",e.status,"HEAD"===t.method?null:ko(r(e.response),s),o))},p.onerror=e=>{s(en("error",e.status,o(e.response)||e.statusText,e.getAllResponseHeaders()))},p.onheaders=e=>{u(en("headers",e.status,null,e.getAllResponseHeaders()))},p.ontimeout=tn(s),p.onprogress=c,p.onabort=d,p}},sn=0,an=1,ln=2,cn=3,dn=4,un=(e,t,r,o,n,i,s,c,d,u,p)=>{const f=[],{chunkTransferId:h,chunkServer:E,chunkSize:m,chunkRetryDelays:_}=p,g={serverId:h,aborted:!1},T=t.ondata||(e=>e),I=t.onload||((e,t)=>"HEAD"===t?e.getResponseHeader("Upload-Offset"):e.response),y=t.onerror||(e=>null),R=Math.floor(o.size/m);for(let a=0;a<=R;a++){const e=a*m,t=o.slice(e,e+m,"application/offset+octet-stream");f[a]={index:a,size:t.size,offset:e,data:t,file:o,progress:0,retries:[..._],status:sn,error:null,request:null,timeout:null}}const A=e=>e.status===sn||e.status===cn,O=t=>{if(g.aborted)return;if(!(t=t||f.find(A)))return void(f.every((e=>e.status===an))&&i(g.serverId));t.status=ln,t.progress=null;const r=E.ondata||(e=>e),n=E.onerror||(e=>null),c=on(e,E.url,g.serverId),u="function"==typeof E.headers?E.headers(t):l(a({},E.headers),{"Content-Type":"application/offset+octet-stream","Upload-Offset":t.offset,"Upload-Length":o.size,"Upload-Name":o.name}),p=t.request=Jo(r(t.data),c,l(a({},E),{headers:u}));p.onload=()=>{t.status=an,t.request=null,v()},p.onprogress=(e,r,o)=>{t.progress=e?r:null,w()},p.onerror=e=>{t.status=cn,t.request=null,t.error=n(e.response)||e.statusText,D(t)||s(en("error",e.status,n(e.response)||e.statusText,e.getAllResponseHeaders()))},p.ontimeout=e=>{t.status=cn,t.request=null,D(t)||tn(s)(e)},p.onabort=()=>{t.status=sn,t.request=null,d()}},D=e=>0!==e.retries.length&&(e.status=dn,clearTimeout(e.timeout),e.timeout=setTimeout((()=>{O(e)}),e.retries.shift()),!0),w=()=>{const e=f.reduce(((e,t)=>null===e||null===t.progress?null:e+t.progress),0);if(null===e)return c(!1,0,0);const t=f.reduce(((e,t)=>e+t.size),0);c(!0,e,t)},v=()=>{f.filter((e=>e.status===ln)).length>=1||O()};return g.serverId?(r=>{const o=on(e,E.url,g.serverId),n={headers:"function"==typeof t.headers?t.headers(g.serverId):a({},t.headers),method:"HEAD"},i=Jo(null,o,n);i.onload=e=>r(I(e,n.method)),i.onerror=e=>s(en("error",e.status,y(e.response)||e.statusText,e.getAllResponseHeaders())),i.ontimeout=tn(s)})((e=>{g.aborted||(f.filter((t=>t.offset<e)).forEach((e=>{e.status=an,e.progress=e.size})),v())})):(i=>{const c=new FormData;Fr(n)&&c.append(r,JSON.stringify(n));const d="function"==typeof t.headers?t.headers(o,n):l(a({},t.headers),{"Upload-Length":o.size}),u=l(a({},t),{headers:d}),p=Jo(T(c),on(e,t.url),u);p.onload=e=>i(I(e,u.method)),p.onerror=e=>s(en("error",e.status,y(e.response)||e.statusText,e.getAllResponseHeaders())),p.ontimeout=tn(s)})((e=>{g.aborted||(u(e),g.serverId=e,v())})),{abort:()=>{g.aborted=!0,f.forEach((e=>{clearTimeout(e.timeout),e.request&&e.request.abort()}))}}},pn=(e="",t,r,o)=>"function"==typeof t?(...e)=>t(r,...e,o):t&&Sr(t.url)?((e,t,r,o)=>(n,i,s,c,d,u,p)=>{if(!n)return;const f=o.chunkUploads,h=f&&n.size>o.chunkSize,E=f&&(h||o.chunkForce);if(n instanceof Blob&&E)return un(e,t,r,n,i,s,c,d,u,p,o);const m=t.ondata||(e=>e),_=t.onload||(e=>e),g=t.onerror||(e=>null),T="function"==typeof t.headers?t.headers(n,i)||{}:a({},t.headers),I=l(a({},t),{headers:T});var y=new FormData;Fr(i)&&y.append(r,JSON.stringify(i)),(n instanceof Blob?[{name:null,file:n}]:n).forEach((e=>{y.append(r,e.file,null===e.name?e.file.name:`${e.name}${e.file.name}`)}));const R=Jo(m(y),on(e,t.url),I);return R.onload=e=>{s(en("load",e.status,_(e.response),e.getAllResponseHeaders()))},R.onerror=e=>{c(en("error",e.status,g(e.response)||e.statusText,e.getAllResponseHeaders()))},R.ontimeout=tn(c),R.onprogress=d,R.onabort=u,R})(e,t,r,o):null,fn=(e="",t)=>{if("function"==typeof t)return t;if(!t||!Sr(t.url))return(e,t)=>t();const r=t.onload||(e=>e),o=t.onerror||(e=>null);return(n,i,s)=>{const a=Jo(n,e+t.url,t);return a.onload=e=>{i(en("load",e.status,r(e.response),e.getAllResponseHeaders()))},a.onerror=e=>{s(en("error",e.status,o(e.response)||e.statusText,e.getAllResponseHeaders()))},a.ontimeout=tn(s),a}},hn=(e=0,t=1)=>e+Math.random()*(t-e),En=(e,t)=>{const r={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},{allowMinimumUploadDuration:o}=t,n=()=>{r.request&&(r.perceivedPerformanceUpdater.clear(),r.request.abort&&r.request.abort(),r.complete=!0)},i=o?()=>r.progress?Math.min(r.progress,r.perceivedProgress):null:()=>r.progress||null,s=o?()=>Math.min(r.duration,r.perceivedDuration):()=>r.duration,c=l(a({},Kr()),{process:(t,n)=>{const i=()=>{0!==r.duration&&null!==r.progress&&c.fire("progress",c.getProgress())},s=()=>{r.complete=!0,c.fire("load-perceived",r.response.body)};c.fire("start"),r.timestamp=Date.now(),r.perceivedPerformanceUpdater=((e,t=1e3,r=0,o=25,n=250)=>{let i=null;const s=Date.now(),a=()=>{let r=Date.now()-s,l=hn(o,n);r+l>t&&(l=r+l-t);let c=r/t;c>=1||document.hidden?e(1):(e(c),i=setTimeout(a,l))};return t>0&&a(),{clear:()=>{clearTimeout(i)}}})((e=>{r.perceivedProgress=e,r.perceivedDuration=Date.now()-r.timestamp,i(),r.response&&1===r.perceivedProgress&&!r.complete&&s()}),o?hn(750,1500):0),r.request=e(t,n,(e=>{r.response=Fr(e)?e:{type:"load",code:200,body:`${e}`,headers:{}},r.duration=Date.now()-r.timestamp,r.progress=1,c.fire("load",r.response.body),(!o||o&&1===r.perceivedProgress)&&s()}),(e=>{r.perceivedPerformanceUpdater.clear(),c.fire("error",Fr(e)?e:{type:"error",code:0,body:`${e}`})}),((e,t,o)=>{r.duration=Date.now()-r.timestamp,r.progress=e?t/o:null,i()}),(()=>{r.perceivedPerformanceUpdater.clear(),c.fire("abort",r.response?r.response.body:null)}),(e=>{c.fire("transfer",e)}))},abort:n,getProgress:i,getDuration:s,reset:()=>{n(),r.complete=!1,r.perceivedProgress=0,r.progress=0,r.timestamp=null,r.perceivedDuration=0,r.duration=0,r.request=null,r.response=null}});return c},mn=e=>e.substr(0,e.lastIndexOf("."))||e,_n=e=>!!(e instanceof File||e instanceof Blob&&e.name),gn=e=>{if(!Fr(e))return e;const t=Rr(e)?[]:{};for(const r in e){if(!e.hasOwnProperty(r))continue;const o=e[r];t[r]=o&&Fr(o)?gn(o):o}return t},Tn=(e=null,t=null,r=null)=>{const o=Qr(),n={archived:!1,frozen:!1,released:!1,source:null,file:r,serverFileReference:t,transferId:null,processingAborted:!1,status:t?so:ro,activeLoader:null,activeProcessor:null};let i=null;const s={},c=e=>n.status=e,d=(e,...t)=>{n.released||n.frozen||f.fire(e,...t)},u=(e,t)=>{if(n.processingAborted)return void(n.processingAborted=!1);if(c(io),i=null,!(n.file instanceof Blob))return void f.on("load",(()=>{u(e,t)}));e.on("load",(e=>{n.transferId=null,n.serverFileReference=e})),e.on("transfer",(e=>{n.transferId=e})),e.on("load-perceived",(e=>{n.activeProcessor=null,n.transferId=null,n.serverFileReference=e,c(so),d("process-complete",e)})),e.on("start",(()=>{d("process-start")})),e.on("error",(e=>{n.activeProcessor=null,c(ao),d("process-error",e)})),e.on("abort",(e=>{n.activeProcessor=null,n.transferId=null,n.serverFileReference=e,c(oo),d("process-abort"),i&&i()})),e.on("progress",(e=>{d("process-progress",e)}));const r=console.error;t(n.file,(t=>{n.archived||e.process(t,a({},s))}),r),n.activeProcessor=e},p=(e,t,r)=>{const o=e.split("."),n=o[0],i=o.pop();let a=s;o.forEach((e=>a=a[e])),JSON.stringify(a[i])!==JSON.stringify(t)&&(a[i]=t,d("metadata-update",{key:n,value:s[n],silent:r}))},f=l(a({id:{get:()=>o},origin:{get:()=>e,set:t=>e=t},serverId:{get:()=>n.serverFileReference},transferId:{get:()=>n.transferId},status:{get:()=>n.status},filename:{get:()=>n.file.name},filenameWithoutExtension:{get:()=>mn(n.file.name)},fileExtension:{get:()=>Bo(n.file.name)},fileType:{get:()=>n.file.type},fileSize:{get:()=>n.file.size},file:{get:()=>n.file},relativePath:{get:()=>n.file._relativePath},source:{get:()=>n.source},getMetadata:e=>gn(e?s[e]:s),setMetadata:(e,t,r)=>{if(Fr(e)){const r=e;return Object.keys(r).forEach((e=>{p(e,r[e],t)})),e}return p(e,t,r),t},extend:(e,t)=>h[e]=t,abortLoad:()=>{n.activeLoader?n.activeLoader.abort():(c(ro),d("load-abort"))},retryLoad:()=>{n.activeLoader&&n.activeLoader.load()},requestProcessing:()=>{n.processingAborted=!1,c(no)},abortProcessing:()=>new Promise((e=>{if(!n.activeProcessor)return n.processingAborted=!0,c(oo),d("process-abort"),void e();i=()=>{e()},n.activeProcessor.abort()})),load:(t,r,o)=>{n.source=t,f.fireSync("init"),n.file?f.fireSync("load-skip"):(n.file=(e=>{let t=[e.name,e.size,e.type];return e instanceof Blob||Uo(e)?t[0]=e.name||$o():Uo(e)?(t[1]=e.length,t[2]=Ho(e)):Sr(e)&&(t[0]=qo(e),t[1]=0,t[2]="application/octet-stream"),{name:t[0],size:t[1],type:t[2]}})(t),r.on("init",(()=>{d("load-init")})),r.on("meta",(t=>{n.file.size=t.size,n.file.filename=t.filename,t.source&&(e=fo,n.serverFileReference=t.source,n.status=so),d("load-meta")})),r.on("progress",(e=>{c(co),d("load-progress",e)})),r.on("error",(e=>{c(uo),d("load-request-error",e)})),r.on("abort",(()=>{c(ro),d("load-abort")})),r.on("load",(t=>{n.activeLoader=null;const r=t=>{n.file=_n(t)?t:n.file,e===fo&&n.serverFileReference?c(so):c(oo),d("load")};n.serverFileReference?r(t):o(t,r,(e=>{n.file=t,d("load-meta"),c(uo),d("load-file-error",e)}))})),r.setSource(t),n.activeLoader=r,r.load())},process:u,revert:(e,t)=>new Promise(((r,o)=>{null!==n.serverFileReference?(e(n.serverFileReference,(()=>{n.serverFileReference=null,r()}),(e=>{t?(c(lo),d("process-revert-error"),o(e)):r()})),c(oo),d("process-revert")):r()}))},Kr()),{freeze:()=>n.frozen=!0,release:()=>n.released=!0,released:{get:()=>n.released},archive:()=>n.archived=!0,archived:{get:()=>n.archived}}),h=jt(f);return h},In=(e,t)=>{const r=((e,t)=>Ar(t)?0:Sr(t)?e.findIndex((e=>e.id===t)):-1)(e,t);if(!(r<0))return e[r]||null},yn=(e,t,r,o,n,i)=>{const s=Jo(null,e,{method:"GET",responseType:"blob"});return s.onload=r=>{const o=r.getAllResponseHeaders(),n=Qo(o).name||qo(e);t(en("load",r.status,ko(r.response,n),o))},s.onerror=e=>{r(en("error",e.status,e.statusText,e.getAllResponseHeaders()))},s.onheaders=e=>{i(en("headers",e.status,null,e.getAllResponseHeaders()))},s.ontimeout=tn(r),s.onprogress=o,s.onabort=n,s},Rn=e=>(0===e.indexOf("//")&&(e=location.protocol+e),e.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]),An=e=>(...t)=>Nr(e)?e(...t):e,On=(e,t)=>{clearTimeout(t.listUpdateTimeout),t.listUpdateTimeout=setTimeout((()=>{e("DID_UPDATE_ITEMS",{items:wo(t.items)})}),0)},Dn=(e,...t)=>new Promise((r=>{if(!e)return r(!0);const o=e(...t);return null==o?r(!0):"boolean"==typeof o?r(o):void("function"==typeof o.then&&o.then(r))})),wn=(e,t)=>{e.items.sort(((e,r)=>t(to(e),to(r))))},vn=(e,t)=>(r={})=>{var s=r,{query:a,success:l=(()=>{}),failure:c=(()=>{})}=s,d=((e,t)=>{var r={};for(var s in e)n.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&o)for(var s of o(e))t.indexOf(s)<0&&i.call(e,s)&&(r[s]=e[s]);return r})(s,["query","success","failure"]);const u=Oo(e.items,a);u?t(u,l,c,d||{}):c({error:en("error",0,"Item not found"),file:null})},Sn=(e,t,r)=>({ABORT_ALL:()=>{wo(r.items).forEach((e=>{e.freeze(),e.abortLoad(),e.abortProcessing()}))},DID_SET_FILES:({value:t=[]})=>{const o=t.map((e=>({source:e.source?e.source:e,options:e.options})));let n=wo(r.items);n.forEach((t=>{o.find((e=>e.source===t.source||e.source===t.file))||e("REMOVE_ITEM",{query:t,remove:!1})})),n=wo(r.items),o.forEach(((t,r)=>{n.find((e=>e.source===t.source||e.file===t.source))||e("ADD_ITEM",l(a({},t),{interactionMethod:jr,index:r}))}))},DID_UPDATE_ITEM_METADATA:({id:o,action:n,change:i})=>{i.silent||(clearTimeout(r.itemUpdateTimeout),r.itemUpdateTimeout=setTimeout((()=>{const s=In(r.items,o);if(!t("IS_ASYNC"))return void To("SHOULD_PREPARE_OUTPUT",!1,{item:s,query:t,action:n,change:i}).then((r=>{const n=t("GET_BEFORE_PREPARE_FILE");n&&(r=n(s,r)),r&&e("REQUEST_PREPARE_OUTPUT",{query:o,item:s,success:t=>{e("DID_PREPARE_OUTPUT",{id:o,file:t})}},!0)}));s.origin===ho&&e("DID_LOAD_ITEM",{id:s.id,error:null,serverFileReference:s.source});const a=()=>{setTimeout((()=>{e("REQUEST_ITEM_PROCESSING",{query:o})}),32)};return s.status===so?(l=r.options.instantUpload,void s.revert(fn(r.options.server.url,r.options.server.revert),t("GET_FORCE_REVERT")).then(l?a:()=>{}).catch((()=>{}))):s.status===io?(e=>{s.abortProcessing().then(e?a:()=>{})})(r.options.instantUpload):void(r.options.instantUpload&&a());var l}),0))},MOVE_ITEM:({query:e,index:t})=>{const o=Oo(r.items,e);if(!o)return;const n=r.items.indexOf(o);n!==(t=Fo(t,0,r.items.length-1))&&r.items.splice(t,0,r.items.splice(n,1)[0])},SORT:({compare:o})=>{wn(r,o),e("DID_SORT_ITEMS",{items:t("GET_ACTIVE_ITEMS")})},ADD_ITEMS:({items:r,index:o,interactionMethod:n,success:i=(()=>{}),failure:s=(()=>{})})=>{let a=o;if(-1===o||void 0===o){const e=t("GET_ITEM_INSERT_LOCATION"),r=t("GET_TOTAL_ITEMS");a="before"===e?0:r}const l=t("GET_IGNORED_FILES"),c=r.filter((e=>_n(e)?!l.includes(e.name.toLowerCase()):!Ar(e))).map((t=>new Promise(((r,o)=>{e("ADD_ITEM",{interactionMethod:n,source:t.source||t,success:r,failure:o,index:a++,options:t.options||{}})}))));Promise.all(c).then(i).catch(s)},ADD_ITEM:({source:o,index:n=-1,interactionMethod:i,success:s=(()=>{}),failure:a=(()=>{}),options:l={}})=>{if(Ar(o))return void a({error:en("error",0,"No source"),file:null});if(_n(o)&&r.options.ignoredFiles.includes(o.name.toLowerCase()))return;if(!(e=>{const t=wo(e.items).length;if(!e.options.allowMultiple)return 0===t;const r=e.options.maxFiles;return null===r||t<r})(r)){if(r.options.allowMultiple||!r.options.allowMultiple&&!r.options.allowReplace){const t=en("warning",0,"Max files");return e("DID_THROW_MAX_FILES",{source:o,error:t}),void a({error:t,file:null})}const c=wo(r.items)[0];if(c.status===so||c.status===lo){const d=t("GET_FORCE_REVERT");if(c.revert(fn(r.options.server.url,r.options.server.revert),d).then((()=>{d&&e("ADD_ITEM",{source:o,index:n,interactionMethod:i,success:s,failure:a,options:l})})).catch((()=>{})),d)return}e("REMOVE_ITEM",{query:c.id})}const c="local"===l.type?ho:"limbo"===l.type?fo:po,d=Tn(c,c===po?null:o,l.file);Object.keys(l.metadata||{}).forEach((e=>{d.setMetadata(e,l.metadata[e])})),Io("DID_CREATE_ITEM",d,{query:t,dispatch:e});const u=t("GET_ITEM_INSERT_LOCATION");r.options.itemInsertLocationFreedom||(n="before"===u?-1:r.items.length),((e,t,r)=>{Ar(t)||(void 0===r?e.push(t):((e,t,r)=>{e.splice(t,0,r)})(e,r=Fo(r,0,e.length),t))})(r.items,d,n),Nr(u)&&o&&wn(r,u);const p=d.id;d.on("init",(()=>{e("DID_INIT_ITEM",{id:p})})),d.on("load-init",(()=>{e("DID_START_ITEM_LOAD",{id:p})})),d.on("load-meta",(()=>{e("DID_UPDATE_ITEM_META",{id:p})})),d.on("load-progress",(t=>{e("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:p,progress:t})})),d.on("load-request-error",(t=>{const o=An(r.options.labelFileLoadError)(t);if(t.code>=400&&t.code<500)return e("DID_THROW_ITEM_INVALID",{id:p,error:t,status:{main:o,sub:`${t.code} (${t.body})`}}),void a({error:t,file:to(d)});e("DID_THROW_ITEM_LOAD_ERROR",{id:p,error:t,status:{main:o,sub:r.options.labelTapToRetry}})})),d.on("load-file-error",(t=>{e("DID_THROW_ITEM_INVALID",{id:p,error:t.status,status:t.status}),a({error:t.status,file:to(d)})})),d.on("load-abort",(()=>{e("REMOVE_ITEM",{query:p})})),d.on("load-skip",(()=>{e("COMPLETE_LOAD_ITEM",{query:p,item:d,data:{source:o,success:s}})})),d.on("load",(()=>{const n=n=>{n?(d.on("metadata-update",(t=>{e("DID_UPDATE_ITEM_METADATA",{id:p,change:t})})),To("SHOULD_PREPARE_OUTPUT",!1,{item:d,query:t}).then((n=>{const i=t("GET_BEFORE_PREPARE_FILE");i&&(n=i(d,n));const a=()=>{e("COMPLETE_LOAD_ITEM",{query:p,item:d,data:{source:o,success:s}}),On(e,r)};n?e("REQUEST_PREPARE_OUTPUT",{query:p,item:d,success:t=>{e("DID_PREPARE_OUTPUT",{id:p,file:t}),a()}},!0):a()}))):e("REMOVE_ITEM",{query:p})};To("DID_LOAD_ITEM",d,{query:t,dispatch:e}).then((()=>{Dn(t("GET_BEFORE_ADD_FILE"),to(d)).then(n)})).catch((()=>{n(!1)}))})),d.on("process-start",(()=>{e("DID_START_ITEM_PROCESSING",{id:p})})),d.on("process-progress",(t=>{e("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:p,progress:t})})),d.on("process-error",(t=>{e("DID_THROW_ITEM_PROCESSING_ERROR",{id:p,error:t,status:{main:An(r.options.labelFileProcessingError)(t),sub:r.options.labelTapToRetry}})})),d.on("process-revert-error",(t=>{e("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:p,error:t,status:{main:An(r.options.labelFileProcessingRevertError)(t),sub:r.options.labelTapToRetry}})})),d.on("process-complete",(t=>{e("DID_COMPLETE_ITEM_PROCESSING",{id:p,error:null,serverFileReference:t}),e("DID_DEFINE_VALUE",{id:p,value:t})})),d.on("process-abort",(()=>{e("DID_ABORT_ITEM_PROCESSING",{id:p})})),d.on("process-revert",(()=>{e("DID_REVERT_ITEM_PROCESSING",{id:p}),e("DID_DEFINE_VALUE",{id:p,value:null})})),e("DID_ADD_ITEM",{id:p,index:n,interactionMethod:i}),On(e,r);const{url:f,load:h,restore:E,fetch:m}=r.options.server||{};d.load(o,Zo(c===po?Sr(o)&&(e=>(e.indexOf(":")>-1||e.indexOf("//")>-1)&&Rn(location.href)!==Rn(e))(o)&&m?nn(f,m):yn:nn(f,c===fo?E:h)),((e,r,o)=>{To("LOAD_FILE",e,{query:t}).then(r).catch(o)}))},REQUEST_PREPARE_OUTPUT:({item:e,success:r,failure:o=(()=>{})})=>{const n={error:en("error",0,"Item not found"),file:null};if(e.archived)return o(n);To("PREPARE_OUTPUT",e.file,{query:t,item:e}).then((i=>{To("COMPLETE_PREPARE_OUTPUT",i,{query:t,item:e}).then((t=>{if(e.archived)return o(n);r(t)}))}))},COMPLETE_LOAD_ITEM:({item:o,data:n})=>{const{success:i,source:s}=n,a=t("GET_ITEM_INSERT_LOCATION");if(Nr(a)&&s&&wn(r,a),e("DID_LOAD_ITEM",{id:o.id,error:null,serverFileReference:o.origin===po?null:s}),i(to(o)),o.origin!==ho)return o.origin===fo?(e("DID_COMPLETE_ITEM_PROCESSING",{id:o.id,error:null,serverFileReference:s}),void e("DID_DEFINE_VALUE",{id:o.id,value:o.serverId||s})):void(t("IS_ASYNC")&&r.options.instantUpload&&e("REQUEST_ITEM_PROCESSING",{query:o.id}));e("DID_LOAD_LOCAL_ITEM",{id:o.id})},RETRY_ITEM_LOAD:vn(r,(e=>{e.retryLoad()})),REQUEST_ITEM_PREPARE:vn(r,((t,r,o)=>{e("REQUEST_PREPARE_OUTPUT",{query:t.id,item:t,success:o=>{e("DID_PREPARE_OUTPUT",{id:t.id,file:o}),r({file:t,output:o})},failure:o},!0)})),REQUEST_ITEM_PROCESSING:vn(r,((o,n,i)=>{if(o.status===oo||o.status===ao)o.status!==no&&(o.requestProcessing(),e("DID_REQUEST_ITEM_PROCESSING",{id:o.id}),e("PROCESS_ITEM",{query:o,success:n,failure:i},!0));else{const s=()=>e("REQUEST_ITEM_PROCESSING",{query:o,success:n,failure:i}),a=()=>document.hidden?s():setTimeout(s,32);o.status===so||o.status===lo?o.revert(fn(r.options.server.url,r.options.server.revert),t("GET_FORCE_REVERT")).then(a).catch((()=>{})):o.status===io&&o.abortProcessing().then(a)}})),PROCESS_ITEM:vn(r,((o,n,i)=>{const s=t("GET_MAX_PARALLEL_UPLOADS");if(t("GET_ITEMS_BY_STATUS",io).length===s)return void r.processingQueue.push({id:o.id,success:n,failure:i});if(o.status===io)return;const a=()=>{const t=r.processingQueue.shift();if(!t)return;const{id:o,success:n,failure:i}=t,s=Oo(r.items,o);s&&!s.archived?e("PROCESS_ITEM",{query:o,success:n,failure:i},!0):a()};o.onOnce("process-complete",(()=>{n(to(o)),a();const i=r.options.server;if(r.options.instantUpload&&o.origin===ho&&Nr(i.remove)){const e=()=>{};o.origin=fo,r.options.server.remove(o.source,e,e)}t("GET_ITEMS_BY_STATUS",so).length===r.items.length&&e("DID_COMPLETE_ITEM_PROCESSING_ALL")})),o.onOnce("process-error",(e=>{i({error:e,file:to(o)}),a()}));const l=r.options;o.process(En(pn(l.server.url,l.server.process,l.name,{chunkTransferId:o.transferId,chunkServer:l.server.patch,chunkUploads:l.chunkUploads,chunkForce:l.chunkForce,chunkSize:l.chunkSize,chunkRetryDelays:l.chunkRetryDelays}),{allowMinimumUploadDuration:t("GET_ALLOW_MINIMUM_UPLOAD_DURATION")}),((r,n,i)=>{To("PREPARE_OUTPUT",r,{query:t,item:o}).then((t=>{e("DID_PREPARE_OUTPUT",{id:o.id,file:t}),n(t)})).catch(i)}))})),RETRY_ITEM_PROCESSING:vn(r,(t=>{e("REQUEST_ITEM_PROCESSING",{query:t})})),REQUEST_REMOVE_ITEM:vn(r,(r=>{Dn(t("GET_BEFORE_REMOVE_FILE"),to(r)).then((t=>{t&&e("REMOVE_ITEM",{query:r})}))})),RELEASE_ITEM:vn(r,(e=>{e.release()})),REMOVE_ITEM:vn(r,((o,n,i,s)=>{const a=()=>{const t=o.id;In(r.items,t).archive(),e("DID_REMOVE_ITEM",{error:null,id:t,item:o}),On(e,r),n(to(o))},l=r.options.server;o.origin===ho&&l&&Nr(l.remove)&&!1!==s.remove?(e("DID_START_ITEM_REMOVE",{id:o.id}),l.remove(o.source,(()=>a()),(t=>{e("DID_THROW_ITEM_REMOVE_ERROR",{id:o.id,error:en("error",0,t,null),status:{main:An(r.options.labelFileRemoveError)(t),sub:r.options.labelTapToRetry}})}))):(s.revert&&o.origin!==ho&&null!==o.serverId&&o.revert(fn(r.options.server.url,r.options.server.revert),t("GET_FORCE_REVERT")),a())})),ABORT_ITEM_LOAD:vn(r,(e=>{e.abortLoad()})),ABORT_ITEM_PROCESSING:vn(r,(t=>{t.serverId?e("REVERT_ITEM_PROCESSING",{id:t.id}):t.abortProcessing().then((()=>{r.options.instantUpload&&e("REMOVE_ITEM",{query:t.id})}))})),REQUEST_REVERT_ITEM_PROCESSING:vn(r,(o=>{if(!r.options.instantUpload)return void e("REVERT_ITEM_PROCESSING",{query:o});const n=t=>{t&&e("REVERT_ITEM_PROCESSING",{query:o})},i=t("GET_BEFORE_REMOVE_FILE");if(!i)return n(!0);const s=i(to(o));return null==s?n(!0):"boolean"==typeof s?n(s):void("function"==typeof s.then&&s.then(n))})),REVERT_ITEM_PROCESSING:vn(r,(o=>{o.revert(fn(r.options.server.url,r.options.server.revert),t("GET_FORCE_REVERT")).then((()=>{(r.options.instantUpload||(e=>!_n(e.file))(o))&&e("REMOVE_ITEM",{query:o.id})})).catch((()=>{}))})),SET_OPTIONS:({options:t})=>{Xt(t,((t,r)=>{e(`SET_${$r(t,"_").toUpperCase()}`,{value:r})}))}}),Mn=e=>document.createElement(e),bn=(e,t)=>{let r=e.childNodes[0];r?t!==r.nodeValue&&(r.nodeValue=t):(r=document.createTextNode(t),e.appendChild(r))},Pn=(e,t,r,o)=>{const n=(o%360-90)*Math.PI/180;return{x:e+r*Math.cos(n),y:t+r*Math.sin(n)}},Ln=(e,t,r,o,n)=>{let i=1;return n>o&&n-o<=.5&&(i=0),o>n&&o-n>=.5&&(i=0),((e,t,r,o,n,i)=>{const s=Pn(e,t,r,n),a=Pn(e,t,r,o);return["M",s.x,s.y,"A",r,r,0,i,0,a.x,a.y].join(" ")})(e,t,r,360*Math.min(.9999,o),360*Math.min(.9999,n),i)},Cn=gr({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:({root:e,props:t})=>{t.spin=!1,t.progress=0,t.opacity=0;const r=Jt("svg");e.ref.path=Jt("path",{"stroke-width":2,"stroke-linecap":"round"}),r.appendChild(e.ref.path),e.ref.svg=r,e.appendChild(r)},write:({root:e,props:t})=>{if(0===t.opacity)return;t.align&&(e.element.dataset.align=t.align);const r=parseInt(Qt(e.ref.path,"stroke-width"),10),o=.5*e.rect.element.width;let n=0,i=0;t.spin?(n=0,i=.5):(n=0,i=t.progress);const s=Ln(o,o,o-r,n,i);Qt(e.ref.path,"d",s),Qt(e.ref.path,"stroke-opacity",t.spin||t.progress>0?1:0)},mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),Nn=gr({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:({root:e,props:t})=>{e.element.innerHTML=(t.icon||"")+`<span>${t.label}</span>`,t.isDisabled=!1},write:({root:e,props:t})=>{const{isDisabled:r}=t,o=e.query("GET_DISABLED")||0===t.opacity;o&&!r?(t.isDisabled=!0,Qt(e.element,"disabled","disabled")):!o&&r&&(t.isDisabled=!1,e.element.removeAttribute("disabled"))}}),Gn=(e,t=".",r=1e3)=>{const o=r,n=r*r,i=r*r*r;return(e=Math.round(Math.abs(e)))<o?`${e} bytes`:e<n?`${Math.floor(e/o)} KB`:e<i?`${xn(e/n,1,t)} MB`:`${xn(e/i,2,t)} GB`},xn=(e,t,r)=>e.toFixed(t).split(".").filter((e=>"0"!==e)).join(r),Fn=({root:e,props:t})=>{bn(e.ref.fileSize,Gn(e.query("GET_ITEM_SIZE",t.id),".",e.query("GET_FILE_SIZE_BASE"))),bn(e.ref.fileName,e.query("GET_ITEM_NAME",t.id))},Un=({root:e,props:t})=>{Lr(e.query("GET_ITEM_SIZE",t.id))||bn(e.ref.fileSize,e.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},qn=gr({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:Tr({DID_LOAD_ITEM:Fn,DID_UPDATE_ITEM_META:Fn,DID_THROW_ITEM_LOAD_ERROR:Un,DID_THROW_ITEM_INVALID:Un}),didCreateView:e=>{Io("CREATE_VIEW",l(a({},e),{view:e}))},create:({root:e,props:t})=>{const r=Mn("span");r.className="filepond--file-info-main",Qt(r,"aria-hidden","true"),e.appendChild(r),e.ref.fileName=r;const o=Mn("span");o.className="filepond--file-info-sub",e.appendChild(o),e.ref.fileSize=o,bn(o,e.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),bn(r,e.query("GET_ITEM_NAME",t.id))},mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),Bn=e=>Math.round(100*e),Vn=({root:e,action:t})=>{const r=null===t.progress?e.query("GET_LABEL_FILE_LOADING"):`${e.query("GET_LABEL_FILE_LOADING")} ${Bn(t.progress)}%`;bn(e.ref.main,r),bn(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},$n=({root:e})=>{bn(e.ref.main,""),bn(e.ref.sub,"")},kn=({root:e,action:t})=>{bn(e.ref.main,t.status.main),bn(e.ref.sub,t.status.sub)},Yn=gr({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:Tr({DID_LOAD_ITEM:$n,DID_REVERT_ITEM_PROCESSING:$n,DID_REQUEST_ITEM_PROCESSING:({root:e})=>{bn(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING")),bn(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},DID_ABORT_ITEM_PROCESSING:({root:e})=>{bn(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_ABORTED")),bn(e.ref.sub,e.query("GET_LABEL_TAP_TO_RETRY"))},DID_COMPLETE_ITEM_PROCESSING:({root:e})=>{bn(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),bn(e.ref.sub,e.query("GET_LABEL_TAP_TO_UNDO"))},DID_UPDATE_ITEM_PROCESS_PROGRESS:({root:e,action:t})=>{const r=null===t.progress?e.query("GET_LABEL_FILE_PROCESSING"):`${e.query("GET_LABEL_FILE_PROCESSING")} ${Bn(t.progress)}%`;bn(e.ref.main,r),bn(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},DID_UPDATE_ITEM_LOAD_PROGRESS:Vn,DID_THROW_ITEM_LOAD_ERROR:kn,DID_THROW_ITEM_INVALID:kn,DID_THROW_ITEM_PROCESSING_ERROR:kn,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:kn,DID_THROW_ITEM_REMOVE_ERROR:kn}),didCreateView:e=>{Io("CREATE_VIEW",l(a({},e),{view:e}))},create:({root:e})=>{const t=Mn("span");t.className="filepond--file-status-main",e.appendChild(t),e.ref.main=t;const r=Mn("span");r.className="filepond--file-status-sub",e.appendChild(r),e.ref.sub=r,Vn({root:e,action:{progress:null}})},mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),Hn={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},Wn=[];Xt(Hn,(e=>{Wn.push(e)}));const zn=e=>{if("right"===Zn(e))return 0;const t=e.ref.buttonRemoveItem.rect.element;return t.hidden?null:t.width+t.left},Xn=e=>e.ref.buttonAbortItemLoad.rect.element.width,jn=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.height/4),Qn=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.left/2),Zn=e=>e.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION"),Kn={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:e=>e.query("GET_STYLE_LOAD_INDICATOR_POSITION")},processProgressIndicator:{opacity:0,align:e=>e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},Jn={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:zn},status:{translateX:zn}},ei={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},ti={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:zn},status:{translateX:zn,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:zn},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:Zn},info:{translateX:zn},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:Zn},buttonRemoveItem:{opacity:1},info:{translateX:zn},status:{opacity:1,translateX:zn}},DID_LOAD_ITEM:Jn,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:zn},status:{translateX:zn}},DID_START_ITEM_PROCESSING:ei,DID_REQUEST_ITEM_PROCESSING:ei,DID_UPDATE_ITEM_PROCESS_PROGRESS:ei,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:zn}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:zn},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:Jn},ri=gr({create:({root:e})=>{e.element.innerHTML=e.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),oi=Tr({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:({root:e,action:t})=>{e.ref.buttonAbortItemProcessing.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:({root:e,action:t})=>{e.ref.buttonAbortItemLoad.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:({root:e,action:t})=>{e.ref.buttonAbortItemRemoval.label=t.value},DID_REQUEST_ITEM_PROCESSING:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:({root:e})=>{e.ref.loadProgressIndicator.spin=!0,e.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:({root:e,action:t})=>{e.ref.loadProgressIndicator.spin=!1,e.ref.loadProgressIndicator.progress=t.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:({root:e,action:t})=>{e.ref.processProgressIndicator.spin=!1,e.ref.processProgressIndicator.progress=t.progress}}),ni=gr({create:({root:e,props:t})=>{const r=Object.keys(Hn).reduce(((e,t)=>(e[t]=a({},Hn[t]),e)),{}),{id:o}=t,n=e.query("GET_ALLOW_REVERT"),i=e.query("GET_ALLOW_REMOVE"),s=e.query("GET_ALLOW_PROCESS"),l=e.query("GET_INSTANT_UPLOAD"),c=e.query("IS_ASYNC"),d=e.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN");let u;c?s&&!n?u=e=>!/RevertItemProcessing/.test(e):!s&&n?u=e=>!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(e):s||n||(u=e=>!/Process/.test(e)):u=e=>!/Process/.test(e);const p=u?Wn.filter(u):Wn.concat();if(l&&n&&(r.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",r.RevertItemProcessing.icon="GET_ICON_REMOVE"),c&&!n){const e=ti.DID_COMPLETE_ITEM_PROCESSING;e.info.translateX=Qn,e.info.translateY=jn,e.status.translateY=jn,e.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(c&&!s&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach((e=>{ti[e].status.translateY=jn})),ti.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=Xn),d&&n){r.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";const e=ti.DID_COMPLETE_ITEM_PROCESSING;e.info.translateX=zn,e.status.translateY=jn,e.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}i||(r.RemoveItem.disabled=!0),Xt(r,((t,r)=>{const n=e.createChildView(Nn,{label:e.query(r.label),icon:e.query(r.icon),opacity:0});p.includes(t)&&e.appendChildView(n),r.disabled&&(n.element.setAttribute("disabled","disabled"),n.element.setAttribute("hidden","hidden")),n.element.dataset.align=e.query(`GET_STYLE_${r.align}`),n.element.classList.add(r.className),n.on("click",(t=>{t.stopPropagation(),r.disabled||e.dispatch(r.action,{query:o})})),e.ref[`button${t}`]=n})),e.ref.processingCompleteIndicator=e.appendChildView(e.createChildView(ri)),e.ref.processingCompleteIndicator.element.dataset.align=e.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),e.ref.info=e.appendChildView(e.createChildView(qn,{id:o})),e.ref.status=e.appendChildView(e.createChildView(Yn,{id:o}));const f=e.appendChildView(e.createChildView(Cn,{opacity:0,align:e.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));f.element.classList.add("filepond--load-indicator"),e.ref.loadProgressIndicator=f;const h=e.appendChildView(e.createChildView(Cn,{opacity:0,align:e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));h.element.classList.add("filepond--process-indicator"),e.ref.processProgressIndicator=h,e.ref.activeStyles=[]},write:({root:e,actions:t,props:r})=>{oi({root:e,actions:t,props:r});let o=t.concat().filter((e=>/^DID_/.test(e.type))).reverse().find((e=>ti[e.type]));if(o){e.ref.activeStyles=[];const t=ti[o.type];Xt(Kn,((r,o)=>{const n=e.ref[r];Xt(o,((o,i)=>{const s=t[r]&&void 0!==t[r][o]?t[r][o]:i;e.ref.activeStyles.push({control:n,key:o,value:s})}))}))}e.ref.activeStyles.forEach((({control:t,key:r,value:o})=>{t[r]="function"==typeof o?o(e):o}))},didCreateView:e=>{Io("CREATE_VIEW",l(a({},e),{view:e}))},name:"file"}),ii=gr({create:({root:e,props:t})=>{e.ref.fileName=Mn("legend"),e.appendChild(e.ref.fileName),e.ref.file=e.appendChildView(e.createChildView(ni,{id:t.id})),e.ref.data=!1},ignoreRect:!0,write:Tr({DID_LOAD_ITEM:({root:e,props:t})=>{bn(e.ref.fileName,e.query("GET_ITEM_NAME",t.id))}}),didCreateView:e=>{Io("CREATE_VIEW",l(a({},e),{view:e}))},tag:"fieldset",name:"file-wrapper"}),si={type:"spring",damping:.6,mass:7},ai=(e,t,r)=>{const o=gr({name:`panel-${t.name} filepond--${r}`,mixins:t.mixins,ignoreRectUpdate:!0}),n=e.createChildView(o,t.props);e.ref[t.name]=e.appendChildView(n)},li=gr({name:"panel",read:({root:e,props:t})=>t.heightCurrent=e.ref.bottom.translateY,write:({root:e,props:t})=>{if(null!==e.ref.scalable&&t.scalable===e.ref.scalable||(e.ref.scalable=!wr(t.scalable)||t.scalable,e.element.dataset.scalable=e.ref.scalable),!t.height)return;const r=e.ref.top.rect.element,o=e.ref.bottom.rect.element,n=Math.max(r.height+o.height,t.height);e.ref.center.translateY=r.height,e.ref.center.scaleY=(n-r.height-o.height)/100,e.ref.bottom.translateY=n-o.height},create:({root:e,props:t})=>{[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:si},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:si},styles:["translateY"]}}].forEach((r=>{ai(e,r,t.name)})),e.element.classList.add(`filepond--${t.name}`),e.ref.scalable=null},ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),ci={type:"spring",stiffness:.75,damping:.45,mass:10},di={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},ui=Tr({DID_UPDATE_PANEL_HEIGHT:({root:e,action:t})=>{e.height=t.height}}),pi=Tr({DID_GRAB_ITEM:({root:e,props:t})=>{t.dragOrigin={x:e.translateX,y:e.translateY}},DID_DRAG_ITEM:({root:e})=>{e.element.dataset.dragState="drag"},DID_DROP_ITEM:({root:e,props:t})=>{t.dragOffset=null,t.dragOrigin=null,e.element.dataset.dragState="drop"}},(({root:e,actions:t,props:r,shouldOptimize:o})=>{"drop"===e.element.dataset.dragState&&e.scaleX<=1&&(e.element.dataset.dragState="idle");let n=t.concat().filter((e=>/^DID_/.test(e.type))).reverse().find((e=>di[e.type]));n&&n.type!==r.currentState&&(r.currentState=n.type,e.element.dataset.filepondItemState=di[r.currentState]||"");const i=e.query("GET_ITEM_PANEL_ASPECT_RATIO")||e.query("GET_PANEL_ASPECT_RATIO");i?o||(e.height=e.rect.element.width*i):(ui({root:e,actions:t,props:r}),!e.height&&e.ref.container.rect.element.height>0&&(e.height=e.ref.container.rect.element.height)),o&&(e.ref.panel.height=null),e.ref.panel.height=e.height})),fi=gr({create:({root:e,props:t})=>{if(e.ref.handleClick=r=>e.dispatch("DID_ACTIVATE_ITEM",{id:t.id}),e.element.id=`filepond--item-${t.id}`,e.element.addEventListener("click",e.ref.handleClick),e.ref.container=e.appendChildView(e.createChildView(ii,{id:t.id})),e.ref.panel=e.appendChildView(e.createChildView(li,{name:"item-panel"})),e.ref.panel.height=null,t.markedForRemoval=!1,!e.query("GET_ALLOW_REORDER"))return;e.element.dataset.dragState="idle";e.element.addEventListener("pointerdown",(r=>{if(!r.isPrimary)return;let o=!1;const n=r.pageX,i=r.pageY;t.dragOrigin={x:e.translateX,y:e.translateY},t.dragCenter={x:r.offsetX,y:r.offsetY};const s=(e=>{const t=e.map((e=>e.id));let r;return{setIndex:e=>{r=e},getIndex:()=>r,getItemIndex:e=>t.indexOf(e.id)}})(e.query("GET_ACTIVE_ITEMS"));e.dispatch("DID_GRAB_ITEM",{id:t.id,dragState:s});const a=r=>{if(!r.isPrimary)return;r.stopPropagation(),r.preventDefault(),t.dragOffset={x:r.pageX-n,y:r.pageY-i};t.dragOffset.x*t.dragOffset.x+t.dragOffset.y*t.dragOffset.y>16&&!o&&(o=!0,e.element.removeEventListener("click",e.ref.handleClick)),e.dispatch("DID_DRAG_ITEM",{id:t.id,dragState:s})},l=r=>{r.isPrimary&&(document.removeEventListener("pointermove",a),document.removeEventListener("pointerup",l),t.dragOffset={x:r.pageX-n,y:r.pageY-i},e.dispatch("DID_DROP_ITEM",{id:t.id,dragState:s}),o&&setTimeout((()=>e.element.addEventListener("click",e.ref.handleClick)),0))};document.addEventListener("pointermove",a),document.addEventListener("pointerup",l)}))},write:pi,destroy:({root:e,props:t})=>{e.element.removeEventListener("click",e.ref.handleClick),e.dispatch("RELEASE_ITEM",{query:t.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:"spring",scaleY:"spring",translateX:ci,translateY:ci,opacity:{type:"tween",duration:150}}}});var hi=(e,t)=>Math.max(1,Math.floor((e+1)/t));const Ei=(e,t,r)=>{if(!r)return;const o=e.rect.element.width,n=t.length;let i=null;if(0===n||r.top<t[0].rect.element.top)return-1;const s=t[0].rect.element,a=s.marginLeft+s.marginRight,l=s.width+a,c=hi(o,l);if(1===c){for(let e=0;e<n;e++){const o=t[e],n=o.rect.outer.top+.5*o.rect.element.height;if(r.top<n)return e}return n}const d=s.marginTop+s.marginBottom,u=s.height+d;for(let p=0;p<n;p++){const e=p%c*l,t=Math.floor(p/c)*u,o=t-s.marginTop,a=e+l,d=t+u+s.marginBottom;if(r.top<d&&r.top>o){if(r.left<a)return p;i=p!==n-1?p:null}}return null!==i?i:n},mi={height:0,width:0,get getHeight(){return this.height},set setHeight(e){0!==this.height&&0!==e||(this.height=e)},get getWidth(){return this.width},set setWidth(e){0!==this.width&&0!==e||(this.width=e)},setDimensions:function(e,t){0!==this.height&&0!==e||(this.height=e),0!==this.width&&0!==t||(this.width=t)}},_i=(e,t,r,o=0,n=1)=>{e.dragOffset?(e.translateX=null,e.translateY=null,e.translateX=e.dragOrigin.x+e.dragOffset.x,e.translateY=e.dragOrigin.y+e.dragOffset.y,e.scaleX=1.025,e.scaleY=1.025):(e.translateX=t,e.translateY=r,Date.now()>e.spawnDate&&(0===e.opacity&&gi(e,t,r,o,n),e.scaleX=1,e.scaleY=1,e.opacity=1))},gi=(e,t,r,o,n)=>{e.interactionMethod===jr?(e.translateX=null,e.translateX=t,e.translateY=null,e.translateY=r):e.interactionMethod===Wr?(e.translateX=null,e.translateX=t-20*o,e.translateY=null,e.translateY=r-10*n,e.scaleX=.8,e.scaleY=.8):e.interactionMethod===zr?(e.translateY=null,e.translateY=r-30):e.interactionMethod===Hr&&(e.translateX=null,e.translateX=t-30,e.translateY=null)},Ti=e=>e.rect.element.height+.5*e.rect.element.marginBottom+.5*e.rect.element.marginTop,Ii=Tr({DID_ADD_ITEM:({root:e,action:t})=>{const{id:r,index:o,interactionMethod:n}=t;e.ref.addIndex=o;const i=Date.now();let s=i,a=1;if(n!==jr){a=0;const t=e.query("GET_ITEM_INSERT_INTERVAL"),r=i-e.ref.lastItemSpanwDate;s=r<t?i+(t-r):i}e.ref.lastItemSpanwDate=s,e.appendChildView(e.createChildView(fi,{spawnDate:s,id:r,opacity:a,interactionMethod:n}),o)},DID_REMOVE_ITEM:({root:e,action:t})=>{const{id:r}=t,o=e.childViews.find((e=>e.id===r));o&&(o.scaleX=.9,o.scaleY=.9,o.opacity=0,o.markedForRemoval=!0)},DID_DRAG_ITEM:({root:e,action:t})=>{const{id:r,dragState:o}=t,n=e.query("GET_ITEM",{id:r}),i=e.childViews.find((e=>e.id===r)),s=e.childViews.length,a=o.getItemIndex(n);if(!i)return;const l=i.dragOrigin.x+i.dragOffset.x+i.dragCenter.x,c=i.dragOrigin.y+i.dragOffset.y+i.dragCenter.y,d=Ti(i),u=(p=i).rect.element.width+.5*p.rect.element.marginLeft+.5*p.rect.element.marginRight;var p;let f=Math.floor(e.rect.outer.width/u);f>s&&(f=s);const h=Math.floor(s/f+1);mi.setHeight=d*h,mi.setWidth=u*f;var E={y:Math.floor(c/d),x:Math.floor(l/u),getGridIndex:function(){return c>mi.getHeight||c<0||l>mi.getWidth||l<0?a:this.y*f+this.x},getColIndex:function(){const t=e.query("GET_ACTIVE_ITEMS"),r=e.childViews.filter((e=>e.rect.element.height)),o=t.map((e=>r.find((t=>t.id===e.id)))),n=o.findIndex((e=>e===i)),s=Ti(i),a=o.length;let l=a,d=0,u=0,p=0;for(let e=0;e<a;e++)if(d=Ti(o[e]),p=u,u=p+d,c<u){if(n>e){if(c<p+s){l=e;break}continue}l=e;break}return l}};const m=f>1?E.getGridIndex():E.getColIndex();e.dispatch("MOVE_ITEM",{query:i,index:m});const _=o.getIndex();if(void 0===_||_!==m){if(o.setIndex(m),void 0===_)return;e.dispatch("DID_REORDER_ITEMS",{items:e.query("GET_ACTIVE_ITEMS"),origin:a,target:m})}}}),yi=gr({create:({root:e})=>{Qt(e.element,"role","list"),e.ref.lastItemSpanwDate=Date.now()},write:({root:e,props:t,actions:r,shouldOptimize:o})=>{Ii({root:e,props:t,actions:r});const{dragCoordinates:n}=t,i=e.rect.element.width,s=e.childViews.filter((e=>e.rect.element.height)),a=e.query("GET_ACTIVE_ITEMS").map((e=>s.find((t=>t.id===e.id)))).filter((e=>e)),l=n?Ei(e,a,n):null,c=e.ref.addIndex||null;e.ref.addIndex=null;let d=0,u=0,p=0;if(0===a.length)return;const f=a[0].rect.element,h=f.marginTop+f.marginBottom,E=f.marginLeft+f.marginRight,m=f.width+E,_=f.height+h,g=hi(i,m);if(1===g){let e=0,t=0;a.forEach(((r,n)=>{if(l){let e=n-l;t=-2===e?.25*-h:-1===e?.75*-h:0===e?.75*h:1===e?.25*h:0}o&&(r.translateX=null,r.translateY=null),r.markedForRemoval||_i(r,0,e+t);let i=(r.rect.element.height+h)*(r.markedForRemoval?r.opacity:1);e+=i}))}else{let e=0,t=0;a.forEach(((r,n)=>{n===l&&(d=1),n===c&&(p+=1),r.markedForRemoval&&r.opacity<.5&&(u-=1);const i=n+p+d+u,s=i%g,a=Math.floor(i/g),f=s*m,h=a*_,E=Math.sign(f-e),T=Math.sign(h-t);e=f,t=h,r.markedForRemoval||(o&&(r.translateX=null,r.translateY=null),_i(r,f,h,E,T))}))}},tag:"ul",name:"list",didWriteView:({root:e})=>{e.childViews.filter((e=>e.markedForRemoval&&0===e.opacity&&e.resting)).forEach((t=>{t._destroy(),e.removeChildView(t)}))},filterFrameActionsForChild:(e,t)=>t.filter((t=>!t.data||!t.data.id||e.id===t.data.id)),mixins:{apis:["dragCoordinates"]}}),Ri=Tr({DID_DRAG:({root:e,props:t,action:r})=>{e.query("GET_ITEM_INSERT_LOCATION_FREEDOM")&&(t.dragCoordinates={left:r.position.scopeLeft-e.ref.list.rect.element.left,top:r.position.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},DID_END_DRAG:({props:e})=>{e.dragCoordinates=null}}),Ai=gr({create:({root:e,props:t})=>{e.ref.list=e.appendChildView(e.createChildView(yi)),t.dragCoordinates=null,t.overflowing=!1},write:({root:e,props:t,actions:r})=>{if(Ri({root:e,props:t,actions:r}),e.ref.list.dragCoordinates=t.dragCoordinates,t.overflowing&&!t.overflow&&(t.overflowing=!1,e.element.dataset.state="",e.height=null),t.overflow){const r=Math.round(t.overflow);r!==e.height&&(t.overflowing=!0,e.element.dataset.state="overflow",e.height=r)}},name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),Oi=(e,t,r,o="")=>{r?Qt(e,t,o):e.removeAttribute(t)},Di=({root:e,action:t})=>{e.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")&&Oi(e.element,"accept",!!t.value,t.value?t.value.join(","):"")},wi=({root:e,action:t})=>{Oi(e.element,"multiple",t.value)},vi=({root:e,action:t})=>{Oi(e.element,"webkitdirectory",t.value)},Si=({root:e})=>{const t=e.query("GET_DISABLED"),r=e.query("GET_ALLOW_BROWSE"),o=t||!r;Oi(e.element,"disabled",o)},Mi=({root:e,action:t})=>{t.value?0===e.query("GET_TOTAL_ITEMS")&&Oi(e.element,"required",!0):Oi(e.element,"required",!1)},bi=({root:e,action:t})=>{Oi(e.element,"capture",!!t.value,!0===t.value?"":t.value)},Pi=({root:e})=>{const{element:t}=e;if(e.query("GET_TOTAL_ITEMS")>0)Oi(t,"required",!1),Oi(t,"name",!1);else{Oi(t,"name",!0,e.query("GET_NAME"));e.query("GET_CHECK_VALIDITY")&&t.setCustomValidity(""),e.query("GET_REQUIRED")&&Oi(t,"required",!0)}},Li=gr({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:({root:e,props:t})=>{e.element.id=`filepond--browser-${t.id}`,Qt(e.element,"name",e.query("GET_NAME")),Qt(e.element,"aria-controls",`filepond--assistant-${t.id}`),Qt(e.element,"aria-labelledby",`filepond--drop-label-${t.id}`),Di({root:e,action:{value:e.query("GET_ACCEPTED_FILE_TYPES")}}),wi({root:e,action:{value:e.query("GET_ALLOW_MULTIPLE")}}),vi({root:e,action:{value:e.query("GET_ALLOW_DIRECTORIES_ONLY")}}),Si({root:e}),Mi({root:e,action:{value:e.query("GET_REQUIRED")}}),bi({root:e,action:{value:e.query("GET_CAPTURE_METHOD")}}),e.ref.handleChange=r=>{if(!e.element.value)return;const o=Array.from(e.element.files).map((e=>(e._relativePath=e.webkitRelativePath,e)));setTimeout((()=>{t.onload(o),(e=>{if(e&&""!==e.value){try{e.value=""}catch(t){}if(e.value){const t=Mn("form"),r=e.parentNode,o=e.nextSibling;t.appendChild(e),t.reset(),o?r.insertBefore(e,o):r.appendChild(e)}}})(e.element)}),250)},e.element.addEventListener("change",e.ref.handleChange)},destroy:({root:e})=>{e.element.removeEventListener("change",e.ref.handleChange)},write:Tr({DID_LOAD_ITEM:Pi,DID_REMOVE_ITEM:Pi,DID_THROW_ITEM_INVALID:({root:e})=>{e.query("GET_CHECK_VALIDITY")&&e.element.setCustomValidity(e.query("GET_LABEL_INVALID_FIELD"))},DID_SET_DISABLED:Si,DID_SET_ALLOW_BROWSE:Si,DID_SET_ALLOW_DIRECTORIES_ONLY:vi,DID_SET_ALLOW_MULTIPLE:wi,DID_SET_ACCEPTED_FILE_TYPES:Di,DID_SET_CAPTURE_METHOD:bi,DID_SET_REQUIRED:Mi})}),Ci=13,Ni=32,Gi=(e,t)=>{e.innerHTML=t;const r=e.querySelector(".filepond--label-action");return r&&Qt(r,"tabindex","0"),t},xi=gr({name:"drop-label",ignoreRect:!0,create:({root:e,props:t})=>{const r=Mn("label");Qt(r,"for",`filepond--browser-${t.id}`),Qt(r,"id",`filepond--drop-label-${t.id}`),Qt(r,"aria-hidden","true"),e.ref.handleKeyDown=t=>{(t.keyCode===Ci||t.keyCode===Ni)&&(t.preventDefault(),e.ref.label.click())},e.ref.handleClick=t=>{t.target===r||r.contains(t.target)||e.ref.label.click()},r.addEventListener("keydown",e.ref.handleKeyDown),e.element.addEventListener("click",e.ref.handleClick),Gi(r,t.caption),e.appendChild(r),e.ref.label=r},destroy:({root:e})=>{e.ref.label.addEventListener("keydown",e.ref.handleKeyDown),e.element.removeEventListener("click",e.ref.handleClick)},write:Tr({DID_SET_LABEL_IDLE:({root:e,action:t})=>{Gi(e.ref.label,t.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),Fi=gr({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),Ui=Tr({DID_DRAG:({root:e,action:t})=>{e.ref.blob?(e.ref.blob.translateX=t.position.scopeLeft,e.ref.blob.translateY=t.position.scopeTop,e.ref.blob.scaleX=1,e.ref.blob.scaleY=1,e.ref.blob.opacity=1):(({root:e})=>{const t=.5*e.rect.element.width,r=.5*e.rect.element.height;e.ref.blob=e.appendChildView(e.createChildView(Fi,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:t,translateY:r}))})({root:e})},DID_DROP:({root:e})=>{e.ref.blob&&(e.ref.blob.scaleX=2.5,e.ref.blob.scaleY=2.5,e.ref.blob.opacity=0)},DID_END_DRAG:({root:e})=>{e.ref.blob&&(e.ref.blob.opacity=0)}}),qi=gr({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:({root:e,props:t,actions:r})=>{Ui({root:e,props:t,actions:r});const{blob:o}=e.ref;0===r.length&&o&&0===o.opacity&&(e.removeChildView(o),e.ref.blob=null)}}),Bi=(e,t)=>{try{const r=new DataTransfer;t.forEach((e=>{e instanceof File?r.items.add(e):r.items.add(new File([e],e.name,{type:e.type}))})),e.files=r.files}catch(r){return!1}return!0},Vi=(e,t)=>e.ref.fields[t],$i=e=>{e.query("GET_ACTIVE_ITEMS").forEach((t=>{e.ref.fields[t.id]&&e.element.appendChild(e.ref.fields[t.id])}))},ki=({root:e})=>$i(e),Yi=Tr({DID_SET_DISABLED:({root:e})=>{e.element.disabled=e.query("GET_DISABLED")},DID_ADD_ITEM:({root:e,action:t})=>{const r=!(e.query("GET_ITEM",t.id).origin===ho)&&e.query("SHOULD_UPDATE_FILE_INPUT"),o=Mn("input");o.type=r?"file":"hidden",o.name=e.query("GET_NAME"),o.disabled=e.query("GET_DISABLED"),e.ref.fields[t.id]=o,$i(e)},DID_LOAD_ITEM:({root:e,action:t})=>{const r=Vi(e,t.id);if(!r)return;if(null!==t.serverFileReference&&(r.value=t.serverFileReference),!e.query("SHOULD_UPDATE_FILE_INPUT"))return;const o=e.query("GET_ITEM",t.id);Bi(r,[o.file])},DID_REMOVE_ITEM:({root:e,action:t})=>{const r=Vi(e,t.id);r&&(r.parentNode&&r.parentNode.removeChild(r),delete e.ref.fields[t.id])},DID_DEFINE_VALUE:({root:e,action:t})=>{const r=Vi(e,t.id);r&&(null===t.value?r.removeAttribute("value"):r.value=t.value,$i(e))},DID_PREPARE_OUTPUT:({root:e,action:t})=>{e.query("SHOULD_UPDATE_FILE_INPUT")&&setTimeout((()=>{const r=Vi(e,t.id);r&&Bi(r,[t.file])}),0)},DID_REORDER_ITEMS:ki,DID_SORT_ITEMS:ki}),Hi=gr({tag:"fieldset",name:"data",create:({root:e})=>e.ref.fields={},write:Yi,ignoreRect:!0}),Wi=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],zi=["css","csv","html","txt"],Xi={zip:"zip|compressed",epub:"application/epub+zip"},ji=(e="")=>(e=e.toLowerCase(),Wi.includes(e)?"image/"+("jpg"===e?"jpeg":"svg"===e?"svg+xml":e):zi.includes(e)?"text/"+e:Xi[e]||""),Qi=e=>new Promise(((t,r)=>{const o=ss(e);if(o.length&&!Zi(e))return t(o);Ki(e).then(t)})),Zi=e=>!!e.files&&e.files.length>0,Ki=e=>new Promise(((t,r)=>{const o=(e.items?Array.from(e.items):[]).filter((e=>Ji(e))).map((e=>es(e)));o.length?Promise.all(o).then((e=>{const r=[];e.forEach((e=>{r.push.apply(r,e)})),t(r.filter((e=>e)).map((e=>(e._relativePath||(e._relativePath=e.webkitRelativePath),e))))})).catch(console.error):t(e.files?Array.from(e.files):[])})),Ji=e=>{if(ns(e)){const t=is(e);if(t)return t.isFile||t.isDirectory}return"file"===e.kind},es=e=>new Promise(((t,r)=>{os(e)?ts(is(e)).then(t).catch(r):t([e.getAsFile()])})),ts=e=>new Promise(((t,r)=>{const o=[];let n=0,i=0;const s=()=>{0===i&&0===n&&t(o)},a=e=>{n++;const t=e.createReader(),l=()=>{t.readEntries((e=>{if(0===e.length)return n--,void s();e.forEach((e=>{e.isDirectory?a(e):(i++,e.file((t=>{const r=rs(t);e.fullPath&&(r._relativePath=e.fullPath),o.push(r),i--,s()})))})),l()}),r)};l()};a(e)})),rs=e=>{if(e.type.length)return e;const t=e.lastModifiedDate,r=e.name,o=ji(Bo(e.name));return o.length?((e=e.slice(0,e.size,o)).name=r,e.lastModifiedDate=t,e):e},os=e=>ns(e)&&(is(e)||{}).isDirectory,ns=e=>"webkitGetAsEntry"in e,is=e=>e.webkitGetAsEntry(),ss=e=>{let t=[];try{if(t=ls(e),t.length)return t;t=as(e)}catch(r){}return t},as=e=>{let t=e.getData("url");return"string"==typeof t&&t.length?[t]:[]},ls=e=>{let t=e.getData("text/html");if("string"==typeof t&&t.length){const e=t.match(/src\s*=\s*"(.+?)"/);if(e)return[e[1]]}return[]},cs=[],ds=e=>({pageLeft:e.pageX,pageTop:e.pageY,scopeLeft:e.offsetX||e.layerX,scopeTop:e.offsetY||e.layerY}),us=e=>{const t=cs.find((t=>t.element===e));if(t)return t;const r=ps(e);return cs.push(r),r},ps=e=>{const t=[],r={dragenter:ms,dragover:_s,dragleave:Ts,drop:gs},o={};Xt(r,((r,n)=>{o[r]=n(e,t),e.addEventListener(r,o[r],!1)}));const n={element:e,addListener:i=>(t.push(i),()=>{t.splice(t.indexOf(i),1),0===t.length&&(cs.splice(cs.indexOf(n),1),Xt(r,(t=>{e.removeEventListener(t,o[t],!1)})))})};return n},fs=(e,t)=>{var r;const o=((e,t)=>("elementFromPoint"in e||(e=document),e.elementFromPoint(t.x,t.y)))("getRootNode"in(r=t)?r.getRootNode():document,{x:e.pageX-window.pageXOffset,y:e.pageY-window.pageYOffset});return o===t||t.contains(o)};let hs=null;const Es=(e,t)=>{try{e.dropEffect=t}catch(r){}},ms=(e,t)=>e=>{e.preventDefault(),hs=e.target,t.forEach((t=>{const{element:r,onenter:o}=t;fs(e,r)&&(t.state="enter",o(ds(e)))}))},_s=(e,t)=>e=>{e.preventDefault();const r=e.dataTransfer;Qi(r).then((o=>{let n=!1;t.some((t=>{const{filterElement:i,element:s,onenter:a,onexit:l,ondrag:c,allowdrop:d}=t;Es(r,"copy");const u=d(o);if(u)if(fs(e,s)){if(n=!0,null===t.state)return t.state="enter",void a(ds(e));if(t.state="over",i&&!u)return void Es(r,"none");c(ds(e))}else i&&!n&&Es(r,"none"),t.state&&(t.state=null,l(ds(e)));else Es(r,"none")}))}))},gs=(e,t)=>e=>{e.preventDefault();const r=e.dataTransfer;Qi(r).then((r=>{t.forEach((t=>{const{filterElement:o,element:n,ondrop:i,onexit:s,allowdrop:a}=t;if(t.state=null,!o||fs(e,n))return a(r)?void i(ds(e),r):s(ds(e))}))}))},Ts=(e,t)=>e=>{hs===e.target&&t.forEach((t=>{const{onexit:r}=t;t.state=null,r(ds(e))}))},Is=(e,t,r)=>{e.classList.add("filepond--hopper");const{catchesDropsOnPage:o,requiresDropOnElement:n,filterItems:i=(e=>e)}=r,s=((e,t,r)=>{const o=us(t),n={element:e,filterElement:r,state:null,ondrop:()=>{},onenter:()=>{},ondrag:()=>{},onexit:()=>{},onload:()=>{},allowdrop:()=>{}};return n.destroy=o.addListener(n),n})(e,o?document.documentElement:e,n);let a="",l="";s.allowdrop=e=>t(i(e)),s.ondrop=(e,r)=>{const o=i(r);t(o)?(l="drag-drop",c.onload(o,e)):c.ondragend(e)},s.ondrag=e=>{c.ondrag(e)},s.onenter=e=>{l="drag-over",c.ondragstart(e)},s.onexit=e=>{l="drag-exit",c.ondragend(e)};const c={updateHopperState:()=>{a!==l&&(e.dataset.hopperState=l,a=l)},onload:()=>{},ondragstart:()=>{},ondrag:()=>{},ondragend:()=>{},destroy:()=>{s.destroy()}};return c};let ys=!1;const Rs=[],As=e=>{const t=document.activeElement;if(t&&/textarea|input/i.test(t.nodeName)){let e=!1,r=t;for(;r!==document.body;){if(r.classList.contains("filepond--root")){e=!0;break}r=r.parentNode}if(!e)return}Qi(e.clipboardData).then((e=>{e.length&&Rs.forEach((t=>t(e)))}))},Os=()=>{const e=e=>{t.onload(e)},t={destroy:()=>{var t;t=e,Zr(Rs,Rs.indexOf(t)),0===Rs.length&&(document.removeEventListener("paste",As),ys=!1)},onload:()=>{}};return(e=>{Rs.includes(e)||(Rs.push(e),ys||(ys=!0,document.addEventListener("paste",As)))})(e),t};let Ds=null,ws=null;const vs=[],Ss=(e,t)=>{e.element.textContent=t},Ms=(e,t,r)=>{const o=e.query("GET_TOTAL_ITEMS");Ss(e,`${r} ${t}, ${o} ${1===o?e.query("GET_LABEL_FILE_COUNT_SINGULAR"):e.query("GET_LABEL_FILE_COUNT_PLURAL")}`),clearTimeout(ws),ws=setTimeout((()=>{(e=>{e.element.textContent=""})(e)}),1500)},bs=e=>e.element.parentNode.contains(document.activeElement),Ps=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename,o=e.query("GET_LABEL_FILE_PROCESSING_ABORTED");Ss(e,`${r} ${o}`)},Ls=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename;Ss(e,`${t.status.main} ${r} ${t.status.sub}`)},Cs=gr({create:({root:e,props:t})=>{e.element.id=`filepond--assistant-${t.id}`,Qt(e.element,"role","status"),Qt(e.element,"aria-live","polite"),Qt(e.element,"aria-relevant","additions")},ignoreRect:!0,ignoreRectUpdate:!0,write:Tr({DID_LOAD_ITEM:({root:e,action:t})=>{if(!bs(e))return;e.element.textContent="";const r=e.query("GET_ITEM",t.id);vs.push(r.filename),clearTimeout(Ds),Ds=setTimeout((()=>{Ms(e,vs.join(", "),e.query("GET_LABEL_FILE_ADDED")),vs.length=0}),750)},DID_REMOVE_ITEM:({root:e,action:t})=>{if(!bs(e))return;const r=t.item;Ms(e,r.filename,e.query("GET_LABEL_FILE_REMOVED"))},DID_COMPLETE_ITEM_PROCESSING:({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename,o=e.query("GET_LABEL_FILE_PROCESSING_COMPLETE");Ss(e,`${r} ${o}`)},DID_ABORT_ITEM_PROCESSING:Ps,DID_REVERT_ITEM_PROCESSING:Ps,DID_THROW_ITEM_REMOVE_ERROR:Ls,DID_THROW_ITEM_LOAD_ERROR:Ls,DID_THROW_ITEM_INVALID:Ls,DID_THROW_ITEM_PROCESSING_ERROR:Ls}),tag:"span",name:"assistant"}),Ns=(e,t="-")=>e.replace(new RegExp(`${t}.`,"g"),(e=>e.charAt(1).toUpperCase())),Gs=(e,t=16,r=!0)=>{let o=Date.now(),n=null;return(...i)=>{clearTimeout(n);const s=Date.now()-o,a=()=>{o=Date.now(),e(...i)};s<t?r||(n=setTimeout(a,t-s)):a()}},xs=e=>e.preventDefault(),Fs=e=>{const t=e.ref.list.childViews[0].childViews[0];return t?{top:t.rect.element.marginTop,bottom:t.rect.element.marginBottom}:{top:0,bottom:0}},Us=e=>{let t=0,r=0;const o=e.ref.list,n=o.childViews[0],i=n.childViews.filter((e=>e.rect.element.height)),s=e.query("GET_ACTIVE_ITEMS").map((e=>i.find((t=>t.id===e.id)))).filter((e=>e));if(0===s.length)return{visual:t,bounds:r};const a=n.rect.element.width,l=Ei(n,s,o.dragCoordinates),c=s[0].rect.element,d=c.marginTop+c.marginBottom,u=c.marginLeft+c.marginRight,p=c.width+u,f=c.height+d,h=void 0!==l&&l>=0?1:0,E=s.find((e=>e.markedForRemoval&&e.opacity<.45))?-1:0,m=s.length+h+E,_=hi(a,p);return 1===_?s.forEach((e=>{const o=e.rect.element.height+d;r+=o,t+=o*e.opacity})):(r=Math.ceil(m/_)*f,t=r),{visual:t,bounds:r}},qs=e=>{const t=e.ref.measureHeight||null;return{cappedHeight:parseInt(e.style.maxHeight,10)||null,fixedHeight:0===t?null:t}},Bs=(e,t)=>{const r=e.query("GET_ALLOW_REPLACE"),o=e.query("GET_ALLOW_MULTIPLE"),n=e.query("GET_TOTAL_ITEMS");let i=e.query("GET_MAX_FILES");const s=t.length;if(!o&&s>1)return!0;i=o||r?i:1;return!!(Lr(i)&&n+s>i)&&(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:en("warning",0,"Max files")}),!0)},Vs=(e,t,r)=>{const o=e.childViews[0];return Ei(o,t,{left:r.scopeLeft-o.rect.element.left,top:r.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},$s=e=>{const t=e.query("GET_ALLOW_DROP"),r=e.query("GET_DISABLED"),o=t&&!r;if(o&&!e.ref.hopper){const t=Is(e.element,(t=>{const r=e.query("GET_BEFORE_DROP_FILE")||(()=>!0);return!e.query("GET_DROP_VALIDATION")||t.every((t=>Io("ALLOW_HOPPER_ITEM",t,{query:e.query}).every((e=>!0===e))&&r(t)))}),{filterItems:t=>{const r=e.query("GET_IGNORED_FILES");return t.filter((e=>!_n(e)||!r.includes(e.name.toLowerCase())))},catchesDropsOnPage:e.query("GET_DROP_ON_PAGE"),requiresDropOnElement:e.query("GET_DROP_ON_ELEMENT")});t.onload=(t,r)=>{const o=e.ref.list.childViews[0].childViews.filter((e=>e.rect.element.height)),n=e.query("GET_ACTIVE_ITEMS").map((e=>o.find((t=>t.id===e.id)))).filter((e=>e));To("ADD_ITEMS",t,{dispatch:e.dispatch}).then((t=>{if(Bs(e,t))return!1;e.dispatch("ADD_ITEMS",{items:t,index:Vs(e.ref.list,n,r),interactionMethod:Wr})})),e.dispatch("DID_DROP",{position:r}),e.dispatch("DID_END_DRAG",{position:r})},t.ondragstart=t=>{e.dispatch("DID_START_DRAG",{position:t})},t.ondrag=Gs((t=>{e.dispatch("DID_DRAG",{position:t})})),t.ondragend=t=>{e.dispatch("DID_END_DRAG",{position:t})},e.ref.hopper=t,e.ref.drip=e.appendChildView(e.createChildView(qi))}else!o&&e.ref.hopper&&(e.ref.hopper.destroy(),e.ref.hopper=null,e.removeChildView(e.ref.drip))},ks=(e,t)=>{const r=e.query("GET_ALLOW_BROWSE"),o=e.query("GET_DISABLED"),n=r&&!o;n&&!e.ref.browser?e.ref.browser=e.appendChildView(e.createChildView(Li,l(a({},t),{onload:t=>{To("ADD_ITEMS",t,{dispatch:e.dispatch}).then((t=>{if(Bs(e,t))return!1;e.dispatch("ADD_ITEMS",{items:t,index:-1,interactionMethod:zr})}))}})),0):!n&&e.ref.browser&&(e.removeChildView(e.ref.browser),e.ref.browser=null)},Ys=e=>{const t=e.query("GET_ALLOW_PASTE"),r=e.query("GET_DISABLED"),o=t&&!r;o&&!e.ref.paster?(e.ref.paster=Os(),e.ref.paster.onload=t=>{To("ADD_ITEMS",t,{dispatch:e.dispatch}).then((t=>{if(Bs(e,t))return!1;e.dispatch("ADD_ITEMS",{items:t,index:-1,interactionMethod:Xr})}))}):!o&&e.ref.paster&&(e.ref.paster.destroy(),e.ref.paster=null)},Hs=Tr({DID_SET_ALLOW_BROWSE:({root:e,props:t})=>{ks(e,t)},DID_SET_ALLOW_DROP:({root:e})=>{$s(e)},DID_SET_ALLOW_PASTE:({root:e})=>{Ys(e)},DID_SET_DISABLED:({root:e,props:t})=>{$s(e),Ys(e),ks(e,t);e.query("GET_DISABLED")?e.element.dataset.disabled="disabled":e.element.removeAttribute("data-disabled")}}),Ws=gr({name:"root",read:({root:e})=>{e.ref.measure&&(e.ref.measureHeight=e.ref.measure.offsetHeight)},create:({root:e,props:t})=>{const r=e.query("GET_ID");r&&(e.element.id=r);const o=e.query("GET_CLASS_NAME");o&&o.split(" ").filter((e=>e.length)).forEach((t=>{e.element.classList.add(t)})),e.ref.label=e.appendChildView(e.createChildView(xi,l(a({},t),{translateY:null,caption:e.query("GET_LABEL_IDLE")}))),e.ref.list=e.appendChildView(e.createChildView(Ai,{translateY:null})),e.ref.panel=e.appendChildView(e.createChildView(li,{name:"panel-root"})),e.ref.assistant=e.appendChildView(e.createChildView(Cs,a({},t))),e.ref.data=e.appendChildView(e.createChildView(Hi,a({},t))),e.ref.measure=Mn("div"),e.ref.measure.style.height="100%",e.element.appendChild(e.ref.measure),e.ref.bounds=null,e.query("GET_STYLES").filter((e=>!Ar(e.value))).map((({name:t,value:r})=>{e.element.dataset[t]=r})),e.ref.widthPrevious=null,e.ref.widthUpdated=Gs((()=>{e.ref.updateHistory=[],e.dispatch("DID_RESIZE_ROOT")}),250),e.ref.previousAspectRatio=null,e.ref.updateHistory=[];const n=window.matchMedia("(pointer: fine) and (hover: hover)").matches,i="PointerEvent"in window;e.query("GET_ALLOW_REORDER")&&i&&!n&&(e.element.addEventListener("touchmove",xs,{passive:!1}),e.element.addEventListener("gesturestart",xs));const s=e.query("GET_CREDITS");if(2===s.length){const t=document.createElement("a");t.className="filepond--credits",t.setAttribute("aria-hidden","true"),t.href=s[0],t.tabindex=-1,t.target="_blank",t.rel="noopener noreferrer",t.textContent=s[1],e.element.appendChild(t),e.ref.credits=t}},write:({root:e,props:t,actions:r})=>{if(Hs({root:e,props:t,actions:r}),r.filter((e=>/^DID_SET_STYLE_/.test(e.type))).filter((e=>!Ar(e.data.value))).map((({type:t,data:r})=>{const o=Ns(t.substr(8).toLowerCase(),"_");e.element.dataset[o]=r.value,e.invalidateLayout()})),e.rect.element.hidden)return;e.rect.element.width!==e.ref.widthPrevious&&(e.ref.widthPrevious=e.rect.element.width,e.ref.widthUpdated());let o=e.ref.bounds;o||(o=e.ref.bounds=qs(e),e.element.removeChild(e.ref.measure),e.ref.measure=null);const{hopper:n,label:i,list:s,panel:a}=e.ref;n&&n.updateHopperState();const l=e.query("GET_PANEL_ASPECT_RATIO"),c=e.query("GET_ALLOW_MULTIPLE"),d=e.query("GET_TOTAL_ITEMS"),u=d===(c?e.query("GET_MAX_FILES")||1e6:1),p=r.find((e=>"DID_ADD_ITEM"===e.type));if(u&&p){const e=p.data.interactionMethod;i.opacity=0,c?i.translateY=-40:e===Hr?i.translateX=40:i.translateY=e===zr?40:30}else u||(i.opacity=1,i.translateX=0,i.translateY=0);const f=Fs(e),h=Us(e),E=i.rect.element.height,m=!c||u?0:E,_=u?s.rect.element.marginTop:0,g=0===d?0:s.rect.element.marginBottom,T=m+_+h.visual+g,I=m+_+h.bounds+g;if(s.translateY=Math.max(0,m-s.rect.element.marginTop)-f.top,l){const t=e.rect.element.width,r=t*l;l!==e.ref.previousAspectRatio&&(e.ref.previousAspectRatio=l,e.ref.updateHistory=[]);const o=e.ref.updateHistory;o.push(t);const n=2;if(o.length>2*n){const e=o.length,t=e-10;let r=0;for(let i=e;i>=t;i--)if(o[i]===o[i-2]&&r++,r>=n)return}a.scalable=!1,a.height=r;const i=r-m-(g-f.bottom)-(u?_:0);h.visual>i?s.overflow=i:s.overflow=null,e.height=r}else if(o.fixedHeight){a.scalable=!1;const e=o.fixedHeight-m-(g-f.bottom)-(u?_:0);h.visual>e?s.overflow=e:s.overflow=null}else if(o.cappedHeight){const t=T>=o.cappedHeight,r=Math.min(o.cappedHeight,T);a.scalable=!0,a.height=t?r:r-f.top-f.bottom;const n=r-m-(g-f.bottom)-(u?_:0);T>o.cappedHeight&&h.visual>n?s.overflow=n:s.overflow=null,e.height=Math.min(o.cappedHeight,I-f.top-f.bottom)}else{const t=d>0?f.top+f.bottom:0;a.scalable=!0,a.height=Math.max(E,T-t),e.height=Math.max(E,I-t)}e.ref.credits&&a.heightCurrent&&(e.ref.credits.style.transform=`translateY(${a.heightCurrent}px)`)},destroy:({root:e})=>{e.ref.paster&&e.ref.paster.destroy(),e.ref.hopper&&e.ref.hopper.destroy(),e.element.removeEventListener("touchmove",xs),e.element.removeEventListener("gesturestart",xs)},mixins:{styles:["height"]}}),zs=(e={})=>{let t=null;const r=Ro(),o=((e,t=[],r=[])=>{const o=a({},e),n=[],i=[],s=(e,t,r)=>{!r||document.hidden?(u[e]&&u[e](t),n.push({type:e,data:t})):i.push({type:e,data:t})},l=(e,...t)=>d[e]?d[e](...t):null,c={getState:()=>a({},o),processActionQueue:()=>{const e=[...n];return n.length=0,e},processDispatchQueue:()=>{const e=[...i];i.length=0,e.forEach((({type:e,data:t})=>{s(e,t)}))},dispatch:s,query:l};let d={};t.forEach((e=>{d=a(a({},e(o)),d)}));let u={};return r.forEach((e=>{u=a(a({},e(s,l,o)),u)})),c})({items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:Vr(r)},[xo,Yr(r)],[Sn,kr(r)]);o.dispatch("SET_OPTIONS",{options:e});const n=()=>{document.hidden||o.dispatch("KICK")};document.addEventListener("visibilitychange",n);let i=null,s=!1,c=!1,d=null,u=null;const p=()=>{s||(s=!0),clearTimeout(i),i=setTimeout((()=>{s=!1,d=null,u=null,c&&(c=!1,o.dispatch("DID_STOP_RESIZE"))}),500)};window.addEventListener("resize",p);const f=Ws(o,{id:Qr()});let h=!1,E=!1;const m={_read:()=>{s&&(u=window.innerWidth,d||(d=u),c||u===d||(o.dispatch("DID_START_RESIZE"),c=!0)),E&&h&&(h=null===f.element.offsetParent),h||(f._read(),E=f.rect.element.hidden)},_write:e=>{const t=o.processActionQueue().filter((e=>!/^SET_/.test(e.type)));var r;h&&!t.length||(I(t),h=f._write(e,t,c),(r=o.query("GET_ITEMS")).forEach(((e,t)=>{e.released&&Zr(r,t)})),h&&o.processDispatchQueue())}},_=e=>t=>{const r={type:e};if(!t)return r;if(t.hasOwnProperty("error")&&(r.error=t.error?a({},t.error):null),t.status&&(r.status=a({},t.status)),t.file&&(r.output=t.file),t.source)r.file=t.source;else if(t.item||t.id){const e=t.item?t.item:o.query("GET_ITEM",t.id);r.file=e?to(e):null}return t.items&&(r.items=t.items.map(to)),/progress/.test(e)&&(r.progress=t.progress),t.hasOwnProperty("origin")&&t.hasOwnProperty("target")&&(r.origin=t.origin,r.target=t.target),r},g={DID_DESTROY:_("destroy"),DID_INIT:_("init"),DID_THROW_MAX_FILES:_("warning"),DID_INIT_ITEM:_("initfile"),DID_START_ITEM_LOAD:_("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:_("addfileprogress"),DID_LOAD_ITEM:_("addfile"),DID_THROW_ITEM_INVALID:[_("error"),_("addfile")],DID_THROW_ITEM_LOAD_ERROR:[_("error"),_("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[_("error"),_("removefile")],DID_PREPARE_OUTPUT:_("preparefile"),DID_START_ITEM_PROCESSING:_("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:_("processfileprogress"),DID_ABORT_ITEM_PROCESSING:_("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:_("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:_("processfiles"),DID_REVERT_ITEM_PROCESSING:_("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[_("error"),_("processfile")],DID_REMOVE_ITEM:_("removefile"),DID_UPDATE_ITEMS:_("updatefiles"),DID_ACTIVATE_ITEM:_("activatefile"),DID_REORDER_ITEMS:_("reorderfiles")},T=e=>{const t=a({pond:w},e);delete t.type,f.element.dispatchEvent(new CustomEvent(`FilePond:${e.type}`,{detail:t,bubbles:!0,cancelable:!0,composed:!0}));const r=[];e.hasOwnProperty("error")&&r.push(e.error),e.hasOwnProperty("file")&&r.push(e.file);const n=["type","error","file"];Object.keys(e).filter((e=>!n.includes(e))).forEach((t=>r.push(e[t]))),w.fire(e.type,...r);const i=o.query(`GET_ON${e.type.toUpperCase()}`);i&&i(...r)},I=e=>{e.length&&e.filter((e=>g[e.type])).forEach((e=>{const t=g[e.type];(Array.isArray(t)?t:[t]).forEach((t=>{"DID_INIT_ITEM"===e.type?T(t(e.data)):setTimeout((()=>{T(t(e.data))}),0)}))}))},y=e=>new Promise(((t,r)=>{o.dispatch("REQUEST_ITEM_PREPARE",{query:e,success:e=>{t(e)},failure:e=>{r(e)}})})),R=(e,t)=>{var r;return"object"!=typeof e||(r=e).file&&r.id||t||(t=e,e=void 0),o.dispatch("REMOVE_ITEM",l(a({},t),{query:e})),null===o.query("GET_ACTIVE_ITEM",e)},A=(...e)=>new Promise(((t,r)=>{const n=[],i={};if(Rr(e[0]))n.push.apply(n,e[0]),Object.assign(i,e[1]||{});else{const t=e[e.length-1];"object"!=typeof t||t instanceof Blob||Object.assign(i,e.pop()),n.push(...e)}o.dispatch("ADD_ITEMS",{items:n,index:i.index,interactionMethod:Hr,success:t,failure:r})})),O=()=>o.query("GET_ACTIVE_ITEMS"),D=e=>new Promise(((t,r)=>{o.dispatch("REQUEST_ITEM_PROCESSING",{query:e,success:e=>{t(e)},failure:e=>{r(e)}})})),w=l(a(a(a({},Kr()),m),((e,t)=>{const r={};return Xt(t,(t=>{r[t]={get:()=>e.getState().options[t],set:r=>{e.dispatch(`SET_${$r(t,"_").toUpperCase()}`,{value:r})}}})),r})(o,r)),{setOptions:e=>o.dispatch("SET_OPTIONS",{options:e}),addFile:(e,t={})=>new Promise(((r,o)=>{A([{source:e,options:t}],{index:t.index}).then((e=>r(e&&e[0]))).catch(o)})),addFiles:A,getFile:e=>o.query("GET_ACTIVE_ITEM",e),processFile:D,prepareFile:y,removeFile:R,moveFile:(e,t)=>o.dispatch("MOVE_ITEM",{query:e,index:t}),getFiles:O,processFiles:(...e)=>{const t=Array.isArray(e[0])?e[0]:e;if(!t.length){const e=O().filter((e=>!(e.status===oo&&e.origin===ho)&&e.status!==io&&e.status!==so&&e.status!==lo));return Promise.all(e.map(D))}return Promise.all(t.map(D))},removeFiles:(...e)=>{const t=Array.isArray(e[0])?e[0]:e;let r;"object"==typeof t[t.length-1]?r=t.pop():Array.isArray(e[0])&&(r=e[1]);const o=O();if(!t.length)return Promise.all(o.map((e=>R(e,r))));return t.map((e=>lr(e)?o[e]?o[e].id:null:e)).filter((e=>e)).map((e=>R(e,r)))},prepareFiles:(...e)=>{const t=Array.isArray(e[0])?e[0]:e,r=t.length?t:O();return Promise.all(r.map(y))},sort:e=>o.dispatch("SORT",{compare:e}),browse:()=>{var e=f.element.querySelector("input[type=file]");e&&e.click()},destroy:()=>{w.fire("destroy",f.element),o.dispatch("ABORT_ALL"),f._destroy(),window.removeEventListener("resize",p),document.removeEventListener("visibilitychange",n),o.dispatch("DID_DESTROY")},insertBefore:e=>Ir(f.element,e),insertAfter:e=>yr(f.element,e),appendTo:e=>e.appendChild(f.element),replaceElement:e=>{Ir(f.element,e),e.parentNode.removeChild(e),t=e},restoreElement:()=>{t&&(yr(t,f.element),f.element.parentNode.removeChild(f.element),t=null)},isAttachedTo:e=>f.element===e||t===e,element:{get:()=>f.element},status:{get:()=>o.query("GET_STATUS")}});return o.dispatch("DID_INIT"),jt(w)},Xs=(e={})=>{const t={};Xt(Ro(),((e,r)=>{t[e]=r[0]}));return zs(a(a({},t),e))},js=(e,t)=>{Xt(t,((t,r)=>{Xt(e,((o,n)=>{const i=new RegExp(t);if(!i.test(o))return;if(delete e[o],!1===r)return;if(Sr(r))return void(e[r]=n);const s=r.group;var a;Fr(r)&&!e[s]&&(e[s]={}),e[s][(a=o.replace(i,""),a.charAt(0).toLowerCase()+a.slice(1))]=n})),r.mapping&&js(e[r.group],r.mapping)}))},Qs=(e,t={})=>{const r=[];Xt(e.attributes,(t=>{r.push(e.attributes[t])}));const o=r.filter((e=>e.name)).reduce(((t,r)=>{const o=Qt(e,r.name);var n;return t[(n=r.name,Ns(n.replace(/^data-/,"")))]=o===r.name||o,t}),{});return js(o,t),o},Zs=(...e)=>e[0]instanceof HTMLElement?((e,t={})=>{const r={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};Io("SET_ATTRIBUTE_TO_OPTION_MAP",r);const o=a({},t),n=Qs("FIELDSET"===e.nodeName?e.querySelector("input[type=file]"):e,r);Object.keys(n).forEach((e=>{Fr(n[e])?(Fr(o[e])||(o[e]={}),Object.assign(o[e],n[e])):o[e]=n[e]})),o.files=(t.files||[]).concat(Array.from(e.querySelectorAll("input:not([type=file])")).map((e=>({source:e.value,options:{type:e.dataset.type}}))));const i=Xs(o);return e.files&&Array.from(e.files).forEach((e=>{i.addFile(e)})),i.replaceElement(e),i})(...e):Xs(...e),Ks=["fire","_read","_write"],Js=e=>{const t={};return Jr(e,t,Ks),t},ea=(e,t)=>e.replace(/(?:{([a-zA-Z]+)})/g,((e,r)=>t[r])),ta=e=>{const t=new Blob(["(",e.toString(),")()"],{type:"application/javascript"}),r=URL.createObjectURL(t),o=new Worker(r);return{transfer:(e,t)=>{},post:(e,t,r)=>{const n=Qr();o.onmessage=e=>{e.data.id===n&&t(e.data.message)},o.postMessage({id:n,message:e},r)},terminate:()=>{o.terminate(),URL.revokeObjectURL(r)}}},ra=e=>new Promise(((t,r)=>{const o=new Image;o.onload=()=>{t(o)},o.onerror=e=>{r(e)},o.src=e})),oa=(e,t)=>{const r=e.slice(0,e.size,e.type);return r.lastModifiedDate=e.lastModifiedDate,r.name=t,r},na=e=>oa(e,e.name),ia=[],sa=e=>{if(ia.includes(e))return;ia.push(e);const t=e({addFilter:yo,utils:{Type:_o,forin:Xt,isString:Sr,isFile:_n,toNaturalFileSize:Gn,replaceInString:ea,getExtensionFromFilename:Bo,getFilenameWithoutExtension:mn,guesstimateMimeType:ji,getFileFromBlob:ko,getFilenameFromURL:qo,createRoute:Tr,createWorker:ta,createView:gr,createItemAPI:to,loadImage:ra,copyFile:na,renameFile:oa,createBlob:Yo,applyFilterChain:To,text:bn,getNumericAspectRatioFromString:Do},views:{fileActionButton:Nn}});var r;r=t.options,Object.assign(Ao,r)},aa=(()=>{const e=or()&&!("[object OperaMini]"===Object.prototype.toString.call(window.operamini))&&"visibilityState"in document&&"Promise"in window&&"slice"in Blob.prototype&&"URL"in window&&"createObjectURL"in window.URL&&"performance"in window&&("supports"in(window.CSS||{})||/MSIE|Trident/.test(window.navigator.userAgent));return()=>e})(),la={apps:[]},ca=()=>{};let da={},ua=ca,pa=ca,fa=ca,ha=ca,Ea=ca,ma=ca,_a=ca;if(aa()){((e,t,r=60)=>{const o="__framePainter";if(window[o])return window[o].readers.push(e),void window[o].writers.push(t);window[o]={readers:[e],writers:[t]};const n=window[o],i=1e3/r;let s=null,a=null,l=null,c=null;const d=()=>{document.hidden?(l=()=>window.setTimeout((()=>u(performance.now())),i),c=()=>window.clearTimeout(a)):(l=()=>window.requestAnimationFrame(u),c=()=>window.cancelAnimationFrame(a))};document.addEventListener("visibilitychange",(()=>{c&&c(),d(),u(performance.now())}));const u=e=>{a=l(u),s||(s=e);const t=e-s;t<=i||(s=e-t%i,n.readers.forEach((e=>e())),n.writers.forEach((t=>t(e))))};d(),u(performance.now())})((()=>{la.apps.forEach((e=>e._read()))}),(e=>{la.apps.forEach((t=>t._write(e)))}));const e=()=>{document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:aa,create:ua,destroy:pa,parse:fa,find:ha,registerPlugin:Ea,setOptions:_a}})),document.removeEventListener("DOMContentLoaded",e)};"loading"!==document.readyState?setTimeout((()=>e()),0):document.addEventListener("DOMContentLoaded",e);const t=()=>Xt(Ro(),((e,t)=>{da[e]=t[1]}));da={},t(),ua=(...e)=>{const t=Zs(...e);return t.on("destroy",pa),la.apps.push(t),Js(t)},pa=e=>{const t=la.apps.findIndex((t=>t.isAttachedTo(e)));if(t>=0){return la.apps.splice(t,1)[0].restoreElement(),!0}return!1},fa=e=>Array.from(e.querySelectorAll(".filepond")).filter((e=>!la.apps.find((t=>t.isAttachedTo(e))))).map((e=>ua(e))),ha=e=>{const t=la.apps.find((t=>t.isAttachedTo(e)));return t?Js(t):null},Ea=(...e)=>{e.forEach(sa),t()},ma=()=>{const e={};return Xt(Ro(),((t,r)=>{e[t]=r[0]})),e},_a=e=>(Fr(e)&&(la.apps.forEach((t=>{t.setOptions(e)})),(e=>{Xt(e,((e,t)=>{Ao[e]&&(Ao[e][0]=Br(t,Ao[e][0],Ao[e][1]))}))})(e)),ma())}function ga(e){let t,r;return{c(){t=C("div"),r=C("input"),this.h()},l(e){t=k(e,"DIV",{class:!0});var o=V(t);r=k(o,"INPUT",{type:!0,id:!0,name:!0,class:!0,accept:!0,capture:!0}),o.forEach(P),this.h()},h(){q(r,"type","file"),q(r,"id",e[1]),q(r,"name",e[2]),q(r,"class",e[0]),q(r,"accept",e[6]),r.multiple=e[3],r.required=e[4],q(r,"capture",e[5]),q(t,"class","filepond--wrapper")},m(o,n){b(o,t,n),M(t,r),e[24](r)},p(e,[t]){2&t&&q(r,"id",e[1]),4&t&&q(r,"name",e[2]),1&t&&q(r,"class",e[0]),64&t&&q(r,"accept",e[6]),8&t&&(r.multiple=e[3]),16&t&&(r.required=e[4]),32&t&&q(r,"capture",e[5])},i:c,o:c,d(r){r&&P(t),e[24](null)}}}function Ta(e,t,r){const o=Ea,n=aa();let i,s,{class:l}=t,{id:c}=t,{name:u}=t,{allowMultiple:p}=t,{required:f}=t,{captureMethod:h}=t,{acceptedFileTypes:E}=t;const m=()=>{};let{addFile:_=m}=t,{addFiles:g=m}=t,{browse:T=m}=t,{fireSync:I=m}=t,{getFile:y=m}=t,{getFiles:R=m}=t,{moveFile:A=m}=t,{prepareFile:D=m}=t,{prepareFiles:w=m}=t,{processFile:v=m}=t,{processFiles:S=m}=t,{removeFile:M=m}=t,{removeFiles:b=m}=t,{sort:P=m}=t;var L;return J((()=>{n&&(s?s.setOptions(t):(s=ua(i,a({},t)),r(8,_=s.addFile),r(9,g=s.addFiles),r(19,M=s.removeFile),r(20,b=s.removeFiles),r(10,T=s.browse),r(11,I=s.fireSync),r(12,y=s.getFile),r(13,R=s.getFiles),r(14,A=s.moveFile),r(15,D=s.prepareFile),r(16,w=s.prepareFiles),r(17,v=s.processFile),r(18,S=s.processFiles),r(19,M=s.removeFile),r(20,b=s.removeFiles),r(21,P=s.sort)))})),L=()=>{s&&(s.destroy(),s=void 0)},Z().$$.on_destroy.push(L),e.$$set=e=>{r(27,t=d(d({},t),O(e))),"class"in e&&r(0,l=e.class),"id"in e&&r(1,c=e.id),"name"in e&&r(2,u=e.name),"allowMultiple"in e&&r(3,p=e.allowMultiple),"required"in e&&r(4,f=e.required),"captureMethod"in e&&r(5,h=e.captureMethod),"acceptedFileTypes"in e&&r(6,E=e.acceptedFileTypes),"addFile"in e&&r(8,_=e.addFile),"addFiles"in e&&r(9,g=e.addFiles),"browse"in e&&r(10,T=e.browse),"fireSync"in e&&r(11,I=e.fireSync),"getFile"in e&&r(12,y=e.getFile),"getFiles"in e&&r(13,R=e.getFiles),"moveFile"in e&&r(14,A=e.moveFile),"prepareFile"in e&&r(15,D=e.prepareFile),"prepareFiles"in e&&r(16,w=e.prepareFiles),"processFile"in e&&r(17,v=e.processFile),"processFiles"in e&&r(18,S=e.processFiles),"removeFile"in e&&r(19,M=e.removeFile),"removeFiles"in e&&r(20,b=e.removeFiles),"sort"in e&&r(21,P=e.sort)},t=O(t),[l,c,u,p,f,h,E,i,_,g,T,I,y,R,A,D,w,v,S,M,b,P,o,n,function(e){re[e?"unshift":"push"]((()=>{i=e,r(7,i)}))}]}class Ia extends we{constructor(e){super(),De(this,e,Ta,ga,E,{registerPlugin:22,isSupported:23,class:0,id:1,name:2,allowMultiple:3,required:4,captureMethod:5,acceptedFileTypes:6,addFile:8,addFiles:9,browse:10,fireSync:11,getFile:12,getFiles:13,moveFile:14,prepareFile:15,prepareFiles:16,processFile:17,processFiles:18,removeFile:19,removeFiles:20,sort:21})}get registerPlugin(){return this.$$.ctx[22]}get isSupported(){return this.$$.ctx[23]}get class(){return this.$$.ctx[0]}set class(e){this.$$set({class:e}),de()}get id(){return this.$$.ctx[1]}set id(e){this.$$set({id:e}),de()}get name(){return this.$$.ctx[2]}set name(e){this.$$set({name:e}),de()}get allowMultiple(){return this.$$.ctx[3]}set allowMultiple(e){this.$$set({allowMultiple:e}),de()}get required(){return this.$$.ctx[4]}set required(e){this.$$set({required:e}),de()}get captureMethod(){return this.$$.ctx[5]}set captureMethod(e){this.$$set({captureMethod:e}),de()}get acceptedFileTypes(){return this.$$.ctx[6]}set acceptedFileTypes(e){this.$$set({acceptedFileTypes:e}),de()}get addFile(){return this.$$.ctx[8]}set addFile(e){this.$$set({addFile:e}),de()}get addFiles(){return this.$$.ctx[9]}set addFiles(e){this.$$set({addFiles:e}),de()}get browse(){return this.$$.ctx[10]}set browse(e){this.$$set({browse:e}),de()}get fireSync(){return this.$$.ctx[11]}set fireSync(e){this.$$set({fireSync:e}),de()}get getFile(){return this.$$.ctx[12]}set getFile(e){this.$$set({getFile:e}),de()}get getFiles(){return this.$$.ctx[13]}set getFiles(e){this.$$set({getFiles:e}),de()}get moveFile(){return this.$$.ctx[14]}set moveFile(e){this.$$set({moveFile:e}),de()}get prepareFile(){return this.$$.ctx[15]}set prepareFile(e){this.$$set({prepareFile:e}),de()}get prepareFiles(){return this.$$.ctx[16]}set prepareFiles(e){this.$$set({prepareFiles:e}),de()}get processFile(){return this.$$.ctx[17]}set processFile(e){this.$$set({processFile:e}),de()}get processFiles(){return this.$$.ctx[18]}set processFiles(e){this.$$set({processFiles:e}),de()}get removeFile(){return this.$$.ctx[19]}set removeFile(e){this.$$set({removeFile:e}),de()}get removeFiles(){return this.$$.ctx[20]}set removeFiles(e){this.$$set({removeFiles:e}),de()}get sort(){return this.$$.ctx[21]}set sort(e){this.$$set({sort:e}),de()}}
/*!
 * FilePondPluginImageExifOrientation 1.0.11
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const ya=65496,Ra=65505,Aa=1165519206,Oa=18761,Da=274,wa=65280,va=(e,t,r=!1)=>e.getUint16(t,r),Sa=(e,t,r=!1)=>e.getUint32(t,r);let Ma;const ba="undefined"!=typeof window&&void 0!==window.document?new Image:{};ba.onload=()=>Ma=ba.naturalWidth>ba.naturalHeight,ba.src="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=";const Pa=({addFilter:e,utils:t})=>{const{Type:r,isFile:o}=t;return e("DID_LOAD_ITEM",((e,{query:t})=>new Promise(((r,n)=>{const i=e.file;if(!(o(i)&&(e=>/^image\/jpeg/.test(e.type))(i)&&t("GET_ALLOW_IMAGE_EXIF_ORIENTATION")&&Ma))return r(e);(e=>new Promise(((t,r)=>{const o=new FileReader;o.onload=function(e){const r=new DataView(e.target.result);if(va(r,0)!==ya)return void t(-1);const o=r.byteLength;let n=2;for(;n<o;){const e=va(r,n);if(n+=2,e===Ra){if(Sa(r,n+=2)!==Aa)break;const e=va(r,n+=6)===Oa;n+=Sa(r,n+4,e);const o=va(r,n,e);n+=2;for(let i=0;i<o;i++)if(va(r,n+12*i,e)===Da)return void t(va(r,n+12*i+8,e))}else{if((e&wa)!==wa)break;n+=va(r,n)}}t(-1)},o.readAsArrayBuffer(e.slice(0,65536))})))(i).then((t=>{e.setMetadata("exif",{orientation:t}),r(e)}))})))),{options:{allowImageExifOrientation:[!0,r.BOOLEAN]}}};"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Pa}))
/*!
 * FilePondPluginImagePreview 4.6.7
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */;const La=(e,t)=>Ga(e.x*t,e.y*t),Ca=(e,t)=>Ga(e.x+t.x,e.y+t.y),Na=(e,t,r)=>{const o=Math.cos(t),n=Math.sin(t),i=Ga(e.x-r.x,e.y-r.y);return Ga(r.x+o*i.x-n*i.y,r.y+n*i.x+o*i.y)},Ga=(e=0,t=0)=>({x:e,y:t}),xa=(e,t,r=1,o)=>"string"==typeof e?parseFloat(e)*r:"number"==typeof e?e*(o?t[o]:Math.min(t.width,t.height)):void 0,Fa=e=>null!=e,Ua=(e,t)=>Object.keys(t).forEach((r=>e.setAttribute(r,t[r]))),qa=(e,t)=>{const r=document.createElementNS("http://www.w3.org/2000/svg",e);return t&&Ua(r,t),r},Ba={contain:"xMidYMid meet",cover:"xMidYMid slice"},Va={left:"start",center:"middle",right:"end"},$a=e=>t=>qa(e,{id:t.id}),ka={image:e=>{const t=qa("image",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return t.onload=()=>{t.setAttribute("opacity",e.opacity||1)},t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.src),t},rect:$a("rect"),ellipse:$a("ellipse"),text:$a("text"),path:$a("path"),line:e=>{const t=qa("g",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round"}),r=qa("line");t.appendChild(r);const o=qa("path");t.appendChild(o);const n=qa("path");return t.appendChild(n),t}},Ya={rect:e=>Ua(e,a(a({},e.rect),e.styles)),ellipse:e=>{const t=e.rect.x+.5*e.rect.width,r=e.rect.y+.5*e.rect.height,o=.5*e.rect.width,n=.5*e.rect.height;return Ua(e,a({cx:t,cy:r,rx:o,ry:n},e.styles))},image:(e,t)=>{Ua(e,l(a(a({},e.rect),e.styles),{preserveAspectRatio:Ba[t.fit]||"none"}))},text:(e,t,r,o)=>{const n=xa(t.fontSize,r,o),i=t.fontFamily||"sans-serif",s=t.fontWeight||"normal",c=Va[t.textAlign]||"start";Ua(e,l(a(a({},e.rect),e.styles),{"stroke-width":0,"font-weight":s,"font-size":n,"font-family":i,"text-anchor":c})),e.text!==t.text&&(e.text=t.text,e.textContent=t.text.length?t.text:" ")},path:(e,t,r,o)=>{var n;Ua(e,l(a({},e.styles),{fill:"none",d:(n=t.points.map((e=>({x:xa(e.x,r,o,"width"),y:xa(e.y,r,o,"height")}))),n.map(((e,t)=>`${0===t?"M":"L"} ${e.x} ${e.y}`)).join(" "))}))},line:(e,t,r,o)=>{Ua(e,l(a(a({},e.rect),e.styles),{fill:"none"}));const n=e.childNodes[0],i=e.childNodes[1],s=e.childNodes[2],c=e.rect,d={x:e.rect.x+e.rect.width,y:e.rect.y+e.rect.height};if(Ua(n,{x1:c.x,y1:c.y,x2:d.x,y2:d.y}),!t.lineDecoration)return;i.style.display="none",s.style.display="none";const u=(e=>{const t=Math.sqrt(e.x*e.x+e.y*e.y);return 0===t?{x:0,y:0}:Ga(e.x/t,e.y/t)})({x:d.x-c.x,y:d.y-c.y}),p=xa(.05,r,o);if(-1!==t.lineDecoration.indexOf("arrow-begin")){const e=La(u,p),t=Ca(c,e),r=Na(c,2,t),o=Na(c,-2,t);Ua(i,{style:"display:block;",d:`M${r.x},${r.y} L${c.x},${c.y} L${o.x},${o.y}`})}if(-1!==t.lineDecoration.indexOf("arrow-end")){const e=La(u,-p),t=Ca(d,e),r=Na(d,2,t),o=Na(d,-2,t);Ua(s,{style:"display:block;",d:`M${r.x},${r.y} L${d.x},${d.y} L${o.x},${o.y}`})}}},Ha=(e,t,r,o,n)=>{"path"!==t&&(e.rect=((e,t,r=1)=>{let o=xa(e.x,t,r,"width")||xa(e.left,t,r,"width"),n=xa(e.y,t,r,"height")||xa(e.top,t,r,"height"),i=xa(e.width,t,r,"width"),s=xa(e.height,t,r,"height"),a=xa(e.right,t,r,"width"),l=xa(e.bottom,t,r,"height");return Fa(n)||(n=Fa(s)&&Fa(l)?t.height-s-l:l),Fa(o)||(o=Fa(i)&&Fa(a)?t.width-i-a:a),Fa(i)||(i=Fa(o)&&Fa(a)?t.width-o-a:0),Fa(s)||(s=Fa(n)&&Fa(l)?t.height-n-l:0),{x:o||0,y:n||0,width:i||0,height:s||0}})(r,o,n)),e.styles=((e,t,r)=>{const o=e.borderStyle||e.lineStyle||"solid",n=e.backgroundColor||e.fontColor||"transparent",i=e.borderColor||e.lineColor||"transparent",s=xa(e.borderWidth||e.lineWidth,t,r);return{"stroke-linecap":e.lineCap||"round","stroke-linejoin":e.lineJoin||"round","stroke-width":s||0,"stroke-dasharray":"string"==typeof o?"":o.map((e=>xa(e,t,r))).join(","),stroke:i,fill:n,opacity:e.opacity||1}})(r,o,n),Ya[t](e,r,o,n)},Wa=["x","y","left","top","right","bottom","width","height"],za=e=>{const[t,r]=e,o=r.points?{}:Wa.reduce(((e,t)=>{var o;return e[t]="string"==typeof(o=r[t])&&/%/.test(o)?parseFloat(o)/100:o,e}),{});return[t,a(a({zIndex:0},r),o)]},Xa=(e,t)=>e[1].zIndex>t[1].zIndex?1:e[1].zIndex<t[1].zIndex?-1:0,ja=e=>e.utils.createView({name:"image-preview-markup",tag:"svg",ignoreRect:!0,mixins:{apis:["width","height","crop","markup","resize","dirty"]},write:({root:e,props:t})=>{if(!t.dirty)return;const{crop:r,resize:o,markup:n}=t,i=t.width,s=t.height;let a=r.width,l=r.height;if(o){const{size:e}=o;let t=e&&e.width,r=e&&e.height;const n=o.mode,i=o.upscale;t&&!r&&(r=t),r&&!t&&(t=r);const s=a<t&&l<r;if(!s||s&&i){let e=t/a,o=r/l;if("force"===n)a=t,l=r;else{let t;"cover"===n?t=Math.max(e,o):"contain"===n&&(t=Math.min(e,o)),a*=t,l*=t}}}const c={width:i,height:s};e.element.setAttribute("width",c.width),e.element.setAttribute("height",c.height);const d=Math.min(i/a,s/l);e.element.innerHTML="";const u=e.query("GET_IMAGE_PREVIEW_MARKUP_FILTER");n.filter(u).map(za).sort(Xa).forEach((t=>{const[r,o]=t,n=((e,t)=>ka[e](t))(r,o);Ha(n,r,o,c,d),e.element.appendChild(n)}))}}),Qa=(e,t)=>({x:e,y:t}),Za=(e,t)=>Qa(e.x-t.x,e.y-t.y),Ka=(e,t)=>Math.sqrt(((e,t)=>((e,t)=>e.x*t.x+e.y*t.y)(Za(e,t),Za(e,t)))(e,t)),Ja=(e,t)=>{const r=e,o=t,n=1.5707963267948966-t,i=Math.sin(1.5707963267948966),s=Math.sin(o),a=Math.sin(n),l=Math.cos(n),c=r/i;return Qa(l*(c*s),l*(c*a))},el=(e,t,r,o)=>{const n=o.x>.5?1-o.x:o.x,i=o.y>.5?1-o.y:o.y,s=2*n*e.width,a=2*i*e.height,l=((e,t)=>{const r=e.width,o=e.height,n=Ja(r,t),i=Ja(o,t),s=Qa(e.x+Math.abs(n.x),e.y-Math.abs(n.y)),a=Qa(e.x+e.width+Math.abs(i.y),e.y+Math.abs(i.x)),l=Qa(e.x-Math.abs(i.y),e.y+e.height-Math.abs(i.x));return{width:Ka(s,a),height:Ka(s,l)}})(t,r);return Math.max(l.width/s,l.height/a)},tl=(e,t)=>{let r=e.width,o=r*t;o>e.height&&(o=e.height,r=o/t);return{x:.5*(e.width-r),y:.5*(e.height-o),width:r,height:o}},rl=(e,t={})=>{let{zoom:r,rotation:o,center:n,aspectRatio:i}=t;i||(i=e.height/e.width);const s=((e,t,r=1)=>{const o=e.height/e.width;let n=t,i=1,s=o;s>n&&(s=n,i=s/o);const a=Math.max(1/i,n/s),l=e.width/(r*a*i);return{width:l,height:l*t}})(e,i,r),a={x:.5*s.width,y:.5*s.height},l={x:0,y:0,width:s.width,height:s.height,center:a},c=void 0===t.scaleToFit||t.scaleToFit,d=r*el(e,tl(l,i),o,c?n:{x:.5,y:.5});return{widthFloat:s.width/d,heightFloat:s.height/d,width:Math.round(s.width/d),height:Math.round(s.height/d)}},ol={type:"spring",stiffness:.5,damping:.45,mass:10},nl=e=>e.utils.createView({name:"image-clip",tag:"div",ignoreRect:!0,mixins:{apis:["crop","markup","resize","width","height","dirty","background"],styles:["width","height","opacity"],animations:{opacity:{type:"tween",duration:250}}},didWriteView:function({root:e,props:t}){t.background&&(e.element.style.backgroundColor=t.background)},create:({root:t,props:r})=>{t.ref.image=t.appendChildView(t.createChildView((e=>e.utils.createView({name:"image-canvas-wrapper",tag:"div",ignoreRect:!0,mixins:{apis:["crop","width","height"],styles:["originX","originY","translateX","translateY","scaleX","scaleY","rotateZ"],animations:{originX:ol,originY:ol,scaleX:ol,scaleY:ol,translateX:ol,translateY:ol,rotateZ:ol}},create:({root:t,props:r})=>{r.width=r.image.width,r.height=r.image.height,t.ref.bitmap=t.appendChildView(t.createChildView((e=>e.utils.createView({name:"image-bitmap",ignoreRect:!0,mixins:{styles:["scaleX","scaleY"]},create:({root:e,props:t})=>{e.appendChild(t.image)}}))(e),{image:r.image}))},write:({root:e,props:t})=>{const{flip:r}=t.crop,{bitmap:o}=e.ref;o.scaleX=r.horizontal?-1:1,o.scaleY=r.vertical?-1:1}}))(e),Object.assign({},r))),t.ref.createMarkup=()=>{t.ref.markup||(t.ref.markup=t.appendChildView(t.createChildView(ja(e),Object.assign({},r))))},t.ref.destroyMarkup=()=>{t.ref.markup&&(t.removeChildView(t.ref.markup),t.ref.markup=null)};const o=t.query("GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR");null!==o&&(t.element.dataset.transparencyIndicator="grid"===o?o:"color")},write:({root:e,props:t,shouldOptimize:r})=>{const{crop:o,markup:n,resize:i,dirty:s,width:a,height:l}=t;e.ref.image.crop=o;const c={x:0,y:0,width:a,height:l,center:{x:.5*a,y:.5*l}},d={width:e.ref.image.width,height:e.ref.image.height},u={x:o.center.x*d.width,y:o.center.y*d.height},p={x:c.center.x-d.width*o.center.x,y:c.center.y-d.height*o.center.y},f=2*Math.PI+o.rotation%(2*Math.PI),h=o.aspectRatio||d.height/d.width,E=void 0===o.scaleToFit||o.scaleToFit,m=el(d,tl(c,h),f,E?o.center:{x:.5,y:.5}),_=o.zoom*m;n&&n.length?(e.ref.createMarkup(),e.ref.markup.width=a,e.ref.markup.height=l,e.ref.markup.resize=i,e.ref.markup.dirty=s,e.ref.markup.markup=n,e.ref.markup.crop=rl(d,o)):e.ref.markup&&e.ref.destroyMarkup();const g=e.ref.image;if(r)return g.originX=null,g.originY=null,g.translateX=null,g.translateY=null,g.rotateZ=null,g.scaleX=null,void(g.scaleY=null);g.originX=u.x,g.originY=u.y,g.translateX=p.x,g.translateY=p.y,g.rotateZ=f,g.scaleX=_,g.scaleY=_}});let il='<svg width="500" height="200" viewBox="0 0 500 200" preserveAspectRatio="none">\n    <defs>\n        <radialGradient id="gradient-__UID__" cx=".5" cy="1.25" r="1.15">\n            <stop offset=\'50%\' stop-color=\'#000000\'/>\n            <stop offset=\'56%\' stop-color=\'#0a0a0a\'/>\n            <stop offset=\'63%\' stop-color=\'#262626\'/>\n            <stop offset=\'69%\' stop-color=\'#4f4f4f\'/>\n            <stop offset=\'75%\' stop-color=\'#808080\'/>\n            <stop offset=\'81%\' stop-color=\'#b1b1b1\'/>\n            <stop offset=\'88%\' stop-color=\'#dadada\'/>\n            <stop offset=\'94%\' stop-color=\'#f6f6f6\'/>\n            <stop offset=\'100%\' stop-color=\'#ffffff\'/>\n        </radialGradient>\n        <mask id="mask-__UID__">\n            <rect x="0" y="0" width="500" height="200" fill="url(#gradient-__UID__)"></rect>\n        </mask>\n    </defs>\n    <rect x="0" width="500" height="200" fill="currentColor" mask="url(#mask-__UID__)"></rect>\n</svg>',sl=0;const al=function(){self.onmessage=e=>{createImageBitmap(e.data.message.file).then((t=>{self.postMessage({id:e.data.id,message:t},[t])}))}},ll=function(){self.onmessage=e=>{const t=e.data.message.imageData,r=e.data.message.colorMatrix,o=t.data,n=o.length,i=r[0],s=r[1],a=r[2],l=r[3],c=r[4],d=r[5],u=r[6],p=r[7],f=r[8],h=r[9],E=r[10],m=r[11],_=r[12],g=r[13],T=r[14],I=r[15],y=r[16],R=r[17],A=r[18],O=r[19];let D=0,w=0,v=0,S=0,M=0;for(;D<n;D+=4)w=o[D]/255,v=o[D+1]/255,S=o[D+2]/255,M=o[D+3]/255,o[D]=Math.max(0,Math.min(255*(w*i+v*s+S*a+M*l+c),255)),o[D+1]=Math.max(0,Math.min(255*(w*d+v*u+S*p+M*f+h),255)),o[D+2]=Math.max(0,Math.min(255*(w*E+v*m+S*_+M*g+T),255)),o[D+3]=Math.max(0,Math.min(255*(w*I+v*y+S*R+M*A+O),255));self.postMessage({id:e.data.id,message:t},[t.data.buffer])}},cl={1:()=>[1,0,0,1,0,0],2:e=>[-1,0,0,1,e,0],3:(e,t)=>[-1,0,0,-1,e,t],4:(e,t)=>[1,0,0,-1,0,t],5:()=>[0,1,1,0,0,0],6:(e,t)=>[0,1,-1,0,t,0],7:(e,t)=>[0,-1,-1,0,t,e],8:e=>[0,-1,1,0,0,e]},dl=(e,t,r,o)=>{t=Math.round(t),r=Math.round(r);const n=document.createElement("canvas");n.width=t,n.height=r;const i=n.getContext("2d");return o>=5&&o<=8&&([t,r]=[r,t]),((e,t,r,o)=>{-1!==o&&e.transform.apply(e,cl[o](t,r))})(i,t,r,o),i.drawImage(e,0,0,t,r),n},ul=e=>/^image/.test(e.type)&&!/svg/.test(e.type),pl=(e,t)=>Math.floor(Math.sqrt(e/(t/4))),fl=(e,t)=>{(t=t||document.createElement("canvas")).width=e.width,t.height=e.height;return t.getContext("2d").drawImage(e,0,0),t},hl=e=>{const t=e.utils.createView({name:"image-preview-overlay",tag:"div",ignoreRect:!0,create:({root:e,props:t})=>{if(document.querySelector("base")){const e=window.location.href.replace(window.location.hash,"");il=il.replace(/url\(\#/g,"url("+e+"#")}sl++,e.element.classList.add(`filepond--image-preview-overlay-${t.status}`),e.element.innerHTML=il.replace(/__UID__/g,sl)},mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:25}}}});const r=(e=>e.utils.createView({name:"image-preview",tag:"div",ignoreRect:!0,mixins:{apis:["image","crop","markup","resize","dirty","background"],styles:["translateY","scaleX","scaleY","opacity"],animations:{scaleX:ol,scaleY:ol,translateY:ol,opacity:{type:"tween",duration:400}}},create:({root:t,props:r})=>{t.ref.clip=t.appendChildView(t.createChildView(nl(e),{id:r.id,image:r.image,crop:r.crop,markup:r.markup,resize:r.resize,dirty:r.dirty,background:r.background}))},write:({root:e,props:t,shouldOptimize:r})=>{const{clip:o}=e.ref,{image:n,crop:i,markup:s,resize:a,dirty:l}=t;if(o.crop=i,o.markup=s,o.resize=a,o.dirty=l,o.opacity=r?0:1,r||e.rect.element.hidden)return;const c=n.height/n.width;let d=i.aspectRatio||c;const u=e.rect.inner.width,p=e.rect.inner.height;let f=e.query("GET_IMAGE_PREVIEW_HEIGHT");const h=e.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),E=e.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),m=e.query("GET_PANEL_ASPECT_RATIO"),_=e.query("GET_ALLOW_MULTIPLE");m&&!_&&(f=u*m,d=m);let g=null!==f?f:Math.max(h,Math.min(u*d,E)),T=g/d;T>u&&(T=u,g=T*d),g>p&&(g=p,T=p/d),o.width=T,o.height=g}}))(e),{createWorker:o}=e.utils,n=(e,t,r)=>new Promise((n=>{e.ref.imageData||(e.ref.imageData=r.getContext("2d").getImageData(0,0,r.width,r.height));const i=(e=>{let t;try{t=new ImageData(e.width,e.height)}catch(r){t=document.createElement("canvas").getContext("2d").createImageData(e.width,e.height)}return t.data.set(new Uint8ClampedArray(e.data)),t})(e.ref.imageData);if(!t||20!==t.length)return r.getContext("2d").putImageData(i,0,0),n();const s=o(ll);s.post({imageData:i,colorMatrix:t},(e=>{r.getContext("2d").putImageData(e,0,0),s.terminate(),n()}),[i.data.buffer])})),i=({root:e,props:t,image:o})=>{const n=t.id,i=e.query("GET_ITEM",{id:n});if(!i)return;const s=i.getMetadata("crop")||{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},zoom:1,rotation:0,aspectRatio:null},a=e.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR");let l,c,d=!1;e.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(l=i.getMetadata("markup")||[],c=i.getMetadata("resize"),d=!0);const u=e.appendChildView(e.createChildView(r,{id:n,image:o,crop:s,resize:c,markup:l,dirty:d,background:a,opacity:0,scaleX:1.15,scaleY:1.15,translateY:15}),e.childViews.length);e.ref.images.push(u),u.opacity=1,u.scaleX=1,u.scaleY=1,u.translateY=0,setTimeout((()=>{e.dispatch("DID_IMAGE_PREVIEW_SHOW",{id:n})}),250)},s=({root:e})=>{e.ref.overlayShadow.opacity=1,e.ref.overlayError.opacity=0,e.ref.overlaySuccess.opacity=0},a=({root:e})=>{e.ref.overlayShadow.opacity=.25,e.ref.overlayError.opacity=1};return e.utils.createView({name:"image-preview-wrapper",create:({root:e})=>{e.ref.images=[],e.ref.imageData=null,e.ref.imageViewBin=[],e.ref.overlayShadow=e.appendChildView(e.createChildView(t,{opacity:0,status:"idle"})),e.ref.overlaySuccess=e.appendChildView(e.createChildView(t,{opacity:0,status:"success"})),e.ref.overlayError=e.appendChildView(e.createChildView(t,{opacity:0,status:"failure"}))},styles:["height"],apis:["height"],destroy:({root:e})=>{e.ref.images.forEach((e=>{e.image.width=1,e.image.height=1}))},didWriteView:({root:e})=>{e.ref.images.forEach((e=>{e.dirty=!1}))},write:e.utils.createRoute({DID_IMAGE_PREVIEW_DRAW:({root:e})=>{const t=e.ref.images[e.ref.images.length-1];t.translateY=0,t.scaleX=1,t.scaleY=1,t.opacity=1},DID_IMAGE_PREVIEW_CONTAINER_CREATE:({root:e,props:t})=>{const{id:r}=t,o=e.query("GET_ITEM",r);if(!o)return;((e,t)=>{let r=new Image;r.onload=()=>{const e=r.naturalWidth,o=r.naturalHeight;r=null,t(e,o)},r.src=e})(URL.createObjectURL(o.file),((t,o)=>{e.dispatch("DID_IMAGE_PREVIEW_CALCULATE_SIZE",{id:r,width:t,height:o})}))},DID_FINISH_CALCULATE_PREVIEWSIZE:({root:e,props:t})=>{const{id:r}=t,s=e.query("GET_ITEM",r);if(!s)return;const a=URL.createObjectURL(s.file),l=()=>{var e;(e=a,new Promise(((t,r)=>{const o=new Image;o.crossOrigin="Anonymous",o.onload=()=>{t(o)},o.onerror=e=>{r(e)},o.src=e}))).then(c)},c=r=>{URL.revokeObjectURL(a);const o=(s.getMetadata("exif")||{}).orientation||-1;let{width:l,height:c}=r;if(!l||!c)return;o>=5&&o<=8&&([l,c]=[c,l]);const d=Math.max(1,.75*window.devicePixelRatio),u=e.query("GET_IMAGE_PREVIEW_ZOOM_FACTOR")*d,p=c/l,f=e.rect.element.width,h=e.rect.element.height;let E=f,m=E*p;p>1?(E=Math.min(l,f*u),m=E*p):(m=Math.min(c,h*u),E=m/p);const _=dl(r,E,m,o),g=()=>{const o=e.query("GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR")?(e=>{const t=Math.min(10/e.width,10/e.height),r=document.createElement("canvas"),o=r.getContext("2d"),n=r.width=Math.ceil(e.width*t),i=r.height=Math.ceil(e.height*t);o.drawImage(e,0,0,n,i);let s=null;try{s=o.getImageData(0,0,n,i).data}catch(p){return null}const a=s.length;let l=0,c=0,d=0,u=0;for(;u<a;u+=4)l+=s[u]*s[u],c+=s[u+1]*s[u+1],d+=s[u+2]*s[u+2];return l=pl(l,a),c=pl(c,a),d=pl(d,a),{r:l,g:c,b:d}})(data):null;s.setMetadata("color",o,!0),"close"in r&&r.close(),e.ref.overlayShadow.opacity=1,i({root:e,props:t,image:_})},T=s.getMetadata("filter");T?n(e,T,_).then(g):g()};if((e=>{const t=window.navigator.userAgent.match(/Firefox\/([0-9]+)\./);return!((t?parseInt(t[1]):null)<=58)&&"createImageBitmap"in window&&ul(e)})(s.file)){const e=o(al);e.post({file:s.file},(t=>{e.terminate(),t?c(t):l()}))}else l()},DID_UPDATE_ITEM_METADATA:({root:e,props:t,action:r})=>{if(!/crop|filter|markup|resize/.test(r.change.key))return;if(!e.ref.images.length)return;const o=e.query("GET_ITEM",{id:t.id});if(o)if(/filter/.test(r.change.key)){const t=e.ref.images[e.ref.images.length-1];n(e,r.change.value,t.image)}else if(/crop|markup|resize/.test(r.change.key)){const r=o.getMetadata("crop"),n=e.ref.images[e.ref.images.length-1];if(Math.abs(r.aspectRatio-n.crop.aspectRatio)>1e-5){const r=(({root:e})=>{const t=e.ref.images.shift();return t.opacity=0,t.translateY=-15,e.ref.imageViewBin.push(t),t})({root:e});i({root:e,props:t,image:fl(r.image)})}else(({root:e,props:t})=>{const r=e.query("GET_ITEM",{id:t.id});if(!r)return;const o=e.ref.images[e.ref.images.length-1];o.crop=r.getMetadata("crop"),o.background=e.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR"),e.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(o.dirty=!0,o.resize=r.getMetadata("resize"),o.markup=r.getMetadata("markup"))})({root:e,props:t})}},DID_THROW_ITEM_LOAD_ERROR:a,DID_THROW_ITEM_PROCESSING_ERROR:a,DID_THROW_ITEM_INVALID:a,DID_COMPLETE_ITEM_PROCESSING:({root:e})=>{e.ref.overlayShadow.opacity=.25,e.ref.overlaySuccess.opacity=1},DID_START_ITEM_PROCESSING:s,DID_REVERT_ITEM_PROCESSING:s},(({root:e})=>{const t=e.ref.imageViewBin.filter((e=>0===e.opacity));e.ref.imageViewBin=e.ref.imageViewBin.filter((e=>e.opacity>0)),t.forEach((t=>((e,t)=>{e.removeChildView(t),t.image.width=1,t.image.height=1,t._destroy()})(e,t))),t.length=0}))})},El=e=>{const{addFilter:t,utils:r}=e,{Type:o,createRoute:n,isFile:i}=r,s=hl(e);return t("CREATE_VIEW",(e=>{const{is:t,view:r,query:o}=e;if(!t("file")||!o("GET_ALLOW_IMAGE_PREVIEW"))return;const a=({root:e})=>{e.ref.shouldRescale=!0};r.registerWriter(n({DID_RESIZE_ROOT:a,DID_STOP_RESIZE:a,DID_LOAD_ITEM:({root:e,props:t})=>{const{id:n}=t,a=o("GET_ITEM",n);if(!a||!i(a.file)||a.archived)return;const l=a.file;if(!(e=>/^image/.test(e.type))(l))return;if(!o("GET_IMAGE_PREVIEW_FILTER_ITEM")(a))return;const c="createImageBitmap"in(window||{}),d=o("GET_IMAGE_PREVIEW_MAX_FILE_SIZE");if(!c&&d&&l.size>d)return;e.ref.imagePreview=r.appendChildView(r.createChildView(s,{id:n}));const u=e.query("GET_IMAGE_PREVIEW_HEIGHT");u&&e.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:a.id,height:u});const p=!c&&l.size>o("GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE");e.dispatch("DID_IMAGE_PREVIEW_CONTAINER_CREATE",{id:n},p)},DID_IMAGE_PREVIEW_CALCULATE_SIZE:({root:e,action:t})=>{e.ref.imageWidth=t.width,e.ref.imageHeight=t.height,e.ref.shouldRescale=!0,e.ref.shouldDrawPreview=!0,e.dispatch("KICK")},DID_UPDATE_ITEM_METADATA:({root:e,action:t})=>{"crop"===t.change.key&&(e.ref.shouldRescale=!0)}},(({root:e,props:t})=>{e.ref.imagePreview&&(e.rect.element.hidden||(e.ref.shouldRescale&&(((e,t)=>{if(!e.ref.imagePreview)return;let{id:r}=t;const o=e.query("GET_ITEM",{id:r});if(!o)return;const n=e.query("GET_PANEL_ASPECT_RATIO"),i=e.query("GET_ITEM_PANEL_ASPECT_RATIO"),s=e.query("GET_IMAGE_PREVIEW_HEIGHT");if(n||i||s)return;let{imageWidth:a,imageHeight:l}=e.ref;if(!a||!l)return;const c=e.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),d=e.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),u=(o.getMetadata("exif")||{}).orientation||-1;if(u>=5&&u<=8&&([a,l]=[l,a]),!ul(o.file)||e.query("GET_IMAGE_PREVIEW_UPSCALE")){const e=2048/a;a*=e,l*=e}const p=l/a,f=(o.getMetadata("crop")||{}).aspectRatio||p;let h=Math.max(c,Math.min(l,d));const E=e.rect.element.width,m=Math.min(E*f,h);e.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:o.id,height:m})})(e,t),e.ref.shouldRescale=!1),e.ref.shouldDrawPreview&&(requestAnimationFrame((()=>{e.dispatch("DID_FINISH_CALCULATE_PREVIEWSIZE",{id:t.id})})),e.ref.shouldDrawPreview=!1)))})))})),{options:{allowImagePreview:[!0,o.BOOLEAN],imagePreviewFilterItem:[()=>!0,o.FUNCTION],imagePreviewHeight:[null,o.INT],imagePreviewMinHeight:[44,o.INT],imagePreviewMaxHeight:[256,o.INT],imagePreviewMaxFileSize:[null,o.INT],imagePreviewZoomFactor:[2,o.INT],imagePreviewUpscale:[!1,o.BOOLEAN],imagePreviewMaxInstantPreviewFileSize:[1e6,o.INT],imagePreviewTransparencyIndicator:[null,o.STRING],imagePreviewCalculateAverageImageColor:[!1,o.BOOLEAN],imagePreviewMarkupShow:[!0,o.BOOLEAN],imagePreviewMarkupFilter:[()=>!0,o.FUNCTION]}}};"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:El}));export{K as A,d as B,Se as C,T as D,R as E,A as F,y as G,M as H,c as I,_ as J,X as K,j as L,L as M,g as N,D as O,zt as P,F as Q,Ia as R,we as S,z as T,U,B as V,f as W,Ea as X,Pa as Y,El as Z,V as a,q as b,k as c,P as d,C as e,b as f,Y as g,W as h,De as i,Ie as j,G as k,x as l,ye as m,H as n,Re as o,ge as p,Te as q,he as r,E as s,N as t,_e as u,Ae as v,Ee as w,me as x,ee as y,J as z};
