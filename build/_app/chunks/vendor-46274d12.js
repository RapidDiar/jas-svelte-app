var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,s=(t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,a=(e,t)=>{for(var r in t||(t={}))o.call(t,r)&&s(e,r,t[r]);if(n)for(var r of n(t))i.call(t,r)&&s(e,r,t[r]);return e},l=(e,n)=>t(e,r(n));function c(){}const d=e=>e;function u(e,t){for(const r in t)e[r]=t[r];return e}function p(e){return e()}function f(){return Object.create(null)}function h(e){e.forEach(p)}function E(e){return"function"==typeof e}function m(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let _;function g(e,t){return _||(_=document.createElement("a")),_.href=t,e===_.href}function T(e,...t){if(null==e)return c;const r=e.subscribe(...t);return r.unsubscribe?()=>r.unsubscribe():r}function I(e,t,r){e.$$.on_destroy.push(T(t,r))}function y(e,t,r,n){if(e){const o=R(e,t,r,n);return e[0](o)}}function R(e,t,r,n){return e[1]&&n?u(r.ctx.slice(),e[1](n(t))):r.ctx}function A(e,t,r,n){if(e[2]&&n){const o=e[2](n(r));if(void 0===t.dirty)return o;if("object"==typeof o){const e=[],r=Math.max(t.dirty.length,o.length);for(let n=0;n<r;n+=1)e[n]=t.dirty[n]|o[n];return e}return t.dirty|o}return t.dirty}function O(e,t,r,n,o,i){if(o){const s=R(t,r,n,i);e.p(s,o)}}function D(e){if(e.ctx.length>32){const t=[],r=e.ctx.length/32;for(let e=0;e<r;e++)t[e]=-1;return t}return-1}function w(e){const t={};for(const r in e)"$"!==r[0]&&(t[r]=e[r]);return t}function v(e,t,r){return e.set(r),t}const S="undefined"!=typeof window;let M=S?()=>window.performance.now():()=>Date.now(),b=S?e=>requestAnimationFrame(e):c;const P=new Set;function L(e){P.forEach((t=>{t.c(e)||(P.delete(t),t.f())})),0!==P.size&&b(L)}let C=!1;function N(e,t,r,n){for(;e<t;){const o=e+(t-e>>1);r(o)<=n?e=o+1:t=o}return e}function x(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t.host?t:document}function G(e){const t=$("style");return function(e,t){!function(e,t){e.appendChild(t)}(e.head||e,t)}(x(e),t),t}function F(e,t){if(C){for(!function(e){if(e.hydrate_init)return;e.hydrate_init=!0;let t=e.childNodes;if("HEAD"===e.nodeName){const e=[];for(let r=0;r<t.length;r++){const n=t[r];void 0!==n.claim_order&&e.push(n)}t=e}const r=new Int32Array(t.length+1),n=new Int32Array(t.length);r[0]=-1;let o=0;for(let l=0;l<t.length;l++){const e=t[l].claim_order,i=(o>0&&t[r[o]].claim_order<=e?o+1:N(1,o,(e=>t[r[e]].claim_order),e))-1;n[l]=r[i]+1;const s=i+1;r[s]=l,o=Math.max(s,o)}const i=[],s=[];let a=t.length-1;for(let l=r[o]+1;0!=l;l=n[l-1]){for(i.push(t[l-1]);a>=l;a--)s.push(t[a]);a--}for(;a>=0;a--)s.push(t[a]);i.reverse(),s.sort(((e,t)=>e.claim_order-t.claim_order));for(let l=0,c=0;l<s.length;l++){for(;c<i.length&&s[l].claim_order>=i[c].claim_order;)c++;const t=c<i.length?i[c]:null;e.insertBefore(s[l],t)}}(e),(void 0===e.actual_end_child||null!==e.actual_end_child&&e.actual_end_child.parentElement!==e)&&(e.actual_end_child=e.firstChild);null!==e.actual_end_child&&void 0===e.actual_end_child.claim_order;)e.actual_end_child=e.actual_end_child.nextSibling;t!==e.actual_end_child?void 0===t.claim_order&&t.parentNode===e||e.insertBefore(t,e.actual_end_child):e.actual_end_child=t.nextSibling}else t.parentNode!==e&&e.appendChild(t)}function U(e,t,r){C&&!r?F(e,t):t.parentNode===e&&t.nextSibling==r||e.insertBefore(t,r||null)}function q(e){e.parentNode.removeChild(e)}function B(e,t){for(let r=0;r<e.length;r+=1)e[r]&&e[r].d(t)}function $(e){return document.createElement(e)}function V(e){return document.createTextNode(e)}function k(){return V(" ")}function Y(){return V("")}function H(e,t,r,n){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r,n)}function W(e){return function(t){return t.preventDefault(),e.call(this,t)}}function z(e,t,r){null==r?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function X(e){return""===e?null:+e}function j(e){return Array.from(e.childNodes)}function Q(e,t,r,n,o=!1){!function(e){void 0===e.claim_info&&(e.claim_info={last_index:0,total_claimed:0})}(e);const i=(()=>{for(let n=e.claim_info.last_index;n<e.length;n++){const i=e[n];if(t(i)){const t=r(i);return void 0===t?e.splice(n,1):e[n]=t,o||(e.claim_info.last_index=n),i}}for(let n=e.claim_info.last_index-1;n>=0;n--){const i=e[n];if(t(i)){const t=r(i);return void 0===t?e.splice(n,1):e[n]=t,o?void 0===t&&e.claim_info.last_index--:e.claim_info.last_index=n,i}}return n()})();return i.claim_order=e.claim_info.total_claimed,e.claim_info.total_claimed+=1,i}function Z(e,t,r,n){return Q(e,(e=>e.nodeName===t),(e=>{const t=[];for(let n=0;n<e.attributes.length;n++){const o=e.attributes[n];r[o.name]||t.push(o.name)}t.forEach((t=>e.removeAttribute(t)))}),(()=>n?function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}(t):$(t)))}function K(e,t){return Q(e,(e=>3===e.nodeType),(e=>{const r=""+t;if(e.data.startsWith(r)){if(e.data.length!==r.length)return e.splitText(r.length)}else e.data=r}),(()=>V(t)),!0)}function J(e){return K(e," ")}function ee(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function te(e,t){e.value=null==t?"":t}function re(e,t,r,n){e.style.setProperty(t,r,n?"important":"")}function ne(e,t){for(let r=0;r<e.options.length;r+=1){const n=e.options[r];if(n.__value===t)return void(n.selected=!0)}}function oe(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function ie(e,t=document.body){return Array.from(t.querySelectorAll(e))}const se=new Set;let ae,le=0;function ce(e,t,r,n,o,i,s,a=0){const l=16.666/n;let c="{\n";for(let m=0;m<=1;m+=l){const e=t+(r-t)*i(m);c+=100*m+`%{${s(e,1-e)}}\n`}const d=c+`100% {${s(r,1-r)}}\n}`,u=`__svelte_${function(e){let t=5381,r=e.length;for(;r--;)t=(t<<5)-t^e.charCodeAt(r);return t>>>0}(d)}_${a}`,p=x(e);se.add(p);const f=p.__svelte_stylesheet||(p.__svelte_stylesheet=G(e).sheet),h=p.__svelte_rules||(p.__svelte_rules={});h[u]||(h[u]=!0,f.insertRule(`@keyframes ${u} ${d}`,f.cssRules.length));const E=e.style.animation||"";return e.style.animation=`${E?`${E}, `:""}${u} ${n}ms linear ${o}ms 1 both`,le+=1,u}function de(e,t){const r=(e.style.animation||"").split(", "),n=r.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),o=r.length-n.length;o&&(e.style.animation=n.join(", "),le-=o,le||b((()=>{le||(se.forEach((e=>{const t=e.__svelte_stylesheet;let r=t.cssRules.length;for(;r--;)t.deleteRule(r);e.__svelte_rules={}})),se.clear())})))}function ue(e){ae=e}function pe(){if(!ae)throw new Error("Function called outside component initialization");return ae}function fe(e){pe().$$.on_mount.push(e)}function he(e){pe().$$.after_update.push(e)}function Ee(e,t){pe().$$.context.set(e,t)}const me=[],_e=[],ge=[],Te=[],Ie=Promise.resolve();let ye=!1;function Re(e){ge.push(e)}let Ae=!1;const Oe=new Set;function De(){if(!Ae){Ae=!0;do{for(let e=0;e<me.length;e+=1){const t=me[e];ue(t),we(t.$$)}for(ue(null),me.length=0;_e.length;)_e.pop()();for(let e=0;e<ge.length;e+=1){const t=ge[e];Oe.has(t)||(Oe.add(t),t())}ge.length=0}while(me.length);for(;Te.length;)Te.pop()();ye=!1,Ae=!1,Oe.clear()}}function we(e){if(null!==e.fragment){e.update(),h(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Re)}}let ve;function Se(e,t,r){e.dispatchEvent(function(e,t,r=!1){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,r,!1,t),n}(`${t?"intro":"outro"}${r}`))}const Me=new Set;let be;function Pe(){be={r:0,c:[],p:be}}function Le(){be.r||h(be.c),be=be.p}function Ce(e,t){e&&e.i&&(Me.delete(e),e.i(t))}function Ne(e,t,r,n){if(e&&e.o){if(Me.has(e))return;Me.add(e),be.c.push((()=>{Me.delete(e),n&&(r&&e.d(1),n())})),e.o(t)}}const xe={duration:0};function Ge(e,t,r,n){let o=t(e,r),i=n?0:1,s=null,a=null,l=null;function u(){l&&de(e,l)}function p(e,t){const r=e.b-i;return t*=Math.abs(r),{a:i,b:e.b,d:r,duration:t,start:e.start,end:e.start+t,group:e.group}}function f(t){const{delay:r=0,duration:n=300,easing:f=d,tick:E=c,css:m}=o||xe,_={start:M()+r,b:t};t||(_.group=be,be.r+=1),s||a?a=_:(m&&(u(),l=ce(e,i,t,n,r,f,m)),t&&E(0,1),s=p(_,n),Re((()=>Se(e,t,"start"))),function(e){let t;0===P.size&&b(L),new Promise((r=>{P.add(t={c:e,f:r})}))}((t=>{if(a&&t>a.start&&(s=p(a,n),a=null,Se(e,s.b,"start"),m&&(u(),l=ce(e,i,s.b,s.duration,0,f,o.css))),s)if(t>=s.end)E(i=s.b,1-i),Se(e,s.b,"end"),a||(s.b?u():--s.group.r||h(s.group.c)),s=null;else if(t>=s.start){const e=t-s.start;i=s.a+s.d*f(e/s.duration),E(i,1-i)}return!(!s&&!a)})))}return{run(e){E(o)?(ve||(ve=Promise.resolve(),ve.then((()=>{ve=null}))),ve).then((()=>{o=o(),f(e)})):f(e)},end(){u(),s=a=null}}}function Fe(e,t){const r={},n={},o={$$scope:1};let i=e.length;for(;i--;){const s=e[i],a=t[i];if(a){for(const e in s)e in a||(n[e]=1);for(const e in a)o[e]||(r[e]=a[e],o[e]=1);e[i]=a}else for(const e in s)o[e]=1}for(const s in n)s in r||(r[s]=void 0);return r}function Ue(e){return"object"==typeof e&&null!==e?e:{}}function qe(e){e&&e.c()}function Be(e,t){e&&e.l(t)}function $e(e,t,r,n){const{fragment:o,on_mount:i,on_destroy:s,after_update:a}=e.$$;o&&o.m(t,r),n||Re((()=>{const t=i.map(p).filter(E);s?s.push(...t):h(t),e.$$.on_mount=[]})),a.forEach(Re)}function Ve(e,t){const r=e.$$;null!==r.fragment&&(h(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function ke(e,t){-1===e.$$.dirty[0]&&(me.push(e),ye||(ye=!0,Ie.then(De)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ye(e,t,r,n,o,i,s,a=[-1]){const l=ae;ue(e);const d=e.$$={fragment:null,ctx:null,props:i,update:c,not_equal:o,bound:f(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:t.context||[]),callbacks:f(),dirty:a,skip_bound:!1,root:t.target||l.$$.root};s&&s(d.root);let u=!1;if(d.ctx=r?r(e,t.props||{},((t,r,...n)=>{const i=n.length?n[0]:r;return d.ctx&&o(d.ctx[t],d.ctx[t]=i)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](i),u&&ke(e,t)),r})):[],d.update(),u=!0,h(d.before_update),d.fragment=!!n&&n(d.ctx),t.target){if(t.hydrate){C=!0;const e=j(t.target);d.fragment&&d.fragment.l(e),e.forEach(q)}else d.fragment&&d.fragment.c();t.intro&&Ce(e.$$.fragment),$e(e,t.target,t.anchor,t.customElement),C=!1,De()}ue(l)}class He{$destroy(){Ve(this,1),this.$destroy=c}$on(e,t){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const e=r.indexOf(t);-1!==e&&r.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const We=[];function ze(e,t=c){let r;const n=new Set;function o(t){if(m(e,t)&&(e=t,r)){const t=!We.length;for(const r of n)r[1](),We.push(r,e);if(t){for(let e=0;e<We.length;e+=2)We[e][0](We[e+1]);We.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(i,s=c){const a=[i,s];return n.add(a),1===n.size&&(r=t(o)||c),i(e),()=>{n.delete(a),0===n.size&&(r(),r=null)}}}}function Xe(e,t,r){const n=!Array.isArray(e),o=n?[e]:e,i=t.length<2;return{subscribe:ze(r,(e=>{let r=!1;const s=[];let a=0,l=c;const d=()=>{if(a)return;l();const r=t(n?s[0]:s,e);i?e(r):l=E(r)?r:c},u=o.map(((e,t)=>T(e,(e=>{s[t]=e,a&=~(1<<t),r&&d()}),(()=>{a|=1<<t}))));return r=!0,d(),function(){h(u),l()}})).subscribe}}var je={exports:{}},Qe=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}},Ze=Qe,Ke=Object.prototype.toString;function Je(e){return"[object Array]"===Ke.call(e)}function et(e){return void 0===e}function tt(e){return null!==e&&"object"==typeof e}function rt(e){if("[object Object]"!==Ke.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function nt(e){return"[object Function]"===Ke.call(e)}function ot(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),Je(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}var it={isArray:Je,isArrayBuffer:function(e){return"[object ArrayBuffer]"===Ke.call(e)},isBuffer:function(e){return null!==e&&!et(e)&&null!==e.constructor&&!et(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:tt,isPlainObject:rt,isUndefined:et,isDate:function(e){return"[object Date]"===Ke.call(e)},isFile:function(e){return"[object File]"===Ke.call(e)},isBlob:function(e){return"[object Blob]"===Ke.call(e)},isFunction:nt,isStream:function(e){return tt(e)&&nt(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:ot,merge:function e(){var t={};function r(r,n){rt(t[n])&&rt(r)?t[n]=e(t[n],r):rt(r)?t[n]=e({},r):Je(r)?t[n]=r.slice():t[n]=r}for(var n=0,o=arguments.length;n<o;n++)ot(arguments[n],r);return t},extend:function(e,t,r){return ot(t,(function(t,n){e[n]=r&&"function"==typeof t?Ze(t,r):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}},st=it;function at(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var lt=function(e,t,r){if(!t)return e;var n;if(r)n=r(t);else if(st.isURLSearchParams(t))n=t.toString();else{var o=[];st.forEach(t,(function(e,t){null!=e&&(st.isArray(e)?t+="[]":e=[e],st.forEach(e,(function(e){st.isDate(e)?e=e.toISOString():st.isObject(e)&&(e=JSON.stringify(e)),o.push(at(t)+"="+at(e))})))})),n=o.join("&")}if(n){var i=e.indexOf("#");-1!==i&&(e=e.slice(0,i)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e},ct=it;function dt(){this.handlers=[]}dt.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},dt.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},dt.prototype.forEach=function(e){ct.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var ut=dt,pt=it,ft=function(e){return!(!e||!e.__CANCEL__)},ht=it,Et=function(e,t,r,n,o){return e.config=t,r&&(e.code=r),e.request=n,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e},mt=function(e,t,r,n,o){var i=new Error(e);return Et(i,t,r,n,o)},_t=mt,gt=it,Tt=gt.isStandardBrowserEnv()?{write:function(e,t,r,n,o,i){var s=[];s.push(e+"="+encodeURIComponent(t)),gt.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),gt.isString(n)&&s.push("path="+n),gt.isString(o)&&s.push("domain="+o),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},It=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)},yt=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e},Rt=it,At=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],Ot=it,Dt=Ot.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function n(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=n(window.location.href),function(t){var r=Ot.isString(t)?n(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0},wt=it,vt=function(e,t,r){var n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(_t("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)},St=Tt,Mt=lt,bt=function(e,t){return e&&!It(t)?yt(e,t):t},Pt=function(e){var t,r,n,o={};return e?(Rt.forEach(e.split("\n"),(function(e){if(n=e.indexOf(":"),t=Rt.trim(e.substr(0,n)).toLowerCase(),r=Rt.trim(e.substr(n+1)),t){if(o[t]&&At.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([r]):o[t]?o[t]+", "+r:r}})),o):o},Lt=Dt,Ct=mt,Nt=function(e){return new Promise((function(t,r){var n=e.data,o=e.headers;wt.isFormData(n)&&delete o["Content-Type"];var i=new XMLHttpRequest;if(e.auth){var s=e.auth.username||"",a=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.Authorization="Basic "+btoa(s+":"+a)}var l=bt(e.baseURL,e.url);if(i.open(e.method.toUpperCase(),Mt(l,e.params,e.paramsSerializer),!0),i.timeout=e.timeout,i.onreadystatechange=function(){if(i&&4===i.readyState&&(0!==i.status||i.responseURL&&0===i.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in i?Pt(i.getAllResponseHeaders()):null,o={data:e.responseType&&"text"!==e.responseType?i.response:i.responseText,status:i.status,statusText:i.statusText,headers:n,config:e,request:i};vt(t,r,o),i=null}},i.onabort=function(){i&&(r(Ct("Request aborted",e,"ECONNABORTED",i)),i=null)},i.onerror=function(){r(Ct("Network Error",e,null,i)),i=null},i.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),r(Ct(t,e,"ECONNABORTED",i)),i=null},wt.isStandardBrowserEnv()){var c=(e.withCredentials||Lt(l))&&e.xsrfCookieName?St.read(e.xsrfCookieName):void 0;c&&(o[e.xsrfHeaderName]=c)}if("setRequestHeader"in i&&wt.forEach(o,(function(e,t){void 0===n&&"content-type"===t.toLowerCase()?delete o[t]:i.setRequestHeader(t,e)})),wt.isUndefined(e.withCredentials)||(i.withCredentials=!!e.withCredentials),e.responseType)try{i.responseType=e.responseType}catch(d){if("json"!==e.responseType)throw d}"function"==typeof e.onDownloadProgress&&i.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&i.upload&&i.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){i&&(i.abort(),r(e),i=null)})),n||(n=null),i.send(n)}))},xt=it,Gt=function(e,t){ht.forEach(e,(function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])}))},Ft={"Content-Type":"application/x-www-form-urlencoded"};function Ut(e,t){!xt.isUndefined(e)&&xt.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var qt,Bt={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(qt=Nt),qt),transformRequest:[function(e,t){return Gt(t,"Accept"),Gt(t,"Content-Type"),xt.isFormData(e)||xt.isArrayBuffer(e)||xt.isBuffer(e)||xt.isStream(e)||xt.isFile(e)||xt.isBlob(e)?e:xt.isArrayBufferView(e)?e.buffer:xt.isURLSearchParams(e)?(Ut(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):xt.isObject(e)?(Ut(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};Bt.headers={common:{Accept:"application/json, text/plain, */*"}},xt.forEach(["delete","get","head"],(function(e){Bt.headers[e]={}})),xt.forEach(["post","put","patch"],(function(e){Bt.headers[e]=xt.merge(Ft)}));var $t=Bt,Vt=it,kt=function(e,t,r){return pt.forEach(r,(function(r){e=r(e,t)})),e},Yt=ft,Ht=$t;function Wt(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var zt=it,Xt=function(e,t){t=t||{};var r={},n=["url","method","data"],o=["headers","auth","proxy","params"],i=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function a(e,t){return zt.isPlainObject(e)&&zt.isPlainObject(t)?zt.merge(e,t):zt.isPlainObject(t)?zt.merge({},t):zt.isArray(t)?t.slice():t}function l(n){zt.isUndefined(t[n])?zt.isUndefined(e[n])||(r[n]=a(void 0,e[n])):r[n]=a(e[n],t[n])}zt.forEach(n,(function(e){zt.isUndefined(t[e])||(r[e]=a(void 0,t[e]))})),zt.forEach(o,l),zt.forEach(i,(function(n){zt.isUndefined(t[n])?zt.isUndefined(e[n])||(r[n]=a(void 0,e[n])):r[n]=a(void 0,t[n])})),zt.forEach(s,(function(n){n in t?r[n]=a(e[n],t[n]):n in e&&(r[n]=a(void 0,e[n]))}));var c=n.concat(o).concat(i).concat(s),d=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===c.indexOf(e)}));return zt.forEach(d,l),r},jt=it,Qt=lt,Zt=ut,Kt=function(e){return Wt(e),e.headers=e.headers||{},e.data=kt(e.data,e.headers,e.transformRequest),e.headers=Vt.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Vt.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||Ht.adapter)(e).then((function(t){return Wt(e),t.data=kt(t.data,t.headers,e.transformResponse),t}),(function(t){return Yt(t)||(Wt(e),t&&t.response&&(t.response.data=kt(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},Jt=Xt;function er(e){this.defaults=e,this.interceptors={request:new Zt,response:new Zt}}er.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=Jt(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[Kt,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)r=r.then(t.shift(),t.shift());return r},er.prototype.getUri=function(e){return e=Jt(this.defaults,e),Qt(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},jt.forEach(["delete","get","head","options"],(function(e){er.prototype[e]=function(t,r){return this.request(Jt(r||{},{method:e,url:t,data:(r||{}).data}))}})),jt.forEach(["post","put","patch"],(function(e){er.prototype[e]=function(t,r,n){return this.request(Jt(n||{},{method:e,url:t,data:r}))}}));var tr=er;function rr(e){this.message=e}rr.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},rr.prototype.__CANCEL__=!0;var nr=rr,or=nr;function ir(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;e((function(e){r.reason||(r.reason=new or(e),t(r.reason))}))}ir.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},ir.source=function(){var e;return{token:new ir((function(t){e=t})),cancel:e}};var sr=ir,ar=it,lr=Qe,cr=tr,dr=Xt;function ur(e){var t=new cr(e),r=lr(cr.prototype.request,t);return ar.extend(r,cr.prototype,t),ar.extend(r,t),r}var pr=ur($t);pr.Axios=cr,pr.create=function(e){return ur(dr(pr.defaults,e))},pr.Cancel=nr,pr.CancelToken=sr,pr.isCancel=ft,pr.all=function(e){return Promise.all(e)},pr.spread=function(e){return function(t){return e.apply(null,t)}},pr.isAxiosError=function(e){return"object"==typeof e&&!0===e.isAxiosError},je.exports=pr,je.exports.default=pr;var fr=je.exports;var hr=function({mustBeMetaMask:e=!1,silent:t=!1,timeout:r=3e3}={}){!function(){if("boolean"!=typeof e)throw new Error("@metamask/detect-provider: Expected option 'mustBeMetaMask' to be a boolean.");if("boolean"!=typeof t)throw new Error("@metamask/detect-provider: Expected option 'silent' to be a boolean.");if("number"!=typeof r)throw new Error("@metamask/detect-provider: Expected option 'timeout' to be a number.")}();let n=!1;return new Promise((o=>{function i(){if(n)return;n=!0,window.removeEventListener("ethereum#initialized",i);const{ethereum:r}=window;if(!r||e&&!r.isMetaMask){const n=e&&r?"Non-MetaMask window.ethereum detected.":"Unable to detect window.ethereum.";!t&&console.error("@metamask/detect-provider:",n),o(null)}else o(r)}window.ethereum?i():(window.addEventListener("ethereum#initialized",i,{once:!0}),setTimeout((()=>{i()}),r))}))};
/*!
 * FilePond 4.28.2
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const Er=(e,t)=>{for(const r in e)e.hasOwnProperty(r)&&t(r,e[r])},mr=e=>{const t={};return Er(e,(r=>{((e,t,r)=>{"function"!=typeof r?Object.defineProperty(e,t,a({},r)):e[t]=r})(t,r,e[r])})),t},_r=(e,t,r=null)=>{if(null===r)return e.getAttribute(t)||e.hasAttribute(t);e.setAttribute(t,r)},gr=["svg","path"],Tr=e=>gr.includes(e),Ir=(e,t,r={})=>{"object"==typeof t&&(r=t,t=null);const n=Tr(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return t&&(Tr(e)?_r(n,"class",t):n.className=t),Er(r,((e,t)=>{_r(n,e,t)})),n},yr=(e,t)=>(e,r)=>(void 0!==r?t.splice(r,0,e):t.push(e),e),Rr=(e,t)=>r=>(t.splice(t.indexOf(r),1),r.element.parentNode&&e.removeChild(r.element),r),Ar="undefined"!=typeof window&&void 0!==window.document,Or=()=>Ar,Dr="children"in(Or()?Ir("svg"):{})?e=>e.children.length:e=>e.childNodes.length,wr=(e,t,r,n)=>{const o=r[0]||e.left,i=r[1]||e.top,s=o+e.width,l=i+e.height*(n[1]||1),c={element:a({},e),inner:{left:e.left,top:e.top,right:e.right,bottom:e.bottom},outer:{left:o,top:i,right:s,bottom:l}};return t.filter((e=>!e.isRectIgnored())).map((e=>e.rect)).forEach((e=>{vr(c.inner,a({},e.inner)),vr(c.outer,a({},e.outer))})),Sr(c.inner),c.outer.bottom+=c.element.marginBottom,c.outer.right+=c.element.marginRight,Sr(c.outer),c},vr=(e,t)=>{t.top+=e.top,t.right+=e.left,t.bottom+=e.top,t.left+=e.left,t.bottom>e.bottom&&(e.bottom=t.bottom),t.right>e.right&&(e.right=t.right)},Sr=e=>{e.width=e.right-e.left,e.height=e.bottom-e.top},Mr=e=>"number"==typeof e,br=e=>e<.5?2*e*e:(4-2*e)*e-1,Pr={spring:({stiffness:e=.5,damping:t=.75,mass:r=10}={})=>{let n=null,o=null,i=0,s=!1;const a=mr({interpolate:(l,c)=>{if(s)return;if(!Mr(n)||!Mr(o))return s=!0,void(i=0);i+=-(o-n)*e/r,o+=i,i*=t,((e,t,r,n=.001)=>Math.abs(e-t)<n&&Math.abs(r)<n)(o,n,i)||c?(o=n,i=0,s=!0,a.onupdate(o),a.oncomplete(o)):a.onupdate(o)},target:{set:e=>{if(Mr(e)&&!Mr(o)&&(o=e),null===n&&(n=e,o=e),n=e,o===n||void 0===n)return s=!0,i=0,a.onupdate(o),void a.oncomplete(o);s=!1},get:()=>n},resting:{get:()=>s},onupdate:e=>{},oncomplete:e=>{}});return a},tween:({duration:e=500,easing:t=br,delay:r=0}={})=>{let n,o,i=null,s=!0,a=!1,l=null;const c=mr({interpolate:(d,u)=>{s||null===l||(null===i&&(i=d),d-i<r||(n=d-i-r,n>=e||u?(n=1,o=a?0:1,c.onupdate(o*l),c.oncomplete(o*l),s=!0):(o=n/e,c.onupdate((n>=0?t(a?1-o:o):0)*l))))},target:{get:()=>a?0:l,set:e=>{if(null===l)return l=e,c.onupdate(e),void c.oncomplete(e);e<l?(l=1,a=!0):(a=!1,l=e),s=!1,i=null}},resting:{get:()=>s},onupdate:e=>{},oncomplete:e=>{}});return c}},Lr=(e,t,r,n=!1)=>{(t=Array.isArray(t)?t:[t]).forEach((t=>{e.forEach((e=>{let o=e,i=()=>r[e],s=t=>r[e]=t;"object"==typeof e&&(o=e.key,i=e.getter||i,s=e.setter||s),t[o]&&!n||(t[o]={get:i,set:s})}))}))},Cr=e=>null!=e,Nr={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},xr=(e,t)=>{if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const r in t)if(t[r]!==e[r])return!0;return!1},Gr=(e,{opacity:t,perspective:r,translateX:n,translateY:o,scaleX:i,scaleY:s,rotateX:a,rotateY:l,rotateZ:c,originX:d,originY:u,width:p,height:f})=>{let h="",E="";(Cr(d)||Cr(u))&&(E+=`transform-origin: ${d||0}px ${u||0}px;`),Cr(r)&&(h+=`perspective(${r}px) `),(Cr(n)||Cr(o))&&(h+=`translate3d(${n||0}px, ${o||0}px, 0) `),(Cr(i)||Cr(s))&&(h+=`scale3d(${Cr(i)?i:1}, ${Cr(s)?s:1}, 1) `),Cr(c)&&(h+=`rotateZ(${c}rad) `),Cr(a)&&(h+=`rotateX(${a}rad) `),Cr(l)&&(h+=`rotateY(${l}rad) `),h.length&&(E+=`transform:${h};`),Cr(t)&&(E+=`opacity:${t};`,0===t&&(E+="visibility:hidden;"),t<1&&(E+="pointer-events:none;")),Cr(f)&&(E+=`height:${f}px;`),Cr(p)&&(E+=`width:${p}px;`);const m=e.elementCurrentStyle||"";E.length===m.length&&E===m||(e.style.cssText=E,e.elementCurrentStyle=E)},Fr={styles:({mixinConfig:e,viewProps:t,viewInternalAPI:r,viewExternalAPI:n,view:o})=>{const i=a({},t),s={};Lr(e,[r,n],t);const l=()=>o.rect?wr(o.rect,o.childViews,[t.translateX||0,t.translateY||0],[t.scaleX||0,t.scaleY||0]):null;return r.rect={get:l},n.rect={get:l},e.forEach((e=>{t[e]=void 0===i[e]?Nr[e]:i[e]})),{write:()=>{if(xr(s,t))return Gr(o.element,t),Object.assign(s,a({},t)),!0},destroy:()=>{}}},listeners:({mixinConfig:e,viewProps:t,viewInternalAPI:r,viewExternalAPI:n,viewState:o,view:i})=>{const s=[],a=(l=i.element,(e,t)=>{l.addEventListener(e,t)});var l;const c=(e=>(t,r)=>{e.removeEventListener(t,r)})(i.element);return n.on=(e,t)=>{s.push({type:e,fn:t}),a(e,t)},n.off=(e,t)=>{s.splice(s.findIndex((r=>r.type===e&&r.fn===t)),1),c(e,t)},{write:()=>!0,destroy:()=>{s.forEach((e=>{c(e.type,e.fn)}))}}},animations:({mixinConfig:e,viewProps:t,viewInternalAPI:r,viewExternalAPI:n})=>{const o=a({},t),i=[];return Er(e,((e,s)=>{const l=((e,t,r)=>{const n=e[t]&&"object"==typeof e[t][r]?e[t][r]:e[t]||e,o="string"==typeof n?n:n.type,i="object"==typeof n?a({},n):{};return Pr[o]?Pr[o](i):null})(s);if(!l)return;l.onupdate=r=>{t[e]=r},l.target=o[e];Lr([{key:e,setter:e=>{l.target!==e&&(l.target=e)},getter:()=>t[e]}],[r,n],t,!0),i.push(l)})),{write:e=>{let t=document.hidden,r=!0;return i.forEach((n=>{n.resting||(r=!1),n.interpolate(e,t)})),r},destroy:()=>{}}},apis:({mixinConfig:e,viewProps:t,viewExternalAPI:r})=>{Lr(e,r,t)}},Ur=(e={},t={},r={})=>(t.layoutCalculated||(e.paddingTop=parseInt(r.paddingTop,10)||0,e.marginTop=parseInt(r.marginTop,10)||0,e.marginRight=parseInt(r.marginRight,10)||0,e.marginBottom=parseInt(r.marginBottom,10)||0,e.marginLeft=parseInt(r.marginLeft,10)||0,t.layoutCalculated=!0),e.left=t.offsetLeft||0,e.top=t.offsetTop||0,e.width=t.offsetWidth||0,e.height=t.offsetHeight||0,e.right=e.left+e.width,e.bottom=e.top+e.height,e.scrollTop=t.scrollTop,e.hidden=null===t.offsetParent,e),qr=({tag:e="div",name:t=null,attributes:r={},read:n=(()=>{}),write:o=(()=>{}),create:i=(()=>{}),destroy:s=(()=>{}),filterFrameActionsForChild:c=((e,t)=>t),didCreateView:d=(()=>{}),didWriteView:u=(()=>{}),ignoreRect:p=!1,ignoreRectUpdate:f=!1,mixins:h=[]}={})=>(E,m={})=>{const _=Ir(e,`filepond--${t}`,r),g=window.getComputedStyle(_,null),T=Ur();let I=null,y=!1;const R=[],A=[],O={},D={},w=[o],v=[n],S=[s],M=()=>_,b=()=>R.concat(),P=()=>I||(I=wr(T,R,[0,0],[1,1]),I),L={element:{get:M},style:{get:()=>g},childViews:{get:b}},C=l(a({},L),{rect:{get:P},ref:{get:()=>O},is:e=>t===e,appendChild:(x=_,(e,t)=>{void 0!==t&&x.children[t]?x.insertBefore(e,x.children[t]):x.appendChild(e)}),createChildView:(N=E,(e,t)=>e(N,t)),linkView:e=>(R.push(e),e),unlinkView:e=>{R.splice(R.indexOf(e),1)},appendChildView:yr(0,R),removeChildView:Rr(_,R),registerWriter:e=>w.push(e),registerReader:e=>v.push(e),registerDestroyer:e=>S.push(e),invalidateLayout:()=>_.layoutCalculated=!1,dispatch:E.dispatch,query:E.query});var N,x;const G={element:{get:M},childViews:{get:b},rect:{get:P},resting:{get:()=>y},isRectIgnored:()=>p,_read:()=>{I=null,R.forEach((e=>e._read()));!(f&&T.width&&T.height)&&Ur(T,_,g);const e={root:U,props:m,rect:T};v.forEach((t=>t(e)))},_write:(e,t,r)=>{let n=0===t.length;return w.forEach((o=>{!1===o({props:m,root:U,actions:t,timestamp:e,shouldOptimize:r})&&(n=!1)})),A.forEach((t=>{!1===t.write(e)&&(n=!1)})),R.filter((e=>!!e.element.parentNode)).forEach((o=>{o._write(e,c(o,t),r)||(n=!1)})),R.forEach(((o,i)=>{o.element.parentNode||(U.appendChild(o.element,i),o._read(),o._write(e,c(o,t),r),n=!1)})),y=n,u({props:m,root:U,actions:t,timestamp:e}),n},_destroy:()=>{A.forEach((e=>e.destroy())),S.forEach((e=>{e({root:U,props:m})})),R.forEach((e=>e._destroy()))}},F=l(a({},L),{rect:{get:()=>T}});Object.keys(h).sort(((e,t)=>"styles"===e?1:"styles"===t?-1:0)).forEach((e=>{const t=Fr[e]({mixinConfig:h[e],viewProps:m,viewState:D,viewInternalAPI:C,viewExternalAPI:G,view:mr(F)});t&&A.push(t)}));const U=mr(C);i({root:U,props:m});const q=Dr(_);return R.forEach(((e,t)=>{U.appendChild(e.element,q+t)})),d(U),mr(G)},Br=(e,t)=>({root:r,props:n,actions:o=[],timestamp:i,shouldOptimize:s})=>{o.filter((t=>e[t.type])).forEach((t=>e[t.type]({root:r,props:n,action:t.data,timestamp:i,shouldOptimize:s}))),t&&t({root:r,props:n,actions:o,timestamp:i,shouldOptimize:s})},$r=(e,t)=>t.parentNode.insertBefore(e,t),Vr=(e,t)=>t.parentNode.insertBefore(e,t.nextSibling),kr=e=>Array.isArray(e),Yr=e=>null==e,Hr=e=>e.trim(),Wr=e=>""+e,zr=e=>"boolean"==typeof e,Xr=e=>zr(e)?e:"true"===e,jr=e=>"string"==typeof e,Qr=e=>Mr(e)?e:jr(e)?Wr(e).replace(/[a-z]+/gi,""):0,Zr=e=>parseInt(Qr(e),10),Kr=e=>parseFloat(Qr(e)),Jr=e=>Mr(e)&&isFinite(e)&&Math.floor(e)===e,en=(e,t=1e3)=>{if(Jr(e))return e;let r=Wr(e).trim();return/MB$/i.test(r)?(r=r.replace(/MB$i/,"").trim(),Zr(r)*t*t):/KB/i.test(r)?(r=r.replace(/KB$i/,"").trim(),Zr(r)*t):Zr(r)},tn=e=>"function"==typeof e,rn={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},nn=(e,t,r,n,o)=>{if(null===t)return null;if("function"==typeof t)return t;const i={url:"GET"===r||"PATCH"===r?`?${e}=`:"",method:r,headers:o,withCredentials:!1,timeout:n,onload:null,ondata:null,onerror:null};if(jr(t))return i.url=t,i;if(Object.assign(i,t),jr(i.headers)){const e=i.headers.split(/:(.+)/);i.headers={header:e[0],value:e[1]}}return i.withCredentials=Xr(i.withCredentials),i},on=e=>"object"==typeof e&&null!==e,sn=e=>kr(e)?"array":(e=>null===e)(e)?"null":Jr(e)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(e)?"bytes":(e=>on(e)&&jr(e.url)&&on(e.process)&&on(e.revert)&&on(e.restore)&&on(e.fetch))(e)?"api":typeof e,an={array:(e,t=",")=>Yr(e)?[]:kr(e)?e:Wr(e).split(t).map(Hr).filter((e=>e.length)),boolean:Xr,int:e=>"bytes"===sn(e)?en(e):Zr(e),number:Kr,float:Kr,bytes:en,string:e=>tn(e)?e:Wr(e),function:e=>(e=>{let t=self,r=e.split("."),n=null;for(;n=r.shift();)if(t=t[n],!t)return null;return t})(e),serverapi:e=>(e=>{const t={};return t.url=jr(e)?e:e.url||"",t.timeout=e.timeout?parseInt(e.timeout,10):0,t.headers=e.headers?e.headers:{},Er(rn,(r=>{t[r]=nn(r,e[r],rn[r],t.timeout,t.headers)})),t.process=e.process||jr(e)||e.url?t.process:null,t.remove=e.remove||null,delete t.headers,t})(e),object:e=>{try{return JSON.parse(e.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",'))}catch(t){return null}}},ln=(e,t,r)=>{if(e===t)return e;let n=sn(e);if(n!==r){const t=(o=e,an[r](o));if(n=sn(t),null===t)throw`Trying to assign value with incorrect type to "${option}", allowed type: "${r}"`;e=t}var o;return e},cn=e=>{const t={};return Er(e,(r=>{const n=e[r];t[r]=((e,t)=>{let r=e;return{enumerable:!0,get:()=>r,set:n=>{r=ln(n,e,t)}}})(n[0],n[1])})),mr(t)},dn=(e,t="-")=>e.split(/(?=[A-Z])/).map((e=>e.toLowerCase())).join(t),un=e=>(t,r,n)=>{const o={};return Er(e,(e=>{const r=dn(e,"_").toUpperCase();o[`SET_${r}`]=o=>{try{n.options[e]=o.value}catch(i){}t(`DID_SET_${r}`,{value:n.options[e]})}})),o},pn=e=>t=>{const r={};return Er(e,(e=>{r[`GET_${dn(e,"_").toUpperCase()}`]=r=>t.options[e]})),r},fn=1,hn=2,En=3,mn=4,_n=5,gn=()=>Math.random().toString(36).substr(2,9),Tn=(e,t)=>e.splice(t,1),In=()=>{const e=[],t=(t,r)=>{Tn(e,e.findIndex((e=>e.event===t&&(e.cb===r||!r))))},r=(t,r,n)=>{e.filter((e=>e.event===t)).map((e=>e.cb)).forEach((e=>((e,t)=>{t?e():document.hidden?Promise.resolve(1).then(e):setTimeout(e,0)})((()=>e(...r)),n)))};return{fireSync:(e,...t)=>{r(e,t,!0)},fire:(e,...t)=>{r(e,t,!1)},on:(t,r)=>{e.push({event:t,cb:r})},onOnce:(r,n)=>{e.push({event:r,cb:(...e)=>{t(r,n),n(...e)}})},off:t}},yn=(e,t,r)=>{Object.getOwnPropertyNames(e).filter((e=>!r.includes(e))).forEach((r=>Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))))},Rn=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],An=e=>{const t={};return yn(e,t,Rn),t},On=1,Dn=2,wn=9,vn=3,Sn=5,Mn=6,bn=10,Pn=7,Ln=8,Cn=1,Nn=2,xn=3,Gn=e=>/[^0-9]+/.exec(e),Fn=()=>Gn(1.1.toLocaleString())[0],Un={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},qn=[],Bn=(e,t,r)=>new Promise(((n,o)=>{const i=qn.filter((t=>t.key===e)).map((e=>e.cb));if(0===i.length)return void n(t);const s=i.shift();i.reduce(((e,t)=>e.then((e=>t(e,r)))),s(t,r)).then((e=>n(e))).catch((e=>o(e)))})),$n=(e,t,r)=>qn.filter((t=>t.key===e)).map((e=>e.cb(t,r))),Vn=(e,t)=>qn.push({key:e,cb:t}),kn=()=>a({},Yn),Yn={id:[null,Un.STRING],name:["filepond",Un.STRING],disabled:[!1,Un.BOOLEAN],className:[null,Un.STRING],required:[!1,Un.BOOLEAN],captureMethod:[null,Un.STRING],allowSyncAcceptAttribute:[!0,Un.BOOLEAN],allowDrop:[!0,Un.BOOLEAN],allowBrowse:[!0,Un.BOOLEAN],allowPaste:[!0,Un.BOOLEAN],allowMultiple:[!1,Un.BOOLEAN],allowReplace:[!0,Un.BOOLEAN],allowRevert:[!0,Un.BOOLEAN],allowRemove:[!0,Un.BOOLEAN],allowProcess:[!0,Un.BOOLEAN],allowReorder:[!1,Un.BOOLEAN],allowDirectoriesOnly:[!1,Un.BOOLEAN],storeAsFile:[!1,Un.BOOLEAN],forceRevert:[!1,Un.BOOLEAN],maxFiles:[null,Un.INT],checkValidity:[!1,Un.BOOLEAN],itemInsertLocationFreedom:[!0,Un.BOOLEAN],itemInsertLocation:["before",Un.STRING],itemInsertInterval:[75,Un.INT],dropOnPage:[!1,Un.BOOLEAN],dropOnElement:[!0,Un.BOOLEAN],dropValidation:[!1,Un.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],Un.ARRAY],instantUpload:[!0,Un.BOOLEAN],maxParallelUploads:[2,Un.INT],allowMinimumUploadDuration:[!0,Un.BOOLEAN],chunkUploads:[!1,Un.BOOLEAN],chunkForce:[!1,Un.BOOLEAN],chunkSize:[5e6,Un.INT],chunkRetryDelays:[[500,1e3,3e3],Un.ARRAY],server:[null,Un.SERVER_API],fileSizeBase:[1e3,Un.INT],labelDecimalSeparator:[Fn(),Un.STRING],labelThousandsSeparator:[(()=>{const e=Fn(),t=1e3.toLocaleString();return t!==1e3.toString()?Gn(t)[0]:"."===e?",":"."})(),Un.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',Un.STRING],labelInvalidField:["Field contains invalid files",Un.STRING],labelFileWaitingForSize:["Waiting for size",Un.STRING],labelFileSizeNotAvailable:["Size not available",Un.STRING],labelFileCountSingular:["file in list",Un.STRING],labelFileCountPlural:["files in list",Un.STRING],labelFileLoading:["Loading",Un.STRING],labelFileAdded:["Added",Un.STRING],labelFileLoadError:["Error during load",Un.STRING],labelFileRemoved:["Removed",Un.STRING],labelFileRemoveError:["Error during remove",Un.STRING],labelFileProcessing:["Uploading",Un.STRING],labelFileProcessingComplete:["Upload complete",Un.STRING],labelFileProcessingAborted:["Upload cancelled",Un.STRING],labelFileProcessingError:["Error during upload",Un.STRING],labelFileProcessingRevertError:["Error during revert",Un.STRING],labelTapToCancel:["tap to cancel",Un.STRING],labelTapToRetry:["tap to retry",Un.STRING],labelTapToUndo:["tap to undo",Un.STRING],labelButtonRemoveItem:["Remove",Un.STRING],labelButtonAbortItemLoad:["Abort",Un.STRING],labelButtonRetryItemLoad:["Retry",Un.STRING],labelButtonAbortItemProcessing:["Cancel",Un.STRING],labelButtonUndoItemProcessing:["Undo",Un.STRING],labelButtonRetryItemProcessing:["Retry",Un.STRING],labelButtonProcessItem:["Upload",Un.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',Un.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',Un.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',Un.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',Un.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',Un.STRING],oninit:[null,Un.FUNCTION],onwarning:[null,Un.FUNCTION],onerror:[null,Un.FUNCTION],onactivatefile:[null,Un.FUNCTION],oninitfile:[null,Un.FUNCTION],onaddfilestart:[null,Un.FUNCTION],onaddfileprogress:[null,Un.FUNCTION],onaddfile:[null,Un.FUNCTION],onprocessfilestart:[null,Un.FUNCTION],onprocessfileprogress:[null,Un.FUNCTION],onprocessfileabort:[null,Un.FUNCTION],onprocessfilerevert:[null,Un.FUNCTION],onprocessfile:[null,Un.FUNCTION],onprocessfiles:[null,Un.FUNCTION],onremovefile:[null,Un.FUNCTION],onpreparefile:[null,Un.FUNCTION],onupdatefiles:[null,Un.FUNCTION],onreorderfiles:[null,Un.FUNCTION],beforeDropFile:[null,Un.FUNCTION],beforeAddFile:[null,Un.FUNCTION],beforeRemoveFile:[null,Un.FUNCTION],beforePrepareFile:[null,Un.FUNCTION],stylePanelLayout:[null,Un.STRING],stylePanelAspectRatio:[null,Un.STRING],styleItemPanelAspectRatio:[null,Un.STRING],styleButtonRemoveItemPosition:["left",Un.STRING],styleButtonProcessItemPosition:["right",Un.STRING],styleLoadIndicatorPosition:["right",Un.STRING],styleProgressIndicatorPosition:["right",Un.STRING],styleButtonRemoveItemAlign:[!1,Un.BOOLEAN],files:[[],Un.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],Un.ARRAY]},Hn=(e,t)=>Yr(t)?e[0]||null:Jr(t)?e[t]||null:("object"==typeof t&&(t=t.id),e.find((e=>e.id===t))||null),Wn=e=>{if(Yr(e))return e;if(/:/.test(e)){const t=e.split(":");return t[1]/t[0]}return parseFloat(e)},zn=e=>e.filter((e=>!e.archived)),Xn={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4};let jn=null;const Qn=[Ln,Mn,bn],Zn=[Pn,vn,wn,On],Kn=[Sn],Jn=e=>Qn.includes(e.status),eo=e=>Zn.includes(e.status),to=e=>Kn.includes(e.status),ro=e=>on(e.options.server)&&(on(e.options.server.process)||tn(e.options.server.process)),no=e=>({GET_STATUS:()=>{const t=zn(e.items),{EMPTY:r,ERROR:n,BUSY:o,IDLE:i,READY:s}=Xn;return 0===t.length?r:t.some(Jn)?n:t.some(eo)?o:t.some(to)?s:i},GET_ITEM:t=>Hn(e.items,t),GET_ACTIVE_ITEM:t=>Hn(zn(e.items),t),GET_ACTIVE_ITEMS:()=>zn(e.items),GET_ITEMS:()=>e.items,GET_ITEM_NAME:t=>{const r=Hn(e.items,t);return r?r.filename:null},GET_ITEM_SIZE:t=>{const r=Hn(e.items,t);return r?r.fileSize:null},GET_STYLES:()=>Object.keys(e.options).filter((e=>/^style/.test(e))).map((t=>({name:t,value:e.options[t]}))),GET_PANEL_ASPECT_RATIO:()=>/circle/.test(e.options.stylePanelLayout)?1:Wn(e.options.stylePanelAspectRatio),GET_ITEM_PANEL_ASPECT_RATIO:()=>e.options.styleItemPanelAspectRatio,GET_ITEMS_BY_STATUS:t=>zn(e.items).filter((e=>e.status===t)),GET_TOTAL_ITEMS:()=>zn(e.items).length,SHOULD_UPDATE_FILE_INPUT:()=>e.options.storeAsFile&&(()=>{if(null===jn)try{const e=new DataTransfer;e.items.add(new File(["hello world"],"This_Works.txt"));const t=document.createElement("input");t.setAttribute("type","file"),t.files=e.files,jn=1===t.files.length}catch(e){jn=!1}return jn})()&&!ro(e),IS_ASYNC:()=>ro(e)}),oo=(e,t,r)=>Math.max(Math.min(r,e),t),io=e=>/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(e),so=e=>e.split("/").pop().split("?").shift(),ao=e=>e.split(".").pop(),lo=(e,t="")=>(t+e).slice(-t.length),co=(e=new Date)=>`${e.getFullYear()}-${lo(e.getMonth()+1,"00")}-${lo(e.getDate(),"00")}_${lo(e.getHours(),"00")}-${lo(e.getMinutes(),"00")}-${lo(e.getSeconds(),"00")}`,uo=(e,t,r=null,n=null)=>{const o="string"==typeof r?e.slice(0,e.size,r):e.slice(0,e.size,e.type);return o.lastModifiedDate=new Date,e._relativePath&&(o._relativePath=e._relativePath),jr(t)||(t=co()),t&&null===n&&ao(t)?o.name=t:(n=n||(e=>{if("string"!=typeof e)return"";const t=e.split("/").pop();return/svg/.test(t)?"svg":/zip|compressed/.test(t)?"zip":/plain/.test(t)?"txt":/msword/.test(t)?"doc":/[a-z]+/.test(t)?"jpeg"===t?"jpg":t:""})(o.type),o.name=t+(n?"."+n:"")),o},po=(e,t)=>{const r=window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(r){const n=new r;return n.append(e),n.getBlob(t)}return new Blob([e],{type:t})},fo=e=>(/^data:(.+);/.exec(e)||[])[1]||null,ho=e=>{const t=fo(e);return((e,t)=>{const r=new ArrayBuffer(e.length),n=new Uint8Array(r);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);return po(r,t)})((e=>atob((e=>e.split(",")[1].replace(/\s/g,""))(e)))(e),t)},Eo=e=>{if(!/^content-disposition:/i.test(e))return null;const t=e.split(/filename=|filename\*=.+''/).splice(1).map((e=>e.trim().replace(/^["']|[;"']{0,2}$/g,""))).filter((e=>e.length));return t.length?decodeURI(t[t.length-1]):null},mo=e=>{if(/content-length:/i.test(e)){const t=e.match(/[0-9]+/)[0];return t?parseInt(t,10):null}return null},_o=e=>{if(/x-content-transfer-id:/i.test(e)){return(e.split(":")[1]||"").trim()||null}return null},go=e=>{const t={source:null,name:null,size:null},r=e.split("\n");for(let n of r){const e=Eo(n);if(e){t.name=e;continue}const r=mo(n);if(r){t.size=r;continue}const o=_o(n);o&&(t.source=o)}return t},To=e=>{const t={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},r=r=>{e?(t.timestamp=Date.now(),t.request=e(r,(e=>{t.duration=Date.now()-t.timestamp,t.complete=!0,e instanceof Blob&&(e=uo(e,e.name||so(r))),n.fire("load",e instanceof Blob?e:e?e.body:null)}),(e=>{n.fire("error","string"==typeof e?{type:"error",code:0,body:e}:e)}),((e,r,o)=>{o&&(t.size=o),t.duration=Date.now()-t.timestamp,e?(t.progress=r/o,n.fire("progress",t.progress)):t.progress=null}),(()=>{n.fire("abort")}),(e=>{const r=go("string"==typeof e?e:e.headers);n.fire("meta",{size:t.size||r.size,filename:r.name,source:r.source})}))):n.fire("error",{type:"error",body:"Can't load URL",code:400})},n=l(a({},In()),{setSource:e=>t.source=e,getProgress:()=>t.progress,abort:()=>{t.request&&t.request.abort&&t.request.abort()},load:()=>{const e=t.source;var o,i;n.fire("init",e),e instanceof File?n.fire("load",e):e instanceof Blob?n.fire("load",uo(e,e.name)):io(e)?n.fire("load",uo(ho(e),o,null,i)):r(e)}});return n},Io=e=>/GET|HEAD/.test(e),yo=(e,t,r)=>{const n={onheaders:()=>{},onprogress:()=>{},onload:()=>{},ontimeout:()=>{},onerror:()=>{},onabort:()=>{},abort:()=>{o=!0,s.abort()}};let o=!1,i=!1;r=a({method:"POST",headers:{},withCredentials:!1},r),t=encodeURI(t),Io(r.method)&&e&&(t=`${t}${encodeURIComponent("string"==typeof e?e:JSON.stringify(e))}`);const s=new XMLHttpRequest;return(Io(r.method)?s:s.upload).onprogress=e=>{o||n.onprogress(e.lengthComputable,e.loaded,e.total)},s.onreadystatechange=()=>{s.readyState<2||4===s.readyState&&0===s.status||i||(i=!0,n.onheaders(s))},s.onload=()=>{s.status>=200&&s.status<300?n.onload(s):n.onerror(s)},s.onerror=()=>n.onerror(s),s.onabort=()=>{o=!0,n.onabort()},s.ontimeout=()=>n.ontimeout(s),s.open(r.method,t,!0),Jr(r.timeout)&&(s.timeout=r.timeout),Object.keys(r.headers).forEach((e=>{const t=unescape(encodeURIComponent(r.headers[e]));s.setRequestHeader(e,t)})),r.responseType&&(s.responseType=r.responseType),r.withCredentials&&(s.withCredentials=!0),s.send(e),n},Ro=(e,t,r,n)=>({type:e,code:t,body:r,headers:n}),Ao=e=>t=>{e(Ro("error",0,"Timeout",t.getAllResponseHeaders()))},Oo=e=>/\?/.test(e),Do=(...e)=>{let t="";return e.forEach((e=>{t+=Oo(t)&&Oo(e)?e.replace(/\?/,"&"):e})),t},wo=(e="",t)=>{if("function"==typeof t)return t;if(!t||!jr(t.url))return null;const r=t.onload||(e=>e),n=t.onerror||(e=>null);return(o,i,s,c,d,u)=>{const p=yo(o,Do(e,t.url),l(a({},t),{responseType:"blob"}));return p.onload=e=>{const n=e.getAllResponseHeaders(),s=go(n).name||so(o);i(Ro("load",e.status,"HEAD"===t.method?null:uo(r(e.response),s),n))},p.onerror=e=>{s(Ro("error",e.status,n(e.response)||e.statusText,e.getAllResponseHeaders()))},p.onheaders=e=>{u(Ro("headers",e.status,null,e.getAllResponseHeaders()))},p.ontimeout=Ao(s),p.onprogress=c,p.onabort=d,p}},vo=0,So=1,Mo=2,bo=3,Po=4,Lo=(e,t,r,n,o,i,s,c,d,u,p)=>{const f=[],{chunkTransferId:h,chunkServer:E,chunkSize:m,chunkRetryDelays:_}=p,g={serverId:h,aborted:!1},T=t.ondata||(e=>e),I=t.onload||((e,t)=>"HEAD"===t?e.getResponseHeader("Upload-Offset"):e.response),y=t.onerror||(e=>null),R=Math.floor(n.size/m);for(let a=0;a<=R;a++){const e=a*m,t=n.slice(e,e+m,"application/offset+octet-stream");f[a]={index:a,size:t.size,offset:e,data:t,file:n,progress:0,retries:[..._],status:vo,error:null,request:null,timeout:null}}const A=e=>e.status===vo||e.status===bo,O=t=>{if(g.aborted)return;if(!(t=t||f.find(A)))return void(f.every((e=>e.status===So))&&i(g.serverId));t.status=Mo,t.progress=null;const r=E.ondata||(e=>e),o=E.onerror||(e=>null),c=Do(e,E.url,g.serverId),u="function"==typeof E.headers?E.headers(t):l(a({},E.headers),{"Content-Type":"application/offset+octet-stream","Upload-Offset":t.offset,"Upload-Length":n.size,"Upload-Name":n.name}),p=t.request=yo(r(t.data),c,l(a({},E),{headers:u}));p.onload=()=>{t.status=So,t.request=null,v()},p.onprogress=(e,r,n)=>{t.progress=e?r:null,w()},p.onerror=e=>{t.status=bo,t.request=null,t.error=o(e.response)||e.statusText,D(t)||s(Ro("error",e.status,o(e.response)||e.statusText,e.getAllResponseHeaders()))},p.ontimeout=e=>{t.status=bo,t.request=null,D(t)||Ao(s)(e)},p.onabort=()=>{t.status=vo,t.request=null,d()}},D=e=>0!==e.retries.length&&(e.status=Po,clearTimeout(e.timeout),e.timeout=setTimeout((()=>{O(e)}),e.retries.shift()),!0),w=()=>{const e=f.reduce(((e,t)=>null===e||null===t.progress?null:e+t.progress),0);if(null===e)return c(!1,0,0);const t=f.reduce(((e,t)=>e+t.size),0);c(!0,e,t)},v=()=>{f.filter((e=>e.status===Mo)).length>=1||O()};return g.serverId?(r=>{const n=Do(e,E.url,g.serverId),o={headers:"function"==typeof t.headers?t.headers(g.serverId):a({},t.headers),method:"HEAD"},i=yo(null,n,o);i.onload=e=>r(I(e,o.method)),i.onerror=e=>s(Ro("error",e.status,y(e.response)||e.statusText,e.getAllResponseHeaders())),i.ontimeout=Ao(s)})((e=>{g.aborted||(f.filter((t=>t.offset<e)).forEach((e=>{e.status=So,e.progress=e.size})),v())})):(i=>{const c=new FormData;on(o)&&c.append(r,JSON.stringify(o));const d="function"==typeof t.headers?t.headers(n,o):l(a({},t.headers),{"Upload-Length":n.size}),u=l(a({},t),{headers:d}),p=yo(T(c),Do(e,t.url),u);p.onload=e=>i(I(e,u.method)),p.onerror=e=>s(Ro("error",e.status,y(e.response)||e.statusText,e.getAllResponseHeaders())),p.ontimeout=Ao(s)})((e=>{g.aborted||(u(e),g.serverId=e,v())})),{abort:()=>{g.aborted=!0,f.forEach((e=>{clearTimeout(e.timeout),e.request&&e.request.abort()}))}}},Co=(e="",t,r,n)=>"function"==typeof t?(...e)=>t(r,...e,n):t&&jr(t.url)?((e,t,r,n)=>(o,i,s,c,d,u,p)=>{if(!o)return;const f=n.chunkUploads,h=f&&o.size>n.chunkSize,E=f&&(h||n.chunkForce);if(o instanceof Blob&&E)return Lo(e,t,r,o,i,s,c,d,u,p,n);const m=t.ondata||(e=>e),_=t.onload||(e=>e),g=t.onerror||(e=>null),T="function"==typeof t.headers?t.headers(o,i)||{}:a({},t.headers),I=l(a({},t),{headers:T});var y=new FormData;on(i)&&y.append(r,JSON.stringify(i)),(o instanceof Blob?[{name:null,file:o}]:o).forEach((e=>{y.append(r,e.file,null===e.name?e.file.name:`${e.name}${e.file.name}`)}));const R=yo(m(y),Do(e,t.url),I);return R.onload=e=>{s(Ro("load",e.status,_(e.response),e.getAllResponseHeaders()))},R.onerror=e=>{c(Ro("error",e.status,g(e.response)||e.statusText,e.getAllResponseHeaders()))},R.ontimeout=Ao(c),R.onprogress=d,R.onabort=u,R})(e,t,r,n):null,No=(e="",t)=>{if("function"==typeof t)return t;if(!t||!jr(t.url))return(e,t)=>t();const r=t.onload||(e=>e),n=t.onerror||(e=>null);return(o,i,s)=>{const a=yo(o,e+t.url,t);return a.onload=e=>{i(Ro("load",e.status,r(e.response),e.getAllResponseHeaders()))},a.onerror=e=>{s(Ro("error",e.status,n(e.response)||e.statusText,e.getAllResponseHeaders()))},a.ontimeout=Ao(s),a}},xo=(e=0,t=1)=>e+Math.random()*(t-e),Go=(e,t)=>{const r={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},{allowMinimumUploadDuration:n}=t,o=()=>{r.request&&(r.perceivedPerformanceUpdater.clear(),r.request.abort&&r.request.abort(),r.complete=!0)},i=n?()=>r.progress?Math.min(r.progress,r.perceivedProgress):null:()=>r.progress||null,s=n?()=>Math.min(r.duration,r.perceivedDuration):()=>r.duration,c=l(a({},In()),{process:(t,o)=>{const i=()=>{0!==r.duration&&null!==r.progress&&c.fire("progress",c.getProgress())},s=()=>{r.complete=!0,c.fire("load-perceived",r.response.body)};c.fire("start"),r.timestamp=Date.now(),r.perceivedPerformanceUpdater=((e,t=1e3,r=0,n=25,o=250)=>{let i=null;const s=Date.now(),a=()=>{let r=Date.now()-s,l=xo(n,o);r+l>t&&(l=r+l-t);let c=r/t;c>=1||document.hidden?e(1):(e(c),i=setTimeout(a,l))};return t>0&&a(),{clear:()=>{clearTimeout(i)}}})((e=>{r.perceivedProgress=e,r.perceivedDuration=Date.now()-r.timestamp,i(),r.response&&1===r.perceivedProgress&&!r.complete&&s()}),n?xo(750,1500):0),r.request=e(t,o,(e=>{r.response=on(e)?e:{type:"load",code:200,body:`${e}`,headers:{}},r.duration=Date.now()-r.timestamp,r.progress=1,c.fire("load",r.response.body),(!n||n&&1===r.perceivedProgress)&&s()}),(e=>{r.perceivedPerformanceUpdater.clear(),c.fire("error",on(e)?e:{type:"error",code:0,body:`${e}`})}),((e,t,n)=>{r.duration=Date.now()-r.timestamp,r.progress=e?t/n:null,i()}),(()=>{r.perceivedPerformanceUpdater.clear(),c.fire("abort",r.response?r.response.body:null)}),(e=>{c.fire("transfer",e)}))},abort:o,getProgress:i,getDuration:s,reset:()=>{o(),r.complete=!1,r.perceivedProgress=0,r.progress=0,r.timestamp=null,r.perceivedDuration=0,r.duration=0,r.request=null,r.response=null}});return c},Fo=e=>e.substr(0,e.lastIndexOf("."))||e,Uo=e=>!!(e instanceof File||e instanceof Blob&&e.name),qo=e=>{if(!on(e))return e;const t=kr(e)?[]:{};for(const r in e){if(!e.hasOwnProperty(r))continue;const n=e[r];t[r]=n&&on(n)?qo(n):n}return t},Bo=(e=null,t=null,r=null)=>{const n=gn(),o={archived:!1,frozen:!1,released:!1,source:null,file:r,serverFileReference:t,transferId:null,processingAborted:!1,status:t?Sn:On,activeLoader:null,activeProcessor:null};let i=null;const s={},c=e=>o.status=e,d=(e,...t)=>{o.released||o.frozen||f.fire(e,...t)},u=(e,t)=>{if(o.processingAborted)return void(o.processingAborted=!1);if(c(vn),i=null,!(o.file instanceof Blob))return void f.on("load",(()=>{u(e,t)}));e.on("load",(e=>{o.transferId=null,o.serverFileReference=e})),e.on("transfer",(e=>{o.transferId=e})),e.on("load-perceived",(e=>{o.activeProcessor=null,o.transferId=null,o.serverFileReference=e,c(Sn),d("process-complete",e)})),e.on("start",(()=>{d("process-start")})),e.on("error",(e=>{o.activeProcessor=null,c(Mn),d("process-error",e)})),e.on("abort",(e=>{o.activeProcessor=null,o.transferId=null,o.serverFileReference=e,c(Dn),d("process-abort"),i&&i()})),e.on("progress",(e=>{d("process-progress",e)}));const r=console.error;t(o.file,(t=>{o.archived||e.process(t,a({},s))}),r),o.activeProcessor=e},p=(e,t,r)=>{const n=e.split("."),o=n[0],i=n.pop();let a=s;n.forEach((e=>a=a[e])),JSON.stringify(a[i])!==JSON.stringify(t)&&(a[i]=t,d("metadata-update",{key:o,value:s[o],silent:r}))},f=l(a({id:{get:()=>n},origin:{get:()=>e,set:t=>e=t},serverId:{get:()=>o.serverFileReference},transferId:{get:()=>o.transferId},status:{get:()=>o.status},filename:{get:()=>o.file.name},filenameWithoutExtension:{get:()=>Fo(o.file.name)},fileExtension:{get:()=>ao(o.file.name)},fileType:{get:()=>o.file.type},fileSize:{get:()=>o.file.size},file:{get:()=>o.file},relativePath:{get:()=>o.file._relativePath},source:{get:()=>o.source},getMetadata:e=>qo(e?s[e]:s),setMetadata:(e,t,r)=>{if(on(e)){const r=e;return Object.keys(r).forEach((e=>{p(e,r[e],t)})),e}return p(e,t,r),t},extend:(e,t)=>h[e]=t,abortLoad:()=>{o.activeLoader?o.activeLoader.abort():(c(On),d("load-abort"))},retryLoad:()=>{o.activeLoader&&o.activeLoader.load()},requestProcessing:()=>{o.processingAborted=!1,c(wn)},abortProcessing:()=>new Promise((e=>{if(!o.activeProcessor)return o.processingAborted=!0,c(Dn),d("process-abort"),void e();i=()=>{e()},o.activeProcessor.abort()})),load:(t,r,n)=>{o.source=t,f.fireSync("init"),o.file?f.fireSync("load-skip"):(o.file=(e=>{let t=[e.name,e.size,e.type];return e instanceof Blob||io(e)?t[0]=e.name||co():io(e)?(t[1]=e.length,t[2]=fo(e)):jr(e)&&(t[0]=so(e),t[1]=0,t[2]="application/octet-stream"),{name:t[0],size:t[1],type:t[2]}})(t),r.on("init",(()=>{d("load-init")})),r.on("meta",(t=>{o.file.size=t.size,o.file.filename=t.filename,t.source&&(e=Nn,o.serverFileReference=t.source,o.status=Sn),d("load-meta")})),r.on("progress",(e=>{c(Pn),d("load-progress",e)})),r.on("error",(e=>{c(Ln),d("load-request-error",e)})),r.on("abort",(()=>{c(On),d("load-abort")})),r.on("load",(t=>{o.activeLoader=null;const r=t=>{o.file=Uo(t)?t:o.file,e===Nn&&o.serverFileReference?c(Sn):c(Dn),d("load")};o.serverFileReference?r(t):n(t,r,(e=>{o.file=t,d("load-meta"),c(Ln),d("load-file-error",e)}))})),r.setSource(t),o.activeLoader=r,r.load())},process:u,revert:(e,t)=>new Promise(((r,n)=>{null!==o.serverFileReference?(e(o.serverFileReference,(()=>{o.serverFileReference=null,r()}),(e=>{t?(c(bn),d("process-revert-error"),n(e)):r()})),c(Dn),d("process-revert")):r()}))},In()),{freeze:()=>o.frozen=!0,release:()=>o.released=!0,released:{get:()=>o.released},archive:()=>o.archived=!0,archived:{get:()=>o.archived}}),h=mr(f);return h},$o=(e,t)=>{const r=((e,t)=>Yr(t)?0:jr(t)?e.findIndex((e=>e.id===t)):-1)(e,t);if(!(r<0))return e[r]||null},Vo=(e,t,r,n,o,i)=>{const s=yo(null,e,{method:"GET",responseType:"blob"});return s.onload=r=>{const n=r.getAllResponseHeaders(),o=go(n).name||so(e);t(Ro("load",r.status,uo(r.response,o),n))},s.onerror=e=>{r(Ro("error",e.status,e.statusText,e.getAllResponseHeaders()))},s.onheaders=e=>{i(Ro("headers",e.status,null,e.getAllResponseHeaders()))},s.ontimeout=Ao(r),s.onprogress=n,s.onabort=o,s},ko=e=>(0===e.indexOf("//")&&(e=location.protocol+e),e.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]),Yo=e=>(...t)=>tn(e)?e(...t):e,Ho=(e,t)=>{clearTimeout(t.listUpdateTimeout),t.listUpdateTimeout=setTimeout((()=>{e("DID_UPDATE_ITEMS",{items:zn(t.items)})}),0)},Wo=(e,...t)=>new Promise((r=>{if(!e)return r(!0);const n=e(...t);return null==n?r(!0):"boolean"==typeof n?r(n):void("function"==typeof n.then&&n.then(r))})),zo=(e,t)=>{e.items.sort(((e,r)=>t(An(e),An(r))))},Xo=(e,t)=>(r={})=>{var s=r,{query:a,success:l=(()=>{}),failure:c=(()=>{})}=s,d=((e,t)=>{var r={};for(var s in e)o.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&n)for(var s of n(e))t.indexOf(s)<0&&i.call(e,s)&&(r[s]=e[s]);return r})(s,["query","success","failure"]);const u=Hn(e.items,a);u?t(u,l,c,d||{}):c({error:Ro("error",0,"Item not found"),file:null})},jo=(e,t,r)=>({ABORT_ALL:()=>{zn(r.items).forEach((e=>{e.freeze(),e.abortLoad(),e.abortProcessing()}))},DID_SET_FILES:({value:t=[]})=>{const n=t.map((e=>({source:e.source?e.source:e,options:e.options})));let o=zn(r.items);o.forEach((t=>{n.find((e=>e.source===t.source||e.source===t.file))||e("REMOVE_ITEM",{query:t,remove:!1})})),o=zn(r.items),n.forEach(((t,r)=>{o.find((e=>e.source===t.source||e.file===t.source))||e("ADD_ITEM",l(a({},t),{interactionMethod:_n,index:r}))}))},DID_UPDATE_ITEM_METADATA:({id:n,action:o,change:i})=>{i.silent||(clearTimeout(r.itemUpdateTimeout),r.itemUpdateTimeout=setTimeout((()=>{const s=$o(r.items,n);if(!t("IS_ASYNC"))return void Bn("SHOULD_PREPARE_OUTPUT",!1,{item:s,query:t,action:o,change:i}).then((r=>{const o=t("GET_BEFORE_PREPARE_FILE");o&&(r=o(s,r)),r&&e("REQUEST_PREPARE_OUTPUT",{query:n,item:s,success:t=>{e("DID_PREPARE_OUTPUT",{id:n,file:t})}},!0)}));s.origin===xn&&e("DID_LOAD_ITEM",{id:s.id,error:null,serverFileReference:s.source});const a=()=>{setTimeout((()=>{e("REQUEST_ITEM_PROCESSING",{query:n})}),32)};return s.status===Sn?(l=r.options.instantUpload,void s.revert(No(r.options.server.url,r.options.server.revert),t("GET_FORCE_REVERT")).then(l?a:()=>{}).catch((()=>{}))):s.status===vn?(e=>{s.abortProcessing().then(e?a:()=>{})})(r.options.instantUpload):void(r.options.instantUpload&&a());var l}),0))},MOVE_ITEM:({query:e,index:t})=>{const n=Hn(r.items,e);if(!n)return;const o=r.items.indexOf(n);o!==(t=oo(t,0,r.items.length-1))&&r.items.splice(t,0,r.items.splice(o,1)[0])},SORT:({compare:n})=>{zo(r,n),e("DID_SORT_ITEMS",{items:t("GET_ACTIVE_ITEMS")})},ADD_ITEMS:({items:r,index:n,interactionMethod:o,success:i=(()=>{}),failure:s=(()=>{})})=>{let a=n;if(-1===n||void 0===n){const e=t("GET_ITEM_INSERT_LOCATION"),r=t("GET_TOTAL_ITEMS");a="before"===e?0:r}const l=t("GET_IGNORED_FILES"),c=r.filter((e=>Uo(e)?!l.includes(e.name.toLowerCase()):!Yr(e))).map((t=>new Promise(((r,n)=>{e("ADD_ITEM",{interactionMethod:o,source:t.source||t,success:r,failure:n,index:a++,options:t.options||{}})}))));Promise.all(c).then(i).catch(s)},ADD_ITEM:({source:n,index:o=-1,interactionMethod:i,success:s=(()=>{}),failure:a=(()=>{}),options:l={}})=>{if(Yr(n))return void a({error:Ro("error",0,"No source"),file:null});if(Uo(n)&&r.options.ignoredFiles.includes(n.name.toLowerCase()))return;if(!(e=>{const t=zn(e.items).length;if(!e.options.allowMultiple)return 0===t;const r=e.options.maxFiles;return null===r||t<r})(r)){if(r.options.allowMultiple||!r.options.allowMultiple&&!r.options.allowReplace){const t=Ro("warning",0,"Max files");return e("DID_THROW_MAX_FILES",{source:n,error:t}),void a({error:t,file:null})}const c=zn(r.items)[0];if(c.status===Sn||c.status===bn){const d=t("GET_FORCE_REVERT");if(c.revert(No(r.options.server.url,r.options.server.revert),d).then((()=>{d&&e("ADD_ITEM",{source:n,index:o,interactionMethod:i,success:s,failure:a,options:l})})).catch((()=>{})),d)return}e("REMOVE_ITEM",{query:c.id})}const c="local"===l.type?xn:"limbo"===l.type?Nn:Cn,d=Bo(c,c===Cn?null:n,l.file);Object.keys(l.metadata||{}).forEach((e=>{d.setMetadata(e,l.metadata[e])})),$n("DID_CREATE_ITEM",d,{query:t,dispatch:e});const u=t("GET_ITEM_INSERT_LOCATION");r.options.itemInsertLocationFreedom||(o="before"===u?-1:r.items.length),((e,t,r)=>{Yr(t)||(void 0===r?e.push(t):((e,t,r)=>{e.splice(t,0,r)})(e,r=oo(r,0,e.length),t))})(r.items,d,o),tn(u)&&n&&zo(r,u);const p=d.id;d.on("init",(()=>{e("DID_INIT_ITEM",{id:p})})),d.on("load-init",(()=>{e("DID_START_ITEM_LOAD",{id:p})})),d.on("load-meta",(()=>{e("DID_UPDATE_ITEM_META",{id:p})})),d.on("load-progress",(t=>{e("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:p,progress:t})})),d.on("load-request-error",(t=>{const n=Yo(r.options.labelFileLoadError)(t);if(t.code>=400&&t.code<500)return e("DID_THROW_ITEM_INVALID",{id:p,error:t,status:{main:n,sub:`${t.code} (${t.body})`}}),void a({error:t,file:An(d)});e("DID_THROW_ITEM_LOAD_ERROR",{id:p,error:t,status:{main:n,sub:r.options.labelTapToRetry}})})),d.on("load-file-error",(t=>{e("DID_THROW_ITEM_INVALID",{id:p,error:t.status,status:t.status}),a({error:t.status,file:An(d)})})),d.on("load-abort",(()=>{e("REMOVE_ITEM",{query:p})})),d.on("load-skip",(()=>{e("COMPLETE_LOAD_ITEM",{query:p,item:d,data:{source:n,success:s}})})),d.on("load",(()=>{const o=o=>{o?(d.on("metadata-update",(t=>{e("DID_UPDATE_ITEM_METADATA",{id:p,change:t})})),Bn("SHOULD_PREPARE_OUTPUT",!1,{item:d,query:t}).then((o=>{const i=t("GET_BEFORE_PREPARE_FILE");i&&(o=i(d,o));const a=()=>{e("COMPLETE_LOAD_ITEM",{query:p,item:d,data:{source:n,success:s}}),Ho(e,r)};o?e("REQUEST_PREPARE_OUTPUT",{query:p,item:d,success:t=>{e("DID_PREPARE_OUTPUT",{id:p,file:t}),a()}},!0):a()}))):e("REMOVE_ITEM",{query:p})};Bn("DID_LOAD_ITEM",d,{query:t,dispatch:e}).then((()=>{Wo(t("GET_BEFORE_ADD_FILE"),An(d)).then(o)})).catch((()=>{o(!1)}))})),d.on("process-start",(()=>{e("DID_START_ITEM_PROCESSING",{id:p})})),d.on("process-progress",(t=>{e("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:p,progress:t})})),d.on("process-error",(t=>{e("DID_THROW_ITEM_PROCESSING_ERROR",{id:p,error:t,status:{main:Yo(r.options.labelFileProcessingError)(t),sub:r.options.labelTapToRetry}})})),d.on("process-revert-error",(t=>{e("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:p,error:t,status:{main:Yo(r.options.labelFileProcessingRevertError)(t),sub:r.options.labelTapToRetry}})})),d.on("process-complete",(t=>{e("DID_COMPLETE_ITEM_PROCESSING",{id:p,error:null,serverFileReference:t}),e("DID_DEFINE_VALUE",{id:p,value:t})})),d.on("process-abort",(()=>{e("DID_ABORT_ITEM_PROCESSING",{id:p})})),d.on("process-revert",(()=>{e("DID_REVERT_ITEM_PROCESSING",{id:p}),e("DID_DEFINE_VALUE",{id:p,value:null})})),e("DID_ADD_ITEM",{id:p,index:o,interactionMethod:i}),Ho(e,r);const{url:f,load:h,restore:E,fetch:m}=r.options.server||{};d.load(n,To(c===Cn?jr(n)&&(e=>(e.indexOf(":")>-1||e.indexOf("//")>-1)&&ko(location.href)!==ko(e))(n)&&m?wo(f,m):Vo:wo(f,c===Nn?E:h)),((e,r,n)=>{Bn("LOAD_FILE",e,{query:t}).then(r).catch(n)}))},REQUEST_PREPARE_OUTPUT:({item:e,success:r,failure:n=(()=>{})})=>{const o={error:Ro("error",0,"Item not found"),file:null};if(e.archived)return n(o);Bn("PREPARE_OUTPUT",e.file,{query:t,item:e}).then((i=>{Bn("COMPLETE_PREPARE_OUTPUT",i,{query:t,item:e}).then((t=>{if(e.archived)return n(o);r(t)}))}))},COMPLETE_LOAD_ITEM:({item:n,data:o})=>{const{success:i,source:s}=o,a=t("GET_ITEM_INSERT_LOCATION");if(tn(a)&&s&&zo(r,a),e("DID_LOAD_ITEM",{id:n.id,error:null,serverFileReference:n.origin===Cn?null:s}),i(An(n)),n.origin!==xn)return n.origin===Nn?(e("DID_COMPLETE_ITEM_PROCESSING",{id:n.id,error:null,serverFileReference:s}),void e("DID_DEFINE_VALUE",{id:n.id,value:n.serverId||s})):void(t("IS_ASYNC")&&r.options.instantUpload&&e("REQUEST_ITEM_PROCESSING",{query:n.id}));e("DID_LOAD_LOCAL_ITEM",{id:n.id})},RETRY_ITEM_LOAD:Xo(r,(e=>{e.retryLoad()})),REQUEST_ITEM_PREPARE:Xo(r,((t,r,n)=>{e("REQUEST_PREPARE_OUTPUT",{query:t.id,item:t,success:n=>{e("DID_PREPARE_OUTPUT",{id:t.id,file:n}),r({file:t,output:n})},failure:n},!0)})),REQUEST_ITEM_PROCESSING:Xo(r,((n,o,i)=>{if(n.status===Dn||n.status===Mn)n.status!==wn&&(n.requestProcessing(),e("DID_REQUEST_ITEM_PROCESSING",{id:n.id}),e("PROCESS_ITEM",{query:n,success:o,failure:i},!0));else{const s=()=>e("REQUEST_ITEM_PROCESSING",{query:n,success:o,failure:i}),a=()=>document.hidden?s():setTimeout(s,32);n.status===Sn||n.status===bn?n.revert(No(r.options.server.url,r.options.server.revert),t("GET_FORCE_REVERT")).then(a).catch((()=>{})):n.status===vn&&n.abortProcessing().then(a)}})),PROCESS_ITEM:Xo(r,((n,o,i)=>{const s=t("GET_MAX_PARALLEL_UPLOADS");if(t("GET_ITEMS_BY_STATUS",vn).length===s)return void r.processingQueue.push({id:n.id,success:o,failure:i});if(n.status===vn)return;const a=()=>{const t=r.processingQueue.shift();if(!t)return;const{id:n,success:o,failure:i}=t,s=Hn(r.items,n);s&&!s.archived?e("PROCESS_ITEM",{query:n,success:o,failure:i},!0):a()};n.onOnce("process-complete",(()=>{o(An(n)),a();const i=r.options.server;if(r.options.instantUpload&&n.origin===xn&&tn(i.remove)){const e=()=>{};n.origin=Nn,r.options.server.remove(n.source,e,e)}t("GET_ITEMS_BY_STATUS",Sn).length===r.items.length&&e("DID_COMPLETE_ITEM_PROCESSING_ALL")})),n.onOnce("process-error",(e=>{i({error:e,file:An(n)}),a()}));const l=r.options;n.process(Go(Co(l.server.url,l.server.process,l.name,{chunkTransferId:n.transferId,chunkServer:l.server.patch,chunkUploads:l.chunkUploads,chunkForce:l.chunkForce,chunkSize:l.chunkSize,chunkRetryDelays:l.chunkRetryDelays}),{allowMinimumUploadDuration:t("GET_ALLOW_MINIMUM_UPLOAD_DURATION")}),((r,o,i)=>{Bn("PREPARE_OUTPUT",r,{query:t,item:n}).then((t=>{e("DID_PREPARE_OUTPUT",{id:n.id,file:t}),o(t)})).catch(i)}))})),RETRY_ITEM_PROCESSING:Xo(r,(t=>{e("REQUEST_ITEM_PROCESSING",{query:t})})),REQUEST_REMOVE_ITEM:Xo(r,(r=>{Wo(t("GET_BEFORE_REMOVE_FILE"),An(r)).then((t=>{t&&e("REMOVE_ITEM",{query:r})}))})),RELEASE_ITEM:Xo(r,(e=>{e.release()})),REMOVE_ITEM:Xo(r,((n,o,i,s)=>{const a=()=>{const t=n.id;$o(r.items,t).archive(),e("DID_REMOVE_ITEM",{error:null,id:t,item:n}),Ho(e,r),o(An(n))},l=r.options.server;n.origin===xn&&l&&tn(l.remove)&&!1!==s.remove?(e("DID_START_ITEM_REMOVE",{id:n.id}),l.remove(n.source,(()=>a()),(t=>{e("DID_THROW_ITEM_REMOVE_ERROR",{id:n.id,error:Ro("error",0,t,null),status:{main:Yo(r.options.labelFileRemoveError)(t),sub:r.options.labelTapToRetry}})}))):(s.revert&&n.origin!==xn&&null!==n.serverId&&n.revert(No(r.options.server.url,r.options.server.revert),t("GET_FORCE_REVERT")),a())})),ABORT_ITEM_LOAD:Xo(r,(e=>{e.abortLoad()})),ABORT_ITEM_PROCESSING:Xo(r,(t=>{t.serverId?e("REVERT_ITEM_PROCESSING",{id:t.id}):t.abortProcessing().then((()=>{r.options.instantUpload&&e("REMOVE_ITEM",{query:t.id})}))})),REQUEST_REVERT_ITEM_PROCESSING:Xo(r,(n=>{if(!r.options.instantUpload)return void e("REVERT_ITEM_PROCESSING",{query:n});const o=t=>{t&&e("REVERT_ITEM_PROCESSING",{query:n})},i=t("GET_BEFORE_REMOVE_FILE");if(!i)return o(!0);const s=i(An(n));return null==s?o(!0):"boolean"==typeof s?o(s):void("function"==typeof s.then&&s.then(o))})),REVERT_ITEM_PROCESSING:Xo(r,(n=>{n.revert(No(r.options.server.url,r.options.server.revert),t("GET_FORCE_REVERT")).then((()=>{(r.options.instantUpload||(e=>!Uo(e.file))(n))&&e("REMOVE_ITEM",{query:n.id})})).catch((()=>{}))})),SET_OPTIONS:({options:t})=>{Er(t,((t,r)=>{e(`SET_${dn(t,"_").toUpperCase()}`,{value:r})}))}}),Qo=e=>document.createElement(e),Zo=(e,t)=>{let r=e.childNodes[0];r?t!==r.nodeValue&&(r.nodeValue=t):(r=document.createTextNode(t),e.appendChild(r))},Ko=(e,t,r,n)=>{const o=(n%360-90)*Math.PI/180;return{x:e+r*Math.cos(o),y:t+r*Math.sin(o)}},Jo=(e,t,r,n,o)=>{let i=1;return o>n&&o-n<=.5&&(i=0),n>o&&n-o>=.5&&(i=0),((e,t,r,n,o,i)=>{const s=Ko(e,t,r,o),a=Ko(e,t,r,n);return["M",s.x,s.y,"A",r,r,0,i,0,a.x,a.y].join(" ")})(e,t,r,360*Math.min(.9999,n),360*Math.min(.9999,o),i)},ei=qr({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:({root:e,props:t})=>{t.spin=!1,t.progress=0,t.opacity=0;const r=Ir("svg");e.ref.path=Ir("path",{"stroke-width":2,"stroke-linecap":"round"}),r.appendChild(e.ref.path),e.ref.svg=r,e.appendChild(r)},write:({root:e,props:t})=>{if(0===t.opacity)return;t.align&&(e.element.dataset.align=t.align);const r=parseInt(_r(e.ref.path,"stroke-width"),10),n=.5*e.rect.element.width;let o=0,i=0;t.spin?(o=0,i=.5):(o=0,i=t.progress);const s=Jo(n,n,n-r,o,i);_r(e.ref.path,"d",s),_r(e.ref.path,"stroke-opacity",t.spin||t.progress>0?1:0)},mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),ti=qr({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:({root:e,props:t})=>{e.element.innerHTML=(t.icon||"")+`<span>${t.label}</span>`,t.isDisabled=!1},write:({root:e,props:t})=>{const{isDisabled:r}=t,n=e.query("GET_DISABLED")||0===t.opacity;n&&!r?(t.isDisabled=!0,_r(e.element,"disabled","disabled")):!n&&r&&(t.isDisabled=!1,e.element.removeAttribute("disabled"))}}),ri=(e,t=".",r=1e3)=>{const n=r,o=r*r,i=r*r*r;return(e=Math.round(Math.abs(e)))<n?`${e} bytes`:e<o?`${Math.floor(e/n)} KB`:e<i?`${ni(e/o,1,t)} MB`:`${ni(e/i,2,t)} GB`},ni=(e,t,r)=>e.toFixed(t).split(".").filter((e=>"0"!==e)).join(r),oi=({root:e,props:t})=>{Zo(e.ref.fileSize,ri(e.query("GET_ITEM_SIZE",t.id),".",e.query("GET_FILE_SIZE_BASE"))),Zo(e.ref.fileName,e.query("GET_ITEM_NAME",t.id))},ii=({root:e,props:t})=>{Jr(e.query("GET_ITEM_SIZE",t.id))||Zo(e.ref.fileSize,e.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},si=qr({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:Br({DID_LOAD_ITEM:oi,DID_UPDATE_ITEM_META:oi,DID_THROW_ITEM_LOAD_ERROR:ii,DID_THROW_ITEM_INVALID:ii}),didCreateView:e=>{$n("CREATE_VIEW",l(a({},e),{view:e}))},create:({root:e,props:t})=>{const r=Qo("span");r.className="filepond--file-info-main",_r(r,"aria-hidden","true"),e.appendChild(r),e.ref.fileName=r;const n=Qo("span");n.className="filepond--file-info-sub",e.appendChild(n),e.ref.fileSize=n,Zo(n,e.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),Zo(r,e.query("GET_ITEM_NAME",t.id))},mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),ai=e=>Math.round(100*e),li=({root:e,action:t})=>{const r=null===t.progress?e.query("GET_LABEL_FILE_LOADING"):`${e.query("GET_LABEL_FILE_LOADING")} ${ai(t.progress)}%`;Zo(e.ref.main,r),Zo(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},ci=({root:e})=>{Zo(e.ref.main,""),Zo(e.ref.sub,"")},di=({root:e,action:t})=>{Zo(e.ref.main,t.status.main),Zo(e.ref.sub,t.status.sub)},ui=qr({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:Br({DID_LOAD_ITEM:ci,DID_REVERT_ITEM_PROCESSING:ci,DID_REQUEST_ITEM_PROCESSING:({root:e})=>{Zo(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING")),Zo(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},DID_ABORT_ITEM_PROCESSING:({root:e})=>{Zo(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_ABORTED")),Zo(e.ref.sub,e.query("GET_LABEL_TAP_TO_RETRY"))},DID_COMPLETE_ITEM_PROCESSING:({root:e})=>{Zo(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),Zo(e.ref.sub,e.query("GET_LABEL_TAP_TO_UNDO"))},DID_UPDATE_ITEM_PROCESS_PROGRESS:({root:e,action:t})=>{const r=null===t.progress?e.query("GET_LABEL_FILE_PROCESSING"):`${e.query("GET_LABEL_FILE_PROCESSING")} ${ai(t.progress)}%`;Zo(e.ref.main,r),Zo(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},DID_UPDATE_ITEM_LOAD_PROGRESS:li,DID_THROW_ITEM_LOAD_ERROR:di,DID_THROW_ITEM_INVALID:di,DID_THROW_ITEM_PROCESSING_ERROR:di,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:di,DID_THROW_ITEM_REMOVE_ERROR:di}),didCreateView:e=>{$n("CREATE_VIEW",l(a({},e),{view:e}))},create:({root:e})=>{const t=Qo("span");t.className="filepond--file-status-main",e.appendChild(t),e.ref.main=t;const r=Qo("span");r.className="filepond--file-status-sub",e.appendChild(r),e.ref.sub=r,li({root:e,action:{progress:null}})},mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),pi={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},fi=[];Er(pi,(e=>{fi.push(e)}));const hi=e=>{if("right"===gi(e))return 0;const t=e.ref.buttonRemoveItem.rect.element;return t.hidden?null:t.width+t.left},Ei=e=>e.ref.buttonAbortItemLoad.rect.element.width,mi=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.height/4),_i=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.left/2),gi=e=>e.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION"),Ti={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:e=>e.query("GET_STYLE_LOAD_INDICATOR_POSITION")},processProgressIndicator:{opacity:0,align:e=>e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},Ii={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:hi},status:{translateX:hi}},yi={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},Ri={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:hi},status:{translateX:hi,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:hi},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:gi},info:{translateX:hi},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:gi},buttonRemoveItem:{opacity:1},info:{translateX:hi},status:{opacity:1,translateX:hi}},DID_LOAD_ITEM:Ii,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:hi},status:{translateX:hi}},DID_START_ITEM_PROCESSING:yi,DID_REQUEST_ITEM_PROCESSING:yi,DID_UPDATE_ITEM_PROCESS_PROGRESS:yi,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:hi}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:hi},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:Ii},Ai=qr({create:({root:e})=>{e.element.innerHTML=e.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),Oi=Br({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:({root:e,action:t})=>{e.ref.buttonAbortItemProcessing.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:({root:e,action:t})=>{e.ref.buttonAbortItemLoad.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:({root:e,action:t})=>{e.ref.buttonAbortItemRemoval.label=t.value},DID_REQUEST_ITEM_PROCESSING:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:({root:e})=>{e.ref.loadProgressIndicator.spin=!0,e.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:({root:e,action:t})=>{e.ref.loadProgressIndicator.spin=!1,e.ref.loadProgressIndicator.progress=t.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:({root:e,action:t})=>{e.ref.processProgressIndicator.spin=!1,e.ref.processProgressIndicator.progress=t.progress}}),Di=qr({create:({root:e,props:t})=>{const r=Object.keys(pi).reduce(((e,t)=>(e[t]=a({},pi[t]),e)),{}),{id:n}=t,o=e.query("GET_ALLOW_REVERT"),i=e.query("GET_ALLOW_REMOVE"),s=e.query("GET_ALLOW_PROCESS"),l=e.query("GET_INSTANT_UPLOAD"),c=e.query("IS_ASYNC"),d=e.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN");let u;c?s&&!o?u=e=>!/RevertItemProcessing/.test(e):!s&&o?u=e=>!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(e):s||o||(u=e=>!/Process/.test(e)):u=e=>!/Process/.test(e);const p=u?fi.filter(u):fi.concat();if(l&&o&&(r.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",r.RevertItemProcessing.icon="GET_ICON_REMOVE"),c&&!o){const e=Ri.DID_COMPLETE_ITEM_PROCESSING;e.info.translateX=_i,e.info.translateY=mi,e.status.translateY=mi,e.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(c&&!s&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach((e=>{Ri[e].status.translateY=mi})),Ri.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=Ei),d&&o){r.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";const e=Ri.DID_COMPLETE_ITEM_PROCESSING;e.info.translateX=hi,e.status.translateY=mi,e.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}i||(r.RemoveItem.disabled=!0),Er(r,((t,r)=>{const o=e.createChildView(ti,{label:e.query(r.label),icon:e.query(r.icon),opacity:0});p.includes(t)&&e.appendChildView(o),r.disabled&&(o.element.setAttribute("disabled","disabled"),o.element.setAttribute("hidden","hidden")),o.element.dataset.align=e.query(`GET_STYLE_${r.align}`),o.element.classList.add(r.className),o.on("click",(t=>{t.stopPropagation(),r.disabled||e.dispatch(r.action,{query:n})})),e.ref[`button${t}`]=o})),e.ref.processingCompleteIndicator=e.appendChildView(e.createChildView(Ai)),e.ref.processingCompleteIndicator.element.dataset.align=e.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),e.ref.info=e.appendChildView(e.createChildView(si,{id:n})),e.ref.status=e.appendChildView(e.createChildView(ui,{id:n}));const f=e.appendChildView(e.createChildView(ei,{opacity:0,align:e.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));f.element.classList.add("filepond--load-indicator"),e.ref.loadProgressIndicator=f;const h=e.appendChildView(e.createChildView(ei,{opacity:0,align:e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));h.element.classList.add("filepond--process-indicator"),e.ref.processProgressIndicator=h,e.ref.activeStyles=[]},write:({root:e,actions:t,props:r})=>{Oi({root:e,actions:t,props:r});let n=t.concat().filter((e=>/^DID_/.test(e.type))).reverse().find((e=>Ri[e.type]));if(n){e.ref.activeStyles=[];const t=Ri[n.type];Er(Ti,((r,n)=>{const o=e.ref[r];Er(n,((n,i)=>{const s=t[r]&&void 0!==t[r][n]?t[r][n]:i;e.ref.activeStyles.push({control:o,key:n,value:s})}))}))}e.ref.activeStyles.forEach((({control:t,key:r,value:n})=>{t[r]="function"==typeof n?n(e):n}))},didCreateView:e=>{$n("CREATE_VIEW",l(a({},e),{view:e}))},name:"file"}),wi=qr({create:({root:e,props:t})=>{e.ref.fileName=Qo("legend"),e.appendChild(e.ref.fileName),e.ref.file=e.appendChildView(e.createChildView(Di,{id:t.id})),e.ref.data=!1},ignoreRect:!0,write:Br({DID_LOAD_ITEM:({root:e,props:t})=>{Zo(e.ref.fileName,e.query("GET_ITEM_NAME",t.id))}}),didCreateView:e=>{$n("CREATE_VIEW",l(a({},e),{view:e}))},tag:"fieldset",name:"file-wrapper"}),vi={type:"spring",damping:.6,mass:7},Si=(e,t,r)=>{const n=qr({name:`panel-${t.name} filepond--${r}`,mixins:t.mixins,ignoreRectUpdate:!0}),o=e.createChildView(n,t.props);e.ref[t.name]=e.appendChildView(o)},Mi=qr({name:"panel",read:({root:e,props:t})=>t.heightCurrent=e.ref.bottom.translateY,write:({root:e,props:t})=>{if(null!==e.ref.scalable&&t.scalable===e.ref.scalable||(e.ref.scalable=!zr(t.scalable)||t.scalable,e.element.dataset.scalable=e.ref.scalable),!t.height)return;const r=e.ref.top.rect.element,n=e.ref.bottom.rect.element,o=Math.max(r.height+n.height,t.height);e.ref.center.translateY=r.height,e.ref.center.scaleY=(o-r.height-n.height)/100,e.ref.bottom.translateY=o-n.height},create:({root:e,props:t})=>{[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:vi},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:vi},styles:["translateY"]}}].forEach((r=>{Si(e,r,t.name)})),e.element.classList.add(`filepond--${t.name}`),e.ref.scalable=null},ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),bi={type:"spring",stiffness:.75,damping:.45,mass:10},Pi={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},Li=Br({DID_UPDATE_PANEL_HEIGHT:({root:e,action:t})=>{e.height=t.height}}),Ci=Br({DID_GRAB_ITEM:({root:e,props:t})=>{t.dragOrigin={x:e.translateX,y:e.translateY}},DID_DRAG_ITEM:({root:e})=>{e.element.dataset.dragState="drag"},DID_DROP_ITEM:({root:e,props:t})=>{t.dragOffset=null,t.dragOrigin=null,e.element.dataset.dragState="drop"}},(({root:e,actions:t,props:r,shouldOptimize:n})=>{"drop"===e.element.dataset.dragState&&e.scaleX<=1&&(e.element.dataset.dragState="idle");let o=t.concat().filter((e=>/^DID_/.test(e.type))).reverse().find((e=>Pi[e.type]));o&&o.type!==r.currentState&&(r.currentState=o.type,e.element.dataset.filepondItemState=Pi[r.currentState]||"");const i=e.query("GET_ITEM_PANEL_ASPECT_RATIO")||e.query("GET_PANEL_ASPECT_RATIO");i?n||(e.height=e.rect.element.width*i):(Li({root:e,actions:t,props:r}),!e.height&&e.ref.container.rect.element.height>0&&(e.height=e.ref.container.rect.element.height)),n&&(e.ref.panel.height=null),e.ref.panel.height=e.height})),Ni=qr({create:({root:e,props:t})=>{if(e.ref.handleClick=r=>e.dispatch("DID_ACTIVATE_ITEM",{id:t.id}),e.element.id=`filepond--item-${t.id}`,e.element.addEventListener("click",e.ref.handleClick),e.ref.container=e.appendChildView(e.createChildView(wi,{id:t.id})),e.ref.panel=e.appendChildView(e.createChildView(Mi,{name:"item-panel"})),e.ref.panel.height=null,t.markedForRemoval=!1,!e.query("GET_ALLOW_REORDER"))return;e.element.dataset.dragState="idle";e.element.addEventListener("pointerdown",(r=>{if(!r.isPrimary)return;let n=!1;const o=r.pageX,i=r.pageY;t.dragOrigin={x:e.translateX,y:e.translateY},t.dragCenter={x:r.offsetX,y:r.offsetY};const s=(e=>{const t=e.map((e=>e.id));let r;return{setIndex:e=>{r=e},getIndex:()=>r,getItemIndex:e=>t.indexOf(e.id)}})(e.query("GET_ACTIVE_ITEMS"));e.dispatch("DID_GRAB_ITEM",{id:t.id,dragState:s});const a=r=>{if(!r.isPrimary)return;r.stopPropagation(),r.preventDefault(),t.dragOffset={x:r.pageX-o,y:r.pageY-i};t.dragOffset.x*t.dragOffset.x+t.dragOffset.y*t.dragOffset.y>16&&!n&&(n=!0,e.element.removeEventListener("click",e.ref.handleClick)),e.dispatch("DID_DRAG_ITEM",{id:t.id,dragState:s})},l=r=>{r.isPrimary&&(document.removeEventListener("pointermove",a),document.removeEventListener("pointerup",l),t.dragOffset={x:r.pageX-o,y:r.pageY-i},e.dispatch("DID_DROP_ITEM",{id:t.id,dragState:s}),n&&setTimeout((()=>e.element.addEventListener("click",e.ref.handleClick)),0))};document.addEventListener("pointermove",a),document.addEventListener("pointerup",l)}))},write:Ci,destroy:({root:e,props:t})=>{e.element.removeEventListener("click",e.ref.handleClick),e.dispatch("RELEASE_ITEM",{query:t.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:"spring",scaleY:"spring",translateX:bi,translateY:bi,opacity:{type:"tween",duration:150}}}});var xi=(e,t)=>Math.max(1,Math.floor((e+1)/t));const Gi=(e,t,r)=>{if(!r)return;const n=e.rect.element.width,o=t.length;let i=null;if(0===o||r.top<t[0].rect.element.top)return-1;const s=t[0].rect.element,a=s.marginLeft+s.marginRight,l=s.width+a,c=xi(n,l);if(1===c){for(let e=0;e<o;e++){const n=t[e],o=n.rect.outer.top+.5*n.rect.element.height;if(r.top<o)return e}return o}const d=s.marginTop+s.marginBottom,u=s.height+d;for(let p=0;p<o;p++){const e=p%c*l,t=Math.floor(p/c)*u,n=t-s.marginTop,a=e+l,d=t+u+s.marginBottom;if(r.top<d&&r.top>n){if(r.left<a)return p;i=p!==o-1?p:null}}return null!==i?i:o},Fi={height:0,width:0,get getHeight(){return this.height},set setHeight(e){0!==this.height&&0!==e||(this.height=e)},get getWidth(){return this.width},set setWidth(e){0!==this.width&&0!==e||(this.width=e)},setDimensions:function(e,t){0!==this.height&&0!==e||(this.height=e),0!==this.width&&0!==t||(this.width=t)}},Ui=(e,t,r,n=0,o=1)=>{e.dragOffset?(e.translateX=null,e.translateY=null,e.translateX=e.dragOrigin.x+e.dragOffset.x,e.translateY=e.dragOrigin.y+e.dragOffset.y,e.scaleX=1.025,e.scaleY=1.025):(e.translateX=t,e.translateY=r,Date.now()>e.spawnDate&&(0===e.opacity&&qi(e,t,r,n,o),e.scaleX=1,e.scaleY=1,e.opacity=1))},qi=(e,t,r,n,o)=>{e.interactionMethod===_n?(e.translateX=null,e.translateX=t,e.translateY=null,e.translateY=r):e.interactionMethod===hn?(e.translateX=null,e.translateX=t-20*n,e.translateY=null,e.translateY=r-10*o,e.scaleX=.8,e.scaleY=.8):e.interactionMethod===En?(e.translateY=null,e.translateY=r-30):e.interactionMethod===fn&&(e.translateX=null,e.translateX=t-30,e.translateY=null)},Bi=e=>e.rect.element.height+.5*e.rect.element.marginBottom+.5*e.rect.element.marginTop,$i=Br({DID_ADD_ITEM:({root:e,action:t})=>{const{id:r,index:n,interactionMethod:o}=t;e.ref.addIndex=n;const i=Date.now();let s=i,a=1;if(o!==_n){a=0;const t=e.query("GET_ITEM_INSERT_INTERVAL"),r=i-e.ref.lastItemSpanwDate;s=r<t?i+(t-r):i}e.ref.lastItemSpanwDate=s,e.appendChildView(e.createChildView(Ni,{spawnDate:s,id:r,opacity:a,interactionMethod:o}),n)},DID_REMOVE_ITEM:({root:e,action:t})=>{const{id:r}=t,n=e.childViews.find((e=>e.id===r));n&&(n.scaleX=.9,n.scaleY=.9,n.opacity=0,n.markedForRemoval=!0)},DID_DRAG_ITEM:({root:e,action:t})=>{const{id:r,dragState:n}=t,o=e.query("GET_ITEM",{id:r}),i=e.childViews.find((e=>e.id===r)),s=e.childViews.length,a=n.getItemIndex(o);if(!i)return;const l=i.dragOrigin.x+i.dragOffset.x+i.dragCenter.x,c=i.dragOrigin.y+i.dragOffset.y+i.dragCenter.y,d=Bi(i),u=(p=i).rect.element.width+.5*p.rect.element.marginLeft+.5*p.rect.element.marginRight;var p;let f=Math.floor(e.rect.outer.width/u);f>s&&(f=s);const h=Math.floor(s/f+1);Fi.setHeight=d*h,Fi.setWidth=u*f;var E={y:Math.floor(c/d),x:Math.floor(l/u),getGridIndex:function(){return c>Fi.getHeight||c<0||l>Fi.getWidth||l<0?a:this.y*f+this.x},getColIndex:function(){const t=e.query("GET_ACTIVE_ITEMS"),r=e.childViews.filter((e=>e.rect.element.height)),n=t.map((e=>r.find((t=>t.id===e.id)))),o=n.findIndex((e=>e===i)),s=Bi(i),a=n.length;let l=a,d=0,u=0,p=0;for(let e=0;e<a;e++)if(d=Bi(n[e]),p=u,u=p+d,c<u){if(o>e){if(c<p+s){l=e;break}continue}l=e;break}return l}};const m=f>1?E.getGridIndex():E.getColIndex();e.dispatch("MOVE_ITEM",{query:i,index:m});const _=n.getIndex();if(void 0===_||_!==m){if(n.setIndex(m),void 0===_)return;e.dispatch("DID_REORDER_ITEMS",{items:e.query("GET_ACTIVE_ITEMS"),origin:a,target:m})}}}),Vi=qr({create:({root:e})=>{_r(e.element,"role","list"),e.ref.lastItemSpanwDate=Date.now()},write:({root:e,props:t,actions:r,shouldOptimize:n})=>{$i({root:e,props:t,actions:r});const{dragCoordinates:o}=t,i=e.rect.element.width,s=e.childViews.filter((e=>e.rect.element.height)),a=e.query("GET_ACTIVE_ITEMS").map((e=>s.find((t=>t.id===e.id)))).filter((e=>e)),l=o?Gi(e,a,o):null,c=e.ref.addIndex||null;e.ref.addIndex=null;let d=0,u=0,p=0;if(0===a.length)return;const f=a[0].rect.element,h=f.marginTop+f.marginBottom,E=f.marginLeft+f.marginRight,m=f.width+E,_=f.height+h,g=xi(i,m);if(1===g){let e=0,t=0;a.forEach(((r,o)=>{if(l){let e=o-l;t=-2===e?.25*-h:-1===e?.75*-h:0===e?.75*h:1===e?.25*h:0}n&&(r.translateX=null,r.translateY=null),r.markedForRemoval||Ui(r,0,e+t);let i=(r.rect.element.height+h)*(r.markedForRemoval?r.opacity:1);e+=i}))}else{let e=0,t=0;a.forEach(((r,o)=>{o===l&&(d=1),o===c&&(p+=1),r.markedForRemoval&&r.opacity<.5&&(u-=1);const i=o+p+d+u,s=i%g,a=Math.floor(i/g),f=s*m,h=a*_,E=Math.sign(f-e),T=Math.sign(h-t);e=f,t=h,r.markedForRemoval||(n&&(r.translateX=null,r.translateY=null),Ui(r,f,h,E,T))}))}},tag:"ul",name:"list",didWriteView:({root:e})=>{e.childViews.filter((e=>e.markedForRemoval&&0===e.opacity&&e.resting)).forEach((t=>{t._destroy(),e.removeChildView(t)}))},filterFrameActionsForChild:(e,t)=>t.filter((t=>!t.data||!t.data.id||e.id===t.data.id)),mixins:{apis:["dragCoordinates"]}}),ki=Br({DID_DRAG:({root:e,props:t,action:r})=>{e.query("GET_ITEM_INSERT_LOCATION_FREEDOM")&&(t.dragCoordinates={left:r.position.scopeLeft-e.ref.list.rect.element.left,top:r.position.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},DID_END_DRAG:({props:e})=>{e.dragCoordinates=null}}),Yi=qr({create:({root:e,props:t})=>{e.ref.list=e.appendChildView(e.createChildView(Vi)),t.dragCoordinates=null,t.overflowing=!1},write:({root:e,props:t,actions:r})=>{if(ki({root:e,props:t,actions:r}),e.ref.list.dragCoordinates=t.dragCoordinates,t.overflowing&&!t.overflow&&(t.overflowing=!1,e.element.dataset.state="",e.height=null),t.overflow){const r=Math.round(t.overflow);r!==e.height&&(t.overflowing=!0,e.element.dataset.state="overflow",e.height=r)}},name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),Hi=(e,t,r,n="")=>{r?_r(e,t,n):e.removeAttribute(t)},Wi=({root:e,action:t})=>{e.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")&&Hi(e.element,"accept",!!t.value,t.value?t.value.join(","):"")},zi=({root:e,action:t})=>{Hi(e.element,"multiple",t.value)},Xi=({root:e,action:t})=>{Hi(e.element,"webkitdirectory",t.value)},ji=({root:e})=>{const t=e.query("GET_DISABLED"),r=e.query("GET_ALLOW_BROWSE"),n=t||!r;Hi(e.element,"disabled",n)},Qi=({root:e,action:t})=>{t.value?0===e.query("GET_TOTAL_ITEMS")&&Hi(e.element,"required",!0):Hi(e.element,"required",!1)},Zi=({root:e,action:t})=>{Hi(e.element,"capture",!!t.value,!0===t.value?"":t.value)},Ki=({root:e})=>{const{element:t}=e;if(e.query("GET_TOTAL_ITEMS")>0)Hi(t,"required",!1),Hi(t,"name",!1);else{Hi(t,"name",!0,e.query("GET_NAME"));e.query("GET_CHECK_VALIDITY")&&t.setCustomValidity(""),e.query("GET_REQUIRED")&&Hi(t,"required",!0)}},Ji=qr({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:({root:e,props:t})=>{e.element.id=`filepond--browser-${t.id}`,_r(e.element,"name",e.query("GET_NAME")),_r(e.element,"aria-controls",`filepond--assistant-${t.id}`),_r(e.element,"aria-labelledby",`filepond--drop-label-${t.id}`),Wi({root:e,action:{value:e.query("GET_ACCEPTED_FILE_TYPES")}}),zi({root:e,action:{value:e.query("GET_ALLOW_MULTIPLE")}}),Xi({root:e,action:{value:e.query("GET_ALLOW_DIRECTORIES_ONLY")}}),ji({root:e}),Qi({root:e,action:{value:e.query("GET_REQUIRED")}}),Zi({root:e,action:{value:e.query("GET_CAPTURE_METHOD")}}),e.ref.handleChange=r=>{if(!e.element.value)return;const n=Array.from(e.element.files).map((e=>(e._relativePath=e.webkitRelativePath,e)));setTimeout((()=>{t.onload(n),(e=>{if(e&&""!==e.value){try{e.value=""}catch(t){}if(e.value){const t=Qo("form"),r=e.parentNode,n=e.nextSibling;t.appendChild(e),t.reset(),n?r.insertBefore(e,n):r.appendChild(e)}}})(e.element)}),250)},e.element.addEventListener("change",e.ref.handleChange)},destroy:({root:e})=>{e.element.removeEventListener("change",e.ref.handleChange)},write:Br({DID_LOAD_ITEM:Ki,DID_REMOVE_ITEM:Ki,DID_THROW_ITEM_INVALID:({root:e})=>{e.query("GET_CHECK_VALIDITY")&&e.element.setCustomValidity(e.query("GET_LABEL_INVALID_FIELD"))},DID_SET_DISABLED:ji,DID_SET_ALLOW_BROWSE:ji,DID_SET_ALLOW_DIRECTORIES_ONLY:Xi,DID_SET_ALLOW_MULTIPLE:zi,DID_SET_ACCEPTED_FILE_TYPES:Wi,DID_SET_CAPTURE_METHOD:Zi,DID_SET_REQUIRED:Qi})}),es=13,ts=32,rs=(e,t)=>{e.innerHTML=t;const r=e.querySelector(".filepond--label-action");return r&&_r(r,"tabindex","0"),t},ns=qr({name:"drop-label",ignoreRect:!0,create:({root:e,props:t})=>{const r=Qo("label");_r(r,"for",`filepond--browser-${t.id}`),_r(r,"id",`filepond--drop-label-${t.id}`),_r(r,"aria-hidden","true"),e.ref.handleKeyDown=t=>{(t.keyCode===es||t.keyCode===ts)&&(t.preventDefault(),e.ref.label.click())},e.ref.handleClick=t=>{t.target===r||r.contains(t.target)||e.ref.label.click()},r.addEventListener("keydown",e.ref.handleKeyDown),e.element.addEventListener("click",e.ref.handleClick),rs(r,t.caption),e.appendChild(r),e.ref.label=r},destroy:({root:e})=>{e.ref.label.addEventListener("keydown",e.ref.handleKeyDown),e.element.removeEventListener("click",e.ref.handleClick)},write:Br({DID_SET_LABEL_IDLE:({root:e,action:t})=>{rs(e.ref.label,t.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),os=qr({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),is=Br({DID_DRAG:({root:e,action:t})=>{e.ref.blob?(e.ref.blob.translateX=t.position.scopeLeft,e.ref.blob.translateY=t.position.scopeTop,e.ref.blob.scaleX=1,e.ref.blob.scaleY=1,e.ref.blob.opacity=1):(({root:e})=>{const t=.5*e.rect.element.width,r=.5*e.rect.element.height;e.ref.blob=e.appendChildView(e.createChildView(os,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:t,translateY:r}))})({root:e})},DID_DROP:({root:e})=>{e.ref.blob&&(e.ref.blob.scaleX=2.5,e.ref.blob.scaleY=2.5,e.ref.blob.opacity=0)},DID_END_DRAG:({root:e})=>{e.ref.blob&&(e.ref.blob.opacity=0)}}),ss=qr({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:({root:e,props:t,actions:r})=>{is({root:e,props:t,actions:r});const{blob:n}=e.ref;0===r.length&&n&&0===n.opacity&&(e.removeChildView(n),e.ref.blob=null)}}),as=(e,t)=>{try{const r=new DataTransfer;t.forEach((e=>{e instanceof File?r.items.add(e):r.items.add(new File([e],e.name,{type:e.type}))})),e.files=r.files}catch(r){return!1}return!0},ls=(e,t)=>e.ref.fields[t],cs=e=>{e.query("GET_ACTIVE_ITEMS").forEach((t=>{e.ref.fields[t.id]&&e.element.appendChild(e.ref.fields[t.id])}))},ds=({root:e})=>cs(e),us=Br({DID_SET_DISABLED:({root:e})=>{e.element.disabled=e.query("GET_DISABLED")},DID_ADD_ITEM:({root:e,action:t})=>{const r=!(e.query("GET_ITEM",t.id).origin===xn)&&e.query("SHOULD_UPDATE_FILE_INPUT"),n=Qo("input");n.type=r?"file":"hidden",n.name=e.query("GET_NAME"),n.disabled=e.query("GET_DISABLED"),e.ref.fields[t.id]=n,cs(e)},DID_LOAD_ITEM:({root:e,action:t})=>{const r=ls(e,t.id);if(!r)return;if(null!==t.serverFileReference&&(r.value=t.serverFileReference),!e.query("SHOULD_UPDATE_FILE_INPUT"))return;const n=e.query("GET_ITEM",t.id);as(r,[n.file])},DID_REMOVE_ITEM:({root:e,action:t})=>{const r=ls(e,t.id);r&&(r.parentNode&&r.parentNode.removeChild(r),delete e.ref.fields[t.id])},DID_DEFINE_VALUE:({root:e,action:t})=>{const r=ls(e,t.id);r&&(null===t.value?r.removeAttribute("value"):r.value=t.value,cs(e))},DID_PREPARE_OUTPUT:({root:e,action:t})=>{e.query("SHOULD_UPDATE_FILE_INPUT")&&setTimeout((()=>{const r=ls(e,t.id);r&&as(r,[t.file])}),0)},DID_REORDER_ITEMS:ds,DID_SORT_ITEMS:ds}),ps=qr({tag:"fieldset",name:"data",create:({root:e})=>e.ref.fields={},write:us,ignoreRect:!0}),fs=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],hs=["css","csv","html","txt"],Es={zip:"zip|compressed",epub:"application/epub+zip"},ms=(e="")=>(e=e.toLowerCase(),fs.includes(e)?"image/"+("jpg"===e?"jpeg":"svg"===e?"svg+xml":e):hs.includes(e)?"text/"+e:Es[e]||""),_s=e=>new Promise(((t,r)=>{const n=vs(e);if(n.length&&!gs(e))return t(n);Ts(e).then(t)})),gs=e=>!!e.files&&e.files.length>0,Ts=e=>new Promise(((t,r)=>{const n=(e.items?Array.from(e.items):[]).filter((e=>Is(e))).map((e=>ys(e)));n.length?Promise.all(n).then((e=>{const r=[];e.forEach((e=>{r.push.apply(r,e)})),t(r.filter((e=>e)).map((e=>(e._relativePath||(e._relativePath=e.webkitRelativePath),e))))})).catch(console.error):t(e.files?Array.from(e.files):[])})),Is=e=>{if(Ds(e)){const t=ws(e);if(t)return t.isFile||t.isDirectory}return"file"===e.kind},ys=e=>new Promise(((t,r)=>{Os(e)?Rs(ws(e)).then(t).catch(r):t([e.getAsFile()])})),Rs=e=>new Promise(((t,r)=>{const n=[];let o=0,i=0;const s=()=>{0===i&&0===o&&t(n)},a=e=>{o++;const t=e.createReader(),l=()=>{t.readEntries((e=>{if(0===e.length)return o--,void s();e.forEach((e=>{e.isDirectory?a(e):(i++,e.file((t=>{const r=As(t);e.fullPath&&(r._relativePath=e.fullPath),n.push(r),i--,s()})))})),l()}),r)};l()};a(e)})),As=e=>{if(e.type.length)return e;const t=e.lastModifiedDate,r=e.name,n=ms(ao(e.name));return n.length?((e=e.slice(0,e.size,n)).name=r,e.lastModifiedDate=t,e):e},Os=e=>Ds(e)&&(ws(e)||{}).isDirectory,Ds=e=>"webkitGetAsEntry"in e,ws=e=>e.webkitGetAsEntry(),vs=e=>{let t=[];try{if(t=Ms(e),t.length)return t;t=Ss(e)}catch(r){}return t},Ss=e=>{let t=e.getData("url");return"string"==typeof t&&t.length?[t]:[]},Ms=e=>{let t=e.getData("text/html");if("string"==typeof t&&t.length){const e=t.match(/src\s*=\s*"(.+?)"/);if(e)return[e[1]]}return[]},bs=[],Ps=e=>({pageLeft:e.pageX,pageTop:e.pageY,scopeLeft:e.offsetX||e.layerX,scopeTop:e.offsetY||e.layerY}),Ls=e=>{const t=bs.find((t=>t.element===e));if(t)return t;const r=Cs(e);return bs.push(r),r},Cs=e=>{const t=[],r={dragenter:Fs,dragover:Us,dragleave:Bs,drop:qs},n={};Er(r,((r,o)=>{n[r]=o(e,t),e.addEventListener(r,n[r],!1)}));const o={element:e,addListener:i=>(t.push(i),()=>{t.splice(t.indexOf(i),1),0===t.length&&(bs.splice(bs.indexOf(o),1),Er(r,(t=>{e.removeEventListener(t,n[t],!1)})))})};return o},Ns=(e,t)=>{var r;const n=((e,t)=>("elementFromPoint"in e||(e=document),e.elementFromPoint(t.x,t.y)))("getRootNode"in(r=t)?r.getRootNode():document,{x:e.pageX-window.pageXOffset,y:e.pageY-window.pageYOffset});return n===t||t.contains(n)};let xs=null;const Gs=(e,t)=>{try{e.dropEffect=t}catch(r){}},Fs=(e,t)=>e=>{e.preventDefault(),xs=e.target,t.forEach((t=>{const{element:r,onenter:n}=t;Ns(e,r)&&(t.state="enter",n(Ps(e)))}))},Us=(e,t)=>e=>{e.preventDefault();const r=e.dataTransfer;_s(r).then((n=>{let o=!1;t.some((t=>{const{filterElement:i,element:s,onenter:a,onexit:l,ondrag:c,allowdrop:d}=t;Gs(r,"copy");const u=d(n);if(u)if(Ns(e,s)){if(o=!0,null===t.state)return t.state="enter",void a(Ps(e));if(t.state="over",i&&!u)return void Gs(r,"none");c(Ps(e))}else i&&!o&&Gs(r,"none"),t.state&&(t.state=null,l(Ps(e)));else Gs(r,"none")}))}))},qs=(e,t)=>e=>{e.preventDefault();const r=e.dataTransfer;_s(r).then((r=>{t.forEach((t=>{const{filterElement:n,element:o,ondrop:i,onexit:s,allowdrop:a}=t;if(t.state=null,!n||Ns(e,o))return a(r)?void i(Ps(e),r):s(Ps(e))}))}))},Bs=(e,t)=>e=>{xs===e.target&&t.forEach((t=>{const{onexit:r}=t;t.state=null,r(Ps(e))}))},$s=(e,t,r)=>{e.classList.add("filepond--hopper");const{catchesDropsOnPage:n,requiresDropOnElement:o,filterItems:i=(e=>e)}=r,s=((e,t,r)=>{const n=Ls(t),o={element:e,filterElement:r,state:null,ondrop:()=>{},onenter:()=>{},ondrag:()=>{},onexit:()=>{},onload:()=>{},allowdrop:()=>{}};return o.destroy=n.addListener(o),o})(e,n?document.documentElement:e,o);let a="",l="";s.allowdrop=e=>t(i(e)),s.ondrop=(e,r)=>{const n=i(r);t(n)?(l="drag-drop",c.onload(n,e)):c.ondragend(e)},s.ondrag=e=>{c.ondrag(e)},s.onenter=e=>{l="drag-over",c.ondragstart(e)},s.onexit=e=>{l="drag-exit",c.ondragend(e)};const c={updateHopperState:()=>{a!==l&&(e.dataset.hopperState=l,a=l)},onload:()=>{},ondragstart:()=>{},ondrag:()=>{},ondragend:()=>{},destroy:()=>{s.destroy()}};return c};let Vs=!1;const ks=[],Ys=e=>{const t=document.activeElement;if(t&&/textarea|input/i.test(t.nodeName)){let e=!1,r=t;for(;r!==document.body;){if(r.classList.contains("filepond--root")){e=!0;break}r=r.parentNode}if(!e)return}_s(e.clipboardData).then((e=>{e.length&&ks.forEach((t=>t(e)))}))},Hs=()=>{const e=e=>{t.onload(e)},t={destroy:()=>{var t;t=e,Tn(ks,ks.indexOf(t)),0===ks.length&&(document.removeEventListener("paste",Ys),Vs=!1)},onload:()=>{}};return(e=>{ks.includes(e)||(ks.push(e),Vs||(Vs=!0,document.addEventListener("paste",Ys)))})(e),t};let Ws=null,zs=null;const Xs=[],js=(e,t)=>{e.element.textContent=t},Qs=(e,t,r)=>{const n=e.query("GET_TOTAL_ITEMS");js(e,`${r} ${t}, ${n} ${1===n?e.query("GET_LABEL_FILE_COUNT_SINGULAR"):e.query("GET_LABEL_FILE_COUNT_PLURAL")}`),clearTimeout(zs),zs=setTimeout((()=>{(e=>{e.element.textContent=""})(e)}),1500)},Zs=e=>e.element.parentNode.contains(document.activeElement),Ks=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename,n=e.query("GET_LABEL_FILE_PROCESSING_ABORTED");js(e,`${r} ${n}`)},Js=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename;js(e,`${t.status.main} ${r} ${t.status.sub}`)},ea=qr({create:({root:e,props:t})=>{e.element.id=`filepond--assistant-${t.id}`,_r(e.element,"role","status"),_r(e.element,"aria-live","polite"),_r(e.element,"aria-relevant","additions")},ignoreRect:!0,ignoreRectUpdate:!0,write:Br({DID_LOAD_ITEM:({root:e,action:t})=>{if(!Zs(e))return;e.element.textContent="";const r=e.query("GET_ITEM",t.id);Xs.push(r.filename),clearTimeout(Ws),Ws=setTimeout((()=>{Qs(e,Xs.join(", "),e.query("GET_LABEL_FILE_ADDED")),Xs.length=0}),750)},DID_REMOVE_ITEM:({root:e,action:t})=>{if(!Zs(e))return;const r=t.item;Qs(e,r.filename,e.query("GET_LABEL_FILE_REMOVED"))},DID_COMPLETE_ITEM_PROCESSING:({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename,n=e.query("GET_LABEL_FILE_PROCESSING_COMPLETE");js(e,`${r} ${n}`)},DID_ABORT_ITEM_PROCESSING:Ks,DID_REVERT_ITEM_PROCESSING:Ks,DID_THROW_ITEM_REMOVE_ERROR:Js,DID_THROW_ITEM_LOAD_ERROR:Js,DID_THROW_ITEM_INVALID:Js,DID_THROW_ITEM_PROCESSING_ERROR:Js}),tag:"span",name:"assistant"}),ta=(e,t="-")=>e.replace(new RegExp(`${t}.`,"g"),(e=>e.charAt(1).toUpperCase())),ra=(e,t=16,r=!0)=>{let n=Date.now(),o=null;return(...i)=>{clearTimeout(o);const s=Date.now()-n,a=()=>{n=Date.now(),e(...i)};s<t?r||(o=setTimeout(a,t-s)):a()}},na=e=>e.preventDefault(),oa=e=>{const t=e.ref.list.childViews[0].childViews[0];return t?{top:t.rect.element.marginTop,bottom:t.rect.element.marginBottom}:{top:0,bottom:0}},ia=e=>{let t=0,r=0;const n=e.ref.list,o=n.childViews[0],i=o.childViews.filter((e=>e.rect.element.height)),s=e.query("GET_ACTIVE_ITEMS").map((e=>i.find((t=>t.id===e.id)))).filter((e=>e));if(0===s.length)return{visual:t,bounds:r};const a=o.rect.element.width,l=Gi(o,s,n.dragCoordinates),c=s[0].rect.element,d=c.marginTop+c.marginBottom,u=c.marginLeft+c.marginRight,p=c.width+u,f=c.height+d,h=void 0!==l&&l>=0?1:0,E=s.find((e=>e.markedForRemoval&&e.opacity<.45))?-1:0,m=s.length+h+E,_=xi(a,p);return 1===_?s.forEach((e=>{const n=e.rect.element.height+d;r+=n,t+=n*e.opacity})):(r=Math.ceil(m/_)*f,t=r),{visual:t,bounds:r}},sa=e=>{const t=e.ref.measureHeight||null;return{cappedHeight:parseInt(e.style.maxHeight,10)||null,fixedHeight:0===t?null:t}},aa=(e,t)=>{const r=e.query("GET_ALLOW_REPLACE"),n=e.query("GET_ALLOW_MULTIPLE"),o=e.query("GET_TOTAL_ITEMS");let i=e.query("GET_MAX_FILES");const s=t.length;if(!n&&s>1)return!0;i=n||r?i:1;return!!(Jr(i)&&o+s>i)&&(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:Ro("warning",0,"Max files")}),!0)},la=(e,t,r)=>{const n=e.childViews[0];return Gi(n,t,{left:r.scopeLeft-n.rect.element.left,top:r.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},ca=e=>{const t=e.query("GET_ALLOW_DROP"),r=e.query("GET_DISABLED"),n=t&&!r;if(n&&!e.ref.hopper){const t=$s(e.element,(t=>{const r=e.query("GET_BEFORE_DROP_FILE")||(()=>!0);return!e.query("GET_DROP_VALIDATION")||t.every((t=>$n("ALLOW_HOPPER_ITEM",t,{query:e.query}).every((e=>!0===e))&&r(t)))}),{filterItems:t=>{const r=e.query("GET_IGNORED_FILES");return t.filter((e=>!Uo(e)||!r.includes(e.name.toLowerCase())))},catchesDropsOnPage:e.query("GET_DROP_ON_PAGE"),requiresDropOnElement:e.query("GET_DROP_ON_ELEMENT")});t.onload=(t,r)=>{const n=e.ref.list.childViews[0].childViews.filter((e=>e.rect.element.height)),o=e.query("GET_ACTIVE_ITEMS").map((e=>n.find((t=>t.id===e.id)))).filter((e=>e));Bn("ADD_ITEMS",t,{dispatch:e.dispatch}).then((t=>{if(aa(e,t))return!1;e.dispatch("ADD_ITEMS",{items:t,index:la(e.ref.list,o,r),interactionMethod:hn})})),e.dispatch("DID_DROP",{position:r}),e.dispatch("DID_END_DRAG",{position:r})},t.ondragstart=t=>{e.dispatch("DID_START_DRAG",{position:t})},t.ondrag=ra((t=>{e.dispatch("DID_DRAG",{position:t})})),t.ondragend=t=>{e.dispatch("DID_END_DRAG",{position:t})},e.ref.hopper=t,e.ref.drip=e.appendChildView(e.createChildView(ss))}else!n&&e.ref.hopper&&(e.ref.hopper.destroy(),e.ref.hopper=null,e.removeChildView(e.ref.drip))},da=(e,t)=>{const r=e.query("GET_ALLOW_BROWSE"),n=e.query("GET_DISABLED"),o=r&&!n;o&&!e.ref.browser?e.ref.browser=e.appendChildView(e.createChildView(Ji,l(a({},t),{onload:t=>{Bn("ADD_ITEMS",t,{dispatch:e.dispatch}).then((t=>{if(aa(e,t))return!1;e.dispatch("ADD_ITEMS",{items:t,index:-1,interactionMethod:En})}))}})),0):!o&&e.ref.browser&&(e.removeChildView(e.ref.browser),e.ref.browser=null)},ua=e=>{const t=e.query("GET_ALLOW_PASTE"),r=e.query("GET_DISABLED"),n=t&&!r;n&&!e.ref.paster?(e.ref.paster=Hs(),e.ref.paster.onload=t=>{Bn("ADD_ITEMS",t,{dispatch:e.dispatch}).then((t=>{if(aa(e,t))return!1;e.dispatch("ADD_ITEMS",{items:t,index:-1,interactionMethod:mn})}))}):!n&&e.ref.paster&&(e.ref.paster.destroy(),e.ref.paster=null)},pa=Br({DID_SET_ALLOW_BROWSE:({root:e,props:t})=>{da(e,t)},DID_SET_ALLOW_DROP:({root:e})=>{ca(e)},DID_SET_ALLOW_PASTE:({root:e})=>{ua(e)},DID_SET_DISABLED:({root:e,props:t})=>{ca(e),ua(e),da(e,t);e.query("GET_DISABLED")?e.element.dataset.disabled="disabled":e.element.removeAttribute("data-disabled")}}),fa=qr({name:"root",read:({root:e})=>{e.ref.measure&&(e.ref.measureHeight=e.ref.measure.offsetHeight)},create:({root:e,props:t})=>{const r=e.query("GET_ID");r&&(e.element.id=r);const n=e.query("GET_CLASS_NAME");n&&n.split(" ").filter((e=>e.length)).forEach((t=>{e.element.classList.add(t)})),e.ref.label=e.appendChildView(e.createChildView(ns,l(a({},t),{translateY:null,caption:e.query("GET_LABEL_IDLE")}))),e.ref.list=e.appendChildView(e.createChildView(Yi,{translateY:null})),e.ref.panel=e.appendChildView(e.createChildView(Mi,{name:"panel-root"})),e.ref.assistant=e.appendChildView(e.createChildView(ea,a({},t))),e.ref.data=e.appendChildView(e.createChildView(ps,a({},t))),e.ref.measure=Qo("div"),e.ref.measure.style.height="100%",e.element.appendChild(e.ref.measure),e.ref.bounds=null,e.query("GET_STYLES").filter((e=>!Yr(e.value))).map((({name:t,value:r})=>{e.element.dataset[t]=r})),e.ref.widthPrevious=null,e.ref.widthUpdated=ra((()=>{e.ref.updateHistory=[],e.dispatch("DID_RESIZE_ROOT")}),250),e.ref.previousAspectRatio=null,e.ref.updateHistory=[];const o=window.matchMedia("(pointer: fine) and (hover: hover)").matches,i="PointerEvent"in window;e.query("GET_ALLOW_REORDER")&&i&&!o&&(e.element.addEventListener("touchmove",na,{passive:!1}),e.element.addEventListener("gesturestart",na));const s=e.query("GET_CREDITS");if(2===s.length){const t=document.createElement("a");t.className="filepond--credits",t.setAttribute("aria-hidden","true"),t.href=s[0],t.tabindex=-1,t.target="_blank",t.rel="noopener noreferrer",t.textContent=s[1],e.element.appendChild(t),e.ref.credits=t}},write:({root:e,props:t,actions:r})=>{if(pa({root:e,props:t,actions:r}),r.filter((e=>/^DID_SET_STYLE_/.test(e.type))).filter((e=>!Yr(e.data.value))).map((({type:t,data:r})=>{const n=ta(t.substr(8).toLowerCase(),"_");e.element.dataset[n]=r.value,e.invalidateLayout()})),e.rect.element.hidden)return;e.rect.element.width!==e.ref.widthPrevious&&(e.ref.widthPrevious=e.rect.element.width,e.ref.widthUpdated());let n=e.ref.bounds;n||(n=e.ref.bounds=sa(e),e.element.removeChild(e.ref.measure),e.ref.measure=null);const{hopper:o,label:i,list:s,panel:a}=e.ref;o&&o.updateHopperState();const l=e.query("GET_PANEL_ASPECT_RATIO"),c=e.query("GET_ALLOW_MULTIPLE"),d=e.query("GET_TOTAL_ITEMS"),u=d===(c?e.query("GET_MAX_FILES")||1e6:1),p=r.find((e=>"DID_ADD_ITEM"===e.type));if(u&&p){const e=p.data.interactionMethod;i.opacity=0,c?i.translateY=-40:e===fn?i.translateX=40:i.translateY=e===En?40:30}else u||(i.opacity=1,i.translateX=0,i.translateY=0);const f=oa(e),h=ia(e),E=i.rect.element.height,m=!c||u?0:E,_=u?s.rect.element.marginTop:0,g=0===d?0:s.rect.element.marginBottom,T=m+_+h.visual+g,I=m+_+h.bounds+g;if(s.translateY=Math.max(0,m-s.rect.element.marginTop)-f.top,l){const t=e.rect.element.width,r=t*l;l!==e.ref.previousAspectRatio&&(e.ref.previousAspectRatio=l,e.ref.updateHistory=[]);const n=e.ref.updateHistory;n.push(t);const o=2;if(n.length>2*o){const e=n.length,t=e-10;let r=0;for(let i=e;i>=t;i--)if(n[i]===n[i-2]&&r++,r>=o)return}a.scalable=!1,a.height=r;const i=r-m-(g-f.bottom)-(u?_:0);h.visual>i?s.overflow=i:s.overflow=null,e.height=r}else if(n.fixedHeight){a.scalable=!1;const e=n.fixedHeight-m-(g-f.bottom)-(u?_:0);h.visual>e?s.overflow=e:s.overflow=null}else if(n.cappedHeight){const t=T>=n.cappedHeight,r=Math.min(n.cappedHeight,T);a.scalable=!0,a.height=t?r:r-f.top-f.bottom;const o=r-m-(g-f.bottom)-(u?_:0);T>n.cappedHeight&&h.visual>o?s.overflow=o:s.overflow=null,e.height=Math.min(n.cappedHeight,I-f.top-f.bottom)}else{const t=d>0?f.top+f.bottom:0;a.scalable=!0,a.height=Math.max(E,T-t),e.height=Math.max(E,I-t)}e.ref.credits&&a.heightCurrent&&(e.ref.credits.style.transform=`translateY(${a.heightCurrent}px)`)},destroy:({root:e})=>{e.ref.paster&&e.ref.paster.destroy(),e.ref.hopper&&e.ref.hopper.destroy(),e.element.removeEventListener("touchmove",na),e.element.removeEventListener("gesturestart",na)},mixins:{styles:["height"]}}),ha=(e={})=>{let t=null;const r=kn(),n=((e,t=[],r=[])=>{const n=a({},e),o=[],i=[],s=(e,t,r)=>{!r||document.hidden?(u[e]&&u[e](t),o.push({type:e,data:t})):i.push({type:e,data:t})},l=(e,...t)=>d[e]?d[e](...t):null,c={getState:()=>a({},n),processActionQueue:()=>{const e=[...o];return o.length=0,e},processDispatchQueue:()=>{const e=[...i];i.length=0,e.forEach((({type:e,data:t})=>{s(e,t)}))},dispatch:s,query:l};let d={};t.forEach((e=>{d=a(a({},e(n)),d)}));let u={};return r.forEach((e=>{u=a(a({},e(s,l,n)),u)})),c})({items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:cn(r)},[no,pn(r)],[jo,un(r)]);n.dispatch("SET_OPTIONS",{options:e});const o=()=>{document.hidden||n.dispatch("KICK")};document.addEventListener("visibilitychange",o);let i=null,s=!1,c=!1,d=null,u=null;const p=()=>{s||(s=!0),clearTimeout(i),i=setTimeout((()=>{s=!1,d=null,u=null,c&&(c=!1,n.dispatch("DID_STOP_RESIZE"))}),500)};window.addEventListener("resize",p);const f=fa(n,{id:gn()});let h=!1,E=!1;const m={_read:()=>{s&&(u=window.innerWidth,d||(d=u),c||u===d||(n.dispatch("DID_START_RESIZE"),c=!0)),E&&h&&(h=null===f.element.offsetParent),h||(f._read(),E=f.rect.element.hidden)},_write:e=>{const t=n.processActionQueue().filter((e=>!/^SET_/.test(e.type)));var r;h&&!t.length||(I(t),h=f._write(e,t,c),(r=n.query("GET_ITEMS")).forEach(((e,t)=>{e.released&&Tn(r,t)})),h&&n.processDispatchQueue())}},_=e=>t=>{const r={type:e};if(!t)return r;if(t.hasOwnProperty("error")&&(r.error=t.error?a({},t.error):null),t.status&&(r.status=a({},t.status)),t.file&&(r.output=t.file),t.source)r.file=t.source;else if(t.item||t.id){const e=t.item?t.item:n.query("GET_ITEM",t.id);r.file=e?An(e):null}return t.items&&(r.items=t.items.map(An)),/progress/.test(e)&&(r.progress=t.progress),t.hasOwnProperty("origin")&&t.hasOwnProperty("target")&&(r.origin=t.origin,r.target=t.target),r},g={DID_DESTROY:_("destroy"),DID_INIT:_("init"),DID_THROW_MAX_FILES:_("warning"),DID_INIT_ITEM:_("initfile"),DID_START_ITEM_LOAD:_("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:_("addfileprogress"),DID_LOAD_ITEM:_("addfile"),DID_THROW_ITEM_INVALID:[_("error"),_("addfile")],DID_THROW_ITEM_LOAD_ERROR:[_("error"),_("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[_("error"),_("removefile")],DID_PREPARE_OUTPUT:_("preparefile"),DID_START_ITEM_PROCESSING:_("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:_("processfileprogress"),DID_ABORT_ITEM_PROCESSING:_("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:_("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:_("processfiles"),DID_REVERT_ITEM_PROCESSING:_("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[_("error"),_("processfile")],DID_REMOVE_ITEM:_("removefile"),DID_UPDATE_ITEMS:_("updatefiles"),DID_ACTIVATE_ITEM:_("activatefile"),DID_REORDER_ITEMS:_("reorderfiles")},T=e=>{const t=a({pond:w},e);delete t.type,f.element.dispatchEvent(new CustomEvent(`FilePond:${e.type}`,{detail:t,bubbles:!0,cancelable:!0,composed:!0}));const r=[];e.hasOwnProperty("error")&&r.push(e.error),e.hasOwnProperty("file")&&r.push(e.file);const o=["type","error","file"];Object.keys(e).filter((e=>!o.includes(e))).forEach((t=>r.push(e[t]))),w.fire(e.type,...r);const i=n.query(`GET_ON${e.type.toUpperCase()}`);i&&i(...r)},I=e=>{e.length&&e.filter((e=>g[e.type])).forEach((e=>{const t=g[e.type];(Array.isArray(t)?t:[t]).forEach((t=>{"DID_INIT_ITEM"===e.type?T(t(e.data)):setTimeout((()=>{T(t(e.data))}),0)}))}))},y=e=>new Promise(((t,r)=>{n.dispatch("REQUEST_ITEM_PREPARE",{query:e,success:e=>{t(e)},failure:e=>{r(e)}})})),R=(e,t)=>{var r;return"object"!=typeof e||(r=e).file&&r.id||t||(t=e,e=void 0),n.dispatch("REMOVE_ITEM",l(a({},t),{query:e})),null===n.query("GET_ACTIVE_ITEM",e)},A=(...e)=>new Promise(((t,r)=>{const o=[],i={};if(kr(e[0]))o.push.apply(o,e[0]),Object.assign(i,e[1]||{});else{const t=e[e.length-1];"object"!=typeof t||t instanceof Blob||Object.assign(i,e.pop()),o.push(...e)}n.dispatch("ADD_ITEMS",{items:o,index:i.index,interactionMethod:fn,success:t,failure:r})})),O=()=>n.query("GET_ACTIVE_ITEMS"),D=e=>new Promise(((t,r)=>{n.dispatch("REQUEST_ITEM_PROCESSING",{query:e,success:e=>{t(e)},failure:e=>{r(e)}})})),w=l(a(a(a({},In()),m),((e,t)=>{const r={};return Er(t,(t=>{r[t]={get:()=>e.getState().options[t],set:r=>{e.dispatch(`SET_${dn(t,"_").toUpperCase()}`,{value:r})}}})),r})(n,r)),{setOptions:e=>n.dispatch("SET_OPTIONS",{options:e}),addFile:(e,t={})=>new Promise(((r,n)=>{A([{source:e,options:t}],{index:t.index}).then((e=>r(e&&e[0]))).catch(n)})),addFiles:A,getFile:e=>n.query("GET_ACTIVE_ITEM",e),processFile:D,prepareFile:y,removeFile:R,moveFile:(e,t)=>n.dispatch("MOVE_ITEM",{query:e,index:t}),getFiles:O,processFiles:(...e)=>{const t=Array.isArray(e[0])?e[0]:e;if(!t.length){const e=O().filter((e=>!(e.status===Dn&&e.origin===xn)&&e.status!==vn&&e.status!==Sn&&e.status!==bn));return Promise.all(e.map(D))}return Promise.all(t.map(D))},removeFiles:(...e)=>{const t=Array.isArray(e[0])?e[0]:e;let r;"object"==typeof t[t.length-1]?r=t.pop():Array.isArray(e[0])&&(r=e[1]);const n=O();if(!t.length)return Promise.all(n.map((e=>R(e,r))));return t.map((e=>Mr(e)?n[e]?n[e].id:null:e)).filter((e=>e)).map((e=>R(e,r)))},prepareFiles:(...e)=>{const t=Array.isArray(e[0])?e[0]:e,r=t.length?t:O();return Promise.all(r.map(y))},sort:e=>n.dispatch("SORT",{compare:e}),browse:()=>{var e=f.element.querySelector("input[type=file]");e&&e.click()},destroy:()=>{w.fire("destroy",f.element),n.dispatch("ABORT_ALL"),f._destroy(),window.removeEventListener("resize",p),document.removeEventListener("visibilitychange",o),n.dispatch("DID_DESTROY")},insertBefore:e=>$r(f.element,e),insertAfter:e=>Vr(f.element,e),appendTo:e=>e.appendChild(f.element),replaceElement:e=>{$r(f.element,e),e.parentNode.removeChild(e),t=e},restoreElement:()=>{t&&(Vr(t,f.element),f.element.parentNode.removeChild(f.element),t=null)},isAttachedTo:e=>f.element===e||t===e,element:{get:()=>f.element},status:{get:()=>n.query("GET_STATUS")}});return n.dispatch("DID_INIT"),mr(w)},Ea=(e={})=>{const t={};Er(kn(),((e,r)=>{t[e]=r[0]}));return ha(a(a({},t),e))},ma=(e,t)=>{Er(t,((t,r)=>{Er(e,((n,o)=>{const i=new RegExp(t);if(!i.test(n))return;if(delete e[n],!1===r)return;if(jr(r))return void(e[r]=o);const s=r.group;var a;on(r)&&!e[s]&&(e[s]={}),e[s][(a=n.replace(i,""),a.charAt(0).toLowerCase()+a.slice(1))]=o})),r.mapping&&ma(e[r.group],r.mapping)}))},_a=(e,t={})=>{const r=[];Er(e.attributes,(t=>{r.push(e.attributes[t])}));const n=r.filter((e=>e.name)).reduce(((t,r)=>{const n=_r(e,r.name);var o;return t[(o=r.name,ta(o.replace(/^data-/,"")))]=n===r.name||n,t}),{});return ma(n,t),n},ga=(...e)=>e[0]instanceof HTMLElement?((e,t={})=>{const r={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};$n("SET_ATTRIBUTE_TO_OPTION_MAP",r);const n=a({},t),o=_a("FIELDSET"===e.nodeName?e.querySelector("input[type=file]"):e,r);Object.keys(o).forEach((e=>{on(o[e])?(on(n[e])||(n[e]={}),Object.assign(n[e],o[e])):n[e]=o[e]})),n.files=(t.files||[]).concat(Array.from(e.querySelectorAll("input:not([type=file])")).map((e=>({source:e.value,options:{type:e.dataset.type}}))));const i=Ea(n);return e.files&&Array.from(e.files).forEach((e=>{i.addFile(e)})),i.replaceElement(e),i})(...e):Ea(...e),Ta=["fire","_read","_write"],Ia=e=>{const t={};return yn(e,t,Ta),t},ya=(e,t)=>e.replace(/(?:{([a-zA-Z]+)})/g,((e,r)=>t[r])),Ra=e=>{const t=new Blob(["(",e.toString(),")()"],{type:"application/javascript"}),r=URL.createObjectURL(t),n=new Worker(r);return{transfer:(e,t)=>{},post:(e,t,r)=>{const o=gn();n.onmessage=e=>{e.data.id===o&&t(e.data.message)},n.postMessage({id:o,message:e},r)},terminate:()=>{n.terminate(),URL.revokeObjectURL(r)}}},Aa=e=>new Promise(((t,r)=>{const n=new Image;n.onload=()=>{t(n)},n.onerror=e=>{r(e)},n.src=e})),Oa=(e,t)=>{const r=e.slice(0,e.size,e.type);return r.lastModifiedDate=e.lastModifiedDate,r.name=t,r},Da=e=>Oa(e,e.name),wa=[],va=e=>{if(wa.includes(e))return;wa.push(e);const t=e({addFilter:Vn,utils:{Type:Un,forin:Er,isString:jr,isFile:Uo,toNaturalFileSize:ri,replaceInString:ya,getExtensionFromFilename:ao,getFilenameWithoutExtension:Fo,guesstimateMimeType:ms,getFileFromBlob:uo,getFilenameFromURL:so,createRoute:Br,createWorker:Ra,createView:qr,createItemAPI:An,loadImage:Aa,copyFile:Da,renameFile:Oa,createBlob:po,applyFilterChain:Bn,text:Zo,getNumericAspectRatioFromString:Wn},views:{fileActionButton:ti}});var r;r=t.options,Object.assign(Yn,r)},Sa=(()=>{const e=Or()&&!("[object OperaMini]"===Object.prototype.toString.call(window.operamini))&&"visibilityState"in document&&"Promise"in window&&"slice"in Blob.prototype&&"URL"in window&&"createObjectURL"in window.URL&&"performance"in window&&("supports"in(window.CSS||{})||/MSIE|Trident/.test(window.navigator.userAgent));return()=>e})(),Ma={apps:[]},ba=()=>{};let Pa={},La=ba,Ca=ba,Na=ba,xa=ba,Ga=ba,Fa=ba,Ua=ba;if(Sa()){((e,t,r=60)=>{const n="__framePainter";if(window[n])return window[n].readers.push(e),void window[n].writers.push(t);window[n]={readers:[e],writers:[t]};const o=window[n],i=1e3/r;let s=null,a=null,l=null,c=null;const d=()=>{document.hidden?(l=()=>window.setTimeout((()=>u(performance.now())),i),c=()=>window.clearTimeout(a)):(l=()=>window.requestAnimationFrame(u),c=()=>window.cancelAnimationFrame(a))};document.addEventListener("visibilitychange",(()=>{c&&c(),d(),u(performance.now())}));const u=e=>{a=l(u),s||(s=e);const t=e-s;t<=i||(s=e-t%i,o.readers.forEach((e=>e())),o.writers.forEach((t=>t(e))))};d(),u(performance.now())})((()=>{Ma.apps.forEach((e=>e._read()))}),(e=>{Ma.apps.forEach((t=>t._write(e)))}));const e=()=>{document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:Sa,create:La,destroy:Ca,parse:Na,find:xa,registerPlugin:Ga,setOptions:Ua}})),document.removeEventListener("DOMContentLoaded",e)};"loading"!==document.readyState?setTimeout((()=>e()),0):document.addEventListener("DOMContentLoaded",e);const t=()=>Er(kn(),((e,t)=>{Pa[e]=t[1]}));Pa={},t(),La=(...e)=>{const t=ga(...e);return t.on("destroy",Ca),Ma.apps.push(t),Ia(t)},Ca=e=>{const t=Ma.apps.findIndex((t=>t.isAttachedTo(e)));if(t>=0){return Ma.apps.splice(t,1)[0].restoreElement(),!0}return!1},Na=e=>Array.from(e.querySelectorAll(".filepond")).filter((e=>!Ma.apps.find((t=>t.isAttachedTo(e))))).map((e=>La(e))),xa=e=>{const t=Ma.apps.find((t=>t.isAttachedTo(e)));return t?Ia(t):null},Ga=(...e)=>{e.forEach(va),t()},Fa=()=>{const e={};return Er(kn(),((t,r)=>{e[t]=r[0]})),e},Ua=e=>(on(e)&&(Ma.apps.forEach((t=>{t.setOptions(e)})),(e=>{Er(e,((e,t)=>{Yn[e]&&(Yn[e][0]=ln(t,Yn[e][0],Yn[e][1]))}))})(e)),Fa())}function qa(e){let t,r;return{c(){t=$("div"),r=$("input"),this.h()},l(e){t=Z(e,"DIV",{class:!0});var n=j(t);r=Z(n,"INPUT",{type:!0,id:!0,name:!0,class:!0,accept:!0,capture:!0}),n.forEach(q),this.h()},h(){z(r,"type","file"),z(r,"id",e[1]),z(r,"name",e[2]),z(r,"class",e[0]),z(r,"accept",e[6]),r.multiple=e[3],r.required=e[4],z(r,"capture",e[5]),z(t,"class","filepond--wrapper")},m(n,o){U(n,t,o),F(t,r),e[24](r)},p(e,[t]){2&t&&z(r,"id",e[1]),4&t&&z(r,"name",e[2]),1&t&&z(r,"class",e[0]),64&t&&z(r,"accept",e[6]),8&t&&(r.multiple=e[3]),16&t&&(r.required=e[4]),32&t&&z(r,"capture",e[5])},i:c,o:c,d(r){r&&q(t),e[24](null)}}}function Ba(e,t,r){const n=Ga,o=Sa();let i,s,{class:l}=t,{id:c}=t,{name:d}=t,{allowMultiple:p}=t,{required:f}=t,{captureMethod:h}=t,{acceptedFileTypes:E}=t;const m=()=>{};let{addFile:_=m}=t,{addFiles:g=m}=t,{browse:T=m}=t,{fireSync:I=m}=t,{getFile:y=m}=t,{getFiles:R=m}=t,{moveFile:A=m}=t,{prepareFile:O=m}=t,{prepareFiles:D=m}=t,{processFile:v=m}=t,{processFiles:S=m}=t,{removeFile:M=m}=t,{removeFiles:b=m}=t,{sort:P=m}=t;var L;return he((()=>{o&&(s?s.setOptions(t):(s=La(i,a({},t)),r(8,_=s.addFile),r(9,g=s.addFiles),r(19,M=s.removeFile),r(20,b=s.removeFiles),r(10,T=s.browse),r(11,I=s.fireSync),r(12,y=s.getFile),r(13,R=s.getFiles),r(14,A=s.moveFile),r(15,O=s.prepareFile),r(16,D=s.prepareFiles),r(17,v=s.processFile),r(18,S=s.processFiles),r(19,M=s.removeFile),r(20,b=s.removeFiles),r(21,P=s.sort)))})),L=()=>{s&&(s.destroy(),s=void 0)},pe().$$.on_destroy.push(L),e.$$set=e=>{r(27,t=u(u({},t),w(e))),"class"in e&&r(0,l=e.class),"id"in e&&r(1,c=e.id),"name"in e&&r(2,d=e.name),"allowMultiple"in e&&r(3,p=e.allowMultiple),"required"in e&&r(4,f=e.required),"captureMethod"in e&&r(5,h=e.captureMethod),"acceptedFileTypes"in e&&r(6,E=e.acceptedFileTypes),"addFile"in e&&r(8,_=e.addFile),"addFiles"in e&&r(9,g=e.addFiles),"browse"in e&&r(10,T=e.browse),"fireSync"in e&&r(11,I=e.fireSync),"getFile"in e&&r(12,y=e.getFile),"getFiles"in e&&r(13,R=e.getFiles),"moveFile"in e&&r(14,A=e.moveFile),"prepareFile"in e&&r(15,O=e.prepareFile),"prepareFiles"in e&&r(16,D=e.prepareFiles),"processFile"in e&&r(17,v=e.processFile),"processFiles"in e&&r(18,S=e.processFiles),"removeFile"in e&&r(19,M=e.removeFile),"removeFiles"in e&&r(20,b=e.removeFiles),"sort"in e&&r(21,P=e.sort)},t=w(t),[l,c,d,p,f,h,E,i,_,g,T,I,y,R,A,O,D,v,S,M,b,P,n,o,function(e){_e[e?"unshift":"push"]((()=>{i=e,r(7,i)}))}]}class $a extends He{constructor(e){super(),Ye(this,e,Ba,qa,m,{registerPlugin:22,isSupported:23,class:0,id:1,name:2,allowMultiple:3,required:4,captureMethod:5,acceptedFileTypes:6,addFile:8,addFiles:9,browse:10,fireSync:11,getFile:12,getFiles:13,moveFile:14,prepareFile:15,prepareFiles:16,processFile:17,processFiles:18,removeFile:19,removeFiles:20,sort:21})}get registerPlugin(){return this.$$.ctx[22]}get isSupported(){return this.$$.ctx[23]}get class(){return this.$$.ctx[0]}set class(e){this.$$set({class:e}),De()}get id(){return this.$$.ctx[1]}set id(e){this.$$set({id:e}),De()}get name(){return this.$$.ctx[2]}set name(e){this.$$set({name:e}),De()}get allowMultiple(){return this.$$.ctx[3]}set allowMultiple(e){this.$$set({allowMultiple:e}),De()}get required(){return this.$$.ctx[4]}set required(e){this.$$set({required:e}),De()}get captureMethod(){return this.$$.ctx[5]}set captureMethod(e){this.$$set({captureMethod:e}),De()}get acceptedFileTypes(){return this.$$.ctx[6]}set acceptedFileTypes(e){this.$$set({acceptedFileTypes:e}),De()}get addFile(){return this.$$.ctx[8]}set addFile(e){this.$$set({addFile:e}),De()}get addFiles(){return this.$$.ctx[9]}set addFiles(e){this.$$set({addFiles:e}),De()}get browse(){return this.$$.ctx[10]}set browse(e){this.$$set({browse:e}),De()}get fireSync(){return this.$$.ctx[11]}set fireSync(e){this.$$set({fireSync:e}),De()}get getFile(){return this.$$.ctx[12]}set getFile(e){this.$$set({getFile:e}),De()}get getFiles(){return this.$$.ctx[13]}set getFiles(e){this.$$set({getFiles:e}),De()}get moveFile(){return this.$$.ctx[14]}set moveFile(e){this.$$set({moveFile:e}),De()}get prepareFile(){return this.$$.ctx[15]}set prepareFile(e){this.$$set({prepareFile:e}),De()}get prepareFiles(){return this.$$.ctx[16]}set prepareFiles(e){this.$$set({prepareFiles:e}),De()}get processFile(){return this.$$.ctx[17]}set processFile(e){this.$$set({processFile:e}),De()}get processFiles(){return this.$$.ctx[18]}set processFiles(e){this.$$set({processFiles:e}),De()}get removeFile(){return this.$$.ctx[19]}set removeFile(e){this.$$set({removeFile:e}),De()}get removeFiles(){return this.$$.ctx[20]}set removeFiles(e){this.$$set({removeFiles:e}),De()}get sort(){return this.$$.ctx[21]}set sort(e){this.$$set({sort:e}),De()}}
/*!
 * FilePondPluginImageExifOrientation 1.0.11
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const Va=65496,ka=65505,Ya=1165519206,Ha=18761,Wa=274,za=65280,Xa=(e,t,r=!1)=>e.getUint16(t,r),ja=(e,t,r=!1)=>e.getUint32(t,r);let Qa;const Za="undefined"!=typeof window&&void 0!==window.document?new Image:{};Za.onload=()=>Qa=Za.naturalWidth>Za.naturalHeight,Za.src="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=";const Ka=({addFilter:e,utils:t})=>{const{Type:r,isFile:n}=t;return e("DID_LOAD_ITEM",((e,{query:t})=>new Promise(((r,o)=>{const i=e.file;if(!(n(i)&&(e=>/^image\/jpeg/.test(e.type))(i)&&t("GET_ALLOW_IMAGE_EXIF_ORIENTATION")&&Qa))return r(e);(e=>new Promise(((t,r)=>{const n=new FileReader;n.onload=function(e){const r=new DataView(e.target.result);if(Xa(r,0)!==Va)return void t(-1);const n=r.byteLength;let o=2;for(;o<n;){const e=Xa(r,o);if(o+=2,e===ka){if(ja(r,o+=2)!==Ya)break;const e=Xa(r,o+=6)===Ha;o+=ja(r,o+4,e);const n=Xa(r,o,e);o+=2;for(let i=0;i<n;i++)if(Xa(r,o+12*i,e)===Wa)return void t(Xa(r,o+12*i+8,e))}else{if((e&za)!==za)break;o+=Xa(r,o)}}t(-1)},n.readAsArrayBuffer(e.slice(0,65536))})))(i).then((t=>{e.setMetadata("exif",{orientation:t}),r(e)}))})))),{options:{allowImageExifOrientation:[!0,r.BOOLEAN]}}};"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Ka}))
/*!
 * FilePondPluginImagePreview 4.6.7
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */;const Ja=(e,t)=>rl(e.x*t,e.y*t),el=(e,t)=>rl(e.x+t.x,e.y+t.y),tl=(e,t,r)=>{const n=Math.cos(t),o=Math.sin(t),i=rl(e.x-r.x,e.y-r.y);return rl(r.x+n*i.x-o*i.y,r.y+o*i.x+n*i.y)},rl=(e=0,t=0)=>({x:e,y:t}),nl=(e,t,r=1,n)=>"string"==typeof e?parseFloat(e)*r:"number"==typeof e?e*(n?t[n]:Math.min(t.width,t.height)):void 0,ol=e=>null!=e,il=(e,t)=>Object.keys(t).forEach((r=>e.setAttribute(r,t[r]))),sl=(e,t)=>{const r=document.createElementNS("http://www.w3.org/2000/svg",e);return t&&il(r,t),r},al={contain:"xMidYMid meet",cover:"xMidYMid slice"},ll={left:"start",center:"middle",right:"end"},cl=e=>t=>sl(e,{id:t.id}),dl={image:e=>{const t=sl("image",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return t.onload=()=>{t.setAttribute("opacity",e.opacity||1)},t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.src),t},rect:cl("rect"),ellipse:cl("ellipse"),text:cl("text"),path:cl("path"),line:e=>{const t=sl("g",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round"}),r=sl("line");t.appendChild(r);const n=sl("path");t.appendChild(n);const o=sl("path");return t.appendChild(o),t}},ul={rect:e=>il(e,a(a({},e.rect),e.styles)),ellipse:e=>{const t=e.rect.x+.5*e.rect.width,r=e.rect.y+.5*e.rect.height,n=.5*e.rect.width,o=.5*e.rect.height;return il(e,a({cx:t,cy:r,rx:n,ry:o},e.styles))},image:(e,t)=>{il(e,l(a(a({},e.rect),e.styles),{preserveAspectRatio:al[t.fit]||"none"}))},text:(e,t,r,n)=>{const o=nl(t.fontSize,r,n),i=t.fontFamily||"sans-serif",s=t.fontWeight||"normal",c=ll[t.textAlign]||"start";il(e,l(a(a({},e.rect),e.styles),{"stroke-width":0,"font-weight":s,"font-size":o,"font-family":i,"text-anchor":c})),e.text!==t.text&&(e.text=t.text,e.textContent=t.text.length?t.text:" ")},path:(e,t,r,n)=>{var o;il(e,l(a({},e.styles),{fill:"none",d:(o=t.points.map((e=>({x:nl(e.x,r,n,"width"),y:nl(e.y,r,n,"height")}))),o.map(((e,t)=>`${0===t?"M":"L"} ${e.x} ${e.y}`)).join(" "))}))},line:(e,t,r,n)=>{il(e,l(a(a({},e.rect),e.styles),{fill:"none"}));const o=e.childNodes[0],i=e.childNodes[1],s=e.childNodes[2],c=e.rect,d={x:e.rect.x+e.rect.width,y:e.rect.y+e.rect.height};if(il(o,{x1:c.x,y1:c.y,x2:d.x,y2:d.y}),!t.lineDecoration)return;i.style.display="none",s.style.display="none";const u=(e=>{const t=Math.sqrt(e.x*e.x+e.y*e.y);return 0===t?{x:0,y:0}:rl(e.x/t,e.y/t)})({x:d.x-c.x,y:d.y-c.y}),p=nl(.05,r,n);if(-1!==t.lineDecoration.indexOf("arrow-begin")){const e=Ja(u,p),t=el(c,e),r=tl(c,2,t),n=tl(c,-2,t);il(i,{style:"display:block;",d:`M${r.x},${r.y} L${c.x},${c.y} L${n.x},${n.y}`})}if(-1!==t.lineDecoration.indexOf("arrow-end")){const e=Ja(u,-p),t=el(d,e),r=tl(d,2,t),n=tl(d,-2,t);il(s,{style:"display:block;",d:`M${r.x},${r.y} L${d.x},${d.y} L${n.x},${n.y}`})}}},pl=(e,t,r,n,o)=>{"path"!==t&&(e.rect=((e,t,r=1)=>{let n=nl(e.x,t,r,"width")||nl(e.left,t,r,"width"),o=nl(e.y,t,r,"height")||nl(e.top,t,r,"height"),i=nl(e.width,t,r,"width"),s=nl(e.height,t,r,"height"),a=nl(e.right,t,r,"width"),l=nl(e.bottom,t,r,"height");return ol(o)||(o=ol(s)&&ol(l)?t.height-s-l:l),ol(n)||(n=ol(i)&&ol(a)?t.width-i-a:a),ol(i)||(i=ol(n)&&ol(a)?t.width-n-a:0),ol(s)||(s=ol(o)&&ol(l)?t.height-o-l:0),{x:n||0,y:o||0,width:i||0,height:s||0}})(r,n,o)),e.styles=((e,t,r)=>{const n=e.borderStyle||e.lineStyle||"solid",o=e.backgroundColor||e.fontColor||"transparent",i=e.borderColor||e.lineColor||"transparent",s=nl(e.borderWidth||e.lineWidth,t,r);return{"stroke-linecap":e.lineCap||"round","stroke-linejoin":e.lineJoin||"round","stroke-width":s||0,"stroke-dasharray":"string"==typeof n?"":n.map((e=>nl(e,t,r))).join(","),stroke:i,fill:o,opacity:e.opacity||1}})(r,n,o),ul[t](e,r,n,o)},fl=["x","y","left","top","right","bottom","width","height"],hl=e=>{const[t,r]=e,n=r.points?{}:fl.reduce(((e,t)=>{var n;return e[t]="string"==typeof(n=r[t])&&/%/.test(n)?parseFloat(n)/100:n,e}),{});return[t,a(a({zIndex:0},r),n)]},El=(e,t)=>e[1].zIndex>t[1].zIndex?1:e[1].zIndex<t[1].zIndex?-1:0,ml=e=>e.utils.createView({name:"image-preview-markup",tag:"svg",ignoreRect:!0,mixins:{apis:["width","height","crop","markup","resize","dirty"]},write:({root:e,props:t})=>{if(!t.dirty)return;const{crop:r,resize:n,markup:o}=t,i=t.width,s=t.height;let a=r.width,l=r.height;if(n){const{size:e}=n;let t=e&&e.width,r=e&&e.height;const o=n.mode,i=n.upscale;t&&!r&&(r=t),r&&!t&&(t=r);const s=a<t&&l<r;if(!s||s&&i){let e=t/a,n=r/l;if("force"===o)a=t,l=r;else{let t;"cover"===o?t=Math.max(e,n):"contain"===o&&(t=Math.min(e,n)),a*=t,l*=t}}}const c={width:i,height:s};e.element.setAttribute("width",c.width),e.element.setAttribute("height",c.height);const d=Math.min(i/a,s/l);e.element.innerHTML="";const u=e.query("GET_IMAGE_PREVIEW_MARKUP_FILTER");o.filter(u).map(hl).sort(El).forEach((t=>{const[r,n]=t,o=((e,t)=>dl[e](t))(r,n);pl(o,r,n,c,d),e.element.appendChild(o)}))}}),_l=(e,t)=>({x:e,y:t}),gl=(e,t)=>_l(e.x-t.x,e.y-t.y),Tl=(e,t)=>Math.sqrt(((e,t)=>((e,t)=>e.x*t.x+e.y*t.y)(gl(e,t),gl(e,t)))(e,t)),Il=(e,t)=>{const r=e,n=t,o=1.5707963267948966-t,i=Math.sin(1.5707963267948966),s=Math.sin(n),a=Math.sin(o),l=Math.cos(o),c=r/i;return _l(l*(c*s),l*(c*a))},yl=(e,t,r,n)=>{const o=n.x>.5?1-n.x:n.x,i=n.y>.5?1-n.y:n.y,s=2*o*e.width,a=2*i*e.height,l=((e,t)=>{const r=e.width,n=e.height,o=Il(r,t),i=Il(n,t),s=_l(e.x+Math.abs(o.x),e.y-Math.abs(o.y)),a=_l(e.x+e.width+Math.abs(i.y),e.y+Math.abs(i.x)),l=_l(e.x-Math.abs(i.y),e.y+e.height-Math.abs(i.x));return{width:Tl(s,a),height:Tl(s,l)}})(t,r);return Math.max(l.width/s,l.height/a)},Rl=(e,t)=>{let r=e.width,n=r*t;n>e.height&&(n=e.height,r=n/t);return{x:.5*(e.width-r),y:.5*(e.height-n),width:r,height:n}},Al=(e,t={})=>{let{zoom:r,rotation:n,center:o,aspectRatio:i}=t;i||(i=e.height/e.width);const s=((e,t,r=1)=>{const n=e.height/e.width;let o=t,i=1,s=n;s>o&&(s=o,i=s/n);const a=Math.max(1/i,o/s),l=e.width/(r*a*i);return{width:l,height:l*t}})(e,i,r),a={x:.5*s.width,y:.5*s.height},l={x:0,y:0,width:s.width,height:s.height,center:a},c=void 0===t.scaleToFit||t.scaleToFit,d=r*yl(e,Rl(l,i),n,c?o:{x:.5,y:.5});return{widthFloat:s.width/d,heightFloat:s.height/d,width:Math.round(s.width/d),height:Math.round(s.height/d)}},Ol={type:"spring",stiffness:.5,damping:.45,mass:10},Dl=e=>e.utils.createView({name:"image-clip",tag:"div",ignoreRect:!0,mixins:{apis:["crop","markup","resize","width","height","dirty","background"],styles:["width","height","opacity"],animations:{opacity:{type:"tween",duration:250}}},didWriteView:function({root:e,props:t}){t.background&&(e.element.style.backgroundColor=t.background)},create:({root:t,props:r})=>{t.ref.image=t.appendChildView(t.createChildView((e=>e.utils.createView({name:"image-canvas-wrapper",tag:"div",ignoreRect:!0,mixins:{apis:["crop","width","height"],styles:["originX","originY","translateX","translateY","scaleX","scaleY","rotateZ"],animations:{originX:Ol,originY:Ol,scaleX:Ol,scaleY:Ol,translateX:Ol,translateY:Ol,rotateZ:Ol}},create:({root:t,props:r})=>{r.width=r.image.width,r.height=r.image.height,t.ref.bitmap=t.appendChildView(t.createChildView((e=>e.utils.createView({name:"image-bitmap",ignoreRect:!0,mixins:{styles:["scaleX","scaleY"]},create:({root:e,props:t})=>{e.appendChild(t.image)}}))(e),{image:r.image}))},write:({root:e,props:t})=>{const{flip:r}=t.crop,{bitmap:n}=e.ref;n.scaleX=r.horizontal?-1:1,n.scaleY=r.vertical?-1:1}}))(e),Object.assign({},r))),t.ref.createMarkup=()=>{t.ref.markup||(t.ref.markup=t.appendChildView(t.createChildView(ml(e),Object.assign({},r))))},t.ref.destroyMarkup=()=>{t.ref.markup&&(t.removeChildView(t.ref.markup),t.ref.markup=null)};const n=t.query("GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR");null!==n&&(t.element.dataset.transparencyIndicator="grid"===n?n:"color")},write:({root:e,props:t,shouldOptimize:r})=>{const{crop:n,markup:o,resize:i,dirty:s,width:a,height:l}=t;e.ref.image.crop=n;const c={x:0,y:0,width:a,height:l,center:{x:.5*a,y:.5*l}},d={width:e.ref.image.width,height:e.ref.image.height},u={x:n.center.x*d.width,y:n.center.y*d.height},p={x:c.center.x-d.width*n.center.x,y:c.center.y-d.height*n.center.y},f=2*Math.PI+n.rotation%(2*Math.PI),h=n.aspectRatio||d.height/d.width,E=void 0===n.scaleToFit||n.scaleToFit,m=yl(d,Rl(c,h),f,E?n.center:{x:.5,y:.5}),_=n.zoom*m;o&&o.length?(e.ref.createMarkup(),e.ref.markup.width=a,e.ref.markup.height=l,e.ref.markup.resize=i,e.ref.markup.dirty=s,e.ref.markup.markup=o,e.ref.markup.crop=Al(d,n)):e.ref.markup&&e.ref.destroyMarkup();const g=e.ref.image;if(r)return g.originX=null,g.originY=null,g.translateX=null,g.translateY=null,g.rotateZ=null,g.scaleX=null,void(g.scaleY=null);g.originX=u.x,g.originY=u.y,g.translateX=p.x,g.translateY=p.y,g.rotateZ=f,g.scaleX=_,g.scaleY=_}});let wl='<svg width="500" height="200" viewBox="0 0 500 200" preserveAspectRatio="none">\n    <defs>\n        <radialGradient id="gradient-__UID__" cx=".5" cy="1.25" r="1.15">\n            <stop offset=\'50%\' stop-color=\'#000000\'/>\n            <stop offset=\'56%\' stop-color=\'#0a0a0a\'/>\n            <stop offset=\'63%\' stop-color=\'#262626\'/>\n            <stop offset=\'69%\' stop-color=\'#4f4f4f\'/>\n            <stop offset=\'75%\' stop-color=\'#808080\'/>\n            <stop offset=\'81%\' stop-color=\'#b1b1b1\'/>\n            <stop offset=\'88%\' stop-color=\'#dadada\'/>\n            <stop offset=\'94%\' stop-color=\'#f6f6f6\'/>\n            <stop offset=\'100%\' stop-color=\'#ffffff\'/>\n        </radialGradient>\n        <mask id="mask-__UID__">\n            <rect x="0" y="0" width="500" height="200" fill="url(#gradient-__UID__)"></rect>\n        </mask>\n    </defs>\n    <rect x="0" width="500" height="200" fill="currentColor" mask="url(#mask-__UID__)"></rect>\n</svg>',vl=0;const Sl=function(){self.onmessage=e=>{createImageBitmap(e.data.message.file).then((t=>{self.postMessage({id:e.data.id,message:t},[t])}))}},Ml=function(){self.onmessage=e=>{const t=e.data.message.imageData,r=e.data.message.colorMatrix,n=t.data,o=n.length,i=r[0],s=r[1],a=r[2],l=r[3],c=r[4],d=r[5],u=r[6],p=r[7],f=r[8],h=r[9],E=r[10],m=r[11],_=r[12],g=r[13],T=r[14],I=r[15],y=r[16],R=r[17],A=r[18],O=r[19];let D=0,w=0,v=0,S=0,M=0;for(;D<o;D+=4)w=n[D]/255,v=n[D+1]/255,S=n[D+2]/255,M=n[D+3]/255,n[D]=Math.max(0,Math.min(255*(w*i+v*s+S*a+M*l+c),255)),n[D+1]=Math.max(0,Math.min(255*(w*d+v*u+S*p+M*f+h),255)),n[D+2]=Math.max(0,Math.min(255*(w*E+v*m+S*_+M*g+T),255)),n[D+3]=Math.max(0,Math.min(255*(w*I+v*y+S*R+M*A+O),255));self.postMessage({id:e.data.id,message:t},[t.data.buffer])}},bl={1:()=>[1,0,0,1,0,0],2:e=>[-1,0,0,1,e,0],3:(e,t)=>[-1,0,0,-1,e,t],4:(e,t)=>[1,0,0,-1,0,t],5:()=>[0,1,1,0,0,0],6:(e,t)=>[0,1,-1,0,t,0],7:(e,t)=>[0,-1,-1,0,t,e],8:e=>[0,-1,1,0,0,e]},Pl=(e,t,r,n)=>{t=Math.round(t),r=Math.round(r);const o=document.createElement("canvas");o.width=t,o.height=r;const i=o.getContext("2d");return n>=5&&n<=8&&([t,r]=[r,t]),((e,t,r,n)=>{-1!==n&&e.transform.apply(e,bl[n](t,r))})(i,t,r,n),i.drawImage(e,0,0,t,r),o},Ll=e=>/^image/.test(e.type)&&!/svg/.test(e.type),Cl=(e,t)=>Math.floor(Math.sqrt(e/(t/4))),Nl=(e,t)=>{(t=t||document.createElement("canvas")).width=e.width,t.height=e.height;return t.getContext("2d").drawImage(e,0,0),t},xl=e=>{const t=e.utils.createView({name:"image-preview-overlay",tag:"div",ignoreRect:!0,create:({root:e,props:t})=>{if(document.querySelector("base")){const e=window.location.href.replace(window.location.hash,"");wl=wl.replace(/url\(\#/g,"url("+e+"#")}vl++,e.element.classList.add(`filepond--image-preview-overlay-${t.status}`),e.element.innerHTML=wl.replace(/__UID__/g,vl)},mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:25}}}});const r=(e=>e.utils.createView({name:"image-preview",tag:"div",ignoreRect:!0,mixins:{apis:["image","crop","markup","resize","dirty","background"],styles:["translateY","scaleX","scaleY","opacity"],animations:{scaleX:Ol,scaleY:Ol,translateY:Ol,opacity:{type:"tween",duration:400}}},create:({root:t,props:r})=>{t.ref.clip=t.appendChildView(t.createChildView(Dl(e),{id:r.id,image:r.image,crop:r.crop,markup:r.markup,resize:r.resize,dirty:r.dirty,background:r.background}))},write:({root:e,props:t,shouldOptimize:r})=>{const{clip:n}=e.ref,{image:o,crop:i,markup:s,resize:a,dirty:l}=t;if(n.crop=i,n.markup=s,n.resize=a,n.dirty=l,n.opacity=r?0:1,r||e.rect.element.hidden)return;const c=o.height/o.width;let d=i.aspectRatio||c;const u=e.rect.inner.width,p=e.rect.inner.height;let f=e.query("GET_IMAGE_PREVIEW_HEIGHT");const h=e.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),E=e.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),m=e.query("GET_PANEL_ASPECT_RATIO"),_=e.query("GET_ALLOW_MULTIPLE");m&&!_&&(f=u*m,d=m);let g=null!==f?f:Math.max(h,Math.min(u*d,E)),T=g/d;T>u&&(T=u,g=T*d),g>p&&(g=p,T=p/d),n.width=T,n.height=g}}))(e),{createWorker:n}=e.utils,o=(e,t,r)=>new Promise((o=>{e.ref.imageData||(e.ref.imageData=r.getContext("2d").getImageData(0,0,r.width,r.height));const i=(e=>{let t;try{t=new ImageData(e.width,e.height)}catch(r){t=document.createElement("canvas").getContext("2d").createImageData(e.width,e.height)}return t.data.set(new Uint8ClampedArray(e.data)),t})(e.ref.imageData);if(!t||20!==t.length)return r.getContext("2d").putImageData(i,0,0),o();const s=n(Ml);s.post({imageData:i,colorMatrix:t},(e=>{r.getContext("2d").putImageData(e,0,0),s.terminate(),o()}),[i.data.buffer])})),i=({root:e,props:t,image:n})=>{const o=t.id,i=e.query("GET_ITEM",{id:o});if(!i)return;const s=i.getMetadata("crop")||{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},zoom:1,rotation:0,aspectRatio:null},a=e.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR");let l,c,d=!1;e.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(l=i.getMetadata("markup")||[],c=i.getMetadata("resize"),d=!0);const u=e.appendChildView(e.createChildView(r,{id:o,image:n,crop:s,resize:c,markup:l,dirty:d,background:a,opacity:0,scaleX:1.15,scaleY:1.15,translateY:15}),e.childViews.length);e.ref.images.push(u),u.opacity=1,u.scaleX=1,u.scaleY=1,u.translateY=0,setTimeout((()=>{e.dispatch("DID_IMAGE_PREVIEW_SHOW",{id:o})}),250)},s=({root:e})=>{e.ref.overlayShadow.opacity=1,e.ref.overlayError.opacity=0,e.ref.overlaySuccess.opacity=0},a=({root:e})=>{e.ref.overlayShadow.opacity=.25,e.ref.overlayError.opacity=1};return e.utils.createView({name:"image-preview-wrapper",create:({root:e})=>{e.ref.images=[],e.ref.imageData=null,e.ref.imageViewBin=[],e.ref.overlayShadow=e.appendChildView(e.createChildView(t,{opacity:0,status:"idle"})),e.ref.overlaySuccess=e.appendChildView(e.createChildView(t,{opacity:0,status:"success"})),e.ref.overlayError=e.appendChildView(e.createChildView(t,{opacity:0,status:"failure"}))},styles:["height"],apis:["height"],destroy:({root:e})=>{e.ref.images.forEach((e=>{e.image.width=1,e.image.height=1}))},didWriteView:({root:e})=>{e.ref.images.forEach((e=>{e.dirty=!1}))},write:e.utils.createRoute({DID_IMAGE_PREVIEW_DRAW:({root:e})=>{const t=e.ref.images[e.ref.images.length-1];t.translateY=0,t.scaleX=1,t.scaleY=1,t.opacity=1},DID_IMAGE_PREVIEW_CONTAINER_CREATE:({root:e,props:t})=>{const{id:r}=t,n=e.query("GET_ITEM",r);if(!n)return;((e,t)=>{let r=new Image;r.onload=()=>{const e=r.naturalWidth,n=r.naturalHeight;r=null,t(e,n)},r.src=e})(URL.createObjectURL(n.file),((t,n)=>{e.dispatch("DID_IMAGE_PREVIEW_CALCULATE_SIZE",{id:r,width:t,height:n})}))},DID_FINISH_CALCULATE_PREVIEWSIZE:({root:e,props:t})=>{const{id:r}=t,s=e.query("GET_ITEM",r);if(!s)return;const a=URL.createObjectURL(s.file),l=()=>{var e;(e=a,new Promise(((t,r)=>{const n=new Image;n.crossOrigin="Anonymous",n.onload=()=>{t(n)},n.onerror=e=>{r(e)},n.src=e}))).then(c)},c=r=>{URL.revokeObjectURL(a);const n=(s.getMetadata("exif")||{}).orientation||-1;let{width:l,height:c}=r;if(!l||!c)return;n>=5&&n<=8&&([l,c]=[c,l]);const d=Math.max(1,.75*window.devicePixelRatio),u=e.query("GET_IMAGE_PREVIEW_ZOOM_FACTOR")*d,p=c/l,f=e.rect.element.width,h=e.rect.element.height;let E=f,m=E*p;p>1?(E=Math.min(l,f*u),m=E*p):(m=Math.min(c,h*u),E=m/p);const _=Pl(r,E,m,n),g=()=>{const n=e.query("GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR")?(e=>{const t=Math.min(10/e.width,10/e.height),r=document.createElement("canvas"),n=r.getContext("2d"),o=r.width=Math.ceil(e.width*t),i=r.height=Math.ceil(e.height*t);n.drawImage(e,0,0,o,i);let s=null;try{s=n.getImageData(0,0,o,i).data}catch(p){return null}const a=s.length;let l=0,c=0,d=0,u=0;for(;u<a;u+=4)l+=s[u]*s[u],c+=s[u+1]*s[u+1],d+=s[u+2]*s[u+2];return l=Cl(l,a),c=Cl(c,a),d=Cl(d,a),{r:l,g:c,b:d}})(data):null;s.setMetadata("color",n,!0),"close"in r&&r.close(),e.ref.overlayShadow.opacity=1,i({root:e,props:t,image:_})},T=s.getMetadata("filter");T?o(e,T,_).then(g):g()};if((e=>{const t=window.navigator.userAgent.match(/Firefox\/([0-9]+)\./);return!((t?parseInt(t[1]):null)<=58)&&"createImageBitmap"in window&&Ll(e)})(s.file)){const e=n(Sl);e.post({file:s.file},(t=>{e.terminate(),t?c(t):l()}))}else l()},DID_UPDATE_ITEM_METADATA:({root:e,props:t,action:r})=>{if(!/crop|filter|markup|resize/.test(r.change.key))return;if(!e.ref.images.length)return;const n=e.query("GET_ITEM",{id:t.id});if(n)if(/filter/.test(r.change.key)){const t=e.ref.images[e.ref.images.length-1];o(e,r.change.value,t.image)}else if(/crop|markup|resize/.test(r.change.key)){const r=n.getMetadata("crop"),o=e.ref.images[e.ref.images.length-1];if(Math.abs(r.aspectRatio-o.crop.aspectRatio)>1e-5){const r=(({root:e})=>{const t=e.ref.images.shift();return t.opacity=0,t.translateY=-15,e.ref.imageViewBin.push(t),t})({root:e});i({root:e,props:t,image:Nl(r.image)})}else(({root:e,props:t})=>{const r=e.query("GET_ITEM",{id:t.id});if(!r)return;const n=e.ref.images[e.ref.images.length-1];n.crop=r.getMetadata("crop"),n.background=e.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR"),e.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(n.dirty=!0,n.resize=r.getMetadata("resize"),n.markup=r.getMetadata("markup"))})({root:e,props:t})}},DID_THROW_ITEM_LOAD_ERROR:a,DID_THROW_ITEM_PROCESSING_ERROR:a,DID_THROW_ITEM_INVALID:a,DID_COMPLETE_ITEM_PROCESSING:({root:e})=>{e.ref.overlayShadow.opacity=.25,e.ref.overlaySuccess.opacity=1},DID_START_ITEM_PROCESSING:s,DID_REVERT_ITEM_PROCESSING:s},(({root:e})=>{const t=e.ref.imageViewBin.filter((e=>0===e.opacity));e.ref.imageViewBin=e.ref.imageViewBin.filter((e=>e.opacity>0)),t.forEach((t=>((e,t)=>{e.removeChildView(t),t.image.width=1,t.image.height=1,t._destroy()})(e,t))),t.length=0}))})},Gl=e=>{const{addFilter:t,utils:r}=e,{Type:n,createRoute:o,isFile:i}=r,s=xl(e);return t("CREATE_VIEW",(e=>{const{is:t,view:r,query:n}=e;if(!t("file")||!n("GET_ALLOW_IMAGE_PREVIEW"))return;const a=({root:e})=>{e.ref.shouldRescale=!0};r.registerWriter(o({DID_RESIZE_ROOT:a,DID_STOP_RESIZE:a,DID_LOAD_ITEM:({root:e,props:t})=>{const{id:o}=t,a=n("GET_ITEM",o);if(!a||!i(a.file)||a.archived)return;const l=a.file;if(!(e=>/^image/.test(e.type))(l))return;if(!n("GET_IMAGE_PREVIEW_FILTER_ITEM")(a))return;const c="createImageBitmap"in(window||{}),d=n("GET_IMAGE_PREVIEW_MAX_FILE_SIZE");if(!c&&d&&l.size>d)return;e.ref.imagePreview=r.appendChildView(r.createChildView(s,{id:o}));const u=e.query("GET_IMAGE_PREVIEW_HEIGHT");u&&e.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:a.id,height:u});const p=!c&&l.size>n("GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE");e.dispatch("DID_IMAGE_PREVIEW_CONTAINER_CREATE",{id:o},p)},DID_IMAGE_PREVIEW_CALCULATE_SIZE:({root:e,action:t})=>{e.ref.imageWidth=t.width,e.ref.imageHeight=t.height,e.ref.shouldRescale=!0,e.ref.shouldDrawPreview=!0,e.dispatch("KICK")},DID_UPDATE_ITEM_METADATA:({root:e,action:t})=>{"crop"===t.change.key&&(e.ref.shouldRescale=!0)}},(({root:e,props:t})=>{e.ref.imagePreview&&(e.rect.element.hidden||(e.ref.shouldRescale&&(((e,t)=>{if(!e.ref.imagePreview)return;let{id:r}=t;const n=e.query("GET_ITEM",{id:r});if(!n)return;const o=e.query("GET_PANEL_ASPECT_RATIO"),i=e.query("GET_ITEM_PANEL_ASPECT_RATIO"),s=e.query("GET_IMAGE_PREVIEW_HEIGHT");if(o||i||s)return;let{imageWidth:a,imageHeight:l}=e.ref;if(!a||!l)return;const c=e.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),d=e.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),u=(n.getMetadata("exif")||{}).orientation||-1;if(u>=5&&u<=8&&([a,l]=[l,a]),!Ll(n.file)||e.query("GET_IMAGE_PREVIEW_UPSCALE")){const e=2048/a;a*=e,l*=e}const p=l/a,f=(n.getMetadata("crop")||{}).aspectRatio||p;let h=Math.max(c,Math.min(l,d));const E=e.rect.element.width,m=Math.min(E*f,h);e.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:n.id,height:m})})(e,t),e.ref.shouldRescale=!1),e.ref.shouldDrawPreview&&(requestAnimationFrame((()=>{e.dispatch("DID_FINISH_CALCULATE_PREVIEWSIZE",{id:t.id})})),e.ref.shouldDrawPreview=!1)))})))})),{options:{allowImagePreview:[!0,n.BOOLEAN],imagePreviewFilterItem:[()=>!0,n.FUNCTION],imagePreviewHeight:[null,n.INT],imagePreviewMinHeight:[44,n.INT],imagePreviewMaxHeight:[256,n.INT],imagePreviewMaxFileSize:[null,n.INT],imagePreviewZoomFactor:[2,n.INT],imagePreviewUpscale:[!1,n.BOOLEAN],imagePreviewMaxInstantPreviewFileSize:[1e6,n.INT],imagePreviewTransparencyIndicator:[null,n.STRING],imagePreviewCalculateAverageImageColor:[!1,n.BOOLEAN],imagePreviewMarkupShow:[!0,n.BOOLEAN],imagePreviewMarkupFilter:[()=>!0,n.FUNCTION]}}};function Fl(e){const t=e-1;return t*t*t+1}function Ul(e,{delay:t=0,duration:r=400,easing:n=Fl,x:o=0,y:i=0,opacity:s=0}={}){const a=getComputedStyle(e),l=+a.opacity,c="none"===a.transform?"":a.transform,d=l*(1-s);return{delay:t,duration:r,easing:n,css:(e,t)=>`\n\t\t\ttransform: ${c} translate(${(1-e)*o}px, ${(1-e)*i}px);\n\t\t\topacity: ${l-d*t}`}}function ql(e){this.message=e}"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Gl})),ql.prototype=new Error,ql.prototype.name="InvalidCharacterError";var Bl="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new ql("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,n,o=0,i=0,s="";n=t.charAt(i++);~n&&(r=o%4?64*r+n:n,o++%4)?s+=String.fromCharCode(255&r>>(-2*o&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return s};function $l(e){this.message=e}function Vl(e,t){if("string"!=typeof e)throw new $l("Invalid token specified");var r=!0===(t=t||{}).header?0:1;try{return JSON.parse(function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return decodeURIComponent(Bl(t).replace(/(.)/g,(function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})))}catch(r){return Bl(t)}}(e.split(".")[r]))}catch(n){throw new $l("Invalid token specified: "+n.message)}}$l.prototype=new Error,$l.prototype.name="InvalidTokenError";export{$a as $,fe as A,u as B,ze as C,re as D,F as E,c as F,I as G,Re as H,ne as I,H as J,B as K,v as L,oe as M,g as N,y as O,O as P,D as Q,A as R,He as S,Xe as T,ie as U,fr as V,h as W,te as X,W as Y,Ge as Z,hr as _,j as a,X as a0,Ga as a1,Ka as a2,Gl as a3,Ul as a4,Vl as a5,z as b,Z as c,q as d,$ as e,U as f,K as g,ee as h,Ye as i,qe as j,k,Y as l,Be as m,J as n,$e as o,Fe as p,Ue as q,Pe as r,m as s,V as t,Ne as u,Ve as v,Le as w,Ce as x,Ee as y,he as z};
