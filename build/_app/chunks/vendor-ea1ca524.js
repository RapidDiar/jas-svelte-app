var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,s=(t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,a=(e,t)=>{for(var r in t||(t={}))o.call(t,r)&&s(e,r,t[r]);if(n)for(var r of n(t))i.call(t,r)&&s(e,r,t[r]);return e},l=(e,n)=>t(e,r(n));function c(){}const d=e=>e;function u(e,t){for(const r in t)e[r]=t[r];return e}function p(e){return e()}function f(){return Object.create(null)}function h(e){e.forEach(p)}function E(e){return"function"==typeof e}function m(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let _;function g(e,t){return _||(_=document.createElement("a")),_.href=t,e===_.href}function T(e,t,r){e.$$.on_destroy.push(function(e,...t){if(null==e)return c;const r=e.subscribe(...t);return r.unsubscribe?()=>r.unsubscribe():r}(t,r))}function I(e,t,r,n){if(e){const o=y(e,t,r,n);return e[0](o)}}function y(e,t,r,n){return e[1]&&n?u(r.ctx.slice(),e[1](n(t))):r.ctx}function R(e,t,r,n){if(e[2]&&n){const o=e[2](n(r));if(void 0===t.dirty)return o;if("object"==typeof o){const e=[],r=Math.max(t.dirty.length,o.length);for(let n=0;n<r;n+=1)e[n]=t.dirty[n]|o[n];return e}return t.dirty|o}return t.dirty}function A(e,t,r,n,o,i){if(o){const s=y(t,r,n,i);e.p(s,o)}}function O(e){if(e.ctx.length>32){const t=[],r=e.ctx.length/32;for(let e=0;e<r;e++)t[e]=-1;return t}return-1}function D(e){const t={};for(const r in e)"$"!==r[0]&&(t[r]=e[r]);return t}function w(e,t,r){return e.set(r),t}const v="undefined"!=typeof window;let S=v?()=>window.performance.now():()=>Date.now(),M=v?e=>requestAnimationFrame(e):c;const b=new Set;function P(e){b.forEach((t=>{t.c(e)||(b.delete(t),t.f())})),0!==b.size&&M(P)}let L=!1;function C(e,t,r,n){for(;e<t;){const o=e+(t-e>>1);r(o)<=n?e=o+1:t=o}return e}function N(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t.host?t:document}function x(e){const t=B("style");return function(e,t){!function(e,t){e.appendChild(t)}(e.head||e,t)}(N(e),t),t}function G(e,t){if(L){for(!function(e){if(e.hydrate_init)return;e.hydrate_init=!0;let t=e.childNodes;if("HEAD"===e.nodeName){const e=[];for(let r=0;r<t.length;r++){const n=t[r];void 0!==n.claim_order&&e.push(n)}t=e}const r=new Int32Array(t.length+1),n=new Int32Array(t.length);r[0]=-1;let o=0;for(let l=0;l<t.length;l++){const e=t[l].claim_order,i=(o>0&&t[r[o]].claim_order<=e?o+1:C(1,o,(e=>t[r[e]].claim_order),e))-1;n[l]=r[i]+1;const s=i+1;r[s]=l,o=Math.max(s,o)}const i=[],s=[];let a=t.length-1;for(let l=r[o]+1;0!=l;l=n[l-1]){for(i.push(t[l-1]);a>=l;a--)s.push(t[a]);a--}for(;a>=0;a--)s.push(t[a]);i.reverse(),s.sort(((e,t)=>e.claim_order-t.claim_order));for(let l=0,c=0;l<s.length;l++){for(;c<i.length&&s[l].claim_order>=i[c].claim_order;)c++;const t=c<i.length?i[c]:null;e.insertBefore(s[l],t)}}(e),(void 0===e.actual_end_child||null!==e.actual_end_child&&e.actual_end_child.parentElement!==e)&&(e.actual_end_child=e.firstChild);null!==e.actual_end_child&&void 0===e.actual_end_child.claim_order;)e.actual_end_child=e.actual_end_child.nextSibling;t!==e.actual_end_child?void 0===t.claim_order&&t.parentNode===e||e.insertBefore(t,e.actual_end_child):e.actual_end_child=t.nextSibling}else t.parentNode!==e&&e.appendChild(t)}function F(e,t,r){L&&!r?G(e,t):t.parentNode===e&&t.nextSibling==r||e.insertBefore(t,r||null)}function U(e){e.parentNode.removeChild(e)}function q(e,t){for(let r=0;r<e.length;r+=1)e[r]&&e[r].d(t)}function B(e){return document.createElement(e)}function $(e){return document.createTextNode(e)}function V(){return $(" ")}function k(){return $("")}function Y(e,t,r,n){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r,n)}function H(e){return function(t){return t.preventDefault(),e.call(this,t)}}function W(e,t,r){null==r?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function z(e){return""===e?null:+e}function X(e){return Array.from(e.childNodes)}function j(e,t,r,n,o=!1){!function(e){void 0===e.claim_info&&(e.claim_info={last_index:0,total_claimed:0})}(e);const i=(()=>{for(let n=e.claim_info.last_index;n<e.length;n++){const i=e[n];if(t(i)){const t=r(i);return void 0===t?e.splice(n,1):e[n]=t,o||(e.claim_info.last_index=n),i}}for(let n=e.claim_info.last_index-1;n>=0;n--){const i=e[n];if(t(i)){const t=r(i);return void 0===t?e.splice(n,1):e[n]=t,o?void 0===t&&e.claim_info.last_index--:e.claim_info.last_index=n,i}}return n()})();return i.claim_order=e.claim_info.total_claimed,e.claim_info.total_claimed+=1,i}function Q(e,t,r,n){return j(e,(e=>e.nodeName===t),(e=>{const t=[];for(let n=0;n<e.attributes.length;n++){const o=e.attributes[n];r[o.name]||t.push(o.name)}t.forEach((t=>e.removeAttribute(t)))}),(()=>n?function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}(t):B(t)))}function Z(e,t){return j(e,(e=>3===e.nodeType),(e=>{const r=""+t;if(e.data.startsWith(r)){if(e.data.length!==r.length)return e.splitText(r.length)}else e.data=r}),(()=>$(t)),!0)}function K(e){return Z(e," ")}function J(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function ee(e,t){e.value=null==t?"":t}function te(e,t,r,n){e.style.setProperty(t,r,n?"important":"")}function re(e,t=document.body){return Array.from(t.querySelectorAll(e))}const ne=new Set;let oe,ie=0;function se(e,t,r,n,o,i,s,a=0){const l=16.666/n;let c="{\n";for(let m=0;m<=1;m+=l){const e=t+(r-t)*i(m);c+=100*m+`%{${s(e,1-e)}}\n`}const d=c+`100% {${s(r,1-r)}}\n}`,u=`__svelte_${function(e){let t=5381,r=e.length;for(;r--;)t=(t<<5)-t^e.charCodeAt(r);return t>>>0}(d)}_${a}`,p=N(e);ne.add(p);const f=p.__svelte_stylesheet||(p.__svelte_stylesheet=x(e).sheet),h=p.__svelte_rules||(p.__svelte_rules={});h[u]||(h[u]=!0,f.insertRule(`@keyframes ${u} ${d}`,f.cssRules.length));const E=e.style.animation||"";return e.style.animation=`${E?`${E}, `:""}${u} ${n}ms linear ${o}ms 1 both`,ie+=1,u}function ae(e,t){const r=(e.style.animation||"").split(", "),n=r.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),o=r.length-n.length;o&&(e.style.animation=n.join(", "),ie-=o,ie||M((()=>{ie||(ne.forEach((e=>{const t=e.__svelte_stylesheet;let r=t.cssRules.length;for(;r--;)t.deleteRule(r);e.__svelte_rules={}})),ne.clear())})))}function le(e){oe=e}function ce(){if(!oe)throw new Error("Function called outside component initialization");return oe}function de(e){ce().$$.on_mount.push(e)}function ue(e){ce().$$.after_update.push(e)}function pe(e,t){ce().$$.context.set(e,t)}const fe=[],he=[],Ee=[],me=[],_e=Promise.resolve();let ge=!1;function Te(e){Ee.push(e)}let Ie=!1;const ye=new Set;function Re(){if(!Ie){Ie=!0;do{for(let e=0;e<fe.length;e+=1){const t=fe[e];le(t),Ae(t.$$)}for(le(null),fe.length=0;he.length;)he.pop()();for(let e=0;e<Ee.length;e+=1){const t=Ee[e];ye.has(t)||(ye.add(t),t())}Ee.length=0}while(fe.length);for(;me.length;)me.pop()();ge=!1,Ie=!1,ye.clear()}}function Ae(e){if(null!==e.fragment){e.update(),h(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Te)}}let Oe;function De(e,t,r){e.dispatchEvent(function(e,t,r=!1){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,r,!1,t),n}(`${t?"intro":"outro"}${r}`))}const we=new Set;let ve;function Se(){ve={r:0,c:[],p:ve}}function Me(){ve.r||h(ve.c),ve=ve.p}function be(e,t){e&&e.i&&(we.delete(e),e.i(t))}function Pe(e,t,r,n){if(e&&e.o){if(we.has(e))return;we.add(e),ve.c.push((()=>{we.delete(e),n&&(r&&e.d(1),n())})),e.o(t)}}const Le={duration:0};function Ce(e,t,r,n){let o=t(e,r),i=n?0:1,s=null,a=null,l=null;function u(){l&&ae(e,l)}function p(e,t){const r=e.b-i;return t*=Math.abs(r),{a:i,b:e.b,d:r,duration:t,start:e.start,end:e.start+t,group:e.group}}function f(t){const{delay:r=0,duration:n=300,easing:f=d,tick:E=c,css:m}=o||Le,_={start:S()+r,b:t};t||(_.group=ve,ve.r+=1),s||a?a=_:(m&&(u(),l=se(e,i,t,n,r,f,m)),t&&E(0,1),s=p(_,n),Te((()=>De(e,t,"start"))),function(e){let t;0===b.size&&M(P),new Promise((r=>{b.add(t={c:e,f:r})}))}((t=>{if(a&&t>a.start&&(s=p(a,n),a=null,De(e,s.b,"start"),m&&(u(),l=se(e,i,s.b,s.duration,0,f,o.css))),s)if(t>=s.end)E(i=s.b,1-i),De(e,s.b,"end"),a||(s.b?u():--s.group.r||h(s.group.c)),s=null;else if(t>=s.start){const e=t-s.start;i=s.a+s.d*f(e/s.duration),E(i,1-i)}return!(!s&&!a)})))}return{run(e){E(o)?(Oe||(Oe=Promise.resolve(),Oe.then((()=>{Oe=null}))),Oe).then((()=>{o=o(),f(e)})):f(e)},end(){u(),s=a=null}}}function Ne(e,t){const r={},n={},o={$$scope:1};let i=e.length;for(;i--;){const s=e[i],a=t[i];if(a){for(const e in s)e in a||(n[e]=1);for(const e in a)o[e]||(r[e]=a[e],o[e]=1);e[i]=a}else for(const e in s)o[e]=1}for(const s in n)s in r||(r[s]=void 0);return r}function xe(e){return"object"==typeof e&&null!==e?e:{}}function Ge(e){e&&e.c()}function Fe(e,t){e&&e.l(t)}function Ue(e,t,r,n){const{fragment:o,on_mount:i,on_destroy:s,after_update:a}=e.$$;o&&o.m(t,r),n||Te((()=>{const t=i.map(p).filter(E);s?s.push(...t):h(t),e.$$.on_mount=[]})),a.forEach(Te)}function qe(e,t){const r=e.$$;null!==r.fragment&&(h(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function Be(e,t){-1===e.$$.dirty[0]&&(fe.push(e),ge||(ge=!0,_e.then(Re)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function $e(e,t,r,n,o,i,s,a=[-1]){const l=oe;le(e);const d=e.$$={fragment:null,ctx:null,props:i,update:c,not_equal:o,bound:f(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:t.context||[]),callbacks:f(),dirty:a,skip_bound:!1,root:t.target||l.$$.root};s&&s(d.root);let u=!1;if(d.ctx=r?r(e,t.props||{},((t,r,...n)=>{const i=n.length?n[0]:r;return d.ctx&&o(d.ctx[t],d.ctx[t]=i)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](i),u&&Be(e,t)),r})):[],d.update(),u=!0,h(d.before_update),d.fragment=!!n&&n(d.ctx),t.target){if(t.hydrate){L=!0;const e=X(t.target);d.fragment&&d.fragment.l(e),e.forEach(U)}else d.fragment&&d.fragment.c();t.intro&&be(e.$$.fragment),Ue(e,t.target,t.anchor,t.customElement),L=!1,Re()}le(l)}class Ve{$destroy(){qe(this,1),this.$destroy=c}$on(e,t){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const e=r.indexOf(t);-1!==e&&r.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ke=[];function Ye(e,t=c){let r;const n=new Set;function o(t){if(m(e,t)&&(e=t,r)){const t=!ke.length;for(const r of n)r[1](),ke.push(r,e);if(t){for(let e=0;e<ke.length;e+=2)ke[e][0](ke[e+1]);ke.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(i,s=c){const a=[i,s];return n.add(a),1===n.size&&(r=t(o)||c),i(e),()=>{n.delete(a),0===n.size&&(r(),r=null)}}}}var He={exports:{}},We=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}},ze=We,Xe=Object.prototype.toString;function je(e){return"[object Array]"===Xe.call(e)}function Qe(e){return void 0===e}function Ze(e){return null!==e&&"object"==typeof e}function Ke(e){if("[object Object]"!==Xe.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function Je(e){return"[object Function]"===Xe.call(e)}function et(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),je(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}var tt={isArray:je,isArrayBuffer:function(e){return"[object ArrayBuffer]"===Xe.call(e)},isBuffer:function(e){return null!==e&&!Qe(e)&&null!==e.constructor&&!Qe(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:Ze,isPlainObject:Ke,isUndefined:Qe,isDate:function(e){return"[object Date]"===Xe.call(e)},isFile:function(e){return"[object File]"===Xe.call(e)},isBlob:function(e){return"[object Blob]"===Xe.call(e)},isFunction:Je,isStream:function(e){return Ze(e)&&Je(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:et,merge:function e(){var t={};function r(r,n){Ke(t[n])&&Ke(r)?t[n]=e(t[n],r):Ke(r)?t[n]=e({},r):je(r)?t[n]=r.slice():t[n]=r}for(var n=0,o=arguments.length;n<o;n++)et(arguments[n],r);return t},extend:function(e,t,r){return et(t,(function(t,n){e[n]=r&&"function"==typeof t?ze(t,r):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}},rt=tt;function nt(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var ot=function(e,t,r){if(!t)return e;var n;if(r)n=r(t);else if(rt.isURLSearchParams(t))n=t.toString();else{var o=[];rt.forEach(t,(function(e,t){null!=e&&(rt.isArray(e)?t+="[]":e=[e],rt.forEach(e,(function(e){rt.isDate(e)?e=e.toISOString():rt.isObject(e)&&(e=JSON.stringify(e)),o.push(nt(t)+"="+nt(e))})))})),n=o.join("&")}if(n){var i=e.indexOf("#");-1!==i&&(e=e.slice(0,i)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e},it=tt;function st(){this.handlers=[]}st.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},st.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},st.prototype.forEach=function(e){it.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var at=st,lt=tt,ct=function(e){return!(!e||!e.__CANCEL__)},dt=tt,ut=function(e,t,r,n,o){return e.config=t,r&&(e.code=r),e.request=n,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e},pt=function(e,t,r,n,o){var i=new Error(e);return ut(i,t,r,n,o)},ft=pt,ht=tt,Et=ht.isStandardBrowserEnv()?{write:function(e,t,r,n,o,i){var s=[];s.push(e+"="+encodeURIComponent(t)),ht.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),ht.isString(n)&&s.push("path="+n),ht.isString(o)&&s.push("domain="+o),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},mt=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)},_t=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e},gt=tt,Tt=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],It=tt,yt=It.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function n(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=n(window.location.href),function(t){var r=It.isString(t)?n(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0},Rt=tt,At=function(e,t,r){var n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(ft("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)},Ot=Et,Dt=ot,wt=function(e,t){return e&&!mt(t)?_t(e,t):t},vt=function(e){var t,r,n,o={};return e?(gt.forEach(e.split("\n"),(function(e){if(n=e.indexOf(":"),t=gt.trim(e.substr(0,n)).toLowerCase(),r=gt.trim(e.substr(n+1)),t){if(o[t]&&Tt.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([r]):o[t]?o[t]+", "+r:r}})),o):o},St=yt,Mt=pt,bt=function(e){return new Promise((function(t,r){var n=e.data,o=e.headers;Rt.isFormData(n)&&delete o["Content-Type"];var i=new XMLHttpRequest;if(e.auth){var s=e.auth.username||"",a=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.Authorization="Basic "+btoa(s+":"+a)}var l=wt(e.baseURL,e.url);if(i.open(e.method.toUpperCase(),Dt(l,e.params,e.paramsSerializer),!0),i.timeout=e.timeout,i.onreadystatechange=function(){if(i&&4===i.readyState&&(0!==i.status||i.responseURL&&0===i.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in i?vt(i.getAllResponseHeaders()):null,o={data:e.responseType&&"text"!==e.responseType?i.response:i.responseText,status:i.status,statusText:i.statusText,headers:n,config:e,request:i};At(t,r,o),i=null}},i.onabort=function(){i&&(r(Mt("Request aborted",e,"ECONNABORTED",i)),i=null)},i.onerror=function(){r(Mt("Network Error",e,null,i)),i=null},i.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),r(Mt(t,e,"ECONNABORTED",i)),i=null},Rt.isStandardBrowserEnv()){var c=(e.withCredentials||St(l))&&e.xsrfCookieName?Ot.read(e.xsrfCookieName):void 0;c&&(o[e.xsrfHeaderName]=c)}if("setRequestHeader"in i&&Rt.forEach(o,(function(e,t){void 0===n&&"content-type"===t.toLowerCase()?delete o[t]:i.setRequestHeader(t,e)})),Rt.isUndefined(e.withCredentials)||(i.withCredentials=!!e.withCredentials),e.responseType)try{i.responseType=e.responseType}catch(d){if("json"!==e.responseType)throw d}"function"==typeof e.onDownloadProgress&&i.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&i.upload&&i.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){i&&(i.abort(),r(e),i=null)})),n||(n=null),i.send(n)}))},Pt=tt,Lt=function(e,t){dt.forEach(e,(function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])}))},Ct={"Content-Type":"application/x-www-form-urlencoded"};function Nt(e,t){!Pt.isUndefined(e)&&Pt.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var xt,Gt={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(xt=bt),xt),transformRequest:[function(e,t){return Lt(t,"Accept"),Lt(t,"Content-Type"),Pt.isFormData(e)||Pt.isArrayBuffer(e)||Pt.isBuffer(e)||Pt.isStream(e)||Pt.isFile(e)||Pt.isBlob(e)?e:Pt.isArrayBufferView(e)?e.buffer:Pt.isURLSearchParams(e)?(Nt(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Pt.isObject(e)?(Nt(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};Gt.headers={common:{Accept:"application/json, text/plain, */*"}},Pt.forEach(["delete","get","head"],(function(e){Gt.headers[e]={}})),Pt.forEach(["post","put","patch"],(function(e){Gt.headers[e]=Pt.merge(Ct)}));var Ft=Gt,Ut=tt,qt=function(e,t,r){return lt.forEach(r,(function(r){e=r(e,t)})),e},Bt=ct,$t=Ft;function Vt(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var kt=tt,Yt=function(e,t){t=t||{};var r={},n=["url","method","data"],o=["headers","auth","proxy","params"],i=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function a(e,t){return kt.isPlainObject(e)&&kt.isPlainObject(t)?kt.merge(e,t):kt.isPlainObject(t)?kt.merge({},t):kt.isArray(t)?t.slice():t}function l(n){kt.isUndefined(t[n])?kt.isUndefined(e[n])||(r[n]=a(void 0,e[n])):r[n]=a(e[n],t[n])}kt.forEach(n,(function(e){kt.isUndefined(t[e])||(r[e]=a(void 0,t[e]))})),kt.forEach(o,l),kt.forEach(i,(function(n){kt.isUndefined(t[n])?kt.isUndefined(e[n])||(r[n]=a(void 0,e[n])):r[n]=a(void 0,t[n])})),kt.forEach(s,(function(n){n in t?r[n]=a(e[n],t[n]):n in e&&(r[n]=a(void 0,e[n]))}));var c=n.concat(o).concat(i).concat(s),d=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===c.indexOf(e)}));return kt.forEach(d,l),r},Ht=tt,Wt=ot,zt=at,Xt=function(e){return Vt(e),e.headers=e.headers||{},e.data=qt(e.data,e.headers,e.transformRequest),e.headers=Ut.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Ut.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||$t.adapter)(e).then((function(t){return Vt(e),t.data=qt(t.data,t.headers,e.transformResponse),t}),(function(t){return Bt(t)||(Vt(e),t&&t.response&&(t.response.data=qt(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},jt=Yt;function Qt(e){this.defaults=e,this.interceptors={request:new zt,response:new zt}}Qt.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=jt(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[Xt,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)r=r.then(t.shift(),t.shift());return r},Qt.prototype.getUri=function(e){return e=jt(this.defaults,e),Wt(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},Ht.forEach(["delete","get","head","options"],(function(e){Qt.prototype[e]=function(t,r){return this.request(jt(r||{},{method:e,url:t,data:(r||{}).data}))}})),Ht.forEach(["post","put","patch"],(function(e){Qt.prototype[e]=function(t,r,n){return this.request(jt(n||{},{method:e,url:t,data:r}))}}));var Zt=Qt;function Kt(e){this.message=e}Kt.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Kt.prototype.__CANCEL__=!0;var Jt=Kt,er=Jt;function tr(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;e((function(e){r.reason||(r.reason=new er(e),t(r.reason))}))}tr.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},tr.source=function(){var e;return{token:new tr((function(t){e=t})),cancel:e}};var rr=tr,nr=tt,or=We,ir=Zt,sr=Yt;function ar(e){var t=new ir(e),r=or(ir.prototype.request,t);return nr.extend(r,ir.prototype,t),nr.extend(r,t),r}var lr=ar(Ft);lr.Axios=ir,lr.create=function(e){return ar(sr(lr.defaults,e))},lr.Cancel=Jt,lr.CancelToken=rr,lr.isCancel=ct,lr.all=function(e){return Promise.all(e)},lr.spread=function(e){return function(t){return e.apply(null,t)}},lr.isAxiosError=function(e){return"object"==typeof e&&!0===e.isAxiosError},He.exports=lr,He.exports.default=lr;var cr=He.exports;var dr=function({mustBeMetaMask:e=!1,silent:t=!1,timeout:r=3e3}={}){!function(){if("boolean"!=typeof e)throw new Error("@metamask/detect-provider: Expected option 'mustBeMetaMask' to be a boolean.");if("boolean"!=typeof t)throw new Error("@metamask/detect-provider: Expected option 'silent' to be a boolean.");if("number"!=typeof r)throw new Error("@metamask/detect-provider: Expected option 'timeout' to be a number.")}();let n=!1;return new Promise((o=>{function i(){if(n)return;n=!0,window.removeEventListener("ethereum#initialized",i);const{ethereum:r}=window;if(!r||e&&!r.isMetaMask){const n=e&&r?"Non-MetaMask window.ethereum detected.":"Unable to detect window.ethereum.";!t&&console.error("@metamask/detect-provider:",n),o(null)}else o(r)}window.ethereum?i():(window.addEventListener("ethereum#initialized",i,{once:!0}),setTimeout((()=>{i()}),r))}))};
/*!
 * FilePond 4.28.2
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const ur=(e,t)=>{for(const r in e)e.hasOwnProperty(r)&&t(r,e[r])},pr=e=>{const t={};return ur(e,(r=>{((e,t,r)=>{"function"!=typeof r?Object.defineProperty(e,t,a({},r)):e[t]=r})(t,r,e[r])})),t},fr=(e,t,r=null)=>{if(null===r)return e.getAttribute(t)||e.hasAttribute(t);e.setAttribute(t,r)},hr=["svg","path"],Er=e=>hr.includes(e),mr=(e,t,r={})=>{"object"==typeof t&&(r=t,t=null);const n=Er(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return t&&(Er(e)?fr(n,"class",t):n.className=t),ur(r,((e,t)=>{fr(n,e,t)})),n},_r=(e,t)=>(e,r)=>(void 0!==r?t.splice(r,0,e):t.push(e),e),gr=(e,t)=>r=>(t.splice(t.indexOf(r),1),r.element.parentNode&&e.removeChild(r.element),r),Tr="undefined"!=typeof window&&void 0!==window.document,Ir=()=>Tr,yr="children"in(Ir()?mr("svg"):{})?e=>e.children.length:e=>e.childNodes.length,Rr=(e,t,r,n)=>{const o=r[0]||e.left,i=r[1]||e.top,s=o+e.width,l=i+e.height*(n[1]||1),c={element:a({},e),inner:{left:e.left,top:e.top,right:e.right,bottom:e.bottom},outer:{left:o,top:i,right:s,bottom:l}};return t.filter((e=>!e.isRectIgnored())).map((e=>e.rect)).forEach((e=>{Ar(c.inner,a({},e.inner)),Ar(c.outer,a({},e.outer))})),Or(c.inner),c.outer.bottom+=c.element.marginBottom,c.outer.right+=c.element.marginRight,Or(c.outer),c},Ar=(e,t)=>{t.top+=e.top,t.right+=e.left,t.bottom+=e.top,t.left+=e.left,t.bottom>e.bottom&&(e.bottom=t.bottom),t.right>e.right&&(e.right=t.right)},Or=e=>{e.width=e.right-e.left,e.height=e.bottom-e.top},Dr=e=>"number"==typeof e,wr=e=>e<.5?2*e*e:(4-2*e)*e-1,vr={spring:({stiffness:e=.5,damping:t=.75,mass:r=10}={})=>{let n=null,o=null,i=0,s=!1;const a=pr({interpolate:(l,c)=>{if(s)return;if(!Dr(n)||!Dr(o))return s=!0,void(i=0);i+=-(o-n)*e/r,o+=i,i*=t,((e,t,r,n=.001)=>Math.abs(e-t)<n&&Math.abs(r)<n)(o,n,i)||c?(o=n,i=0,s=!0,a.onupdate(o),a.oncomplete(o)):a.onupdate(o)},target:{set:e=>{if(Dr(e)&&!Dr(o)&&(o=e),null===n&&(n=e,o=e),n=e,o===n||void 0===n)return s=!0,i=0,a.onupdate(o),void a.oncomplete(o);s=!1},get:()=>n},resting:{get:()=>s},onupdate:e=>{},oncomplete:e=>{}});return a},tween:({duration:e=500,easing:t=wr,delay:r=0}={})=>{let n,o,i=null,s=!0,a=!1,l=null;const c=pr({interpolate:(d,u)=>{s||null===l||(null===i&&(i=d),d-i<r||(n=d-i-r,n>=e||u?(n=1,o=a?0:1,c.onupdate(o*l),c.oncomplete(o*l),s=!0):(o=n/e,c.onupdate((n>=0?t(a?1-o:o):0)*l))))},target:{get:()=>a?0:l,set:e=>{if(null===l)return l=e,c.onupdate(e),void c.oncomplete(e);e<l?(l=1,a=!0):(a=!1,l=e),s=!1,i=null}},resting:{get:()=>s},onupdate:e=>{},oncomplete:e=>{}});return c}},Sr=(e,t,r,n=!1)=>{(t=Array.isArray(t)?t:[t]).forEach((t=>{e.forEach((e=>{let o=e,i=()=>r[e],s=t=>r[e]=t;"object"==typeof e&&(o=e.key,i=e.getter||i,s=e.setter||s),t[o]&&!n||(t[o]={get:i,set:s})}))}))},Mr=e=>null!=e,br={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},Pr=(e,t)=>{if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const r in t)if(t[r]!==e[r])return!0;return!1},Lr=(e,{opacity:t,perspective:r,translateX:n,translateY:o,scaleX:i,scaleY:s,rotateX:a,rotateY:l,rotateZ:c,originX:d,originY:u,width:p,height:f})=>{let h="",E="";(Mr(d)||Mr(u))&&(E+=`transform-origin: ${d||0}px ${u||0}px;`),Mr(r)&&(h+=`perspective(${r}px) `),(Mr(n)||Mr(o))&&(h+=`translate3d(${n||0}px, ${o||0}px, 0) `),(Mr(i)||Mr(s))&&(h+=`scale3d(${Mr(i)?i:1}, ${Mr(s)?s:1}, 1) `),Mr(c)&&(h+=`rotateZ(${c}rad) `),Mr(a)&&(h+=`rotateX(${a}rad) `),Mr(l)&&(h+=`rotateY(${l}rad) `),h.length&&(E+=`transform:${h};`),Mr(t)&&(E+=`opacity:${t};`,0===t&&(E+="visibility:hidden;"),t<1&&(E+="pointer-events:none;")),Mr(f)&&(E+=`height:${f}px;`),Mr(p)&&(E+=`width:${p}px;`);const m=e.elementCurrentStyle||"";E.length===m.length&&E===m||(e.style.cssText=E,e.elementCurrentStyle=E)},Cr={styles:({mixinConfig:e,viewProps:t,viewInternalAPI:r,viewExternalAPI:n,view:o})=>{const i=a({},t),s={};Sr(e,[r,n],t);const l=()=>o.rect?Rr(o.rect,o.childViews,[t.translateX||0,t.translateY||0],[t.scaleX||0,t.scaleY||0]):null;return r.rect={get:l},n.rect={get:l},e.forEach((e=>{t[e]=void 0===i[e]?br[e]:i[e]})),{write:()=>{if(Pr(s,t))return Lr(o.element,t),Object.assign(s,a({},t)),!0},destroy:()=>{}}},listeners:({mixinConfig:e,viewProps:t,viewInternalAPI:r,viewExternalAPI:n,viewState:o,view:i})=>{const s=[],a=(l=i.element,(e,t)=>{l.addEventListener(e,t)});var l;const c=(e=>(t,r)=>{e.removeEventListener(t,r)})(i.element);return n.on=(e,t)=>{s.push({type:e,fn:t}),a(e,t)},n.off=(e,t)=>{s.splice(s.findIndex((r=>r.type===e&&r.fn===t)),1),c(e,t)},{write:()=>!0,destroy:()=>{s.forEach((e=>{c(e.type,e.fn)}))}}},animations:({mixinConfig:e,viewProps:t,viewInternalAPI:r,viewExternalAPI:n})=>{const o=a({},t),i=[];return ur(e,((e,s)=>{const l=((e,t,r)=>{const n=e[t]&&"object"==typeof e[t][r]?e[t][r]:e[t]||e,o="string"==typeof n?n:n.type,i="object"==typeof n?a({},n):{};return vr[o]?vr[o](i):null})(s);if(!l)return;l.onupdate=r=>{t[e]=r},l.target=o[e];Sr([{key:e,setter:e=>{l.target!==e&&(l.target=e)},getter:()=>t[e]}],[r,n],t,!0),i.push(l)})),{write:e=>{let t=document.hidden,r=!0;return i.forEach((n=>{n.resting||(r=!1),n.interpolate(e,t)})),r},destroy:()=>{}}},apis:({mixinConfig:e,viewProps:t,viewExternalAPI:r})=>{Sr(e,r,t)}},Nr=(e={},t={},r={})=>(t.layoutCalculated||(e.paddingTop=parseInt(r.paddingTop,10)||0,e.marginTop=parseInt(r.marginTop,10)||0,e.marginRight=parseInt(r.marginRight,10)||0,e.marginBottom=parseInt(r.marginBottom,10)||0,e.marginLeft=parseInt(r.marginLeft,10)||0,t.layoutCalculated=!0),e.left=t.offsetLeft||0,e.top=t.offsetTop||0,e.width=t.offsetWidth||0,e.height=t.offsetHeight||0,e.right=e.left+e.width,e.bottom=e.top+e.height,e.scrollTop=t.scrollTop,e.hidden=null===t.offsetParent,e),xr=({tag:e="div",name:t=null,attributes:r={},read:n=(()=>{}),write:o=(()=>{}),create:i=(()=>{}),destroy:s=(()=>{}),filterFrameActionsForChild:c=((e,t)=>t),didCreateView:d=(()=>{}),didWriteView:u=(()=>{}),ignoreRect:p=!1,ignoreRectUpdate:f=!1,mixins:h=[]}={})=>(E,m={})=>{const _=mr(e,`filepond--${t}`,r),g=window.getComputedStyle(_,null),T=Nr();let I=null,y=!1;const R=[],A=[],O={},D={},w=[o],v=[n],S=[s],M=()=>_,b=()=>R.concat(),P=()=>I||(I=Rr(T,R,[0,0],[1,1]),I),L={element:{get:M},style:{get:()=>g},childViews:{get:b}},C=l(a({},L),{rect:{get:P},ref:{get:()=>O},is:e=>t===e,appendChild:(x=_,(e,t)=>{void 0!==t&&x.children[t]?x.insertBefore(e,x.children[t]):x.appendChild(e)}),createChildView:(N=E,(e,t)=>e(N,t)),linkView:e=>(R.push(e),e),unlinkView:e=>{R.splice(R.indexOf(e),1)},appendChildView:_r(0,R),removeChildView:gr(_,R),registerWriter:e=>w.push(e),registerReader:e=>v.push(e),registerDestroyer:e=>S.push(e),invalidateLayout:()=>_.layoutCalculated=!1,dispatch:E.dispatch,query:E.query});var N,x;const G={element:{get:M},childViews:{get:b},rect:{get:P},resting:{get:()=>y},isRectIgnored:()=>p,_read:()=>{I=null,R.forEach((e=>e._read()));!(f&&T.width&&T.height)&&Nr(T,_,g);const e={root:U,props:m,rect:T};v.forEach((t=>t(e)))},_write:(e,t,r)=>{let n=0===t.length;return w.forEach((o=>{!1===o({props:m,root:U,actions:t,timestamp:e,shouldOptimize:r})&&(n=!1)})),A.forEach((t=>{!1===t.write(e)&&(n=!1)})),R.filter((e=>!!e.element.parentNode)).forEach((o=>{o._write(e,c(o,t),r)||(n=!1)})),R.forEach(((o,i)=>{o.element.parentNode||(U.appendChild(o.element,i),o._read(),o._write(e,c(o,t),r),n=!1)})),y=n,u({props:m,root:U,actions:t,timestamp:e}),n},_destroy:()=>{A.forEach((e=>e.destroy())),S.forEach((e=>{e({root:U,props:m})})),R.forEach((e=>e._destroy()))}},F=l(a({},L),{rect:{get:()=>T}});Object.keys(h).sort(((e,t)=>"styles"===e?1:"styles"===t?-1:0)).forEach((e=>{const t=Cr[e]({mixinConfig:h[e],viewProps:m,viewState:D,viewInternalAPI:C,viewExternalAPI:G,view:pr(F)});t&&A.push(t)}));const U=pr(C);i({root:U,props:m});const q=yr(_);return R.forEach(((e,t)=>{U.appendChild(e.element,q+t)})),d(U),pr(G)},Gr=(e,t)=>({root:r,props:n,actions:o=[],timestamp:i,shouldOptimize:s})=>{o.filter((t=>e[t.type])).forEach((t=>e[t.type]({root:r,props:n,action:t.data,timestamp:i,shouldOptimize:s}))),t&&t({root:r,props:n,actions:o,timestamp:i,shouldOptimize:s})},Fr=(e,t)=>t.parentNode.insertBefore(e,t),Ur=(e,t)=>t.parentNode.insertBefore(e,t.nextSibling),qr=e=>Array.isArray(e),Br=e=>null==e,$r=e=>e.trim(),Vr=e=>""+e,kr=e=>"boolean"==typeof e,Yr=e=>kr(e)?e:"true"===e,Hr=e=>"string"==typeof e,Wr=e=>Dr(e)?e:Hr(e)?Vr(e).replace(/[a-z]+/gi,""):0,zr=e=>parseInt(Wr(e),10),Xr=e=>parseFloat(Wr(e)),jr=e=>Dr(e)&&isFinite(e)&&Math.floor(e)===e,Qr=(e,t=1e3)=>{if(jr(e))return e;let r=Vr(e).trim();return/MB$/i.test(r)?(r=r.replace(/MB$i/,"").trim(),zr(r)*t*t):/KB/i.test(r)?(r=r.replace(/KB$i/,"").trim(),zr(r)*t):zr(r)},Zr=e=>"function"==typeof e,Kr={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},Jr=(e,t,r,n,o)=>{if(null===t)return null;if("function"==typeof t)return t;const i={url:"GET"===r||"PATCH"===r?`?${e}=`:"",method:r,headers:o,withCredentials:!1,timeout:n,onload:null,ondata:null,onerror:null};if(Hr(t))return i.url=t,i;if(Object.assign(i,t),Hr(i.headers)){const e=i.headers.split(/:(.+)/);i.headers={header:e[0],value:e[1]}}return i.withCredentials=Yr(i.withCredentials),i},en=e=>"object"==typeof e&&null!==e,tn=e=>qr(e)?"array":(e=>null===e)(e)?"null":jr(e)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(e)?"bytes":(e=>en(e)&&Hr(e.url)&&en(e.process)&&en(e.revert)&&en(e.restore)&&en(e.fetch))(e)?"api":typeof e,rn={array:(e,t=",")=>Br(e)?[]:qr(e)?e:Vr(e).split(t).map($r).filter((e=>e.length)),boolean:Yr,int:e=>"bytes"===tn(e)?Qr(e):zr(e),number:Xr,float:Xr,bytes:Qr,string:e=>Zr(e)?e:Vr(e),function:e=>(e=>{let t=self,r=e.split("."),n=null;for(;n=r.shift();)if(t=t[n],!t)return null;return t})(e),serverapi:e=>(e=>{const t={};return t.url=Hr(e)?e:e.url||"",t.timeout=e.timeout?parseInt(e.timeout,10):0,t.headers=e.headers?e.headers:{},ur(Kr,(r=>{t[r]=Jr(r,e[r],Kr[r],t.timeout,t.headers)})),t.process=e.process||Hr(e)||e.url?t.process:null,t.remove=e.remove||null,delete t.headers,t})(e),object:e=>{try{return JSON.parse(e.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",'))}catch(t){return null}}},nn=(e,t,r)=>{if(e===t)return e;let n=tn(e);if(n!==r){const t=(o=e,rn[r](o));if(n=tn(t),null===t)throw`Trying to assign value with incorrect type to "${option}", allowed type: "${r}"`;e=t}var o;return e},on=e=>{const t={};return ur(e,(r=>{const n=e[r];t[r]=((e,t)=>{let r=e;return{enumerable:!0,get:()=>r,set:n=>{r=nn(n,e,t)}}})(n[0],n[1])})),pr(t)},sn=(e,t="-")=>e.split(/(?=[A-Z])/).map((e=>e.toLowerCase())).join(t),an=e=>(t,r,n)=>{const o={};return ur(e,(e=>{const r=sn(e,"_").toUpperCase();o[`SET_${r}`]=o=>{try{n.options[e]=o.value}catch(i){}t(`DID_SET_${r}`,{value:n.options[e]})}})),o},ln=e=>t=>{const r={};return ur(e,(e=>{r[`GET_${sn(e,"_").toUpperCase()}`]=r=>t.options[e]})),r},cn=1,dn=2,un=3,pn=4,fn=5,hn=()=>Math.random().toString(36).substr(2,9),En=(e,t)=>e.splice(t,1),mn=()=>{const e=[],t=(t,r)=>{En(e,e.findIndex((e=>e.event===t&&(e.cb===r||!r))))},r=(t,r,n)=>{e.filter((e=>e.event===t)).map((e=>e.cb)).forEach((e=>((e,t)=>{t?e():document.hidden?Promise.resolve(1).then(e):setTimeout(e,0)})((()=>e(...r)),n)))};return{fireSync:(e,...t)=>{r(e,t,!0)},fire:(e,...t)=>{r(e,t,!1)},on:(t,r)=>{e.push({event:t,cb:r})},onOnce:(r,n)=>{e.push({event:r,cb:(...e)=>{t(r,n),n(...e)}})},off:t}},_n=(e,t,r)=>{Object.getOwnPropertyNames(e).filter((e=>!r.includes(e))).forEach((r=>Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))))},gn=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],Tn=e=>{const t={};return _n(e,t,gn),t},In=1,yn=2,Rn=9,An=3,On=5,Dn=6,wn=10,vn=7,Sn=8,Mn=1,bn=2,Pn=3,Ln=e=>/[^0-9]+/.exec(e),Cn=()=>Ln(1.1.toLocaleString())[0],Nn={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},xn=[],Gn=(e,t,r)=>new Promise(((n,o)=>{const i=xn.filter((t=>t.key===e)).map((e=>e.cb));if(0===i.length)return void n(t);const s=i.shift();i.reduce(((e,t)=>e.then((e=>t(e,r)))),s(t,r)).then((e=>n(e))).catch((e=>o(e)))})),Fn=(e,t,r)=>xn.filter((t=>t.key===e)).map((e=>e.cb(t,r))),Un=(e,t)=>xn.push({key:e,cb:t}),qn=()=>a({},Bn),Bn={id:[null,Nn.STRING],name:["filepond",Nn.STRING],disabled:[!1,Nn.BOOLEAN],className:[null,Nn.STRING],required:[!1,Nn.BOOLEAN],captureMethod:[null,Nn.STRING],allowSyncAcceptAttribute:[!0,Nn.BOOLEAN],allowDrop:[!0,Nn.BOOLEAN],allowBrowse:[!0,Nn.BOOLEAN],allowPaste:[!0,Nn.BOOLEAN],allowMultiple:[!1,Nn.BOOLEAN],allowReplace:[!0,Nn.BOOLEAN],allowRevert:[!0,Nn.BOOLEAN],allowRemove:[!0,Nn.BOOLEAN],allowProcess:[!0,Nn.BOOLEAN],allowReorder:[!1,Nn.BOOLEAN],allowDirectoriesOnly:[!1,Nn.BOOLEAN],storeAsFile:[!1,Nn.BOOLEAN],forceRevert:[!1,Nn.BOOLEAN],maxFiles:[null,Nn.INT],checkValidity:[!1,Nn.BOOLEAN],itemInsertLocationFreedom:[!0,Nn.BOOLEAN],itemInsertLocation:["before",Nn.STRING],itemInsertInterval:[75,Nn.INT],dropOnPage:[!1,Nn.BOOLEAN],dropOnElement:[!0,Nn.BOOLEAN],dropValidation:[!1,Nn.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],Nn.ARRAY],instantUpload:[!0,Nn.BOOLEAN],maxParallelUploads:[2,Nn.INT],allowMinimumUploadDuration:[!0,Nn.BOOLEAN],chunkUploads:[!1,Nn.BOOLEAN],chunkForce:[!1,Nn.BOOLEAN],chunkSize:[5e6,Nn.INT],chunkRetryDelays:[[500,1e3,3e3],Nn.ARRAY],server:[null,Nn.SERVER_API],fileSizeBase:[1e3,Nn.INT],labelDecimalSeparator:[Cn(),Nn.STRING],labelThousandsSeparator:[(()=>{const e=Cn(),t=1e3.toLocaleString();return t!==1e3.toString()?Ln(t)[0]:"."===e?",":"."})(),Nn.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',Nn.STRING],labelInvalidField:["Field contains invalid files",Nn.STRING],labelFileWaitingForSize:["Waiting for size",Nn.STRING],labelFileSizeNotAvailable:["Size not available",Nn.STRING],labelFileCountSingular:["file in list",Nn.STRING],labelFileCountPlural:["files in list",Nn.STRING],labelFileLoading:["Loading",Nn.STRING],labelFileAdded:["Added",Nn.STRING],labelFileLoadError:["Error during load",Nn.STRING],labelFileRemoved:["Removed",Nn.STRING],labelFileRemoveError:["Error during remove",Nn.STRING],labelFileProcessing:["Uploading",Nn.STRING],labelFileProcessingComplete:["Upload complete",Nn.STRING],labelFileProcessingAborted:["Upload cancelled",Nn.STRING],labelFileProcessingError:["Error during upload",Nn.STRING],labelFileProcessingRevertError:["Error during revert",Nn.STRING],labelTapToCancel:["tap to cancel",Nn.STRING],labelTapToRetry:["tap to retry",Nn.STRING],labelTapToUndo:["tap to undo",Nn.STRING],labelButtonRemoveItem:["Remove",Nn.STRING],labelButtonAbortItemLoad:["Abort",Nn.STRING],labelButtonRetryItemLoad:["Retry",Nn.STRING],labelButtonAbortItemProcessing:["Cancel",Nn.STRING],labelButtonUndoItemProcessing:["Undo",Nn.STRING],labelButtonRetryItemProcessing:["Retry",Nn.STRING],labelButtonProcessItem:["Upload",Nn.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',Nn.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',Nn.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',Nn.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',Nn.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',Nn.STRING],oninit:[null,Nn.FUNCTION],onwarning:[null,Nn.FUNCTION],onerror:[null,Nn.FUNCTION],onactivatefile:[null,Nn.FUNCTION],oninitfile:[null,Nn.FUNCTION],onaddfilestart:[null,Nn.FUNCTION],onaddfileprogress:[null,Nn.FUNCTION],onaddfile:[null,Nn.FUNCTION],onprocessfilestart:[null,Nn.FUNCTION],onprocessfileprogress:[null,Nn.FUNCTION],onprocessfileabort:[null,Nn.FUNCTION],onprocessfilerevert:[null,Nn.FUNCTION],onprocessfile:[null,Nn.FUNCTION],onprocessfiles:[null,Nn.FUNCTION],onremovefile:[null,Nn.FUNCTION],onpreparefile:[null,Nn.FUNCTION],onupdatefiles:[null,Nn.FUNCTION],onreorderfiles:[null,Nn.FUNCTION],beforeDropFile:[null,Nn.FUNCTION],beforeAddFile:[null,Nn.FUNCTION],beforeRemoveFile:[null,Nn.FUNCTION],beforePrepareFile:[null,Nn.FUNCTION],stylePanelLayout:[null,Nn.STRING],stylePanelAspectRatio:[null,Nn.STRING],styleItemPanelAspectRatio:[null,Nn.STRING],styleButtonRemoveItemPosition:["left",Nn.STRING],styleButtonProcessItemPosition:["right",Nn.STRING],styleLoadIndicatorPosition:["right",Nn.STRING],styleProgressIndicatorPosition:["right",Nn.STRING],styleButtonRemoveItemAlign:[!1,Nn.BOOLEAN],files:[[],Nn.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],Nn.ARRAY]},$n=(e,t)=>Br(t)?e[0]||null:jr(t)?e[t]||null:("object"==typeof t&&(t=t.id),e.find((e=>e.id===t))||null),Vn=e=>{if(Br(e))return e;if(/:/.test(e)){const t=e.split(":");return t[1]/t[0]}return parseFloat(e)},kn=e=>e.filter((e=>!e.archived)),Yn={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4};let Hn=null;const Wn=[Sn,Dn,wn],zn=[vn,An,Rn,In],Xn=[On],jn=e=>Wn.includes(e.status),Qn=e=>zn.includes(e.status),Zn=e=>Xn.includes(e.status),Kn=e=>en(e.options.server)&&(en(e.options.server.process)||Zr(e.options.server.process)),Jn=e=>({GET_STATUS:()=>{const t=kn(e.items),{EMPTY:r,ERROR:n,BUSY:o,IDLE:i,READY:s}=Yn;return 0===t.length?r:t.some(jn)?n:t.some(Qn)?o:t.some(Zn)?s:i},GET_ITEM:t=>$n(e.items,t),GET_ACTIVE_ITEM:t=>$n(kn(e.items),t),GET_ACTIVE_ITEMS:()=>kn(e.items),GET_ITEMS:()=>e.items,GET_ITEM_NAME:t=>{const r=$n(e.items,t);return r?r.filename:null},GET_ITEM_SIZE:t=>{const r=$n(e.items,t);return r?r.fileSize:null},GET_STYLES:()=>Object.keys(e.options).filter((e=>/^style/.test(e))).map((t=>({name:t,value:e.options[t]}))),GET_PANEL_ASPECT_RATIO:()=>/circle/.test(e.options.stylePanelLayout)?1:Vn(e.options.stylePanelAspectRatio),GET_ITEM_PANEL_ASPECT_RATIO:()=>e.options.styleItemPanelAspectRatio,GET_ITEMS_BY_STATUS:t=>kn(e.items).filter((e=>e.status===t)),GET_TOTAL_ITEMS:()=>kn(e.items).length,SHOULD_UPDATE_FILE_INPUT:()=>e.options.storeAsFile&&(()=>{if(null===Hn)try{const e=new DataTransfer;e.items.add(new File(["hello world"],"This_Works.txt"));const t=document.createElement("input");t.setAttribute("type","file"),t.files=e.files,Hn=1===t.files.length}catch(e){Hn=!1}return Hn})()&&!Kn(e),IS_ASYNC:()=>Kn(e)}),eo=(e,t,r)=>Math.max(Math.min(r,e),t),to=e=>/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(e),ro=e=>e.split("/").pop().split("?").shift(),no=e=>e.split(".").pop(),oo=(e,t="")=>(t+e).slice(-t.length),io=(e=new Date)=>`${e.getFullYear()}-${oo(e.getMonth()+1,"00")}-${oo(e.getDate(),"00")}_${oo(e.getHours(),"00")}-${oo(e.getMinutes(),"00")}-${oo(e.getSeconds(),"00")}`,so=(e,t,r=null,n=null)=>{const o="string"==typeof r?e.slice(0,e.size,r):e.slice(0,e.size,e.type);return o.lastModifiedDate=new Date,e._relativePath&&(o._relativePath=e._relativePath),Hr(t)||(t=io()),t&&null===n&&no(t)?o.name=t:(n=n||(e=>{if("string"!=typeof e)return"";const t=e.split("/").pop();return/svg/.test(t)?"svg":/zip|compressed/.test(t)?"zip":/plain/.test(t)?"txt":/msword/.test(t)?"doc":/[a-z]+/.test(t)?"jpeg"===t?"jpg":t:""})(o.type),o.name=t+(n?"."+n:"")),o},ao=(e,t)=>{const r=window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(r){const n=new r;return n.append(e),n.getBlob(t)}return new Blob([e],{type:t})},lo=e=>(/^data:(.+);/.exec(e)||[])[1]||null,co=e=>{const t=lo(e);return((e,t)=>{const r=new ArrayBuffer(e.length),n=new Uint8Array(r);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);return ao(r,t)})((e=>atob((e=>e.split(",")[1].replace(/\s/g,""))(e)))(e),t)},uo=e=>{if(!/^content-disposition:/i.test(e))return null;const t=e.split(/filename=|filename\*=.+''/).splice(1).map((e=>e.trim().replace(/^["']|[;"']{0,2}$/g,""))).filter((e=>e.length));return t.length?decodeURI(t[t.length-1]):null},po=e=>{if(/content-length:/i.test(e)){const t=e.match(/[0-9]+/)[0];return t?parseInt(t,10):null}return null},fo=e=>{if(/x-content-transfer-id:/i.test(e)){return(e.split(":")[1]||"").trim()||null}return null},ho=e=>{const t={source:null,name:null,size:null},r=e.split("\n");for(let n of r){const e=uo(n);if(e){t.name=e;continue}const r=po(n);if(r){t.size=r;continue}const o=fo(n);o&&(t.source=o)}return t},Eo=e=>{const t={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},r=r=>{e?(t.timestamp=Date.now(),t.request=e(r,(e=>{t.duration=Date.now()-t.timestamp,t.complete=!0,e instanceof Blob&&(e=so(e,e.name||ro(r))),n.fire("load",e instanceof Blob?e:e?e.body:null)}),(e=>{n.fire("error","string"==typeof e?{type:"error",code:0,body:e}:e)}),((e,r,o)=>{o&&(t.size=o),t.duration=Date.now()-t.timestamp,e?(t.progress=r/o,n.fire("progress",t.progress)):t.progress=null}),(()=>{n.fire("abort")}),(e=>{const r=ho("string"==typeof e?e:e.headers);n.fire("meta",{size:t.size||r.size,filename:r.name,source:r.source})}))):n.fire("error",{type:"error",body:"Can't load URL",code:400})},n=l(a({},mn()),{setSource:e=>t.source=e,getProgress:()=>t.progress,abort:()=>{t.request&&t.request.abort&&t.request.abort()},load:()=>{const e=t.source;var o,i;n.fire("init",e),e instanceof File?n.fire("load",e):e instanceof Blob?n.fire("load",so(e,e.name)):to(e)?n.fire("load",so(co(e),o,null,i)):r(e)}});return n},mo=e=>/GET|HEAD/.test(e),_o=(e,t,r)=>{const n={onheaders:()=>{},onprogress:()=>{},onload:()=>{},ontimeout:()=>{},onerror:()=>{},onabort:()=>{},abort:()=>{o=!0,s.abort()}};let o=!1,i=!1;r=a({method:"POST",headers:{},withCredentials:!1},r),t=encodeURI(t),mo(r.method)&&e&&(t=`${t}${encodeURIComponent("string"==typeof e?e:JSON.stringify(e))}`);const s=new XMLHttpRequest;return(mo(r.method)?s:s.upload).onprogress=e=>{o||n.onprogress(e.lengthComputable,e.loaded,e.total)},s.onreadystatechange=()=>{s.readyState<2||4===s.readyState&&0===s.status||i||(i=!0,n.onheaders(s))},s.onload=()=>{s.status>=200&&s.status<300?n.onload(s):n.onerror(s)},s.onerror=()=>n.onerror(s),s.onabort=()=>{o=!0,n.onabort()},s.ontimeout=()=>n.ontimeout(s),s.open(r.method,t,!0),jr(r.timeout)&&(s.timeout=r.timeout),Object.keys(r.headers).forEach((e=>{const t=unescape(encodeURIComponent(r.headers[e]));s.setRequestHeader(e,t)})),r.responseType&&(s.responseType=r.responseType),r.withCredentials&&(s.withCredentials=!0),s.send(e),n},go=(e,t,r,n)=>({type:e,code:t,body:r,headers:n}),To=e=>t=>{e(go("error",0,"Timeout",t.getAllResponseHeaders()))},Io=e=>/\?/.test(e),yo=(...e)=>{let t="";return e.forEach((e=>{t+=Io(t)&&Io(e)?e.replace(/\?/,"&"):e})),t},Ro=(e="",t)=>{if("function"==typeof t)return t;if(!t||!Hr(t.url))return null;const r=t.onload||(e=>e),n=t.onerror||(e=>null);return(o,i,s,c,d,u)=>{const p=_o(o,yo(e,t.url),l(a({},t),{responseType:"blob"}));return p.onload=e=>{const n=e.getAllResponseHeaders(),s=ho(n).name||ro(o);i(go("load",e.status,"HEAD"===t.method?null:so(r(e.response),s),n))},p.onerror=e=>{s(go("error",e.status,n(e.response)||e.statusText,e.getAllResponseHeaders()))},p.onheaders=e=>{u(go("headers",e.status,null,e.getAllResponseHeaders()))},p.ontimeout=To(s),p.onprogress=c,p.onabort=d,p}},Ao=0,Oo=1,Do=2,wo=3,vo=4,So=(e,t,r,n,o,i,s,c,d,u,p)=>{const f=[],{chunkTransferId:h,chunkServer:E,chunkSize:m,chunkRetryDelays:_}=p,g={serverId:h,aborted:!1},T=t.ondata||(e=>e),I=t.onload||((e,t)=>"HEAD"===t?e.getResponseHeader("Upload-Offset"):e.response),y=t.onerror||(e=>null),R=Math.floor(n.size/m);for(let a=0;a<=R;a++){const e=a*m,t=n.slice(e,e+m,"application/offset+octet-stream");f[a]={index:a,size:t.size,offset:e,data:t,file:n,progress:0,retries:[..._],status:Ao,error:null,request:null,timeout:null}}const A=e=>e.status===Ao||e.status===wo,O=t=>{if(g.aborted)return;if(!(t=t||f.find(A)))return void(f.every((e=>e.status===Oo))&&i(g.serverId));t.status=Do,t.progress=null;const r=E.ondata||(e=>e),o=E.onerror||(e=>null),c=yo(e,E.url,g.serverId),u="function"==typeof E.headers?E.headers(t):l(a({},E.headers),{"Content-Type":"application/offset+octet-stream","Upload-Offset":t.offset,"Upload-Length":n.size,"Upload-Name":n.name}),p=t.request=_o(r(t.data),c,l(a({},E),{headers:u}));p.onload=()=>{t.status=Oo,t.request=null,v()},p.onprogress=(e,r,n)=>{t.progress=e?r:null,w()},p.onerror=e=>{t.status=wo,t.request=null,t.error=o(e.response)||e.statusText,D(t)||s(go("error",e.status,o(e.response)||e.statusText,e.getAllResponseHeaders()))},p.ontimeout=e=>{t.status=wo,t.request=null,D(t)||To(s)(e)},p.onabort=()=>{t.status=Ao,t.request=null,d()}},D=e=>0!==e.retries.length&&(e.status=vo,clearTimeout(e.timeout),e.timeout=setTimeout((()=>{O(e)}),e.retries.shift()),!0),w=()=>{const e=f.reduce(((e,t)=>null===e||null===t.progress?null:e+t.progress),0);if(null===e)return c(!1,0,0);const t=f.reduce(((e,t)=>e+t.size),0);c(!0,e,t)},v=()=>{f.filter((e=>e.status===Do)).length>=1||O()};return g.serverId?(r=>{const n=yo(e,E.url,g.serverId),o={headers:"function"==typeof t.headers?t.headers(g.serverId):a({},t.headers),method:"HEAD"},i=_o(null,n,o);i.onload=e=>r(I(e,o.method)),i.onerror=e=>s(go("error",e.status,y(e.response)||e.statusText,e.getAllResponseHeaders())),i.ontimeout=To(s)})((e=>{g.aborted||(f.filter((t=>t.offset<e)).forEach((e=>{e.status=Oo,e.progress=e.size})),v())})):(i=>{const c=new FormData;en(o)&&c.append(r,JSON.stringify(o));const d="function"==typeof t.headers?t.headers(n,o):l(a({},t.headers),{"Upload-Length":n.size}),u=l(a({},t),{headers:d}),p=_o(T(c),yo(e,t.url),u);p.onload=e=>i(I(e,u.method)),p.onerror=e=>s(go("error",e.status,y(e.response)||e.statusText,e.getAllResponseHeaders())),p.ontimeout=To(s)})((e=>{g.aborted||(u(e),g.serverId=e,v())})),{abort:()=>{g.aborted=!0,f.forEach((e=>{clearTimeout(e.timeout),e.request&&e.request.abort()}))}}},Mo=(e="",t,r,n)=>"function"==typeof t?(...e)=>t(r,...e,n):t&&Hr(t.url)?((e,t,r,n)=>(o,i,s,c,d,u,p)=>{if(!o)return;const f=n.chunkUploads,h=f&&o.size>n.chunkSize,E=f&&(h||n.chunkForce);if(o instanceof Blob&&E)return So(e,t,r,o,i,s,c,d,u,p,n);const m=t.ondata||(e=>e),_=t.onload||(e=>e),g=t.onerror||(e=>null),T="function"==typeof t.headers?t.headers(o,i)||{}:a({},t.headers),I=l(a({},t),{headers:T});var y=new FormData;en(i)&&y.append(r,JSON.stringify(i)),(o instanceof Blob?[{name:null,file:o}]:o).forEach((e=>{y.append(r,e.file,null===e.name?e.file.name:`${e.name}${e.file.name}`)}));const R=_o(m(y),yo(e,t.url),I);return R.onload=e=>{s(go("load",e.status,_(e.response),e.getAllResponseHeaders()))},R.onerror=e=>{c(go("error",e.status,g(e.response)||e.statusText,e.getAllResponseHeaders()))},R.ontimeout=To(c),R.onprogress=d,R.onabort=u,R})(e,t,r,n):null,bo=(e="",t)=>{if("function"==typeof t)return t;if(!t||!Hr(t.url))return(e,t)=>t();const r=t.onload||(e=>e),n=t.onerror||(e=>null);return(o,i,s)=>{const a=_o(o,e+t.url,t);return a.onload=e=>{i(go("load",e.status,r(e.response),e.getAllResponseHeaders()))},a.onerror=e=>{s(go("error",e.status,n(e.response)||e.statusText,e.getAllResponseHeaders()))},a.ontimeout=To(s),a}},Po=(e=0,t=1)=>e+Math.random()*(t-e),Lo=(e,t)=>{const r={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},{allowMinimumUploadDuration:n}=t,o=()=>{r.request&&(r.perceivedPerformanceUpdater.clear(),r.request.abort&&r.request.abort(),r.complete=!0)},i=n?()=>r.progress?Math.min(r.progress,r.perceivedProgress):null:()=>r.progress||null,s=n?()=>Math.min(r.duration,r.perceivedDuration):()=>r.duration,c=l(a({},mn()),{process:(t,o)=>{const i=()=>{0!==r.duration&&null!==r.progress&&c.fire("progress",c.getProgress())},s=()=>{r.complete=!0,c.fire("load-perceived",r.response.body)};c.fire("start"),r.timestamp=Date.now(),r.perceivedPerformanceUpdater=((e,t=1e3,r=0,n=25,o=250)=>{let i=null;const s=Date.now(),a=()=>{let r=Date.now()-s,l=Po(n,o);r+l>t&&(l=r+l-t);let c=r/t;c>=1||document.hidden?e(1):(e(c),i=setTimeout(a,l))};return t>0&&a(),{clear:()=>{clearTimeout(i)}}})((e=>{r.perceivedProgress=e,r.perceivedDuration=Date.now()-r.timestamp,i(),r.response&&1===r.perceivedProgress&&!r.complete&&s()}),n?Po(750,1500):0),r.request=e(t,o,(e=>{r.response=en(e)?e:{type:"load",code:200,body:`${e}`,headers:{}},r.duration=Date.now()-r.timestamp,r.progress=1,c.fire("load",r.response.body),(!n||n&&1===r.perceivedProgress)&&s()}),(e=>{r.perceivedPerformanceUpdater.clear(),c.fire("error",en(e)?e:{type:"error",code:0,body:`${e}`})}),((e,t,n)=>{r.duration=Date.now()-r.timestamp,r.progress=e?t/n:null,i()}),(()=>{r.perceivedPerformanceUpdater.clear(),c.fire("abort",r.response?r.response.body:null)}),(e=>{c.fire("transfer",e)}))},abort:o,getProgress:i,getDuration:s,reset:()=>{o(),r.complete=!1,r.perceivedProgress=0,r.progress=0,r.timestamp=null,r.perceivedDuration=0,r.duration=0,r.request=null,r.response=null}});return c},Co=e=>e.substr(0,e.lastIndexOf("."))||e,No=e=>!!(e instanceof File||e instanceof Blob&&e.name),xo=e=>{if(!en(e))return e;const t=qr(e)?[]:{};for(const r in e){if(!e.hasOwnProperty(r))continue;const n=e[r];t[r]=n&&en(n)?xo(n):n}return t},Go=(e=null,t=null,r=null)=>{const n=hn(),o={archived:!1,frozen:!1,released:!1,source:null,file:r,serverFileReference:t,transferId:null,processingAborted:!1,status:t?On:In,activeLoader:null,activeProcessor:null};let i=null;const s={},c=e=>o.status=e,d=(e,...t)=>{o.released||o.frozen||f.fire(e,...t)},u=(e,t)=>{if(o.processingAborted)return void(o.processingAborted=!1);if(c(An),i=null,!(o.file instanceof Blob))return void f.on("load",(()=>{u(e,t)}));e.on("load",(e=>{o.transferId=null,o.serverFileReference=e})),e.on("transfer",(e=>{o.transferId=e})),e.on("load-perceived",(e=>{o.activeProcessor=null,o.transferId=null,o.serverFileReference=e,c(On),d("process-complete",e)})),e.on("start",(()=>{d("process-start")})),e.on("error",(e=>{o.activeProcessor=null,c(Dn),d("process-error",e)})),e.on("abort",(e=>{o.activeProcessor=null,o.transferId=null,o.serverFileReference=e,c(yn),d("process-abort"),i&&i()})),e.on("progress",(e=>{d("process-progress",e)}));const r=console.error;t(o.file,(t=>{o.archived||e.process(t,a({},s))}),r),o.activeProcessor=e},p=(e,t,r)=>{const n=e.split("."),o=n[0],i=n.pop();let a=s;n.forEach((e=>a=a[e])),JSON.stringify(a[i])!==JSON.stringify(t)&&(a[i]=t,d("metadata-update",{key:o,value:s[o],silent:r}))},f=l(a({id:{get:()=>n},origin:{get:()=>e,set:t=>e=t},serverId:{get:()=>o.serverFileReference},transferId:{get:()=>o.transferId},status:{get:()=>o.status},filename:{get:()=>o.file.name},filenameWithoutExtension:{get:()=>Co(o.file.name)},fileExtension:{get:()=>no(o.file.name)},fileType:{get:()=>o.file.type},fileSize:{get:()=>o.file.size},file:{get:()=>o.file},relativePath:{get:()=>o.file._relativePath},source:{get:()=>o.source},getMetadata:e=>xo(e?s[e]:s),setMetadata:(e,t,r)=>{if(en(e)){const r=e;return Object.keys(r).forEach((e=>{p(e,r[e],t)})),e}return p(e,t,r),t},extend:(e,t)=>h[e]=t,abortLoad:()=>{o.activeLoader?o.activeLoader.abort():(c(In),d("load-abort"))},retryLoad:()=>{o.activeLoader&&o.activeLoader.load()},requestProcessing:()=>{o.processingAborted=!1,c(Rn)},abortProcessing:()=>new Promise((e=>{if(!o.activeProcessor)return o.processingAborted=!0,c(yn),d("process-abort"),void e();i=()=>{e()},o.activeProcessor.abort()})),load:(t,r,n)=>{o.source=t,f.fireSync("init"),o.file?f.fireSync("load-skip"):(o.file=(e=>{let t=[e.name,e.size,e.type];return e instanceof Blob||to(e)?t[0]=e.name||io():to(e)?(t[1]=e.length,t[2]=lo(e)):Hr(e)&&(t[0]=ro(e),t[1]=0,t[2]="application/octet-stream"),{name:t[0],size:t[1],type:t[2]}})(t),r.on("init",(()=>{d("load-init")})),r.on("meta",(t=>{o.file.size=t.size,o.file.filename=t.filename,t.source&&(e=bn,o.serverFileReference=t.source,o.status=On),d("load-meta")})),r.on("progress",(e=>{c(vn),d("load-progress",e)})),r.on("error",(e=>{c(Sn),d("load-request-error",e)})),r.on("abort",(()=>{c(In),d("load-abort")})),r.on("load",(t=>{o.activeLoader=null;const r=t=>{o.file=No(t)?t:o.file,e===bn&&o.serverFileReference?c(On):c(yn),d("load")};o.serverFileReference?r(t):n(t,r,(e=>{o.file=t,d("load-meta"),c(Sn),d("load-file-error",e)}))})),r.setSource(t),o.activeLoader=r,r.load())},process:u,revert:(e,t)=>new Promise(((r,n)=>{null!==o.serverFileReference?(e(o.serverFileReference,(()=>{o.serverFileReference=null,r()}),(e=>{t?(c(wn),d("process-revert-error"),n(e)):r()})),c(yn),d("process-revert")):r()}))},mn()),{freeze:()=>o.frozen=!0,release:()=>o.released=!0,released:{get:()=>o.released},archive:()=>o.archived=!0,archived:{get:()=>o.archived}}),h=pr(f);return h},Fo=(e,t)=>{const r=((e,t)=>Br(t)?0:Hr(t)?e.findIndex((e=>e.id===t)):-1)(e,t);if(!(r<0))return e[r]||null},Uo=(e,t,r,n,o,i)=>{const s=_o(null,e,{method:"GET",responseType:"blob"});return s.onload=r=>{const n=r.getAllResponseHeaders(),o=ho(n).name||ro(e);t(go("load",r.status,so(r.response,o),n))},s.onerror=e=>{r(go("error",e.status,e.statusText,e.getAllResponseHeaders()))},s.onheaders=e=>{i(go("headers",e.status,null,e.getAllResponseHeaders()))},s.ontimeout=To(r),s.onprogress=n,s.onabort=o,s},qo=e=>(0===e.indexOf("//")&&(e=location.protocol+e),e.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]),Bo=e=>(...t)=>Zr(e)?e(...t):e,$o=(e,t)=>{clearTimeout(t.listUpdateTimeout),t.listUpdateTimeout=setTimeout((()=>{e("DID_UPDATE_ITEMS",{items:kn(t.items)})}),0)},Vo=(e,...t)=>new Promise((r=>{if(!e)return r(!0);const n=e(...t);return null==n?r(!0):"boolean"==typeof n?r(n):void("function"==typeof n.then&&n.then(r))})),ko=(e,t)=>{e.items.sort(((e,r)=>t(Tn(e),Tn(r))))},Yo=(e,t)=>(r={})=>{var s=r,{query:a,success:l=(()=>{}),failure:c=(()=>{})}=s,d=((e,t)=>{var r={};for(var s in e)o.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&n)for(var s of n(e))t.indexOf(s)<0&&i.call(e,s)&&(r[s]=e[s]);return r})(s,["query","success","failure"]);const u=$n(e.items,a);u?t(u,l,c,d||{}):c({error:go("error",0,"Item not found"),file:null})},Ho=(e,t,r)=>({ABORT_ALL:()=>{kn(r.items).forEach((e=>{e.freeze(),e.abortLoad(),e.abortProcessing()}))},DID_SET_FILES:({value:t=[]})=>{const n=t.map((e=>({source:e.source?e.source:e,options:e.options})));let o=kn(r.items);o.forEach((t=>{n.find((e=>e.source===t.source||e.source===t.file))||e("REMOVE_ITEM",{query:t,remove:!1})})),o=kn(r.items),n.forEach(((t,r)=>{o.find((e=>e.source===t.source||e.file===t.source))||e("ADD_ITEM",l(a({},t),{interactionMethod:fn,index:r}))}))},DID_UPDATE_ITEM_METADATA:({id:n,action:o,change:i})=>{i.silent||(clearTimeout(r.itemUpdateTimeout),r.itemUpdateTimeout=setTimeout((()=>{const s=Fo(r.items,n);if(!t("IS_ASYNC"))return void Gn("SHOULD_PREPARE_OUTPUT",!1,{item:s,query:t,action:o,change:i}).then((r=>{const o=t("GET_BEFORE_PREPARE_FILE");o&&(r=o(s,r)),r&&e("REQUEST_PREPARE_OUTPUT",{query:n,item:s,success:t=>{e("DID_PREPARE_OUTPUT",{id:n,file:t})}},!0)}));s.origin===Pn&&e("DID_LOAD_ITEM",{id:s.id,error:null,serverFileReference:s.source});const a=()=>{setTimeout((()=>{e("REQUEST_ITEM_PROCESSING",{query:n})}),32)};return s.status===On?(l=r.options.instantUpload,void s.revert(bo(r.options.server.url,r.options.server.revert),t("GET_FORCE_REVERT")).then(l?a:()=>{}).catch((()=>{}))):s.status===An?(e=>{s.abortProcessing().then(e?a:()=>{})})(r.options.instantUpload):void(r.options.instantUpload&&a());var l}),0))},MOVE_ITEM:({query:e,index:t})=>{const n=$n(r.items,e);if(!n)return;const o=r.items.indexOf(n);o!==(t=eo(t,0,r.items.length-1))&&r.items.splice(t,0,r.items.splice(o,1)[0])},SORT:({compare:n})=>{ko(r,n),e("DID_SORT_ITEMS",{items:t("GET_ACTIVE_ITEMS")})},ADD_ITEMS:({items:r,index:n,interactionMethod:o,success:i=(()=>{}),failure:s=(()=>{})})=>{let a=n;if(-1===n||void 0===n){const e=t("GET_ITEM_INSERT_LOCATION"),r=t("GET_TOTAL_ITEMS");a="before"===e?0:r}const l=t("GET_IGNORED_FILES"),c=r.filter((e=>No(e)?!l.includes(e.name.toLowerCase()):!Br(e))).map((t=>new Promise(((r,n)=>{e("ADD_ITEM",{interactionMethod:o,source:t.source||t,success:r,failure:n,index:a++,options:t.options||{}})}))));Promise.all(c).then(i).catch(s)},ADD_ITEM:({source:n,index:o=-1,interactionMethod:i,success:s=(()=>{}),failure:a=(()=>{}),options:l={}})=>{if(Br(n))return void a({error:go("error",0,"No source"),file:null});if(No(n)&&r.options.ignoredFiles.includes(n.name.toLowerCase()))return;if(!(e=>{const t=kn(e.items).length;if(!e.options.allowMultiple)return 0===t;const r=e.options.maxFiles;return null===r||t<r})(r)){if(r.options.allowMultiple||!r.options.allowMultiple&&!r.options.allowReplace){const t=go("warning",0,"Max files");return e("DID_THROW_MAX_FILES",{source:n,error:t}),void a({error:t,file:null})}const c=kn(r.items)[0];if(c.status===On||c.status===wn){const d=t("GET_FORCE_REVERT");if(c.revert(bo(r.options.server.url,r.options.server.revert),d).then((()=>{d&&e("ADD_ITEM",{source:n,index:o,interactionMethod:i,success:s,failure:a,options:l})})).catch((()=>{})),d)return}e("REMOVE_ITEM",{query:c.id})}const c="local"===l.type?Pn:"limbo"===l.type?bn:Mn,d=Go(c,c===Mn?null:n,l.file);Object.keys(l.metadata||{}).forEach((e=>{d.setMetadata(e,l.metadata[e])})),Fn("DID_CREATE_ITEM",d,{query:t,dispatch:e});const u=t("GET_ITEM_INSERT_LOCATION");r.options.itemInsertLocationFreedom||(o="before"===u?-1:r.items.length),((e,t,r)=>{Br(t)||(void 0===r?e.push(t):((e,t,r)=>{e.splice(t,0,r)})(e,r=eo(r,0,e.length),t))})(r.items,d,o),Zr(u)&&n&&ko(r,u);const p=d.id;d.on("init",(()=>{e("DID_INIT_ITEM",{id:p})})),d.on("load-init",(()=>{e("DID_START_ITEM_LOAD",{id:p})})),d.on("load-meta",(()=>{e("DID_UPDATE_ITEM_META",{id:p})})),d.on("load-progress",(t=>{e("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:p,progress:t})})),d.on("load-request-error",(t=>{const n=Bo(r.options.labelFileLoadError)(t);if(t.code>=400&&t.code<500)return e("DID_THROW_ITEM_INVALID",{id:p,error:t,status:{main:n,sub:`${t.code} (${t.body})`}}),void a({error:t,file:Tn(d)});e("DID_THROW_ITEM_LOAD_ERROR",{id:p,error:t,status:{main:n,sub:r.options.labelTapToRetry}})})),d.on("load-file-error",(t=>{e("DID_THROW_ITEM_INVALID",{id:p,error:t.status,status:t.status}),a({error:t.status,file:Tn(d)})})),d.on("load-abort",(()=>{e("REMOVE_ITEM",{query:p})})),d.on("load-skip",(()=>{e("COMPLETE_LOAD_ITEM",{query:p,item:d,data:{source:n,success:s}})})),d.on("load",(()=>{const o=o=>{o?(d.on("metadata-update",(t=>{e("DID_UPDATE_ITEM_METADATA",{id:p,change:t})})),Gn("SHOULD_PREPARE_OUTPUT",!1,{item:d,query:t}).then((o=>{const i=t("GET_BEFORE_PREPARE_FILE");i&&(o=i(d,o));const a=()=>{e("COMPLETE_LOAD_ITEM",{query:p,item:d,data:{source:n,success:s}}),$o(e,r)};o?e("REQUEST_PREPARE_OUTPUT",{query:p,item:d,success:t=>{e("DID_PREPARE_OUTPUT",{id:p,file:t}),a()}},!0):a()}))):e("REMOVE_ITEM",{query:p})};Gn("DID_LOAD_ITEM",d,{query:t,dispatch:e}).then((()=>{Vo(t("GET_BEFORE_ADD_FILE"),Tn(d)).then(o)})).catch((()=>{o(!1)}))})),d.on("process-start",(()=>{e("DID_START_ITEM_PROCESSING",{id:p})})),d.on("process-progress",(t=>{e("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:p,progress:t})})),d.on("process-error",(t=>{e("DID_THROW_ITEM_PROCESSING_ERROR",{id:p,error:t,status:{main:Bo(r.options.labelFileProcessingError)(t),sub:r.options.labelTapToRetry}})})),d.on("process-revert-error",(t=>{e("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:p,error:t,status:{main:Bo(r.options.labelFileProcessingRevertError)(t),sub:r.options.labelTapToRetry}})})),d.on("process-complete",(t=>{e("DID_COMPLETE_ITEM_PROCESSING",{id:p,error:null,serverFileReference:t}),e("DID_DEFINE_VALUE",{id:p,value:t})})),d.on("process-abort",(()=>{e("DID_ABORT_ITEM_PROCESSING",{id:p})})),d.on("process-revert",(()=>{e("DID_REVERT_ITEM_PROCESSING",{id:p}),e("DID_DEFINE_VALUE",{id:p,value:null})})),e("DID_ADD_ITEM",{id:p,index:o,interactionMethod:i}),$o(e,r);const{url:f,load:h,restore:E,fetch:m}=r.options.server||{};d.load(n,Eo(c===Mn?Hr(n)&&(e=>(e.indexOf(":")>-1||e.indexOf("//")>-1)&&qo(location.href)!==qo(e))(n)&&m?Ro(f,m):Uo:Ro(f,c===bn?E:h)),((e,r,n)=>{Gn("LOAD_FILE",e,{query:t}).then(r).catch(n)}))},REQUEST_PREPARE_OUTPUT:({item:e,success:r,failure:n=(()=>{})})=>{const o={error:go("error",0,"Item not found"),file:null};if(e.archived)return n(o);Gn("PREPARE_OUTPUT",e.file,{query:t,item:e}).then((i=>{Gn("COMPLETE_PREPARE_OUTPUT",i,{query:t,item:e}).then((t=>{if(e.archived)return n(o);r(t)}))}))},COMPLETE_LOAD_ITEM:({item:n,data:o})=>{const{success:i,source:s}=o,a=t("GET_ITEM_INSERT_LOCATION");if(Zr(a)&&s&&ko(r,a),e("DID_LOAD_ITEM",{id:n.id,error:null,serverFileReference:n.origin===Mn?null:s}),i(Tn(n)),n.origin!==Pn)return n.origin===bn?(e("DID_COMPLETE_ITEM_PROCESSING",{id:n.id,error:null,serverFileReference:s}),void e("DID_DEFINE_VALUE",{id:n.id,value:n.serverId||s})):void(t("IS_ASYNC")&&r.options.instantUpload&&e("REQUEST_ITEM_PROCESSING",{query:n.id}));e("DID_LOAD_LOCAL_ITEM",{id:n.id})},RETRY_ITEM_LOAD:Yo(r,(e=>{e.retryLoad()})),REQUEST_ITEM_PREPARE:Yo(r,((t,r,n)=>{e("REQUEST_PREPARE_OUTPUT",{query:t.id,item:t,success:n=>{e("DID_PREPARE_OUTPUT",{id:t.id,file:n}),r({file:t,output:n})},failure:n},!0)})),REQUEST_ITEM_PROCESSING:Yo(r,((n,o,i)=>{if(n.status===yn||n.status===Dn)n.status!==Rn&&(n.requestProcessing(),e("DID_REQUEST_ITEM_PROCESSING",{id:n.id}),e("PROCESS_ITEM",{query:n,success:o,failure:i},!0));else{const s=()=>e("REQUEST_ITEM_PROCESSING",{query:n,success:o,failure:i}),a=()=>document.hidden?s():setTimeout(s,32);n.status===On||n.status===wn?n.revert(bo(r.options.server.url,r.options.server.revert),t("GET_FORCE_REVERT")).then(a).catch((()=>{})):n.status===An&&n.abortProcessing().then(a)}})),PROCESS_ITEM:Yo(r,((n,o,i)=>{const s=t("GET_MAX_PARALLEL_UPLOADS");if(t("GET_ITEMS_BY_STATUS",An).length===s)return void r.processingQueue.push({id:n.id,success:o,failure:i});if(n.status===An)return;const a=()=>{const t=r.processingQueue.shift();if(!t)return;const{id:n,success:o,failure:i}=t,s=$n(r.items,n);s&&!s.archived?e("PROCESS_ITEM",{query:n,success:o,failure:i},!0):a()};n.onOnce("process-complete",(()=>{o(Tn(n)),a();const i=r.options.server;if(r.options.instantUpload&&n.origin===Pn&&Zr(i.remove)){const e=()=>{};n.origin=bn,r.options.server.remove(n.source,e,e)}t("GET_ITEMS_BY_STATUS",On).length===r.items.length&&e("DID_COMPLETE_ITEM_PROCESSING_ALL")})),n.onOnce("process-error",(e=>{i({error:e,file:Tn(n)}),a()}));const l=r.options;n.process(Lo(Mo(l.server.url,l.server.process,l.name,{chunkTransferId:n.transferId,chunkServer:l.server.patch,chunkUploads:l.chunkUploads,chunkForce:l.chunkForce,chunkSize:l.chunkSize,chunkRetryDelays:l.chunkRetryDelays}),{allowMinimumUploadDuration:t("GET_ALLOW_MINIMUM_UPLOAD_DURATION")}),((r,o,i)=>{Gn("PREPARE_OUTPUT",r,{query:t,item:n}).then((t=>{e("DID_PREPARE_OUTPUT",{id:n.id,file:t}),o(t)})).catch(i)}))})),RETRY_ITEM_PROCESSING:Yo(r,(t=>{e("REQUEST_ITEM_PROCESSING",{query:t})})),REQUEST_REMOVE_ITEM:Yo(r,(r=>{Vo(t("GET_BEFORE_REMOVE_FILE"),Tn(r)).then((t=>{t&&e("REMOVE_ITEM",{query:r})}))})),RELEASE_ITEM:Yo(r,(e=>{e.release()})),REMOVE_ITEM:Yo(r,((n,o,i,s)=>{const a=()=>{const t=n.id;Fo(r.items,t).archive(),e("DID_REMOVE_ITEM",{error:null,id:t,item:n}),$o(e,r),o(Tn(n))},l=r.options.server;n.origin===Pn&&l&&Zr(l.remove)&&!1!==s.remove?(e("DID_START_ITEM_REMOVE",{id:n.id}),l.remove(n.source,(()=>a()),(t=>{e("DID_THROW_ITEM_REMOVE_ERROR",{id:n.id,error:go("error",0,t,null),status:{main:Bo(r.options.labelFileRemoveError)(t),sub:r.options.labelTapToRetry}})}))):(s.revert&&n.origin!==Pn&&null!==n.serverId&&n.revert(bo(r.options.server.url,r.options.server.revert),t("GET_FORCE_REVERT")),a())})),ABORT_ITEM_LOAD:Yo(r,(e=>{e.abortLoad()})),ABORT_ITEM_PROCESSING:Yo(r,(t=>{t.serverId?e("REVERT_ITEM_PROCESSING",{id:t.id}):t.abortProcessing().then((()=>{r.options.instantUpload&&e("REMOVE_ITEM",{query:t.id})}))})),REQUEST_REVERT_ITEM_PROCESSING:Yo(r,(n=>{if(!r.options.instantUpload)return void e("REVERT_ITEM_PROCESSING",{query:n});const o=t=>{t&&e("REVERT_ITEM_PROCESSING",{query:n})},i=t("GET_BEFORE_REMOVE_FILE");if(!i)return o(!0);const s=i(Tn(n));return null==s?o(!0):"boolean"==typeof s?o(s):void("function"==typeof s.then&&s.then(o))})),REVERT_ITEM_PROCESSING:Yo(r,(n=>{n.revert(bo(r.options.server.url,r.options.server.revert),t("GET_FORCE_REVERT")).then((()=>{(r.options.instantUpload||(e=>!No(e.file))(n))&&e("REMOVE_ITEM",{query:n.id})})).catch((()=>{}))})),SET_OPTIONS:({options:t})=>{ur(t,((t,r)=>{e(`SET_${sn(t,"_").toUpperCase()}`,{value:r})}))}}),Wo=e=>document.createElement(e),zo=(e,t)=>{let r=e.childNodes[0];r?t!==r.nodeValue&&(r.nodeValue=t):(r=document.createTextNode(t),e.appendChild(r))},Xo=(e,t,r,n)=>{const o=(n%360-90)*Math.PI/180;return{x:e+r*Math.cos(o),y:t+r*Math.sin(o)}},jo=(e,t,r,n,o)=>{let i=1;return o>n&&o-n<=.5&&(i=0),n>o&&n-o>=.5&&(i=0),((e,t,r,n,o,i)=>{const s=Xo(e,t,r,o),a=Xo(e,t,r,n);return["M",s.x,s.y,"A",r,r,0,i,0,a.x,a.y].join(" ")})(e,t,r,360*Math.min(.9999,n),360*Math.min(.9999,o),i)},Qo=xr({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:({root:e,props:t})=>{t.spin=!1,t.progress=0,t.opacity=0;const r=mr("svg");e.ref.path=mr("path",{"stroke-width":2,"stroke-linecap":"round"}),r.appendChild(e.ref.path),e.ref.svg=r,e.appendChild(r)},write:({root:e,props:t})=>{if(0===t.opacity)return;t.align&&(e.element.dataset.align=t.align);const r=parseInt(fr(e.ref.path,"stroke-width"),10),n=.5*e.rect.element.width;let o=0,i=0;t.spin?(o=0,i=.5):(o=0,i=t.progress);const s=jo(n,n,n-r,o,i);fr(e.ref.path,"d",s),fr(e.ref.path,"stroke-opacity",t.spin||t.progress>0?1:0)},mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),Zo=xr({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:({root:e,props:t})=>{e.element.innerHTML=(t.icon||"")+`<span>${t.label}</span>`,t.isDisabled=!1},write:({root:e,props:t})=>{const{isDisabled:r}=t,n=e.query("GET_DISABLED")||0===t.opacity;n&&!r?(t.isDisabled=!0,fr(e.element,"disabled","disabled")):!n&&r&&(t.isDisabled=!1,e.element.removeAttribute("disabled"))}}),Ko=(e,t=".",r=1e3)=>{const n=r,o=r*r,i=r*r*r;return(e=Math.round(Math.abs(e)))<n?`${e} bytes`:e<o?`${Math.floor(e/n)} KB`:e<i?`${Jo(e/o,1,t)} MB`:`${Jo(e/i,2,t)} GB`},Jo=(e,t,r)=>e.toFixed(t).split(".").filter((e=>"0"!==e)).join(r),ei=({root:e,props:t})=>{zo(e.ref.fileSize,Ko(e.query("GET_ITEM_SIZE",t.id),".",e.query("GET_FILE_SIZE_BASE"))),zo(e.ref.fileName,e.query("GET_ITEM_NAME",t.id))},ti=({root:e,props:t})=>{jr(e.query("GET_ITEM_SIZE",t.id))||zo(e.ref.fileSize,e.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},ri=xr({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:Gr({DID_LOAD_ITEM:ei,DID_UPDATE_ITEM_META:ei,DID_THROW_ITEM_LOAD_ERROR:ti,DID_THROW_ITEM_INVALID:ti}),didCreateView:e=>{Fn("CREATE_VIEW",l(a({},e),{view:e}))},create:({root:e,props:t})=>{const r=Wo("span");r.className="filepond--file-info-main",fr(r,"aria-hidden","true"),e.appendChild(r),e.ref.fileName=r;const n=Wo("span");n.className="filepond--file-info-sub",e.appendChild(n),e.ref.fileSize=n,zo(n,e.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),zo(r,e.query("GET_ITEM_NAME",t.id))},mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),ni=e=>Math.round(100*e),oi=({root:e,action:t})=>{const r=null===t.progress?e.query("GET_LABEL_FILE_LOADING"):`${e.query("GET_LABEL_FILE_LOADING")} ${ni(t.progress)}%`;zo(e.ref.main,r),zo(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},ii=({root:e})=>{zo(e.ref.main,""),zo(e.ref.sub,"")},si=({root:e,action:t})=>{zo(e.ref.main,t.status.main),zo(e.ref.sub,t.status.sub)},ai=xr({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:Gr({DID_LOAD_ITEM:ii,DID_REVERT_ITEM_PROCESSING:ii,DID_REQUEST_ITEM_PROCESSING:({root:e})=>{zo(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING")),zo(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},DID_ABORT_ITEM_PROCESSING:({root:e})=>{zo(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_ABORTED")),zo(e.ref.sub,e.query("GET_LABEL_TAP_TO_RETRY"))},DID_COMPLETE_ITEM_PROCESSING:({root:e})=>{zo(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),zo(e.ref.sub,e.query("GET_LABEL_TAP_TO_UNDO"))},DID_UPDATE_ITEM_PROCESS_PROGRESS:({root:e,action:t})=>{const r=null===t.progress?e.query("GET_LABEL_FILE_PROCESSING"):`${e.query("GET_LABEL_FILE_PROCESSING")} ${ni(t.progress)}%`;zo(e.ref.main,r),zo(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},DID_UPDATE_ITEM_LOAD_PROGRESS:oi,DID_THROW_ITEM_LOAD_ERROR:si,DID_THROW_ITEM_INVALID:si,DID_THROW_ITEM_PROCESSING_ERROR:si,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:si,DID_THROW_ITEM_REMOVE_ERROR:si}),didCreateView:e=>{Fn("CREATE_VIEW",l(a({},e),{view:e}))},create:({root:e})=>{const t=Wo("span");t.className="filepond--file-status-main",e.appendChild(t),e.ref.main=t;const r=Wo("span");r.className="filepond--file-status-sub",e.appendChild(r),e.ref.sub=r,oi({root:e,action:{progress:null}})},mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),li={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},ci=[];ur(li,(e=>{ci.push(e)}));const di=e=>{if("right"===hi(e))return 0;const t=e.ref.buttonRemoveItem.rect.element;return t.hidden?null:t.width+t.left},ui=e=>e.ref.buttonAbortItemLoad.rect.element.width,pi=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.height/4),fi=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.left/2),hi=e=>e.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION"),Ei={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:e=>e.query("GET_STYLE_LOAD_INDICATOR_POSITION")},processProgressIndicator:{opacity:0,align:e=>e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},mi={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:di},status:{translateX:di}},_i={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},gi={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:di},status:{translateX:di,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:di},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:hi},info:{translateX:di},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:hi},buttonRemoveItem:{opacity:1},info:{translateX:di},status:{opacity:1,translateX:di}},DID_LOAD_ITEM:mi,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:di},status:{translateX:di}},DID_START_ITEM_PROCESSING:_i,DID_REQUEST_ITEM_PROCESSING:_i,DID_UPDATE_ITEM_PROCESS_PROGRESS:_i,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:di}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:di},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:mi},Ti=xr({create:({root:e})=>{e.element.innerHTML=e.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),Ii=Gr({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:({root:e,action:t})=>{e.ref.buttonAbortItemProcessing.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:({root:e,action:t})=>{e.ref.buttonAbortItemLoad.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:({root:e,action:t})=>{e.ref.buttonAbortItemRemoval.label=t.value},DID_REQUEST_ITEM_PROCESSING:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:({root:e})=>{e.ref.loadProgressIndicator.spin=!0,e.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:({root:e,action:t})=>{e.ref.loadProgressIndicator.spin=!1,e.ref.loadProgressIndicator.progress=t.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:({root:e,action:t})=>{e.ref.processProgressIndicator.spin=!1,e.ref.processProgressIndicator.progress=t.progress}}),yi=xr({create:({root:e,props:t})=>{const r=Object.keys(li).reduce(((e,t)=>(e[t]=a({},li[t]),e)),{}),{id:n}=t,o=e.query("GET_ALLOW_REVERT"),i=e.query("GET_ALLOW_REMOVE"),s=e.query("GET_ALLOW_PROCESS"),l=e.query("GET_INSTANT_UPLOAD"),c=e.query("IS_ASYNC"),d=e.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN");let u;c?s&&!o?u=e=>!/RevertItemProcessing/.test(e):!s&&o?u=e=>!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(e):s||o||(u=e=>!/Process/.test(e)):u=e=>!/Process/.test(e);const p=u?ci.filter(u):ci.concat();if(l&&o&&(r.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",r.RevertItemProcessing.icon="GET_ICON_REMOVE"),c&&!o){const e=gi.DID_COMPLETE_ITEM_PROCESSING;e.info.translateX=fi,e.info.translateY=pi,e.status.translateY=pi,e.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(c&&!s&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach((e=>{gi[e].status.translateY=pi})),gi.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=ui),d&&o){r.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";const e=gi.DID_COMPLETE_ITEM_PROCESSING;e.info.translateX=di,e.status.translateY=pi,e.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}i||(r.RemoveItem.disabled=!0),ur(r,((t,r)=>{const o=e.createChildView(Zo,{label:e.query(r.label),icon:e.query(r.icon),opacity:0});p.includes(t)&&e.appendChildView(o),r.disabled&&(o.element.setAttribute("disabled","disabled"),o.element.setAttribute("hidden","hidden")),o.element.dataset.align=e.query(`GET_STYLE_${r.align}`),o.element.classList.add(r.className),o.on("click",(t=>{t.stopPropagation(),r.disabled||e.dispatch(r.action,{query:n})})),e.ref[`button${t}`]=o})),e.ref.processingCompleteIndicator=e.appendChildView(e.createChildView(Ti)),e.ref.processingCompleteIndicator.element.dataset.align=e.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),e.ref.info=e.appendChildView(e.createChildView(ri,{id:n})),e.ref.status=e.appendChildView(e.createChildView(ai,{id:n}));const f=e.appendChildView(e.createChildView(Qo,{opacity:0,align:e.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));f.element.classList.add("filepond--load-indicator"),e.ref.loadProgressIndicator=f;const h=e.appendChildView(e.createChildView(Qo,{opacity:0,align:e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));h.element.classList.add("filepond--process-indicator"),e.ref.processProgressIndicator=h,e.ref.activeStyles=[]},write:({root:e,actions:t,props:r})=>{Ii({root:e,actions:t,props:r});let n=t.concat().filter((e=>/^DID_/.test(e.type))).reverse().find((e=>gi[e.type]));if(n){e.ref.activeStyles=[];const t=gi[n.type];ur(Ei,((r,n)=>{const o=e.ref[r];ur(n,((n,i)=>{const s=t[r]&&void 0!==t[r][n]?t[r][n]:i;e.ref.activeStyles.push({control:o,key:n,value:s})}))}))}e.ref.activeStyles.forEach((({control:t,key:r,value:n})=>{t[r]="function"==typeof n?n(e):n}))},didCreateView:e=>{Fn("CREATE_VIEW",l(a({},e),{view:e}))},name:"file"}),Ri=xr({create:({root:e,props:t})=>{e.ref.fileName=Wo("legend"),e.appendChild(e.ref.fileName),e.ref.file=e.appendChildView(e.createChildView(yi,{id:t.id})),e.ref.data=!1},ignoreRect:!0,write:Gr({DID_LOAD_ITEM:({root:e,props:t})=>{zo(e.ref.fileName,e.query("GET_ITEM_NAME",t.id))}}),didCreateView:e=>{Fn("CREATE_VIEW",l(a({},e),{view:e}))},tag:"fieldset",name:"file-wrapper"}),Ai={type:"spring",damping:.6,mass:7},Oi=(e,t,r)=>{const n=xr({name:`panel-${t.name} filepond--${r}`,mixins:t.mixins,ignoreRectUpdate:!0}),o=e.createChildView(n,t.props);e.ref[t.name]=e.appendChildView(o)},Di=xr({name:"panel",read:({root:e,props:t})=>t.heightCurrent=e.ref.bottom.translateY,write:({root:e,props:t})=>{if(null!==e.ref.scalable&&t.scalable===e.ref.scalable||(e.ref.scalable=!kr(t.scalable)||t.scalable,e.element.dataset.scalable=e.ref.scalable),!t.height)return;const r=e.ref.top.rect.element,n=e.ref.bottom.rect.element,o=Math.max(r.height+n.height,t.height);e.ref.center.translateY=r.height,e.ref.center.scaleY=(o-r.height-n.height)/100,e.ref.bottom.translateY=o-n.height},create:({root:e,props:t})=>{[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:Ai},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:Ai},styles:["translateY"]}}].forEach((r=>{Oi(e,r,t.name)})),e.element.classList.add(`filepond--${t.name}`),e.ref.scalable=null},ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),wi={type:"spring",stiffness:.75,damping:.45,mass:10},vi={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},Si=Gr({DID_UPDATE_PANEL_HEIGHT:({root:e,action:t})=>{e.height=t.height}}),Mi=Gr({DID_GRAB_ITEM:({root:e,props:t})=>{t.dragOrigin={x:e.translateX,y:e.translateY}},DID_DRAG_ITEM:({root:e})=>{e.element.dataset.dragState="drag"},DID_DROP_ITEM:({root:e,props:t})=>{t.dragOffset=null,t.dragOrigin=null,e.element.dataset.dragState="drop"}},(({root:e,actions:t,props:r,shouldOptimize:n})=>{"drop"===e.element.dataset.dragState&&e.scaleX<=1&&(e.element.dataset.dragState="idle");let o=t.concat().filter((e=>/^DID_/.test(e.type))).reverse().find((e=>vi[e.type]));o&&o.type!==r.currentState&&(r.currentState=o.type,e.element.dataset.filepondItemState=vi[r.currentState]||"");const i=e.query("GET_ITEM_PANEL_ASPECT_RATIO")||e.query("GET_PANEL_ASPECT_RATIO");i?n||(e.height=e.rect.element.width*i):(Si({root:e,actions:t,props:r}),!e.height&&e.ref.container.rect.element.height>0&&(e.height=e.ref.container.rect.element.height)),n&&(e.ref.panel.height=null),e.ref.panel.height=e.height})),bi=xr({create:({root:e,props:t})=>{if(e.ref.handleClick=r=>e.dispatch("DID_ACTIVATE_ITEM",{id:t.id}),e.element.id=`filepond--item-${t.id}`,e.element.addEventListener("click",e.ref.handleClick),e.ref.container=e.appendChildView(e.createChildView(Ri,{id:t.id})),e.ref.panel=e.appendChildView(e.createChildView(Di,{name:"item-panel"})),e.ref.panel.height=null,t.markedForRemoval=!1,!e.query("GET_ALLOW_REORDER"))return;e.element.dataset.dragState="idle";e.element.addEventListener("pointerdown",(r=>{if(!r.isPrimary)return;let n=!1;const o=r.pageX,i=r.pageY;t.dragOrigin={x:e.translateX,y:e.translateY},t.dragCenter={x:r.offsetX,y:r.offsetY};const s=(e=>{const t=e.map((e=>e.id));let r;return{setIndex:e=>{r=e},getIndex:()=>r,getItemIndex:e=>t.indexOf(e.id)}})(e.query("GET_ACTIVE_ITEMS"));e.dispatch("DID_GRAB_ITEM",{id:t.id,dragState:s});const a=r=>{if(!r.isPrimary)return;r.stopPropagation(),r.preventDefault(),t.dragOffset={x:r.pageX-o,y:r.pageY-i};t.dragOffset.x*t.dragOffset.x+t.dragOffset.y*t.dragOffset.y>16&&!n&&(n=!0,e.element.removeEventListener("click",e.ref.handleClick)),e.dispatch("DID_DRAG_ITEM",{id:t.id,dragState:s})},l=r=>{r.isPrimary&&(document.removeEventListener("pointermove",a),document.removeEventListener("pointerup",l),t.dragOffset={x:r.pageX-o,y:r.pageY-i},e.dispatch("DID_DROP_ITEM",{id:t.id,dragState:s}),n&&setTimeout((()=>e.element.addEventListener("click",e.ref.handleClick)),0))};document.addEventListener("pointermove",a),document.addEventListener("pointerup",l)}))},write:Mi,destroy:({root:e,props:t})=>{e.element.removeEventListener("click",e.ref.handleClick),e.dispatch("RELEASE_ITEM",{query:t.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:"spring",scaleY:"spring",translateX:wi,translateY:wi,opacity:{type:"tween",duration:150}}}});var Pi=(e,t)=>Math.max(1,Math.floor((e+1)/t));const Li=(e,t,r)=>{if(!r)return;const n=e.rect.element.width,o=t.length;let i=null;if(0===o||r.top<t[0].rect.element.top)return-1;const s=t[0].rect.element,a=s.marginLeft+s.marginRight,l=s.width+a,c=Pi(n,l);if(1===c){for(let e=0;e<o;e++){const n=t[e],o=n.rect.outer.top+.5*n.rect.element.height;if(r.top<o)return e}return o}const d=s.marginTop+s.marginBottom,u=s.height+d;for(let p=0;p<o;p++){const e=p%c*l,t=Math.floor(p/c)*u,n=t-s.marginTop,a=e+l,d=t+u+s.marginBottom;if(r.top<d&&r.top>n){if(r.left<a)return p;i=p!==o-1?p:null}}return null!==i?i:o},Ci={height:0,width:0,get getHeight(){return this.height},set setHeight(e){0!==this.height&&0!==e||(this.height=e)},get getWidth(){return this.width},set setWidth(e){0!==this.width&&0!==e||(this.width=e)},setDimensions:function(e,t){0!==this.height&&0!==e||(this.height=e),0!==this.width&&0!==t||(this.width=t)}},Ni=(e,t,r,n=0,o=1)=>{e.dragOffset?(e.translateX=null,e.translateY=null,e.translateX=e.dragOrigin.x+e.dragOffset.x,e.translateY=e.dragOrigin.y+e.dragOffset.y,e.scaleX=1.025,e.scaleY=1.025):(e.translateX=t,e.translateY=r,Date.now()>e.spawnDate&&(0===e.opacity&&xi(e,t,r,n,o),e.scaleX=1,e.scaleY=1,e.opacity=1))},xi=(e,t,r,n,o)=>{e.interactionMethod===fn?(e.translateX=null,e.translateX=t,e.translateY=null,e.translateY=r):e.interactionMethod===dn?(e.translateX=null,e.translateX=t-20*n,e.translateY=null,e.translateY=r-10*o,e.scaleX=.8,e.scaleY=.8):e.interactionMethod===un?(e.translateY=null,e.translateY=r-30):e.interactionMethod===cn&&(e.translateX=null,e.translateX=t-30,e.translateY=null)},Gi=e=>e.rect.element.height+.5*e.rect.element.marginBottom+.5*e.rect.element.marginTop,Fi=Gr({DID_ADD_ITEM:({root:e,action:t})=>{const{id:r,index:n,interactionMethod:o}=t;e.ref.addIndex=n;const i=Date.now();let s=i,a=1;if(o!==fn){a=0;const t=e.query("GET_ITEM_INSERT_INTERVAL"),r=i-e.ref.lastItemSpanwDate;s=r<t?i+(t-r):i}e.ref.lastItemSpanwDate=s,e.appendChildView(e.createChildView(bi,{spawnDate:s,id:r,opacity:a,interactionMethod:o}),n)},DID_REMOVE_ITEM:({root:e,action:t})=>{const{id:r}=t,n=e.childViews.find((e=>e.id===r));n&&(n.scaleX=.9,n.scaleY=.9,n.opacity=0,n.markedForRemoval=!0)},DID_DRAG_ITEM:({root:e,action:t})=>{const{id:r,dragState:n}=t,o=e.query("GET_ITEM",{id:r}),i=e.childViews.find((e=>e.id===r)),s=e.childViews.length,a=n.getItemIndex(o);if(!i)return;const l=i.dragOrigin.x+i.dragOffset.x+i.dragCenter.x,c=i.dragOrigin.y+i.dragOffset.y+i.dragCenter.y,d=Gi(i),u=(p=i).rect.element.width+.5*p.rect.element.marginLeft+.5*p.rect.element.marginRight;var p;let f=Math.floor(e.rect.outer.width/u);f>s&&(f=s);const h=Math.floor(s/f+1);Ci.setHeight=d*h,Ci.setWidth=u*f;var E={y:Math.floor(c/d),x:Math.floor(l/u),getGridIndex:function(){return c>Ci.getHeight||c<0||l>Ci.getWidth||l<0?a:this.y*f+this.x},getColIndex:function(){const t=e.query("GET_ACTIVE_ITEMS"),r=e.childViews.filter((e=>e.rect.element.height)),n=t.map((e=>r.find((t=>t.id===e.id)))),o=n.findIndex((e=>e===i)),s=Gi(i),a=n.length;let l=a,d=0,u=0,p=0;for(let e=0;e<a;e++)if(d=Gi(n[e]),p=u,u=p+d,c<u){if(o>e){if(c<p+s){l=e;break}continue}l=e;break}return l}};const m=f>1?E.getGridIndex():E.getColIndex();e.dispatch("MOVE_ITEM",{query:i,index:m});const _=n.getIndex();if(void 0===_||_!==m){if(n.setIndex(m),void 0===_)return;e.dispatch("DID_REORDER_ITEMS",{items:e.query("GET_ACTIVE_ITEMS"),origin:a,target:m})}}}),Ui=xr({create:({root:e})=>{fr(e.element,"role","list"),e.ref.lastItemSpanwDate=Date.now()},write:({root:e,props:t,actions:r,shouldOptimize:n})=>{Fi({root:e,props:t,actions:r});const{dragCoordinates:o}=t,i=e.rect.element.width,s=e.childViews.filter((e=>e.rect.element.height)),a=e.query("GET_ACTIVE_ITEMS").map((e=>s.find((t=>t.id===e.id)))).filter((e=>e)),l=o?Li(e,a,o):null,c=e.ref.addIndex||null;e.ref.addIndex=null;let d=0,u=0,p=0;if(0===a.length)return;const f=a[0].rect.element,h=f.marginTop+f.marginBottom,E=f.marginLeft+f.marginRight,m=f.width+E,_=f.height+h,g=Pi(i,m);if(1===g){let e=0,t=0;a.forEach(((r,o)=>{if(l){let e=o-l;t=-2===e?.25*-h:-1===e?.75*-h:0===e?.75*h:1===e?.25*h:0}n&&(r.translateX=null,r.translateY=null),r.markedForRemoval||Ni(r,0,e+t);let i=(r.rect.element.height+h)*(r.markedForRemoval?r.opacity:1);e+=i}))}else{let e=0,t=0;a.forEach(((r,o)=>{o===l&&(d=1),o===c&&(p+=1),r.markedForRemoval&&r.opacity<.5&&(u-=1);const i=o+p+d+u,s=i%g,a=Math.floor(i/g),f=s*m,h=a*_,E=Math.sign(f-e),T=Math.sign(h-t);e=f,t=h,r.markedForRemoval||(n&&(r.translateX=null,r.translateY=null),Ni(r,f,h,E,T))}))}},tag:"ul",name:"list",didWriteView:({root:e})=>{e.childViews.filter((e=>e.markedForRemoval&&0===e.opacity&&e.resting)).forEach((t=>{t._destroy(),e.removeChildView(t)}))},filterFrameActionsForChild:(e,t)=>t.filter((t=>!t.data||!t.data.id||e.id===t.data.id)),mixins:{apis:["dragCoordinates"]}}),qi=Gr({DID_DRAG:({root:e,props:t,action:r})=>{e.query("GET_ITEM_INSERT_LOCATION_FREEDOM")&&(t.dragCoordinates={left:r.position.scopeLeft-e.ref.list.rect.element.left,top:r.position.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},DID_END_DRAG:({props:e})=>{e.dragCoordinates=null}}),Bi=xr({create:({root:e,props:t})=>{e.ref.list=e.appendChildView(e.createChildView(Ui)),t.dragCoordinates=null,t.overflowing=!1},write:({root:e,props:t,actions:r})=>{if(qi({root:e,props:t,actions:r}),e.ref.list.dragCoordinates=t.dragCoordinates,t.overflowing&&!t.overflow&&(t.overflowing=!1,e.element.dataset.state="",e.height=null),t.overflow){const r=Math.round(t.overflow);r!==e.height&&(t.overflowing=!0,e.element.dataset.state="overflow",e.height=r)}},name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),$i=(e,t,r,n="")=>{r?fr(e,t,n):e.removeAttribute(t)},Vi=({root:e,action:t})=>{e.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")&&$i(e.element,"accept",!!t.value,t.value?t.value.join(","):"")},ki=({root:e,action:t})=>{$i(e.element,"multiple",t.value)},Yi=({root:e,action:t})=>{$i(e.element,"webkitdirectory",t.value)},Hi=({root:e})=>{const t=e.query("GET_DISABLED"),r=e.query("GET_ALLOW_BROWSE"),n=t||!r;$i(e.element,"disabled",n)},Wi=({root:e,action:t})=>{t.value?0===e.query("GET_TOTAL_ITEMS")&&$i(e.element,"required",!0):$i(e.element,"required",!1)},zi=({root:e,action:t})=>{$i(e.element,"capture",!!t.value,!0===t.value?"":t.value)},Xi=({root:e})=>{const{element:t}=e;if(e.query("GET_TOTAL_ITEMS")>0)$i(t,"required",!1),$i(t,"name",!1);else{$i(t,"name",!0,e.query("GET_NAME"));e.query("GET_CHECK_VALIDITY")&&t.setCustomValidity(""),e.query("GET_REQUIRED")&&$i(t,"required",!0)}},ji=xr({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:({root:e,props:t})=>{e.element.id=`filepond--browser-${t.id}`,fr(e.element,"name",e.query("GET_NAME")),fr(e.element,"aria-controls",`filepond--assistant-${t.id}`),fr(e.element,"aria-labelledby",`filepond--drop-label-${t.id}`),Vi({root:e,action:{value:e.query("GET_ACCEPTED_FILE_TYPES")}}),ki({root:e,action:{value:e.query("GET_ALLOW_MULTIPLE")}}),Yi({root:e,action:{value:e.query("GET_ALLOW_DIRECTORIES_ONLY")}}),Hi({root:e}),Wi({root:e,action:{value:e.query("GET_REQUIRED")}}),zi({root:e,action:{value:e.query("GET_CAPTURE_METHOD")}}),e.ref.handleChange=r=>{if(!e.element.value)return;const n=Array.from(e.element.files).map((e=>(e._relativePath=e.webkitRelativePath,e)));setTimeout((()=>{t.onload(n),(e=>{if(e&&""!==e.value){try{e.value=""}catch(t){}if(e.value){const t=Wo("form"),r=e.parentNode,n=e.nextSibling;t.appendChild(e),t.reset(),n?r.insertBefore(e,n):r.appendChild(e)}}})(e.element)}),250)},e.element.addEventListener("change",e.ref.handleChange)},destroy:({root:e})=>{e.element.removeEventListener("change",e.ref.handleChange)},write:Gr({DID_LOAD_ITEM:Xi,DID_REMOVE_ITEM:Xi,DID_THROW_ITEM_INVALID:({root:e})=>{e.query("GET_CHECK_VALIDITY")&&e.element.setCustomValidity(e.query("GET_LABEL_INVALID_FIELD"))},DID_SET_DISABLED:Hi,DID_SET_ALLOW_BROWSE:Hi,DID_SET_ALLOW_DIRECTORIES_ONLY:Yi,DID_SET_ALLOW_MULTIPLE:ki,DID_SET_ACCEPTED_FILE_TYPES:Vi,DID_SET_CAPTURE_METHOD:zi,DID_SET_REQUIRED:Wi})}),Qi=13,Zi=32,Ki=(e,t)=>{e.innerHTML=t;const r=e.querySelector(".filepond--label-action");return r&&fr(r,"tabindex","0"),t},Ji=xr({name:"drop-label",ignoreRect:!0,create:({root:e,props:t})=>{const r=Wo("label");fr(r,"for",`filepond--browser-${t.id}`),fr(r,"id",`filepond--drop-label-${t.id}`),fr(r,"aria-hidden","true"),e.ref.handleKeyDown=t=>{(t.keyCode===Qi||t.keyCode===Zi)&&(t.preventDefault(),e.ref.label.click())},e.ref.handleClick=t=>{t.target===r||r.contains(t.target)||e.ref.label.click()},r.addEventListener("keydown",e.ref.handleKeyDown),e.element.addEventListener("click",e.ref.handleClick),Ki(r,t.caption),e.appendChild(r),e.ref.label=r},destroy:({root:e})=>{e.ref.label.addEventListener("keydown",e.ref.handleKeyDown),e.element.removeEventListener("click",e.ref.handleClick)},write:Gr({DID_SET_LABEL_IDLE:({root:e,action:t})=>{Ki(e.ref.label,t.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),es=xr({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),ts=Gr({DID_DRAG:({root:e,action:t})=>{e.ref.blob?(e.ref.blob.translateX=t.position.scopeLeft,e.ref.blob.translateY=t.position.scopeTop,e.ref.blob.scaleX=1,e.ref.blob.scaleY=1,e.ref.blob.opacity=1):(({root:e})=>{const t=.5*e.rect.element.width,r=.5*e.rect.element.height;e.ref.blob=e.appendChildView(e.createChildView(es,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:t,translateY:r}))})({root:e})},DID_DROP:({root:e})=>{e.ref.blob&&(e.ref.blob.scaleX=2.5,e.ref.blob.scaleY=2.5,e.ref.blob.opacity=0)},DID_END_DRAG:({root:e})=>{e.ref.blob&&(e.ref.blob.opacity=0)}}),rs=xr({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:({root:e,props:t,actions:r})=>{ts({root:e,props:t,actions:r});const{blob:n}=e.ref;0===r.length&&n&&0===n.opacity&&(e.removeChildView(n),e.ref.blob=null)}}),ns=(e,t)=>{try{const r=new DataTransfer;t.forEach((e=>{e instanceof File?r.items.add(e):r.items.add(new File([e],e.name,{type:e.type}))})),e.files=r.files}catch(r){return!1}return!0},os=(e,t)=>e.ref.fields[t],is=e=>{e.query("GET_ACTIVE_ITEMS").forEach((t=>{e.ref.fields[t.id]&&e.element.appendChild(e.ref.fields[t.id])}))},ss=({root:e})=>is(e),as=Gr({DID_SET_DISABLED:({root:e})=>{e.element.disabled=e.query("GET_DISABLED")},DID_ADD_ITEM:({root:e,action:t})=>{const r=!(e.query("GET_ITEM",t.id).origin===Pn)&&e.query("SHOULD_UPDATE_FILE_INPUT"),n=Wo("input");n.type=r?"file":"hidden",n.name=e.query("GET_NAME"),n.disabled=e.query("GET_DISABLED"),e.ref.fields[t.id]=n,is(e)},DID_LOAD_ITEM:({root:e,action:t})=>{const r=os(e,t.id);if(!r)return;if(null!==t.serverFileReference&&(r.value=t.serverFileReference),!e.query("SHOULD_UPDATE_FILE_INPUT"))return;const n=e.query("GET_ITEM",t.id);ns(r,[n.file])},DID_REMOVE_ITEM:({root:e,action:t})=>{const r=os(e,t.id);r&&(r.parentNode&&r.parentNode.removeChild(r),delete e.ref.fields[t.id])},DID_DEFINE_VALUE:({root:e,action:t})=>{const r=os(e,t.id);r&&(null===t.value?r.removeAttribute("value"):r.value=t.value,is(e))},DID_PREPARE_OUTPUT:({root:e,action:t})=>{e.query("SHOULD_UPDATE_FILE_INPUT")&&setTimeout((()=>{const r=os(e,t.id);r&&ns(r,[t.file])}),0)},DID_REORDER_ITEMS:ss,DID_SORT_ITEMS:ss}),ls=xr({tag:"fieldset",name:"data",create:({root:e})=>e.ref.fields={},write:as,ignoreRect:!0}),cs=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],ds=["css","csv","html","txt"],us={zip:"zip|compressed",epub:"application/epub+zip"},ps=(e="")=>(e=e.toLowerCase(),cs.includes(e)?"image/"+("jpg"===e?"jpeg":"svg"===e?"svg+xml":e):ds.includes(e)?"text/"+e:us[e]||""),fs=e=>new Promise(((t,r)=>{const n=As(e);if(n.length&&!hs(e))return t(n);Es(e).then(t)})),hs=e=>!!e.files&&e.files.length>0,Es=e=>new Promise(((t,r)=>{const n=(e.items?Array.from(e.items):[]).filter((e=>ms(e))).map((e=>_s(e)));n.length?Promise.all(n).then((e=>{const r=[];e.forEach((e=>{r.push.apply(r,e)})),t(r.filter((e=>e)).map((e=>(e._relativePath||(e._relativePath=e.webkitRelativePath),e))))})).catch(console.error):t(e.files?Array.from(e.files):[])})),ms=e=>{if(ys(e)){const t=Rs(e);if(t)return t.isFile||t.isDirectory}return"file"===e.kind},_s=e=>new Promise(((t,r)=>{Is(e)?gs(Rs(e)).then(t).catch(r):t([e.getAsFile()])})),gs=e=>new Promise(((t,r)=>{const n=[];let o=0,i=0;const s=()=>{0===i&&0===o&&t(n)},a=e=>{o++;const t=e.createReader(),l=()=>{t.readEntries((e=>{if(0===e.length)return o--,void s();e.forEach((e=>{e.isDirectory?a(e):(i++,e.file((t=>{const r=Ts(t);e.fullPath&&(r._relativePath=e.fullPath),n.push(r),i--,s()})))})),l()}),r)};l()};a(e)})),Ts=e=>{if(e.type.length)return e;const t=e.lastModifiedDate,r=e.name,n=ps(no(e.name));return n.length?((e=e.slice(0,e.size,n)).name=r,e.lastModifiedDate=t,e):e},Is=e=>ys(e)&&(Rs(e)||{}).isDirectory,ys=e=>"webkitGetAsEntry"in e,Rs=e=>e.webkitGetAsEntry(),As=e=>{let t=[];try{if(t=Ds(e),t.length)return t;t=Os(e)}catch(r){}return t},Os=e=>{let t=e.getData("url");return"string"==typeof t&&t.length?[t]:[]},Ds=e=>{let t=e.getData("text/html");if("string"==typeof t&&t.length){const e=t.match(/src\s*=\s*"(.+?)"/);if(e)return[e[1]]}return[]},ws=[],vs=e=>({pageLeft:e.pageX,pageTop:e.pageY,scopeLeft:e.offsetX||e.layerX,scopeTop:e.offsetY||e.layerY}),Ss=e=>{const t=ws.find((t=>t.element===e));if(t)return t;const r=Ms(e);return ws.push(r),r},Ms=e=>{const t=[],r={dragenter:Cs,dragover:Ns,dragleave:Gs,drop:xs},n={};ur(r,((r,o)=>{n[r]=o(e,t),e.addEventListener(r,n[r],!1)}));const o={element:e,addListener:i=>(t.push(i),()=>{t.splice(t.indexOf(i),1),0===t.length&&(ws.splice(ws.indexOf(o),1),ur(r,(t=>{e.removeEventListener(t,n[t],!1)})))})};return o},bs=(e,t)=>{var r;const n=((e,t)=>("elementFromPoint"in e||(e=document),e.elementFromPoint(t.x,t.y)))("getRootNode"in(r=t)?r.getRootNode():document,{x:e.pageX-window.pageXOffset,y:e.pageY-window.pageYOffset});return n===t||t.contains(n)};let Ps=null;const Ls=(e,t)=>{try{e.dropEffect=t}catch(r){}},Cs=(e,t)=>e=>{e.preventDefault(),Ps=e.target,t.forEach((t=>{const{element:r,onenter:n}=t;bs(e,r)&&(t.state="enter",n(vs(e)))}))},Ns=(e,t)=>e=>{e.preventDefault();const r=e.dataTransfer;fs(r).then((n=>{let o=!1;t.some((t=>{const{filterElement:i,element:s,onenter:a,onexit:l,ondrag:c,allowdrop:d}=t;Ls(r,"copy");const u=d(n);if(u)if(bs(e,s)){if(o=!0,null===t.state)return t.state="enter",void a(vs(e));if(t.state="over",i&&!u)return void Ls(r,"none");c(vs(e))}else i&&!o&&Ls(r,"none"),t.state&&(t.state=null,l(vs(e)));else Ls(r,"none")}))}))},xs=(e,t)=>e=>{e.preventDefault();const r=e.dataTransfer;fs(r).then((r=>{t.forEach((t=>{const{filterElement:n,element:o,ondrop:i,onexit:s,allowdrop:a}=t;if(t.state=null,!n||bs(e,o))return a(r)?void i(vs(e),r):s(vs(e))}))}))},Gs=(e,t)=>e=>{Ps===e.target&&t.forEach((t=>{const{onexit:r}=t;t.state=null,r(vs(e))}))},Fs=(e,t,r)=>{e.classList.add("filepond--hopper");const{catchesDropsOnPage:n,requiresDropOnElement:o,filterItems:i=(e=>e)}=r,s=((e,t,r)=>{const n=Ss(t),o={element:e,filterElement:r,state:null,ondrop:()=>{},onenter:()=>{},ondrag:()=>{},onexit:()=>{},onload:()=>{},allowdrop:()=>{}};return o.destroy=n.addListener(o),o})(e,n?document.documentElement:e,o);let a="",l="";s.allowdrop=e=>t(i(e)),s.ondrop=(e,r)=>{const n=i(r);t(n)?(l="drag-drop",c.onload(n,e)):c.ondragend(e)},s.ondrag=e=>{c.ondrag(e)},s.onenter=e=>{l="drag-over",c.ondragstart(e)},s.onexit=e=>{l="drag-exit",c.ondragend(e)};const c={updateHopperState:()=>{a!==l&&(e.dataset.hopperState=l,a=l)},onload:()=>{},ondragstart:()=>{},ondrag:()=>{},ondragend:()=>{},destroy:()=>{s.destroy()}};return c};let Us=!1;const qs=[],Bs=e=>{const t=document.activeElement;if(t&&/textarea|input/i.test(t.nodeName)){let e=!1,r=t;for(;r!==document.body;){if(r.classList.contains("filepond--root")){e=!0;break}r=r.parentNode}if(!e)return}fs(e.clipboardData).then((e=>{e.length&&qs.forEach((t=>t(e)))}))},$s=()=>{const e=e=>{t.onload(e)},t={destroy:()=>{var t;t=e,En(qs,qs.indexOf(t)),0===qs.length&&(document.removeEventListener("paste",Bs),Us=!1)},onload:()=>{}};return(e=>{qs.includes(e)||(qs.push(e),Us||(Us=!0,document.addEventListener("paste",Bs)))})(e),t};let Vs=null,ks=null;const Ys=[],Hs=(e,t)=>{e.element.textContent=t},Ws=(e,t,r)=>{const n=e.query("GET_TOTAL_ITEMS");Hs(e,`${r} ${t}, ${n} ${1===n?e.query("GET_LABEL_FILE_COUNT_SINGULAR"):e.query("GET_LABEL_FILE_COUNT_PLURAL")}`),clearTimeout(ks),ks=setTimeout((()=>{(e=>{e.element.textContent=""})(e)}),1500)},zs=e=>e.element.parentNode.contains(document.activeElement),Xs=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename,n=e.query("GET_LABEL_FILE_PROCESSING_ABORTED");Hs(e,`${r} ${n}`)},js=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename;Hs(e,`${t.status.main} ${r} ${t.status.sub}`)},Qs=xr({create:({root:e,props:t})=>{e.element.id=`filepond--assistant-${t.id}`,fr(e.element,"role","status"),fr(e.element,"aria-live","polite"),fr(e.element,"aria-relevant","additions")},ignoreRect:!0,ignoreRectUpdate:!0,write:Gr({DID_LOAD_ITEM:({root:e,action:t})=>{if(!zs(e))return;e.element.textContent="";const r=e.query("GET_ITEM",t.id);Ys.push(r.filename),clearTimeout(Vs),Vs=setTimeout((()=>{Ws(e,Ys.join(", "),e.query("GET_LABEL_FILE_ADDED")),Ys.length=0}),750)},DID_REMOVE_ITEM:({root:e,action:t})=>{if(!zs(e))return;const r=t.item;Ws(e,r.filename,e.query("GET_LABEL_FILE_REMOVED"))},DID_COMPLETE_ITEM_PROCESSING:({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename,n=e.query("GET_LABEL_FILE_PROCESSING_COMPLETE");Hs(e,`${r} ${n}`)},DID_ABORT_ITEM_PROCESSING:Xs,DID_REVERT_ITEM_PROCESSING:Xs,DID_THROW_ITEM_REMOVE_ERROR:js,DID_THROW_ITEM_LOAD_ERROR:js,DID_THROW_ITEM_INVALID:js,DID_THROW_ITEM_PROCESSING_ERROR:js}),tag:"span",name:"assistant"}),Zs=(e,t="-")=>e.replace(new RegExp(`${t}.`,"g"),(e=>e.charAt(1).toUpperCase())),Ks=(e,t=16,r=!0)=>{let n=Date.now(),o=null;return(...i)=>{clearTimeout(o);const s=Date.now()-n,a=()=>{n=Date.now(),e(...i)};s<t?r||(o=setTimeout(a,t-s)):a()}},Js=e=>e.preventDefault(),ea=e=>{const t=e.ref.list.childViews[0].childViews[0];return t?{top:t.rect.element.marginTop,bottom:t.rect.element.marginBottom}:{top:0,bottom:0}},ta=e=>{let t=0,r=0;const n=e.ref.list,o=n.childViews[0],i=o.childViews.filter((e=>e.rect.element.height)),s=e.query("GET_ACTIVE_ITEMS").map((e=>i.find((t=>t.id===e.id)))).filter((e=>e));if(0===s.length)return{visual:t,bounds:r};const a=o.rect.element.width,l=Li(o,s,n.dragCoordinates),c=s[0].rect.element,d=c.marginTop+c.marginBottom,u=c.marginLeft+c.marginRight,p=c.width+u,f=c.height+d,h=void 0!==l&&l>=0?1:0,E=s.find((e=>e.markedForRemoval&&e.opacity<.45))?-1:0,m=s.length+h+E,_=Pi(a,p);return 1===_?s.forEach((e=>{const n=e.rect.element.height+d;r+=n,t+=n*e.opacity})):(r=Math.ceil(m/_)*f,t=r),{visual:t,bounds:r}},ra=e=>{const t=e.ref.measureHeight||null;return{cappedHeight:parseInt(e.style.maxHeight,10)||null,fixedHeight:0===t?null:t}},na=(e,t)=>{const r=e.query("GET_ALLOW_REPLACE"),n=e.query("GET_ALLOW_MULTIPLE"),o=e.query("GET_TOTAL_ITEMS");let i=e.query("GET_MAX_FILES");const s=t.length;if(!n&&s>1)return!0;i=n||r?i:1;return!!(jr(i)&&o+s>i)&&(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:go("warning",0,"Max files")}),!0)},oa=(e,t,r)=>{const n=e.childViews[0];return Li(n,t,{left:r.scopeLeft-n.rect.element.left,top:r.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},ia=e=>{const t=e.query("GET_ALLOW_DROP"),r=e.query("GET_DISABLED"),n=t&&!r;if(n&&!e.ref.hopper){const t=Fs(e.element,(t=>{const r=e.query("GET_BEFORE_DROP_FILE")||(()=>!0);return!e.query("GET_DROP_VALIDATION")||t.every((t=>Fn("ALLOW_HOPPER_ITEM",t,{query:e.query}).every((e=>!0===e))&&r(t)))}),{filterItems:t=>{const r=e.query("GET_IGNORED_FILES");return t.filter((e=>!No(e)||!r.includes(e.name.toLowerCase())))},catchesDropsOnPage:e.query("GET_DROP_ON_PAGE"),requiresDropOnElement:e.query("GET_DROP_ON_ELEMENT")});t.onload=(t,r)=>{const n=e.ref.list.childViews[0].childViews.filter((e=>e.rect.element.height)),o=e.query("GET_ACTIVE_ITEMS").map((e=>n.find((t=>t.id===e.id)))).filter((e=>e));Gn("ADD_ITEMS",t,{dispatch:e.dispatch}).then((t=>{if(na(e,t))return!1;e.dispatch("ADD_ITEMS",{items:t,index:oa(e.ref.list,o,r),interactionMethod:dn})})),e.dispatch("DID_DROP",{position:r}),e.dispatch("DID_END_DRAG",{position:r})},t.ondragstart=t=>{e.dispatch("DID_START_DRAG",{position:t})},t.ondrag=Ks((t=>{e.dispatch("DID_DRAG",{position:t})})),t.ondragend=t=>{e.dispatch("DID_END_DRAG",{position:t})},e.ref.hopper=t,e.ref.drip=e.appendChildView(e.createChildView(rs))}else!n&&e.ref.hopper&&(e.ref.hopper.destroy(),e.ref.hopper=null,e.removeChildView(e.ref.drip))},sa=(e,t)=>{const r=e.query("GET_ALLOW_BROWSE"),n=e.query("GET_DISABLED"),o=r&&!n;o&&!e.ref.browser?e.ref.browser=e.appendChildView(e.createChildView(ji,l(a({},t),{onload:t=>{Gn("ADD_ITEMS",t,{dispatch:e.dispatch}).then((t=>{if(na(e,t))return!1;e.dispatch("ADD_ITEMS",{items:t,index:-1,interactionMethod:un})}))}})),0):!o&&e.ref.browser&&(e.removeChildView(e.ref.browser),e.ref.browser=null)},aa=e=>{const t=e.query("GET_ALLOW_PASTE"),r=e.query("GET_DISABLED"),n=t&&!r;n&&!e.ref.paster?(e.ref.paster=$s(),e.ref.paster.onload=t=>{Gn("ADD_ITEMS",t,{dispatch:e.dispatch}).then((t=>{if(na(e,t))return!1;e.dispatch("ADD_ITEMS",{items:t,index:-1,interactionMethod:pn})}))}):!n&&e.ref.paster&&(e.ref.paster.destroy(),e.ref.paster=null)},la=Gr({DID_SET_ALLOW_BROWSE:({root:e,props:t})=>{sa(e,t)},DID_SET_ALLOW_DROP:({root:e})=>{ia(e)},DID_SET_ALLOW_PASTE:({root:e})=>{aa(e)},DID_SET_DISABLED:({root:e,props:t})=>{ia(e),aa(e),sa(e,t);e.query("GET_DISABLED")?e.element.dataset.disabled="disabled":e.element.removeAttribute("data-disabled")}}),ca=xr({name:"root",read:({root:e})=>{e.ref.measure&&(e.ref.measureHeight=e.ref.measure.offsetHeight)},create:({root:e,props:t})=>{const r=e.query("GET_ID");r&&(e.element.id=r);const n=e.query("GET_CLASS_NAME");n&&n.split(" ").filter((e=>e.length)).forEach((t=>{e.element.classList.add(t)})),e.ref.label=e.appendChildView(e.createChildView(Ji,l(a({},t),{translateY:null,caption:e.query("GET_LABEL_IDLE")}))),e.ref.list=e.appendChildView(e.createChildView(Bi,{translateY:null})),e.ref.panel=e.appendChildView(e.createChildView(Di,{name:"panel-root"})),e.ref.assistant=e.appendChildView(e.createChildView(Qs,a({},t))),e.ref.data=e.appendChildView(e.createChildView(ls,a({},t))),e.ref.measure=Wo("div"),e.ref.measure.style.height="100%",e.element.appendChild(e.ref.measure),e.ref.bounds=null,e.query("GET_STYLES").filter((e=>!Br(e.value))).map((({name:t,value:r})=>{e.element.dataset[t]=r})),e.ref.widthPrevious=null,e.ref.widthUpdated=Ks((()=>{e.ref.updateHistory=[],e.dispatch("DID_RESIZE_ROOT")}),250),e.ref.previousAspectRatio=null,e.ref.updateHistory=[];const o=window.matchMedia("(pointer: fine) and (hover: hover)").matches,i="PointerEvent"in window;e.query("GET_ALLOW_REORDER")&&i&&!o&&(e.element.addEventListener("touchmove",Js,{passive:!1}),e.element.addEventListener("gesturestart",Js));const s=e.query("GET_CREDITS");if(2===s.length){const t=document.createElement("a");t.className="filepond--credits",t.setAttribute("aria-hidden","true"),t.href=s[0],t.tabindex=-1,t.target="_blank",t.rel="noopener noreferrer",t.textContent=s[1],e.element.appendChild(t),e.ref.credits=t}},write:({root:e,props:t,actions:r})=>{if(la({root:e,props:t,actions:r}),r.filter((e=>/^DID_SET_STYLE_/.test(e.type))).filter((e=>!Br(e.data.value))).map((({type:t,data:r})=>{const n=Zs(t.substr(8).toLowerCase(),"_");e.element.dataset[n]=r.value,e.invalidateLayout()})),e.rect.element.hidden)return;e.rect.element.width!==e.ref.widthPrevious&&(e.ref.widthPrevious=e.rect.element.width,e.ref.widthUpdated());let n=e.ref.bounds;n||(n=e.ref.bounds=ra(e),e.element.removeChild(e.ref.measure),e.ref.measure=null);const{hopper:o,label:i,list:s,panel:a}=e.ref;o&&o.updateHopperState();const l=e.query("GET_PANEL_ASPECT_RATIO"),c=e.query("GET_ALLOW_MULTIPLE"),d=e.query("GET_TOTAL_ITEMS"),u=d===(c?e.query("GET_MAX_FILES")||1e6:1),p=r.find((e=>"DID_ADD_ITEM"===e.type));if(u&&p){const e=p.data.interactionMethod;i.opacity=0,c?i.translateY=-40:e===cn?i.translateX=40:i.translateY=e===un?40:30}else u||(i.opacity=1,i.translateX=0,i.translateY=0);const f=ea(e),h=ta(e),E=i.rect.element.height,m=!c||u?0:E,_=u?s.rect.element.marginTop:0,g=0===d?0:s.rect.element.marginBottom,T=m+_+h.visual+g,I=m+_+h.bounds+g;if(s.translateY=Math.max(0,m-s.rect.element.marginTop)-f.top,l){const t=e.rect.element.width,r=t*l;l!==e.ref.previousAspectRatio&&(e.ref.previousAspectRatio=l,e.ref.updateHistory=[]);const n=e.ref.updateHistory;n.push(t);const o=2;if(n.length>2*o){const e=n.length,t=e-10;let r=0;for(let i=e;i>=t;i--)if(n[i]===n[i-2]&&r++,r>=o)return}a.scalable=!1,a.height=r;const i=r-m-(g-f.bottom)-(u?_:0);h.visual>i?s.overflow=i:s.overflow=null,e.height=r}else if(n.fixedHeight){a.scalable=!1;const e=n.fixedHeight-m-(g-f.bottom)-(u?_:0);h.visual>e?s.overflow=e:s.overflow=null}else if(n.cappedHeight){const t=T>=n.cappedHeight,r=Math.min(n.cappedHeight,T);a.scalable=!0,a.height=t?r:r-f.top-f.bottom;const o=r-m-(g-f.bottom)-(u?_:0);T>n.cappedHeight&&h.visual>o?s.overflow=o:s.overflow=null,e.height=Math.min(n.cappedHeight,I-f.top-f.bottom)}else{const t=d>0?f.top+f.bottom:0;a.scalable=!0,a.height=Math.max(E,T-t),e.height=Math.max(E,I-t)}e.ref.credits&&a.heightCurrent&&(e.ref.credits.style.transform=`translateY(${a.heightCurrent}px)`)},destroy:({root:e})=>{e.ref.paster&&e.ref.paster.destroy(),e.ref.hopper&&e.ref.hopper.destroy(),e.element.removeEventListener("touchmove",Js),e.element.removeEventListener("gesturestart",Js)},mixins:{styles:["height"]}}),da=(e={})=>{let t=null;const r=qn(),n=((e,t=[],r=[])=>{const n=a({},e),o=[],i=[],s=(e,t,r)=>{!r||document.hidden?(u[e]&&u[e](t),o.push({type:e,data:t})):i.push({type:e,data:t})},l=(e,...t)=>d[e]?d[e](...t):null,c={getState:()=>a({},n),processActionQueue:()=>{const e=[...o];return o.length=0,e},processDispatchQueue:()=>{const e=[...i];i.length=0,e.forEach((({type:e,data:t})=>{s(e,t)}))},dispatch:s,query:l};let d={};t.forEach((e=>{d=a(a({},e(n)),d)}));let u={};return r.forEach((e=>{u=a(a({},e(s,l,n)),u)})),c})({items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:on(r)},[Jn,ln(r)],[Ho,an(r)]);n.dispatch("SET_OPTIONS",{options:e});const o=()=>{document.hidden||n.dispatch("KICK")};document.addEventListener("visibilitychange",o);let i=null,s=!1,c=!1,d=null,u=null;const p=()=>{s||(s=!0),clearTimeout(i),i=setTimeout((()=>{s=!1,d=null,u=null,c&&(c=!1,n.dispatch("DID_STOP_RESIZE"))}),500)};window.addEventListener("resize",p);const f=ca(n,{id:hn()});let h=!1,E=!1;const m={_read:()=>{s&&(u=window.innerWidth,d||(d=u),c||u===d||(n.dispatch("DID_START_RESIZE"),c=!0)),E&&h&&(h=null===f.element.offsetParent),h||(f._read(),E=f.rect.element.hidden)},_write:e=>{const t=n.processActionQueue().filter((e=>!/^SET_/.test(e.type)));var r;h&&!t.length||(I(t),h=f._write(e,t,c),(r=n.query("GET_ITEMS")).forEach(((e,t)=>{e.released&&En(r,t)})),h&&n.processDispatchQueue())}},_=e=>t=>{const r={type:e};if(!t)return r;if(t.hasOwnProperty("error")&&(r.error=t.error?a({},t.error):null),t.status&&(r.status=a({},t.status)),t.file&&(r.output=t.file),t.source)r.file=t.source;else if(t.item||t.id){const e=t.item?t.item:n.query("GET_ITEM",t.id);r.file=e?Tn(e):null}return t.items&&(r.items=t.items.map(Tn)),/progress/.test(e)&&(r.progress=t.progress),t.hasOwnProperty("origin")&&t.hasOwnProperty("target")&&(r.origin=t.origin,r.target=t.target),r},g={DID_DESTROY:_("destroy"),DID_INIT:_("init"),DID_THROW_MAX_FILES:_("warning"),DID_INIT_ITEM:_("initfile"),DID_START_ITEM_LOAD:_("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:_("addfileprogress"),DID_LOAD_ITEM:_("addfile"),DID_THROW_ITEM_INVALID:[_("error"),_("addfile")],DID_THROW_ITEM_LOAD_ERROR:[_("error"),_("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[_("error"),_("removefile")],DID_PREPARE_OUTPUT:_("preparefile"),DID_START_ITEM_PROCESSING:_("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:_("processfileprogress"),DID_ABORT_ITEM_PROCESSING:_("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:_("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:_("processfiles"),DID_REVERT_ITEM_PROCESSING:_("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[_("error"),_("processfile")],DID_REMOVE_ITEM:_("removefile"),DID_UPDATE_ITEMS:_("updatefiles"),DID_ACTIVATE_ITEM:_("activatefile"),DID_REORDER_ITEMS:_("reorderfiles")},T=e=>{const t=a({pond:w},e);delete t.type,f.element.dispatchEvent(new CustomEvent(`FilePond:${e.type}`,{detail:t,bubbles:!0,cancelable:!0,composed:!0}));const r=[];e.hasOwnProperty("error")&&r.push(e.error),e.hasOwnProperty("file")&&r.push(e.file);const o=["type","error","file"];Object.keys(e).filter((e=>!o.includes(e))).forEach((t=>r.push(e[t]))),w.fire(e.type,...r);const i=n.query(`GET_ON${e.type.toUpperCase()}`);i&&i(...r)},I=e=>{e.length&&e.filter((e=>g[e.type])).forEach((e=>{const t=g[e.type];(Array.isArray(t)?t:[t]).forEach((t=>{"DID_INIT_ITEM"===e.type?T(t(e.data)):setTimeout((()=>{T(t(e.data))}),0)}))}))},y=e=>new Promise(((t,r)=>{n.dispatch("REQUEST_ITEM_PREPARE",{query:e,success:e=>{t(e)},failure:e=>{r(e)}})})),R=(e,t)=>{var r;return"object"!=typeof e||(r=e).file&&r.id||t||(t=e,e=void 0),n.dispatch("REMOVE_ITEM",l(a({},t),{query:e})),null===n.query("GET_ACTIVE_ITEM",e)},A=(...e)=>new Promise(((t,r)=>{const o=[],i={};if(qr(e[0]))o.push.apply(o,e[0]),Object.assign(i,e[1]||{});else{const t=e[e.length-1];"object"!=typeof t||t instanceof Blob||Object.assign(i,e.pop()),o.push(...e)}n.dispatch("ADD_ITEMS",{items:o,index:i.index,interactionMethod:cn,success:t,failure:r})})),O=()=>n.query("GET_ACTIVE_ITEMS"),D=e=>new Promise(((t,r)=>{n.dispatch("REQUEST_ITEM_PROCESSING",{query:e,success:e=>{t(e)},failure:e=>{r(e)}})})),w=l(a(a(a({},mn()),m),((e,t)=>{const r={};return ur(t,(t=>{r[t]={get:()=>e.getState().options[t],set:r=>{e.dispatch(`SET_${sn(t,"_").toUpperCase()}`,{value:r})}}})),r})(n,r)),{setOptions:e=>n.dispatch("SET_OPTIONS",{options:e}),addFile:(e,t={})=>new Promise(((r,n)=>{A([{source:e,options:t}],{index:t.index}).then((e=>r(e&&e[0]))).catch(n)})),addFiles:A,getFile:e=>n.query("GET_ACTIVE_ITEM",e),processFile:D,prepareFile:y,removeFile:R,moveFile:(e,t)=>n.dispatch("MOVE_ITEM",{query:e,index:t}),getFiles:O,processFiles:(...e)=>{const t=Array.isArray(e[0])?e[0]:e;if(!t.length){const e=O().filter((e=>!(e.status===yn&&e.origin===Pn)&&e.status!==An&&e.status!==On&&e.status!==wn));return Promise.all(e.map(D))}return Promise.all(t.map(D))},removeFiles:(...e)=>{const t=Array.isArray(e[0])?e[0]:e;let r;"object"==typeof t[t.length-1]?r=t.pop():Array.isArray(e[0])&&(r=e[1]);const n=O();if(!t.length)return Promise.all(n.map((e=>R(e,r))));return t.map((e=>Dr(e)?n[e]?n[e].id:null:e)).filter((e=>e)).map((e=>R(e,r)))},prepareFiles:(...e)=>{const t=Array.isArray(e[0])?e[0]:e,r=t.length?t:O();return Promise.all(r.map(y))},sort:e=>n.dispatch("SORT",{compare:e}),browse:()=>{var e=f.element.querySelector("input[type=file]");e&&e.click()},destroy:()=>{w.fire("destroy",f.element),n.dispatch("ABORT_ALL"),f._destroy(),window.removeEventListener("resize",p),document.removeEventListener("visibilitychange",o),n.dispatch("DID_DESTROY")},insertBefore:e=>Fr(f.element,e),insertAfter:e=>Ur(f.element,e),appendTo:e=>e.appendChild(f.element),replaceElement:e=>{Fr(f.element,e),e.parentNode.removeChild(e),t=e},restoreElement:()=>{t&&(Ur(t,f.element),f.element.parentNode.removeChild(f.element),t=null)},isAttachedTo:e=>f.element===e||t===e,element:{get:()=>f.element},status:{get:()=>n.query("GET_STATUS")}});return n.dispatch("DID_INIT"),pr(w)},ua=(e={})=>{const t={};ur(qn(),((e,r)=>{t[e]=r[0]}));return da(a(a({},t),e))},pa=(e,t)=>{ur(t,((t,r)=>{ur(e,((n,o)=>{const i=new RegExp(t);if(!i.test(n))return;if(delete e[n],!1===r)return;if(Hr(r))return void(e[r]=o);const s=r.group;var a;en(r)&&!e[s]&&(e[s]={}),e[s][(a=n.replace(i,""),a.charAt(0).toLowerCase()+a.slice(1))]=o})),r.mapping&&pa(e[r.group],r.mapping)}))},fa=(e,t={})=>{const r=[];ur(e.attributes,(t=>{r.push(e.attributes[t])}));const n=r.filter((e=>e.name)).reduce(((t,r)=>{const n=fr(e,r.name);var o;return t[(o=r.name,Zs(o.replace(/^data-/,"")))]=n===r.name||n,t}),{});return pa(n,t),n},ha=(...e)=>e[0]instanceof HTMLElement?((e,t={})=>{const r={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};Fn("SET_ATTRIBUTE_TO_OPTION_MAP",r);const n=a({},t),o=fa("FIELDSET"===e.nodeName?e.querySelector("input[type=file]"):e,r);Object.keys(o).forEach((e=>{en(o[e])?(en(n[e])||(n[e]={}),Object.assign(n[e],o[e])):n[e]=o[e]})),n.files=(t.files||[]).concat(Array.from(e.querySelectorAll("input:not([type=file])")).map((e=>({source:e.value,options:{type:e.dataset.type}}))));const i=ua(n);return e.files&&Array.from(e.files).forEach((e=>{i.addFile(e)})),i.replaceElement(e),i})(...e):ua(...e),Ea=["fire","_read","_write"],ma=e=>{const t={};return _n(e,t,Ea),t},_a=(e,t)=>e.replace(/(?:{([a-zA-Z]+)})/g,((e,r)=>t[r])),ga=e=>{const t=new Blob(["(",e.toString(),")()"],{type:"application/javascript"}),r=URL.createObjectURL(t),n=new Worker(r);return{transfer:(e,t)=>{},post:(e,t,r)=>{const o=hn();n.onmessage=e=>{e.data.id===o&&t(e.data.message)},n.postMessage({id:o,message:e},r)},terminate:()=>{n.terminate(),URL.revokeObjectURL(r)}}},Ta=e=>new Promise(((t,r)=>{const n=new Image;n.onload=()=>{t(n)},n.onerror=e=>{r(e)},n.src=e})),Ia=(e,t)=>{const r=e.slice(0,e.size,e.type);return r.lastModifiedDate=e.lastModifiedDate,r.name=t,r},ya=e=>Ia(e,e.name),Ra=[],Aa=e=>{if(Ra.includes(e))return;Ra.push(e);const t=e({addFilter:Un,utils:{Type:Nn,forin:ur,isString:Hr,isFile:No,toNaturalFileSize:Ko,replaceInString:_a,getExtensionFromFilename:no,getFilenameWithoutExtension:Co,guesstimateMimeType:ps,getFileFromBlob:so,getFilenameFromURL:ro,createRoute:Gr,createWorker:ga,createView:xr,createItemAPI:Tn,loadImage:Ta,copyFile:ya,renameFile:Ia,createBlob:ao,applyFilterChain:Gn,text:zo,getNumericAspectRatioFromString:Vn},views:{fileActionButton:Zo}});var r;r=t.options,Object.assign(Bn,r)},Oa=(()=>{const e=Ir()&&!("[object OperaMini]"===Object.prototype.toString.call(window.operamini))&&"visibilityState"in document&&"Promise"in window&&"slice"in Blob.prototype&&"URL"in window&&"createObjectURL"in window.URL&&"performance"in window&&("supports"in(window.CSS||{})||/MSIE|Trident/.test(window.navigator.userAgent));return()=>e})(),Da={apps:[]},wa=()=>{};let va={},Sa=wa,Ma=wa,ba=wa,Pa=wa,La=wa,Ca=wa,Na=wa;if(Oa()){((e,t,r=60)=>{const n="__framePainter";if(window[n])return window[n].readers.push(e),void window[n].writers.push(t);window[n]={readers:[e],writers:[t]};const o=window[n],i=1e3/r;let s=null,a=null,l=null,c=null;const d=()=>{document.hidden?(l=()=>window.setTimeout((()=>u(performance.now())),i),c=()=>window.clearTimeout(a)):(l=()=>window.requestAnimationFrame(u),c=()=>window.cancelAnimationFrame(a))};document.addEventListener("visibilitychange",(()=>{c&&c(),d(),u(performance.now())}));const u=e=>{a=l(u),s||(s=e);const t=e-s;t<=i||(s=e-t%i,o.readers.forEach((e=>e())),o.writers.forEach((t=>t(e))))};d(),u(performance.now())})((()=>{Da.apps.forEach((e=>e._read()))}),(e=>{Da.apps.forEach((t=>t._write(e)))}));const e=()=>{document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:Oa,create:Sa,destroy:Ma,parse:ba,find:Pa,registerPlugin:La,setOptions:Na}})),document.removeEventListener("DOMContentLoaded",e)};"loading"!==document.readyState?setTimeout((()=>e()),0):document.addEventListener("DOMContentLoaded",e);const t=()=>ur(qn(),((e,t)=>{va[e]=t[1]}));va={},t(),Sa=(...e)=>{const t=ha(...e);return t.on("destroy",Ma),Da.apps.push(t),ma(t)},Ma=e=>{const t=Da.apps.findIndex((t=>t.isAttachedTo(e)));if(t>=0){return Da.apps.splice(t,1)[0].restoreElement(),!0}return!1},ba=e=>Array.from(e.querySelectorAll(".filepond")).filter((e=>!Da.apps.find((t=>t.isAttachedTo(e))))).map((e=>Sa(e))),Pa=e=>{const t=Da.apps.find((t=>t.isAttachedTo(e)));return t?ma(t):null},La=(...e)=>{e.forEach(Aa),t()},Ca=()=>{const e={};return ur(qn(),((t,r)=>{e[t]=r[0]})),e},Na=e=>(en(e)&&(Da.apps.forEach((t=>{t.setOptions(e)})),(e=>{ur(e,((e,t)=>{Bn[e]&&(Bn[e][0]=nn(t,Bn[e][0],Bn[e][1]))}))})(e)),Ca())}function xa(e){let t,r;return{c(){t=B("div"),r=B("input"),this.h()},l(e){t=Q(e,"DIV",{class:!0});var n=X(t);r=Q(n,"INPUT",{type:!0,id:!0,name:!0,class:!0,accept:!0,capture:!0}),n.forEach(U),this.h()},h(){W(r,"type","file"),W(r,"id",e[1]),W(r,"name",e[2]),W(r,"class",e[0]),W(r,"accept",e[6]),r.multiple=e[3],r.required=e[4],W(r,"capture",e[5]),W(t,"class","filepond--wrapper")},m(n,o){F(n,t,o),G(t,r),e[24](r)},p(e,[t]){2&t&&W(r,"id",e[1]),4&t&&W(r,"name",e[2]),1&t&&W(r,"class",e[0]),64&t&&W(r,"accept",e[6]),8&t&&(r.multiple=e[3]),16&t&&(r.required=e[4]),32&t&&W(r,"capture",e[5])},i:c,o:c,d(r){r&&U(t),e[24](null)}}}function Ga(e,t,r){const n=La,o=Oa();let i,s,{class:l}=t,{id:c}=t,{name:d}=t,{allowMultiple:p}=t,{required:f}=t,{captureMethod:h}=t,{acceptedFileTypes:E}=t;const m=()=>{};let{addFile:_=m}=t,{addFiles:g=m}=t,{browse:T=m}=t,{fireSync:I=m}=t,{getFile:y=m}=t,{getFiles:R=m}=t,{moveFile:A=m}=t,{prepareFile:O=m}=t,{prepareFiles:w=m}=t,{processFile:v=m}=t,{processFiles:S=m}=t,{removeFile:M=m}=t,{removeFiles:b=m}=t,{sort:P=m}=t;var L;return ue((()=>{o&&(s?s.setOptions(t):(s=Sa(i,a({},t)),r(8,_=s.addFile),r(9,g=s.addFiles),r(19,M=s.removeFile),r(20,b=s.removeFiles),r(10,T=s.browse),r(11,I=s.fireSync),r(12,y=s.getFile),r(13,R=s.getFiles),r(14,A=s.moveFile),r(15,O=s.prepareFile),r(16,w=s.prepareFiles),r(17,v=s.processFile),r(18,S=s.processFiles),r(19,M=s.removeFile),r(20,b=s.removeFiles),r(21,P=s.sort)))})),L=()=>{s&&(s.destroy(),s=void 0)},ce().$$.on_destroy.push(L),e.$$set=e=>{r(27,t=u(u({},t),D(e))),"class"in e&&r(0,l=e.class),"id"in e&&r(1,c=e.id),"name"in e&&r(2,d=e.name),"allowMultiple"in e&&r(3,p=e.allowMultiple),"required"in e&&r(4,f=e.required),"captureMethod"in e&&r(5,h=e.captureMethod),"acceptedFileTypes"in e&&r(6,E=e.acceptedFileTypes),"addFile"in e&&r(8,_=e.addFile),"addFiles"in e&&r(9,g=e.addFiles),"browse"in e&&r(10,T=e.browse),"fireSync"in e&&r(11,I=e.fireSync),"getFile"in e&&r(12,y=e.getFile),"getFiles"in e&&r(13,R=e.getFiles),"moveFile"in e&&r(14,A=e.moveFile),"prepareFile"in e&&r(15,O=e.prepareFile),"prepareFiles"in e&&r(16,w=e.prepareFiles),"processFile"in e&&r(17,v=e.processFile),"processFiles"in e&&r(18,S=e.processFiles),"removeFile"in e&&r(19,M=e.removeFile),"removeFiles"in e&&r(20,b=e.removeFiles),"sort"in e&&r(21,P=e.sort)},t=D(t),[l,c,d,p,f,h,E,i,_,g,T,I,y,R,A,O,w,v,S,M,b,P,n,o,function(e){he[e?"unshift":"push"]((()=>{i=e,r(7,i)}))}]}class Fa extends Ve{constructor(e){super(),$e(this,e,Ga,xa,m,{registerPlugin:22,isSupported:23,class:0,id:1,name:2,allowMultiple:3,required:4,captureMethod:5,acceptedFileTypes:6,addFile:8,addFiles:9,browse:10,fireSync:11,getFile:12,getFiles:13,moveFile:14,prepareFile:15,prepareFiles:16,processFile:17,processFiles:18,removeFile:19,removeFiles:20,sort:21})}get registerPlugin(){return this.$$.ctx[22]}get isSupported(){return this.$$.ctx[23]}get class(){return this.$$.ctx[0]}set class(e){this.$$set({class:e}),Re()}get id(){return this.$$.ctx[1]}set id(e){this.$$set({id:e}),Re()}get name(){return this.$$.ctx[2]}set name(e){this.$$set({name:e}),Re()}get allowMultiple(){return this.$$.ctx[3]}set allowMultiple(e){this.$$set({allowMultiple:e}),Re()}get required(){return this.$$.ctx[4]}set required(e){this.$$set({required:e}),Re()}get captureMethod(){return this.$$.ctx[5]}set captureMethod(e){this.$$set({captureMethod:e}),Re()}get acceptedFileTypes(){return this.$$.ctx[6]}set acceptedFileTypes(e){this.$$set({acceptedFileTypes:e}),Re()}get addFile(){return this.$$.ctx[8]}set addFile(e){this.$$set({addFile:e}),Re()}get addFiles(){return this.$$.ctx[9]}set addFiles(e){this.$$set({addFiles:e}),Re()}get browse(){return this.$$.ctx[10]}set browse(e){this.$$set({browse:e}),Re()}get fireSync(){return this.$$.ctx[11]}set fireSync(e){this.$$set({fireSync:e}),Re()}get getFile(){return this.$$.ctx[12]}set getFile(e){this.$$set({getFile:e}),Re()}get getFiles(){return this.$$.ctx[13]}set getFiles(e){this.$$set({getFiles:e}),Re()}get moveFile(){return this.$$.ctx[14]}set moveFile(e){this.$$set({moveFile:e}),Re()}get prepareFile(){return this.$$.ctx[15]}set prepareFile(e){this.$$set({prepareFile:e}),Re()}get prepareFiles(){return this.$$.ctx[16]}set prepareFiles(e){this.$$set({prepareFiles:e}),Re()}get processFile(){return this.$$.ctx[17]}set processFile(e){this.$$set({processFile:e}),Re()}get processFiles(){return this.$$.ctx[18]}set processFiles(e){this.$$set({processFiles:e}),Re()}get removeFile(){return this.$$.ctx[19]}set removeFile(e){this.$$set({removeFile:e}),Re()}get removeFiles(){return this.$$.ctx[20]}set removeFiles(e){this.$$set({removeFiles:e}),Re()}get sort(){return this.$$.ctx[21]}set sort(e){this.$$set({sort:e}),Re()}}
/*!
 * FilePondPluginImageExifOrientation 1.0.11
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const Ua=65496,qa=65505,Ba=1165519206,$a=18761,Va=274,ka=65280,Ya=(e,t,r=!1)=>e.getUint16(t,r),Ha=(e,t,r=!1)=>e.getUint32(t,r);let Wa;const za="undefined"!=typeof window&&void 0!==window.document?new Image:{};za.onload=()=>Wa=za.naturalWidth>za.naturalHeight,za.src="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=";const Xa=({addFilter:e,utils:t})=>{const{Type:r,isFile:n}=t;return e("DID_LOAD_ITEM",((e,{query:t})=>new Promise(((r,o)=>{const i=e.file;if(!(n(i)&&(e=>/^image\/jpeg/.test(e.type))(i)&&t("GET_ALLOW_IMAGE_EXIF_ORIENTATION")&&Wa))return r(e);(e=>new Promise(((t,r)=>{const n=new FileReader;n.onload=function(e){const r=new DataView(e.target.result);if(Ya(r,0)!==Ua)return void t(-1);const n=r.byteLength;let o=2;for(;o<n;){const e=Ya(r,o);if(o+=2,e===qa){if(Ha(r,o+=2)!==Ba)break;const e=Ya(r,o+=6)===$a;o+=Ha(r,o+4,e);const n=Ya(r,o,e);o+=2;for(let i=0;i<n;i++)if(Ya(r,o+12*i,e)===Va)return void t(Ya(r,o+12*i+8,e))}else{if((e&ka)!==ka)break;o+=Ya(r,o)}}t(-1)},n.readAsArrayBuffer(e.slice(0,65536))})))(i).then((t=>{e.setMetadata("exif",{orientation:t}),r(e)}))})))),{options:{allowImageExifOrientation:[!0,r.BOOLEAN]}}};"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Xa}))
/*!
 * FilePondPluginImagePreview 4.6.7
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */;const ja=(e,t)=>Ka(e.x*t,e.y*t),Qa=(e,t)=>Ka(e.x+t.x,e.y+t.y),Za=(e,t,r)=>{const n=Math.cos(t),o=Math.sin(t),i=Ka(e.x-r.x,e.y-r.y);return Ka(r.x+n*i.x-o*i.y,r.y+o*i.x+n*i.y)},Ka=(e=0,t=0)=>({x:e,y:t}),Ja=(e,t,r=1,n)=>"string"==typeof e?parseFloat(e)*r:"number"==typeof e?e*(n?t[n]:Math.min(t.width,t.height)):void 0,el=e=>null!=e,tl=(e,t)=>Object.keys(t).forEach((r=>e.setAttribute(r,t[r]))),rl=(e,t)=>{const r=document.createElementNS("http://www.w3.org/2000/svg",e);return t&&tl(r,t),r},nl={contain:"xMidYMid meet",cover:"xMidYMid slice"},ol={left:"start",center:"middle",right:"end"},il=e=>t=>rl(e,{id:t.id}),sl={image:e=>{const t=rl("image",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return t.onload=()=>{t.setAttribute("opacity",e.opacity||1)},t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.src),t},rect:il("rect"),ellipse:il("ellipse"),text:il("text"),path:il("path"),line:e=>{const t=rl("g",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round"}),r=rl("line");t.appendChild(r);const n=rl("path");t.appendChild(n);const o=rl("path");return t.appendChild(o),t}},al={rect:e=>tl(e,a(a({},e.rect),e.styles)),ellipse:e=>{const t=e.rect.x+.5*e.rect.width,r=e.rect.y+.5*e.rect.height,n=.5*e.rect.width,o=.5*e.rect.height;return tl(e,a({cx:t,cy:r,rx:n,ry:o},e.styles))},image:(e,t)=>{tl(e,l(a(a({},e.rect),e.styles),{preserveAspectRatio:nl[t.fit]||"none"}))},text:(e,t,r,n)=>{const o=Ja(t.fontSize,r,n),i=t.fontFamily||"sans-serif",s=t.fontWeight||"normal",c=ol[t.textAlign]||"start";tl(e,l(a(a({},e.rect),e.styles),{"stroke-width":0,"font-weight":s,"font-size":o,"font-family":i,"text-anchor":c})),e.text!==t.text&&(e.text=t.text,e.textContent=t.text.length?t.text:" ")},path:(e,t,r,n)=>{var o;tl(e,l(a({},e.styles),{fill:"none",d:(o=t.points.map((e=>({x:Ja(e.x,r,n,"width"),y:Ja(e.y,r,n,"height")}))),o.map(((e,t)=>`${0===t?"M":"L"} ${e.x} ${e.y}`)).join(" "))}))},line:(e,t,r,n)=>{tl(e,l(a(a({},e.rect),e.styles),{fill:"none"}));const o=e.childNodes[0],i=e.childNodes[1],s=e.childNodes[2],c=e.rect,d={x:e.rect.x+e.rect.width,y:e.rect.y+e.rect.height};if(tl(o,{x1:c.x,y1:c.y,x2:d.x,y2:d.y}),!t.lineDecoration)return;i.style.display="none",s.style.display="none";const u=(e=>{const t=Math.sqrt(e.x*e.x+e.y*e.y);return 0===t?{x:0,y:0}:Ka(e.x/t,e.y/t)})({x:d.x-c.x,y:d.y-c.y}),p=Ja(.05,r,n);if(-1!==t.lineDecoration.indexOf("arrow-begin")){const e=ja(u,p),t=Qa(c,e),r=Za(c,2,t),n=Za(c,-2,t);tl(i,{style:"display:block;",d:`M${r.x},${r.y} L${c.x},${c.y} L${n.x},${n.y}`})}if(-1!==t.lineDecoration.indexOf("arrow-end")){const e=ja(u,-p),t=Qa(d,e),r=Za(d,2,t),n=Za(d,-2,t);tl(s,{style:"display:block;",d:`M${r.x},${r.y} L${d.x},${d.y} L${n.x},${n.y}`})}}},ll=(e,t,r,n,o)=>{"path"!==t&&(e.rect=((e,t,r=1)=>{let n=Ja(e.x,t,r,"width")||Ja(e.left,t,r,"width"),o=Ja(e.y,t,r,"height")||Ja(e.top,t,r,"height"),i=Ja(e.width,t,r,"width"),s=Ja(e.height,t,r,"height"),a=Ja(e.right,t,r,"width"),l=Ja(e.bottom,t,r,"height");return el(o)||(o=el(s)&&el(l)?t.height-s-l:l),el(n)||(n=el(i)&&el(a)?t.width-i-a:a),el(i)||(i=el(n)&&el(a)?t.width-n-a:0),el(s)||(s=el(o)&&el(l)?t.height-o-l:0),{x:n||0,y:o||0,width:i||0,height:s||0}})(r,n,o)),e.styles=((e,t,r)=>{const n=e.borderStyle||e.lineStyle||"solid",o=e.backgroundColor||e.fontColor||"transparent",i=e.borderColor||e.lineColor||"transparent",s=Ja(e.borderWidth||e.lineWidth,t,r);return{"stroke-linecap":e.lineCap||"round","stroke-linejoin":e.lineJoin||"round","stroke-width":s||0,"stroke-dasharray":"string"==typeof n?"":n.map((e=>Ja(e,t,r))).join(","),stroke:i,fill:o,opacity:e.opacity||1}})(r,n,o),al[t](e,r,n,o)},cl=["x","y","left","top","right","bottom","width","height"],dl=e=>{const[t,r]=e,n=r.points?{}:cl.reduce(((e,t)=>{var n;return e[t]="string"==typeof(n=r[t])&&/%/.test(n)?parseFloat(n)/100:n,e}),{});return[t,a(a({zIndex:0},r),n)]},ul=(e,t)=>e[1].zIndex>t[1].zIndex?1:e[1].zIndex<t[1].zIndex?-1:0,pl=e=>e.utils.createView({name:"image-preview-markup",tag:"svg",ignoreRect:!0,mixins:{apis:["width","height","crop","markup","resize","dirty"]},write:({root:e,props:t})=>{if(!t.dirty)return;const{crop:r,resize:n,markup:o}=t,i=t.width,s=t.height;let a=r.width,l=r.height;if(n){const{size:e}=n;let t=e&&e.width,r=e&&e.height;const o=n.mode,i=n.upscale;t&&!r&&(r=t),r&&!t&&(t=r);const s=a<t&&l<r;if(!s||s&&i){let e=t/a,n=r/l;if("force"===o)a=t,l=r;else{let t;"cover"===o?t=Math.max(e,n):"contain"===o&&(t=Math.min(e,n)),a*=t,l*=t}}}const c={width:i,height:s};e.element.setAttribute("width",c.width),e.element.setAttribute("height",c.height);const d=Math.min(i/a,s/l);e.element.innerHTML="";const u=e.query("GET_IMAGE_PREVIEW_MARKUP_FILTER");o.filter(u).map(dl).sort(ul).forEach((t=>{const[r,n]=t,o=((e,t)=>sl[e](t))(r,n);ll(o,r,n,c,d),e.element.appendChild(o)}))}}),fl=(e,t)=>({x:e,y:t}),hl=(e,t)=>fl(e.x-t.x,e.y-t.y),El=(e,t)=>Math.sqrt(((e,t)=>((e,t)=>e.x*t.x+e.y*t.y)(hl(e,t),hl(e,t)))(e,t)),ml=(e,t)=>{const r=e,n=t,o=1.5707963267948966-t,i=Math.sin(1.5707963267948966),s=Math.sin(n),a=Math.sin(o),l=Math.cos(o),c=r/i;return fl(l*(c*s),l*(c*a))},_l=(e,t,r,n)=>{const o=n.x>.5?1-n.x:n.x,i=n.y>.5?1-n.y:n.y,s=2*o*e.width,a=2*i*e.height,l=((e,t)=>{const r=e.width,n=e.height,o=ml(r,t),i=ml(n,t),s=fl(e.x+Math.abs(o.x),e.y-Math.abs(o.y)),a=fl(e.x+e.width+Math.abs(i.y),e.y+Math.abs(i.x)),l=fl(e.x-Math.abs(i.y),e.y+e.height-Math.abs(i.x));return{width:El(s,a),height:El(s,l)}})(t,r);return Math.max(l.width/s,l.height/a)},gl=(e,t)=>{let r=e.width,n=r*t;n>e.height&&(n=e.height,r=n/t);return{x:.5*(e.width-r),y:.5*(e.height-n),width:r,height:n}},Tl=(e,t={})=>{let{zoom:r,rotation:n,center:o,aspectRatio:i}=t;i||(i=e.height/e.width);const s=((e,t,r=1)=>{const n=e.height/e.width;let o=t,i=1,s=n;s>o&&(s=o,i=s/n);const a=Math.max(1/i,o/s),l=e.width/(r*a*i);return{width:l,height:l*t}})(e,i,r),a={x:.5*s.width,y:.5*s.height},l={x:0,y:0,width:s.width,height:s.height,center:a},c=void 0===t.scaleToFit||t.scaleToFit,d=r*_l(e,gl(l,i),n,c?o:{x:.5,y:.5});return{widthFloat:s.width/d,heightFloat:s.height/d,width:Math.round(s.width/d),height:Math.round(s.height/d)}},Il={type:"spring",stiffness:.5,damping:.45,mass:10},yl=e=>e.utils.createView({name:"image-clip",tag:"div",ignoreRect:!0,mixins:{apis:["crop","markup","resize","width","height","dirty","background"],styles:["width","height","opacity"],animations:{opacity:{type:"tween",duration:250}}},didWriteView:function({root:e,props:t}){t.background&&(e.element.style.backgroundColor=t.background)},create:({root:t,props:r})=>{t.ref.image=t.appendChildView(t.createChildView((e=>e.utils.createView({name:"image-canvas-wrapper",tag:"div",ignoreRect:!0,mixins:{apis:["crop","width","height"],styles:["originX","originY","translateX","translateY","scaleX","scaleY","rotateZ"],animations:{originX:Il,originY:Il,scaleX:Il,scaleY:Il,translateX:Il,translateY:Il,rotateZ:Il}},create:({root:t,props:r})=>{r.width=r.image.width,r.height=r.image.height,t.ref.bitmap=t.appendChildView(t.createChildView((e=>e.utils.createView({name:"image-bitmap",ignoreRect:!0,mixins:{styles:["scaleX","scaleY"]},create:({root:e,props:t})=>{e.appendChild(t.image)}}))(e),{image:r.image}))},write:({root:e,props:t})=>{const{flip:r}=t.crop,{bitmap:n}=e.ref;n.scaleX=r.horizontal?-1:1,n.scaleY=r.vertical?-1:1}}))(e),Object.assign({},r))),t.ref.createMarkup=()=>{t.ref.markup||(t.ref.markup=t.appendChildView(t.createChildView(pl(e),Object.assign({},r))))},t.ref.destroyMarkup=()=>{t.ref.markup&&(t.removeChildView(t.ref.markup),t.ref.markup=null)};const n=t.query("GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR");null!==n&&(t.element.dataset.transparencyIndicator="grid"===n?n:"color")},write:({root:e,props:t,shouldOptimize:r})=>{const{crop:n,markup:o,resize:i,dirty:s,width:a,height:l}=t;e.ref.image.crop=n;const c={x:0,y:0,width:a,height:l,center:{x:.5*a,y:.5*l}},d={width:e.ref.image.width,height:e.ref.image.height},u={x:n.center.x*d.width,y:n.center.y*d.height},p={x:c.center.x-d.width*n.center.x,y:c.center.y-d.height*n.center.y},f=2*Math.PI+n.rotation%(2*Math.PI),h=n.aspectRatio||d.height/d.width,E=void 0===n.scaleToFit||n.scaleToFit,m=_l(d,gl(c,h),f,E?n.center:{x:.5,y:.5}),_=n.zoom*m;o&&o.length?(e.ref.createMarkup(),e.ref.markup.width=a,e.ref.markup.height=l,e.ref.markup.resize=i,e.ref.markup.dirty=s,e.ref.markup.markup=o,e.ref.markup.crop=Tl(d,n)):e.ref.markup&&e.ref.destroyMarkup();const g=e.ref.image;if(r)return g.originX=null,g.originY=null,g.translateX=null,g.translateY=null,g.rotateZ=null,g.scaleX=null,void(g.scaleY=null);g.originX=u.x,g.originY=u.y,g.translateX=p.x,g.translateY=p.y,g.rotateZ=f,g.scaleX=_,g.scaleY=_}});let Rl='<svg width="500" height="200" viewBox="0 0 500 200" preserveAspectRatio="none">\n    <defs>\n        <radialGradient id="gradient-__UID__" cx=".5" cy="1.25" r="1.15">\n            <stop offset=\'50%\' stop-color=\'#000000\'/>\n            <stop offset=\'56%\' stop-color=\'#0a0a0a\'/>\n            <stop offset=\'63%\' stop-color=\'#262626\'/>\n            <stop offset=\'69%\' stop-color=\'#4f4f4f\'/>\n            <stop offset=\'75%\' stop-color=\'#808080\'/>\n            <stop offset=\'81%\' stop-color=\'#b1b1b1\'/>\n            <stop offset=\'88%\' stop-color=\'#dadada\'/>\n            <stop offset=\'94%\' stop-color=\'#f6f6f6\'/>\n            <stop offset=\'100%\' stop-color=\'#ffffff\'/>\n        </radialGradient>\n        <mask id="mask-__UID__">\n            <rect x="0" y="0" width="500" height="200" fill="url(#gradient-__UID__)"></rect>\n        </mask>\n    </defs>\n    <rect x="0" width="500" height="200" fill="currentColor" mask="url(#mask-__UID__)"></rect>\n</svg>',Al=0;const Ol=function(){self.onmessage=e=>{createImageBitmap(e.data.message.file).then((t=>{self.postMessage({id:e.data.id,message:t},[t])}))}},Dl=function(){self.onmessage=e=>{const t=e.data.message.imageData,r=e.data.message.colorMatrix,n=t.data,o=n.length,i=r[0],s=r[1],a=r[2],l=r[3],c=r[4],d=r[5],u=r[6],p=r[7],f=r[8],h=r[9],E=r[10],m=r[11],_=r[12],g=r[13],T=r[14],I=r[15],y=r[16],R=r[17],A=r[18],O=r[19];let D=0,w=0,v=0,S=0,M=0;for(;D<o;D+=4)w=n[D]/255,v=n[D+1]/255,S=n[D+2]/255,M=n[D+3]/255,n[D]=Math.max(0,Math.min(255*(w*i+v*s+S*a+M*l+c),255)),n[D+1]=Math.max(0,Math.min(255*(w*d+v*u+S*p+M*f+h),255)),n[D+2]=Math.max(0,Math.min(255*(w*E+v*m+S*_+M*g+T),255)),n[D+3]=Math.max(0,Math.min(255*(w*I+v*y+S*R+M*A+O),255));self.postMessage({id:e.data.id,message:t},[t.data.buffer])}},wl={1:()=>[1,0,0,1,0,0],2:e=>[-1,0,0,1,e,0],3:(e,t)=>[-1,0,0,-1,e,t],4:(e,t)=>[1,0,0,-1,0,t],5:()=>[0,1,1,0,0,0],6:(e,t)=>[0,1,-1,0,t,0],7:(e,t)=>[0,-1,-1,0,t,e],8:e=>[0,-1,1,0,0,e]},vl=(e,t,r,n)=>{t=Math.round(t),r=Math.round(r);const o=document.createElement("canvas");o.width=t,o.height=r;const i=o.getContext("2d");return n>=5&&n<=8&&([t,r]=[r,t]),((e,t,r,n)=>{-1!==n&&e.transform.apply(e,wl[n](t,r))})(i,t,r,n),i.drawImage(e,0,0,t,r),o},Sl=e=>/^image/.test(e.type)&&!/svg/.test(e.type),Ml=(e,t)=>Math.floor(Math.sqrt(e/(t/4))),bl=(e,t)=>{(t=t||document.createElement("canvas")).width=e.width,t.height=e.height;return t.getContext("2d").drawImage(e,0,0),t},Pl=e=>{const t=e.utils.createView({name:"image-preview-overlay",tag:"div",ignoreRect:!0,create:({root:e,props:t})=>{if(document.querySelector("base")){const e=window.location.href.replace(window.location.hash,"");Rl=Rl.replace(/url\(\#/g,"url("+e+"#")}Al++,e.element.classList.add(`filepond--image-preview-overlay-${t.status}`),e.element.innerHTML=Rl.replace(/__UID__/g,Al)},mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:25}}}});const r=(e=>e.utils.createView({name:"image-preview",tag:"div",ignoreRect:!0,mixins:{apis:["image","crop","markup","resize","dirty","background"],styles:["translateY","scaleX","scaleY","opacity"],animations:{scaleX:Il,scaleY:Il,translateY:Il,opacity:{type:"tween",duration:400}}},create:({root:t,props:r})=>{t.ref.clip=t.appendChildView(t.createChildView(yl(e),{id:r.id,image:r.image,crop:r.crop,markup:r.markup,resize:r.resize,dirty:r.dirty,background:r.background}))},write:({root:e,props:t,shouldOptimize:r})=>{const{clip:n}=e.ref,{image:o,crop:i,markup:s,resize:a,dirty:l}=t;if(n.crop=i,n.markup=s,n.resize=a,n.dirty=l,n.opacity=r?0:1,r||e.rect.element.hidden)return;const c=o.height/o.width;let d=i.aspectRatio||c;const u=e.rect.inner.width,p=e.rect.inner.height;let f=e.query("GET_IMAGE_PREVIEW_HEIGHT");const h=e.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),E=e.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),m=e.query("GET_PANEL_ASPECT_RATIO"),_=e.query("GET_ALLOW_MULTIPLE");m&&!_&&(f=u*m,d=m);let g=null!==f?f:Math.max(h,Math.min(u*d,E)),T=g/d;T>u&&(T=u,g=T*d),g>p&&(g=p,T=p/d),n.width=T,n.height=g}}))(e),{createWorker:n}=e.utils,o=(e,t,r)=>new Promise((o=>{e.ref.imageData||(e.ref.imageData=r.getContext("2d").getImageData(0,0,r.width,r.height));const i=(e=>{let t;try{t=new ImageData(e.width,e.height)}catch(r){t=document.createElement("canvas").getContext("2d").createImageData(e.width,e.height)}return t.data.set(new Uint8ClampedArray(e.data)),t})(e.ref.imageData);if(!t||20!==t.length)return r.getContext("2d").putImageData(i,0,0),o();const s=n(Dl);s.post({imageData:i,colorMatrix:t},(e=>{r.getContext("2d").putImageData(e,0,0),s.terminate(),o()}),[i.data.buffer])})),i=({root:e,props:t,image:n})=>{const o=t.id,i=e.query("GET_ITEM",{id:o});if(!i)return;const s=i.getMetadata("crop")||{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},zoom:1,rotation:0,aspectRatio:null},a=e.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR");let l,c,d=!1;e.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(l=i.getMetadata("markup")||[],c=i.getMetadata("resize"),d=!0);const u=e.appendChildView(e.createChildView(r,{id:o,image:n,crop:s,resize:c,markup:l,dirty:d,background:a,opacity:0,scaleX:1.15,scaleY:1.15,translateY:15}),e.childViews.length);e.ref.images.push(u),u.opacity=1,u.scaleX=1,u.scaleY=1,u.translateY=0,setTimeout((()=>{e.dispatch("DID_IMAGE_PREVIEW_SHOW",{id:o})}),250)},s=({root:e})=>{e.ref.overlayShadow.opacity=1,e.ref.overlayError.opacity=0,e.ref.overlaySuccess.opacity=0},a=({root:e})=>{e.ref.overlayShadow.opacity=.25,e.ref.overlayError.opacity=1};return e.utils.createView({name:"image-preview-wrapper",create:({root:e})=>{e.ref.images=[],e.ref.imageData=null,e.ref.imageViewBin=[],e.ref.overlayShadow=e.appendChildView(e.createChildView(t,{opacity:0,status:"idle"})),e.ref.overlaySuccess=e.appendChildView(e.createChildView(t,{opacity:0,status:"success"})),e.ref.overlayError=e.appendChildView(e.createChildView(t,{opacity:0,status:"failure"}))},styles:["height"],apis:["height"],destroy:({root:e})=>{e.ref.images.forEach((e=>{e.image.width=1,e.image.height=1}))},didWriteView:({root:e})=>{e.ref.images.forEach((e=>{e.dirty=!1}))},write:e.utils.createRoute({DID_IMAGE_PREVIEW_DRAW:({root:e})=>{const t=e.ref.images[e.ref.images.length-1];t.translateY=0,t.scaleX=1,t.scaleY=1,t.opacity=1},DID_IMAGE_PREVIEW_CONTAINER_CREATE:({root:e,props:t})=>{const{id:r}=t,n=e.query("GET_ITEM",r);if(!n)return;((e,t)=>{let r=new Image;r.onload=()=>{const e=r.naturalWidth,n=r.naturalHeight;r=null,t(e,n)},r.src=e})(URL.createObjectURL(n.file),((t,n)=>{e.dispatch("DID_IMAGE_PREVIEW_CALCULATE_SIZE",{id:r,width:t,height:n})}))},DID_FINISH_CALCULATE_PREVIEWSIZE:({root:e,props:t})=>{const{id:r}=t,s=e.query("GET_ITEM",r);if(!s)return;const a=URL.createObjectURL(s.file),l=()=>{var e;(e=a,new Promise(((t,r)=>{const n=new Image;n.crossOrigin="Anonymous",n.onload=()=>{t(n)},n.onerror=e=>{r(e)},n.src=e}))).then(c)},c=r=>{URL.revokeObjectURL(a);const n=(s.getMetadata("exif")||{}).orientation||-1;let{width:l,height:c}=r;if(!l||!c)return;n>=5&&n<=8&&([l,c]=[c,l]);const d=Math.max(1,.75*window.devicePixelRatio),u=e.query("GET_IMAGE_PREVIEW_ZOOM_FACTOR")*d,p=c/l,f=e.rect.element.width,h=e.rect.element.height;let E=f,m=E*p;p>1?(E=Math.min(l,f*u),m=E*p):(m=Math.min(c,h*u),E=m/p);const _=vl(r,E,m,n),g=()=>{const n=e.query("GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR")?(e=>{const t=Math.min(10/e.width,10/e.height),r=document.createElement("canvas"),n=r.getContext("2d"),o=r.width=Math.ceil(e.width*t),i=r.height=Math.ceil(e.height*t);n.drawImage(e,0,0,o,i);let s=null;try{s=n.getImageData(0,0,o,i).data}catch(p){return null}const a=s.length;let l=0,c=0,d=0,u=0;for(;u<a;u+=4)l+=s[u]*s[u],c+=s[u+1]*s[u+1],d+=s[u+2]*s[u+2];return l=Ml(l,a),c=Ml(c,a),d=Ml(d,a),{r:l,g:c,b:d}})(data):null;s.setMetadata("color",n,!0),"close"in r&&r.close(),e.ref.overlayShadow.opacity=1,i({root:e,props:t,image:_})},T=s.getMetadata("filter");T?o(e,T,_).then(g):g()};if((e=>{const t=window.navigator.userAgent.match(/Firefox\/([0-9]+)\./);return!((t?parseInt(t[1]):null)<=58)&&"createImageBitmap"in window&&Sl(e)})(s.file)){const e=n(Ol);e.post({file:s.file},(t=>{e.terminate(),t?c(t):l()}))}else l()},DID_UPDATE_ITEM_METADATA:({root:e,props:t,action:r})=>{if(!/crop|filter|markup|resize/.test(r.change.key))return;if(!e.ref.images.length)return;const n=e.query("GET_ITEM",{id:t.id});if(n)if(/filter/.test(r.change.key)){const t=e.ref.images[e.ref.images.length-1];o(e,r.change.value,t.image)}else if(/crop|markup|resize/.test(r.change.key)){const r=n.getMetadata("crop"),o=e.ref.images[e.ref.images.length-1];if(Math.abs(r.aspectRatio-o.crop.aspectRatio)>1e-5){const r=(({root:e})=>{const t=e.ref.images.shift();return t.opacity=0,t.translateY=-15,e.ref.imageViewBin.push(t),t})({root:e});i({root:e,props:t,image:bl(r.image)})}else(({root:e,props:t})=>{const r=e.query("GET_ITEM",{id:t.id});if(!r)return;const n=e.ref.images[e.ref.images.length-1];n.crop=r.getMetadata("crop"),n.background=e.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR"),e.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(n.dirty=!0,n.resize=r.getMetadata("resize"),n.markup=r.getMetadata("markup"))})({root:e,props:t})}},DID_THROW_ITEM_LOAD_ERROR:a,DID_THROW_ITEM_PROCESSING_ERROR:a,DID_THROW_ITEM_INVALID:a,DID_COMPLETE_ITEM_PROCESSING:({root:e})=>{e.ref.overlayShadow.opacity=.25,e.ref.overlaySuccess.opacity=1},DID_START_ITEM_PROCESSING:s,DID_REVERT_ITEM_PROCESSING:s},(({root:e})=>{const t=e.ref.imageViewBin.filter((e=>0===e.opacity));e.ref.imageViewBin=e.ref.imageViewBin.filter((e=>e.opacity>0)),t.forEach((t=>((e,t)=>{e.removeChildView(t),t.image.width=1,t.image.height=1,t._destroy()})(e,t))),t.length=0}))})},Ll=e=>{const{addFilter:t,utils:r}=e,{Type:n,createRoute:o,isFile:i}=r,s=Pl(e);return t("CREATE_VIEW",(e=>{const{is:t,view:r,query:n}=e;if(!t("file")||!n("GET_ALLOW_IMAGE_PREVIEW"))return;const a=({root:e})=>{e.ref.shouldRescale=!0};r.registerWriter(o({DID_RESIZE_ROOT:a,DID_STOP_RESIZE:a,DID_LOAD_ITEM:({root:e,props:t})=>{const{id:o}=t,a=n("GET_ITEM",o);if(!a||!i(a.file)||a.archived)return;const l=a.file;if(!(e=>/^image/.test(e.type))(l))return;if(!n("GET_IMAGE_PREVIEW_FILTER_ITEM")(a))return;const c="createImageBitmap"in(window||{}),d=n("GET_IMAGE_PREVIEW_MAX_FILE_SIZE");if(!c&&d&&l.size>d)return;e.ref.imagePreview=r.appendChildView(r.createChildView(s,{id:o}));const u=e.query("GET_IMAGE_PREVIEW_HEIGHT");u&&e.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:a.id,height:u});const p=!c&&l.size>n("GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE");e.dispatch("DID_IMAGE_PREVIEW_CONTAINER_CREATE",{id:o},p)},DID_IMAGE_PREVIEW_CALCULATE_SIZE:({root:e,action:t})=>{e.ref.imageWidth=t.width,e.ref.imageHeight=t.height,e.ref.shouldRescale=!0,e.ref.shouldDrawPreview=!0,e.dispatch("KICK")},DID_UPDATE_ITEM_METADATA:({root:e,action:t})=>{"crop"===t.change.key&&(e.ref.shouldRescale=!0)}},(({root:e,props:t})=>{e.ref.imagePreview&&(e.rect.element.hidden||(e.ref.shouldRescale&&(((e,t)=>{if(!e.ref.imagePreview)return;let{id:r}=t;const n=e.query("GET_ITEM",{id:r});if(!n)return;const o=e.query("GET_PANEL_ASPECT_RATIO"),i=e.query("GET_ITEM_PANEL_ASPECT_RATIO"),s=e.query("GET_IMAGE_PREVIEW_HEIGHT");if(o||i||s)return;let{imageWidth:a,imageHeight:l}=e.ref;if(!a||!l)return;const c=e.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),d=e.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),u=(n.getMetadata("exif")||{}).orientation||-1;if(u>=5&&u<=8&&([a,l]=[l,a]),!Sl(n.file)||e.query("GET_IMAGE_PREVIEW_UPSCALE")){const e=2048/a;a*=e,l*=e}const p=l/a,f=(n.getMetadata("crop")||{}).aspectRatio||p;let h=Math.max(c,Math.min(l,d));const E=e.rect.element.width,m=Math.min(E*f,h);e.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:n.id,height:m})})(e,t),e.ref.shouldRescale=!1),e.ref.shouldDrawPreview&&(requestAnimationFrame((()=>{e.dispatch("DID_FINISH_CALCULATE_PREVIEWSIZE",{id:t.id})})),e.ref.shouldDrawPreview=!1)))})))})),{options:{allowImagePreview:[!0,n.BOOLEAN],imagePreviewFilterItem:[()=>!0,n.FUNCTION],imagePreviewHeight:[null,n.INT],imagePreviewMinHeight:[44,n.INT],imagePreviewMaxHeight:[256,n.INT],imagePreviewMaxFileSize:[null,n.INT],imagePreviewZoomFactor:[2,n.INT],imagePreviewUpscale:[!1,n.BOOLEAN],imagePreviewMaxInstantPreviewFileSize:[1e6,n.INT],imagePreviewTransparencyIndicator:[null,n.STRING],imagePreviewCalculateAverageImageColor:[!1,n.BOOLEAN],imagePreviewMarkupShow:[!0,n.BOOLEAN],imagePreviewMarkupFilter:[()=>!0,n.FUNCTION]}}};function Cl(e){const t=e-1;return t*t*t+1}function Nl(e,{delay:t=0,duration:r=400,easing:n=Cl,x:o=0,y:i=0,opacity:s=0}={}){const a=getComputedStyle(e),l=+a.opacity,c="none"===a.transform?"":a.transform,d=l*(1-s);return{delay:t,duration:r,easing:n,css:(e,t)=>`\n\t\t\ttransform: ${c} translate(${(1-e)*o}px, ${(1-e)*i}px);\n\t\t\topacity: ${l-d*t}`}}function xl(e){this.message=e}"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Ll})),xl.prototype=new Error,xl.prototype.name="InvalidCharacterError";var Gl="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new xl("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,n,o=0,i=0,s="";n=t.charAt(i++);~n&&(r=o%4?64*r+n:n,o++%4)?s+=String.fromCharCode(255&r>>(-2*o&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return s};function Fl(e){this.message=e}function Ul(e,t){if("string"!=typeof e)throw new Fl("Invalid token specified");var r=!0===(t=t||{}).header?0:1;try{return JSON.parse(function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return decodeURIComponent(Gl(t).replace(/(.)/g,(function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})))}catch(r){return Gl(t)}}(e.split(".")[r]))}catch(n){throw new Fl("Invalid token specified: "+n.message)}}Fl.prototype=new Error,Fl.prototype.name="InvalidTokenError";export{Xa as $,de as A,u as B,Ye as C,G as D,c as E,T as F,w as G,g as H,Y as I,I as J,A as K,O as L,R as M,te as N,re as O,q as P,cr as Q,ee as R,Ve as S,H as T,h as U,Te as V,Ce as W,dr as X,Fa as Y,z as Z,La as _,X as a,Ll as a0,Nl as a1,Ul as a2,W as b,Q as c,U as d,B as e,F as f,Z as g,J as h,$e as i,Ge as j,V as k,k as l,Fe as m,K as n,Ue as o,Ne as p,xe as q,Se as r,m as s,$ as t,Pe as u,qe as v,Me as w,be as x,pe as y,ue as z};
