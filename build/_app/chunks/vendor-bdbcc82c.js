var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,s=(t,r,o)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[r]=o,a=(e,t)=>{for(var r in t||(t={}))n.call(t,r)&&s(e,r,t[r]);if(o)for(var r of o(t))i.call(t,r)&&s(e,r,t[r]);return e},l=(e,o)=>t(e,r(o));function c(){}function d(e,t){for(const r in t)e[r]=t[r];return e}function u(e){return e()}function p(){return Object.create(null)}function f(e){e.forEach(u)}function h(e){return"function"==typeof e}function E(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let m;function _(e,t){return m||(m=document.createElement("a")),m.href=t,e===m.href}function g(e,t,r,o){if(e){const n=T(e,t,r,o);return e[0](n)}}function T(e,t,r,o){return e[1]&&o?d(r.ctx.slice(),e[1](o(t))):r.ctx}function I(e,t,r,o){if(e[2]&&o){const n=e[2](o(r));if(void 0===t.dirty)return n;if("object"==typeof n){const e=[],r=Math.max(t.dirty.length,n.length);for(let o=0;o<r;o+=1)e[o]=t.dirty[o]|n[o];return e}return t.dirty|n}return t.dirty}function y(e,t,r,o,n,i){if(n){const s=T(t,r,o,i);e.p(s,n)}}function R(e){if(e.ctx.length>32){const t=[],r=e.ctx.length/32;for(let e=0;e<r;e++)t[e]=-1;return t}return-1}function A(e){const t={};for(const r in e)"$"!==r[0]&&(t[r]=e[r]);return t}let O,D=!1;function w(e,t,r,o){for(;e<t;){const n=e+(t-e>>1);r(n)<=o?e=n+1:t=n}return e}function v(e,t){if(D){for(!function(e){if(e.hydrate_init)return;e.hydrate_init=!0;let t=e.childNodes;if("HEAD"===e.nodeName){const e=[];for(let r=0;r<t.length;r++){const o=t[r];void 0!==o.claim_order&&e.push(o)}t=e}const r=new Int32Array(t.length+1),o=new Int32Array(t.length);r[0]=-1;let n=0;for(let l=0;l<t.length;l++){const e=t[l].claim_order,i=(n>0&&t[r[n]].claim_order<=e?n+1:w(1,n,(e=>t[r[e]].claim_order),e))-1;o[l]=r[i]+1;const s=i+1;r[s]=l,n=Math.max(s,n)}const i=[],s=[];let a=t.length-1;for(let l=r[n]+1;0!=l;l=o[l-1]){for(i.push(t[l-1]);a>=l;a--)s.push(t[a]);a--}for(;a>=0;a--)s.push(t[a]);i.reverse(),s.sort(((e,t)=>e.claim_order-t.claim_order));for(let l=0,c=0;l<s.length;l++){for(;c<i.length&&s[l].claim_order>=i[c].claim_order;)c++;const t=c<i.length?i[c]:null;e.insertBefore(s[l],t)}}(e),(void 0===e.actual_end_child||null!==e.actual_end_child&&e.actual_end_child.parentElement!==e)&&(e.actual_end_child=e.firstChild);null!==e.actual_end_child&&void 0===e.actual_end_child.claim_order;)e.actual_end_child=e.actual_end_child.nextSibling;t!==e.actual_end_child?void 0===t.claim_order&&t.parentNode===e||e.insertBefore(t,e.actual_end_child):e.actual_end_child=t.nextSibling}else t.parentNode!==e&&e.appendChild(t)}function S(e,t,r){D&&!r?v(e,t):t.parentNode===e&&t.nextSibling==r||e.insertBefore(t,r||null)}function M(e){e.parentNode.removeChild(e)}function b(e){return document.createElement(e)}function P(e){return document.createTextNode(e)}function L(){return P(" ")}function C(){return P("")}function N(e,t,r,o){return e.addEventListener(t,r,o),()=>e.removeEventListener(t,r,o)}function G(e,t,r){null==r?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function x(e){return Array.from(e.childNodes)}function F(e,t,r,o,n=!1){!function(e){void 0===e.claim_info&&(e.claim_info={last_index:0,total_claimed:0})}(e);const i=(()=>{for(let o=e.claim_info.last_index;o<e.length;o++){const i=e[o];if(t(i)){const t=r(i);return void 0===t?e.splice(o,1):e[o]=t,n||(e.claim_info.last_index=o),i}}for(let o=e.claim_info.last_index-1;o>=0;o--){const i=e[o];if(t(i)){const t=r(i);return void 0===t?e.splice(o,1):e[o]=t,n?void 0===t&&e.claim_info.last_index--:e.claim_info.last_index=o,i}}return o()})();return i.claim_order=e.claim_info.total_claimed,e.claim_info.total_claimed+=1,i}function U(e,t,r,o){return F(e,(e=>e.nodeName===t),(e=>{const t=[];for(let o=0;o<e.attributes.length;o++){const n=e.attributes[o];r[n.name]||t.push(n.name)}t.forEach((t=>e.removeAttribute(t)))}),(()=>o?function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}(t):b(t)))}function q(e,t){return F(e,(e=>3===e.nodeType),(e=>{const r=""+t;if(e.data.startsWith(r)){if(e.data.length!==r.length)return e.splitText(r.length)}else e.data=r}),(()=>P(t)),!0)}function B(e){return q(e," ")}function V(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function $(e,t){e.value=null==t?"":t}function k(e,t,r,o){e.style.setProperty(t,r,o?"important":"")}function Y(e,t=document.body){return Array.from(t.querySelectorAll(e))}function H(e){O=e}function W(){if(!O)throw new Error("Function called outside component initialization");return O}function z(e){W().$$.on_mount.push(e)}function X(e){W().$$.after_update.push(e)}function j(e,t){W().$$.context.set(e,t)}const Q=[],Z=[],K=[],J=[],ee=Promise.resolve();let te=!1;function re(e){K.push(e)}let oe=!1;const ne=new Set;function ie(){if(!oe){oe=!0;do{for(let e=0;e<Q.length;e+=1){const t=Q[e];H(t),se(t.$$)}for(H(null),Q.length=0;Z.length;)Z.pop()();for(let e=0;e<K.length;e+=1){const t=K[e];ne.has(t)||(ne.add(t),t())}K.length=0}while(Q.length);for(;J.length;)J.pop()();te=!1,oe=!1,ne.clear()}}function se(e){if(null!==e.fragment){e.update(),f(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(re)}}const ae=new Set;let le;function ce(){le={r:0,c:[],p:le}}function de(){le.r||f(le.c),le=le.p}function ue(e,t){e&&e.i&&(ae.delete(e),e.i(t))}function pe(e,t,r,o){if(e&&e.o){if(ae.has(e))return;ae.add(e),le.c.push((()=>{ae.delete(e),o&&(r&&e.d(1),o())})),e.o(t)}}function fe(e,t){const r={},o={},n={$$scope:1};let i=e.length;for(;i--;){const s=e[i],a=t[i];if(a){for(const e in s)e in a||(o[e]=1);for(const e in a)n[e]||(r[e]=a[e],n[e]=1);e[i]=a}else for(const e in s)n[e]=1}for(const s in o)s in r||(r[s]=void 0);return r}function he(e){return"object"==typeof e&&null!==e?e:{}}function Ee(e){e&&e.c()}function me(e,t){e&&e.l(t)}function _e(e,t,r,o){const{fragment:n,on_mount:i,on_destroy:s,after_update:a}=e.$$;n&&n.m(t,r),o||re((()=>{const t=i.map(u).filter(h);s?s.push(...t):f(t),e.$$.on_mount=[]})),a.forEach(re)}function ge(e,t){const r=e.$$;null!==r.fragment&&(f(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function Te(e,t){-1===e.$$.dirty[0]&&(Q.push(e),te||(te=!0,ee.then(ie)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ie(e,t,r,o,n,i,s,a=[-1]){const l=O;H(e);const d=e.$$={fragment:null,ctx:null,props:i,update:c,not_equal:n,bound:p(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:t.context||[]),callbacks:p(),dirty:a,skip_bound:!1,root:t.target||l.$$.root};s&&s(d.root);let u=!1;if(d.ctx=r?r(e,t.props||{},((t,r,...o)=>{const i=o.length?o[0]:r;return d.ctx&&n(d.ctx[t],d.ctx[t]=i)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](i),u&&Te(e,t)),r})):[],d.update(),u=!0,f(d.before_update),d.fragment=!!o&&o(d.ctx),t.target){if(t.hydrate){D=!0;const e=x(t.target);d.fragment&&d.fragment.l(e),e.forEach(M)}else d.fragment&&d.fragment.c();t.intro&&ue(e.$$.fragment),_e(e,t.target,t.anchor,t.customElement),D=!1,ie()}H(l)}class ye{$destroy(){ge(this,1),this.$destroy=c}$on(e,t){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const e=r.indexOf(t);-1!==e&&r.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Re=[];function Ae(e,t=c){let r;const o=new Set;function n(t){if(E(e,t)&&(e=t,r)){const t=!Re.length;for(const r of o)r[1](),Re.push(r,e);if(t){for(let e=0;e<Re.length;e+=2)Re[e][0](Re[e+1]);Re.length=0}}}return{set:n,update:function(t){n(t(e))},subscribe:function(i,s=c){const a=[i,s];return o.add(a),1===o.size&&(r=t(n)||c),i(e),()=>{o.delete(a),0===o.size&&(r(),r=null)}}}}
/*!
 * FilePond 4.28.2
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const Oe=(e,t)=>{for(const r in e)e.hasOwnProperty(r)&&t(r,e[r])},De=e=>{const t={};return Oe(e,(r=>{((e,t,r)=>{"function"!=typeof r?Object.defineProperty(e,t,a({},r)):e[t]=r})(t,r,e[r])})),t},we=(e,t,r=null)=>{if(null===r)return e.getAttribute(t)||e.hasAttribute(t);e.setAttribute(t,r)},ve=["svg","path"],Se=e=>ve.includes(e),Me=(e,t,r={})=>{"object"==typeof t&&(r=t,t=null);const o=Se(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return t&&(Se(e)?we(o,"class",t):o.className=t),Oe(r,((e,t)=>{we(o,e,t)})),o},be=(e,t)=>(e,r)=>(void 0!==r?t.splice(r,0,e):t.push(e),e),Pe=(e,t)=>r=>(t.splice(t.indexOf(r),1),r.element.parentNode&&e.removeChild(r.element),r),Le="undefined"!=typeof window&&void 0!==window.document,Ce=()=>Le,Ne="children"in(Ce()?Me("svg"):{})?e=>e.children.length:e=>e.childNodes.length,Ge=(e,t,r,o)=>{const n=r[0]||e.left,i=r[1]||e.top,s=n+e.width,l=i+e.height*(o[1]||1),c={element:a({},e),inner:{left:e.left,top:e.top,right:e.right,bottom:e.bottom},outer:{left:n,top:i,right:s,bottom:l}};return t.filter((e=>!e.isRectIgnored())).map((e=>e.rect)).forEach((e=>{xe(c.inner,a({},e.inner)),xe(c.outer,a({},e.outer))})),Fe(c.inner),c.outer.bottom+=c.element.marginBottom,c.outer.right+=c.element.marginRight,Fe(c.outer),c},xe=(e,t)=>{t.top+=e.top,t.right+=e.left,t.bottom+=e.top,t.left+=e.left,t.bottom>e.bottom&&(e.bottom=t.bottom),t.right>e.right&&(e.right=t.right)},Fe=e=>{e.width=e.right-e.left,e.height=e.bottom-e.top},Ue=e=>"number"==typeof e,qe=e=>e<.5?2*e*e:(4-2*e)*e-1,Be={spring:({stiffness:e=.5,damping:t=.75,mass:r=10}={})=>{let o=null,n=null,i=0,s=!1;const a=De({interpolate:(l,c)=>{if(s)return;if(!Ue(o)||!Ue(n))return s=!0,void(i=0);i+=-(n-o)*e/r,n+=i,i*=t,((e,t,r,o=.001)=>Math.abs(e-t)<o&&Math.abs(r)<o)(n,o,i)||c?(n=o,i=0,s=!0,a.onupdate(n),a.oncomplete(n)):a.onupdate(n)},target:{set:e=>{if(Ue(e)&&!Ue(n)&&(n=e),null===o&&(o=e,n=e),o=e,n===o||void 0===o)return s=!0,i=0,a.onupdate(n),void a.oncomplete(n);s=!1},get:()=>o},resting:{get:()=>s},onupdate:e=>{},oncomplete:e=>{}});return a},tween:({duration:e=500,easing:t=qe,delay:r=0}={})=>{let o,n,i=null,s=!0,a=!1,l=null;const c=De({interpolate:(d,u)=>{s||null===l||(null===i&&(i=d),d-i<r||(o=d-i-r,o>=e||u?(o=1,n=a?0:1,c.onupdate(n*l),c.oncomplete(n*l),s=!0):(n=o/e,c.onupdate((o>=0?t(a?1-n:n):0)*l))))},target:{get:()=>a?0:l,set:e=>{if(null===l)return l=e,c.onupdate(e),void c.oncomplete(e);e<l?(l=1,a=!0):(a=!1,l=e),s=!1,i=null}},resting:{get:()=>s},onupdate:e=>{},oncomplete:e=>{}});return c}},Ve=(e,t,r,o=!1)=>{(t=Array.isArray(t)?t:[t]).forEach((t=>{e.forEach((e=>{let n=e,i=()=>r[e],s=t=>r[e]=t;"object"==typeof e&&(n=e.key,i=e.getter||i,s=e.setter||s),t[n]&&!o||(t[n]={get:i,set:s})}))}))},$e=e=>null!=e,ke={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},Ye=(e,t)=>{if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const r in t)if(t[r]!==e[r])return!0;return!1},He=(e,{opacity:t,perspective:r,translateX:o,translateY:n,scaleX:i,scaleY:s,rotateX:a,rotateY:l,rotateZ:c,originX:d,originY:u,width:p,height:f})=>{let h="",E="";($e(d)||$e(u))&&(E+=`transform-origin: ${d||0}px ${u||0}px;`),$e(r)&&(h+=`perspective(${r}px) `),($e(o)||$e(n))&&(h+=`translate3d(${o||0}px, ${n||0}px, 0) `),($e(i)||$e(s))&&(h+=`scale3d(${$e(i)?i:1}, ${$e(s)?s:1}, 1) `),$e(c)&&(h+=`rotateZ(${c}rad) `),$e(a)&&(h+=`rotateX(${a}rad) `),$e(l)&&(h+=`rotateY(${l}rad) `),h.length&&(E+=`transform:${h};`),$e(t)&&(E+=`opacity:${t};`,0===t&&(E+="visibility:hidden;"),t<1&&(E+="pointer-events:none;")),$e(f)&&(E+=`height:${f}px;`),$e(p)&&(E+=`width:${p}px;`);const m=e.elementCurrentStyle||"";E.length===m.length&&E===m||(e.style.cssText=E,e.elementCurrentStyle=E)},We={styles:({mixinConfig:e,viewProps:t,viewInternalAPI:r,viewExternalAPI:o,view:n})=>{const i=a({},t),s={};Ve(e,[r,o],t);const l=()=>n.rect?Ge(n.rect,n.childViews,[t.translateX||0,t.translateY||0],[t.scaleX||0,t.scaleY||0]):null;return r.rect={get:l},o.rect={get:l},e.forEach((e=>{t[e]=void 0===i[e]?ke[e]:i[e]})),{write:()=>{if(Ye(s,t))return He(n.element,t),Object.assign(s,a({},t)),!0},destroy:()=>{}}},listeners:({mixinConfig:e,viewProps:t,viewInternalAPI:r,viewExternalAPI:o,viewState:n,view:i})=>{const s=[],a=(l=i.element,(e,t)=>{l.addEventListener(e,t)});var l;const c=(e=>(t,r)=>{e.removeEventListener(t,r)})(i.element);return o.on=(e,t)=>{s.push({type:e,fn:t}),a(e,t)},o.off=(e,t)=>{s.splice(s.findIndex((r=>r.type===e&&r.fn===t)),1),c(e,t)},{write:()=>!0,destroy:()=>{s.forEach((e=>{c(e.type,e.fn)}))}}},animations:({mixinConfig:e,viewProps:t,viewInternalAPI:r,viewExternalAPI:o})=>{const n=a({},t),i=[];return Oe(e,((e,s)=>{const l=((e,t,r)=>{const o=e[t]&&"object"==typeof e[t][r]?e[t][r]:e[t]||e,n="string"==typeof o?o:o.type,i="object"==typeof o?a({},o):{};return Be[n]?Be[n](i):null})(s);if(!l)return;l.onupdate=r=>{t[e]=r},l.target=n[e];Ve([{key:e,setter:e=>{l.target!==e&&(l.target=e)},getter:()=>t[e]}],[r,o],t,!0),i.push(l)})),{write:e=>{let t=document.hidden,r=!0;return i.forEach((o=>{o.resting||(r=!1),o.interpolate(e,t)})),r},destroy:()=>{}}},apis:({mixinConfig:e,viewProps:t,viewExternalAPI:r})=>{Ve(e,r,t)}},ze=(e={},t={},r={})=>(t.layoutCalculated||(e.paddingTop=parseInt(r.paddingTop,10)||0,e.marginTop=parseInt(r.marginTop,10)||0,e.marginRight=parseInt(r.marginRight,10)||0,e.marginBottom=parseInt(r.marginBottom,10)||0,e.marginLeft=parseInt(r.marginLeft,10)||0,t.layoutCalculated=!0),e.left=t.offsetLeft||0,e.top=t.offsetTop||0,e.width=t.offsetWidth||0,e.height=t.offsetHeight||0,e.right=e.left+e.width,e.bottom=e.top+e.height,e.scrollTop=t.scrollTop,e.hidden=null===t.offsetParent,e),Xe=({tag:e="div",name:t=null,attributes:r={},read:o=(()=>{}),write:n=(()=>{}),create:i=(()=>{}),destroy:s=(()=>{}),filterFrameActionsForChild:c=((e,t)=>t),didCreateView:d=(()=>{}),didWriteView:u=(()=>{}),ignoreRect:p=!1,ignoreRectUpdate:f=!1,mixins:h=[]}={})=>(E,m={})=>{const _=Me(e,`filepond--${t}`,r),g=window.getComputedStyle(_,null),T=ze();let I=null,y=!1;const R=[],A=[],O={},D={},w=[n],v=[o],S=[s],M=()=>_,b=()=>R.concat(),P=()=>I||(I=Ge(T,R,[0,0],[1,1]),I),L={element:{get:M},style:{get:()=>g},childViews:{get:b}},C=l(a({},L),{rect:{get:P},ref:{get:()=>O},is:e=>t===e,appendChild:(G=_,(e,t)=>{void 0!==t&&G.children[t]?G.insertBefore(e,G.children[t]):G.appendChild(e)}),createChildView:(N=E,(e,t)=>e(N,t)),linkView:e=>(R.push(e),e),unlinkView:e=>{R.splice(R.indexOf(e),1)},appendChildView:be(0,R),removeChildView:Pe(_,R),registerWriter:e=>w.push(e),registerReader:e=>v.push(e),registerDestroyer:e=>S.push(e),invalidateLayout:()=>_.layoutCalculated=!1,dispatch:E.dispatch,query:E.query});var N,G;const x={element:{get:M},childViews:{get:b},rect:{get:P},resting:{get:()=>y},isRectIgnored:()=>p,_read:()=>{I=null,R.forEach((e=>e._read()));!(f&&T.width&&T.height)&&ze(T,_,g);const e={root:U,props:m,rect:T};v.forEach((t=>t(e)))},_write:(e,t,r)=>{let o=0===t.length;return w.forEach((n=>{!1===n({props:m,root:U,actions:t,timestamp:e,shouldOptimize:r})&&(o=!1)})),A.forEach((t=>{!1===t.write(e)&&(o=!1)})),R.filter((e=>!!e.element.parentNode)).forEach((n=>{n._write(e,c(n,t),r)||(o=!1)})),R.forEach(((n,i)=>{n.element.parentNode||(U.appendChild(n.element,i),n._read(),n._write(e,c(n,t),r),o=!1)})),y=o,u({props:m,root:U,actions:t,timestamp:e}),o},_destroy:()=>{A.forEach((e=>e.destroy())),S.forEach((e=>{e({root:U,props:m})})),R.forEach((e=>e._destroy()))}},F=l(a({},L),{rect:{get:()=>T}});Object.keys(h).sort(((e,t)=>"styles"===e?1:"styles"===t?-1:0)).forEach((e=>{const t=We[e]({mixinConfig:h[e],viewProps:m,viewState:D,viewInternalAPI:C,viewExternalAPI:x,view:De(F)});t&&A.push(t)}));const U=De(C);i({root:U,props:m});const q=Ne(_);return R.forEach(((e,t)=>{U.appendChild(e.element,q+t)})),d(U),De(x)},je=(e,t)=>({root:r,props:o,actions:n=[],timestamp:i,shouldOptimize:s})=>{n.filter((t=>e[t.type])).forEach((t=>e[t.type]({root:r,props:o,action:t.data,timestamp:i,shouldOptimize:s}))),t&&t({root:r,props:o,actions:n,timestamp:i,shouldOptimize:s})},Qe=(e,t)=>t.parentNode.insertBefore(e,t),Ze=(e,t)=>t.parentNode.insertBefore(e,t.nextSibling),Ke=e=>Array.isArray(e),Je=e=>null==e,et=e=>e.trim(),tt=e=>""+e,rt=e=>"boolean"==typeof e,ot=e=>rt(e)?e:"true"===e,nt=e=>"string"==typeof e,it=e=>Ue(e)?e:nt(e)?tt(e).replace(/[a-z]+/gi,""):0,st=e=>parseInt(it(e),10),at=e=>parseFloat(it(e)),lt=e=>Ue(e)&&isFinite(e)&&Math.floor(e)===e,ct=(e,t=1e3)=>{if(lt(e))return e;let r=tt(e).trim();return/MB$/i.test(r)?(r=r.replace(/MB$i/,"").trim(),st(r)*t*t):/KB/i.test(r)?(r=r.replace(/KB$i/,"").trim(),st(r)*t):st(r)},dt=e=>"function"==typeof e,ut={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},pt=(e,t,r,o,n)=>{if(null===t)return null;if("function"==typeof t)return t;const i={url:"GET"===r||"PATCH"===r?`?${e}=`:"",method:r,headers:n,withCredentials:!1,timeout:o,onload:null,ondata:null,onerror:null};if(nt(t))return i.url=t,i;if(Object.assign(i,t),nt(i.headers)){const e=i.headers.split(/:(.+)/);i.headers={header:e[0],value:e[1]}}return i.withCredentials=ot(i.withCredentials),i},ft=e=>"object"==typeof e&&null!==e,ht=e=>Ke(e)?"array":(e=>null===e)(e)?"null":lt(e)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(e)?"bytes":(e=>ft(e)&&nt(e.url)&&ft(e.process)&&ft(e.revert)&&ft(e.restore)&&ft(e.fetch))(e)?"api":typeof e,Et={array:(e,t=",")=>Je(e)?[]:Ke(e)?e:tt(e).split(t).map(et).filter((e=>e.length)),boolean:ot,int:e=>"bytes"===ht(e)?ct(e):st(e),number:at,float:at,bytes:ct,string:e=>dt(e)?e:tt(e),function:e=>(e=>{let t=self,r=e.split("."),o=null;for(;o=r.shift();)if(t=t[o],!t)return null;return t})(e),serverapi:e=>(e=>{const t={};return t.url=nt(e)?e:e.url||"",t.timeout=e.timeout?parseInt(e.timeout,10):0,t.headers=e.headers?e.headers:{},Oe(ut,(r=>{t[r]=pt(r,e[r],ut[r],t.timeout,t.headers)})),t.process=e.process||nt(e)||e.url?t.process:null,t.remove=e.remove||null,delete t.headers,t})(e),object:e=>{try{return JSON.parse(e.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",'))}catch(t){return null}}},mt=(e,t,r)=>{if(e===t)return e;let o=ht(e);if(o!==r){const t=(n=e,Et[r](n));if(o=ht(t),null===t)throw`Trying to assign value with incorrect type to "${option}", allowed type: "${r}"`;e=t}var n;return e},_t=e=>{const t={};return Oe(e,(r=>{const o=e[r];t[r]=((e,t)=>{let r=e;return{enumerable:!0,get:()=>r,set:o=>{r=mt(o,e,t)}}})(o[0],o[1])})),De(t)},gt=(e,t="-")=>e.split(/(?=[A-Z])/).map((e=>e.toLowerCase())).join(t),Tt=e=>(t,r,o)=>{const n={};return Oe(e,(e=>{const r=gt(e,"_").toUpperCase();n[`SET_${r}`]=n=>{try{o.options[e]=n.value}catch(i){}t(`DID_SET_${r}`,{value:o.options[e]})}})),n},It=e=>t=>{const r={};return Oe(e,(e=>{r[`GET_${gt(e,"_").toUpperCase()}`]=r=>t.options[e]})),r},yt=1,Rt=2,At=3,Ot=4,Dt=5,wt=()=>Math.random().toString(36).substr(2,9),vt=(e,t)=>e.splice(t,1),St=()=>{const e=[],t=(t,r)=>{vt(e,e.findIndex((e=>e.event===t&&(e.cb===r||!r))))},r=(t,r,o)=>{e.filter((e=>e.event===t)).map((e=>e.cb)).forEach((e=>((e,t)=>{t?e():document.hidden?Promise.resolve(1).then(e):setTimeout(e,0)})((()=>e(...r)),o)))};return{fireSync:(e,...t)=>{r(e,t,!0)},fire:(e,...t)=>{r(e,t,!1)},on:(t,r)=>{e.push({event:t,cb:r})},onOnce:(r,o)=>{e.push({event:r,cb:(...e)=>{t(r,o),o(...e)}})},off:t}},Mt=(e,t,r)=>{Object.getOwnPropertyNames(e).filter((e=>!r.includes(e))).forEach((r=>Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))))},bt=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],Pt=e=>{const t={};return Mt(e,t,bt),t},Lt=1,Ct=2,Nt=9,Gt=3,xt=5,Ft=6,Ut=10,qt=7,Bt=8,Vt=1,$t=2,kt=3,Yt=e=>/[^0-9]+/.exec(e),Ht=()=>Yt(1.1.toLocaleString())[0],Wt={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},zt=[],Xt=(e,t,r)=>new Promise(((o,n)=>{const i=zt.filter((t=>t.key===e)).map((e=>e.cb));if(0===i.length)return void o(t);const s=i.shift();i.reduce(((e,t)=>e.then((e=>t(e,r)))),s(t,r)).then((e=>o(e))).catch((e=>n(e)))})),jt=(e,t,r)=>zt.filter((t=>t.key===e)).map((e=>e.cb(t,r))),Qt=(e,t)=>zt.push({key:e,cb:t}),Zt=()=>a({},Kt),Kt={id:[null,Wt.STRING],name:["filepond",Wt.STRING],disabled:[!1,Wt.BOOLEAN],className:[null,Wt.STRING],required:[!1,Wt.BOOLEAN],captureMethod:[null,Wt.STRING],allowSyncAcceptAttribute:[!0,Wt.BOOLEAN],allowDrop:[!0,Wt.BOOLEAN],allowBrowse:[!0,Wt.BOOLEAN],allowPaste:[!0,Wt.BOOLEAN],allowMultiple:[!1,Wt.BOOLEAN],allowReplace:[!0,Wt.BOOLEAN],allowRevert:[!0,Wt.BOOLEAN],allowRemove:[!0,Wt.BOOLEAN],allowProcess:[!0,Wt.BOOLEAN],allowReorder:[!1,Wt.BOOLEAN],allowDirectoriesOnly:[!1,Wt.BOOLEAN],storeAsFile:[!1,Wt.BOOLEAN],forceRevert:[!1,Wt.BOOLEAN],maxFiles:[null,Wt.INT],checkValidity:[!1,Wt.BOOLEAN],itemInsertLocationFreedom:[!0,Wt.BOOLEAN],itemInsertLocation:["before",Wt.STRING],itemInsertInterval:[75,Wt.INT],dropOnPage:[!1,Wt.BOOLEAN],dropOnElement:[!0,Wt.BOOLEAN],dropValidation:[!1,Wt.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],Wt.ARRAY],instantUpload:[!0,Wt.BOOLEAN],maxParallelUploads:[2,Wt.INT],allowMinimumUploadDuration:[!0,Wt.BOOLEAN],chunkUploads:[!1,Wt.BOOLEAN],chunkForce:[!1,Wt.BOOLEAN],chunkSize:[5e6,Wt.INT],chunkRetryDelays:[[500,1e3,3e3],Wt.ARRAY],server:[null,Wt.SERVER_API],fileSizeBase:[1e3,Wt.INT],labelDecimalSeparator:[Ht(),Wt.STRING],labelThousandsSeparator:[(()=>{const e=Ht(),t=1e3.toLocaleString();return t!==1e3.toString()?Yt(t)[0]:"."===e?",":"."})(),Wt.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',Wt.STRING],labelInvalidField:["Field contains invalid files",Wt.STRING],labelFileWaitingForSize:["Waiting for size",Wt.STRING],labelFileSizeNotAvailable:["Size not available",Wt.STRING],labelFileCountSingular:["file in list",Wt.STRING],labelFileCountPlural:["files in list",Wt.STRING],labelFileLoading:["Loading",Wt.STRING],labelFileAdded:["Added",Wt.STRING],labelFileLoadError:["Error during load",Wt.STRING],labelFileRemoved:["Removed",Wt.STRING],labelFileRemoveError:["Error during remove",Wt.STRING],labelFileProcessing:["Uploading",Wt.STRING],labelFileProcessingComplete:["Upload complete",Wt.STRING],labelFileProcessingAborted:["Upload cancelled",Wt.STRING],labelFileProcessingError:["Error during upload",Wt.STRING],labelFileProcessingRevertError:["Error during revert",Wt.STRING],labelTapToCancel:["tap to cancel",Wt.STRING],labelTapToRetry:["tap to retry",Wt.STRING],labelTapToUndo:["tap to undo",Wt.STRING],labelButtonRemoveItem:["Remove",Wt.STRING],labelButtonAbortItemLoad:["Abort",Wt.STRING],labelButtonRetryItemLoad:["Retry",Wt.STRING],labelButtonAbortItemProcessing:["Cancel",Wt.STRING],labelButtonUndoItemProcessing:["Undo",Wt.STRING],labelButtonRetryItemProcessing:["Retry",Wt.STRING],labelButtonProcessItem:["Upload",Wt.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',Wt.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',Wt.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',Wt.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',Wt.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',Wt.STRING],oninit:[null,Wt.FUNCTION],onwarning:[null,Wt.FUNCTION],onerror:[null,Wt.FUNCTION],onactivatefile:[null,Wt.FUNCTION],oninitfile:[null,Wt.FUNCTION],onaddfilestart:[null,Wt.FUNCTION],onaddfileprogress:[null,Wt.FUNCTION],onaddfile:[null,Wt.FUNCTION],onprocessfilestart:[null,Wt.FUNCTION],onprocessfileprogress:[null,Wt.FUNCTION],onprocessfileabort:[null,Wt.FUNCTION],onprocessfilerevert:[null,Wt.FUNCTION],onprocessfile:[null,Wt.FUNCTION],onprocessfiles:[null,Wt.FUNCTION],onremovefile:[null,Wt.FUNCTION],onpreparefile:[null,Wt.FUNCTION],onupdatefiles:[null,Wt.FUNCTION],onreorderfiles:[null,Wt.FUNCTION],beforeDropFile:[null,Wt.FUNCTION],beforeAddFile:[null,Wt.FUNCTION],beforeRemoveFile:[null,Wt.FUNCTION],beforePrepareFile:[null,Wt.FUNCTION],stylePanelLayout:[null,Wt.STRING],stylePanelAspectRatio:[null,Wt.STRING],styleItemPanelAspectRatio:[null,Wt.STRING],styleButtonRemoveItemPosition:["left",Wt.STRING],styleButtonProcessItemPosition:["right",Wt.STRING],styleLoadIndicatorPosition:["right",Wt.STRING],styleProgressIndicatorPosition:["right",Wt.STRING],styleButtonRemoveItemAlign:[!1,Wt.BOOLEAN],files:[[],Wt.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],Wt.ARRAY]},Jt=(e,t)=>Je(t)?e[0]||null:lt(t)?e[t]||null:("object"==typeof t&&(t=t.id),e.find((e=>e.id===t))||null),er=e=>{if(Je(e))return e;if(/:/.test(e)){const t=e.split(":");return t[1]/t[0]}return parseFloat(e)},tr=e=>e.filter((e=>!e.archived)),rr={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4};let or=null;const nr=[Bt,Ft,Ut],ir=[qt,Gt,Nt,Lt],sr=[xt],ar=e=>nr.includes(e.status),lr=e=>ir.includes(e.status),cr=e=>sr.includes(e.status),dr=e=>ft(e.options.server)&&(ft(e.options.server.process)||dt(e.options.server.process)),ur=e=>({GET_STATUS:()=>{const t=tr(e.items),{EMPTY:r,ERROR:o,BUSY:n,IDLE:i,READY:s}=rr;return 0===t.length?r:t.some(ar)?o:t.some(lr)?n:t.some(cr)?s:i},GET_ITEM:t=>Jt(e.items,t),GET_ACTIVE_ITEM:t=>Jt(tr(e.items),t),GET_ACTIVE_ITEMS:()=>tr(e.items),GET_ITEMS:()=>e.items,GET_ITEM_NAME:t=>{const r=Jt(e.items,t);return r?r.filename:null},GET_ITEM_SIZE:t=>{const r=Jt(e.items,t);return r?r.fileSize:null},GET_STYLES:()=>Object.keys(e.options).filter((e=>/^style/.test(e))).map((t=>({name:t,value:e.options[t]}))),GET_PANEL_ASPECT_RATIO:()=>/circle/.test(e.options.stylePanelLayout)?1:er(e.options.stylePanelAspectRatio),GET_ITEM_PANEL_ASPECT_RATIO:()=>e.options.styleItemPanelAspectRatio,GET_ITEMS_BY_STATUS:t=>tr(e.items).filter((e=>e.status===t)),GET_TOTAL_ITEMS:()=>tr(e.items).length,SHOULD_UPDATE_FILE_INPUT:()=>e.options.storeAsFile&&(()=>{if(null===or)try{const e=new DataTransfer;e.items.add(new File(["hello world"],"This_Works.txt"));const t=document.createElement("input");t.setAttribute("type","file"),t.files=e.files,or=1===t.files.length}catch(e){or=!1}return or})()&&!dr(e),IS_ASYNC:()=>dr(e)}),pr=(e,t,r)=>Math.max(Math.min(r,e),t),fr=e=>/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(e),hr=e=>e.split("/").pop().split("?").shift(),Er=e=>e.split(".").pop(),mr=(e,t="")=>(t+e).slice(-t.length),_r=(e=new Date)=>`${e.getFullYear()}-${mr(e.getMonth()+1,"00")}-${mr(e.getDate(),"00")}_${mr(e.getHours(),"00")}-${mr(e.getMinutes(),"00")}-${mr(e.getSeconds(),"00")}`,gr=(e,t,r=null,o=null)=>{const n="string"==typeof r?e.slice(0,e.size,r):e.slice(0,e.size,e.type);return n.lastModifiedDate=new Date,e._relativePath&&(n._relativePath=e._relativePath),nt(t)||(t=_r()),t&&null===o&&Er(t)?n.name=t:(o=o||(e=>{if("string"!=typeof e)return"";const t=e.split("/").pop();return/svg/.test(t)?"svg":/zip|compressed/.test(t)?"zip":/plain/.test(t)?"txt":/msword/.test(t)?"doc":/[a-z]+/.test(t)?"jpeg"===t?"jpg":t:""})(n.type),n.name=t+(o?"."+o:"")),n},Tr=(e,t)=>{const r=window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(r){const o=new r;return o.append(e),o.getBlob(t)}return new Blob([e],{type:t})},Ir=e=>(/^data:(.+);/.exec(e)||[])[1]||null,yr=e=>{const t=Ir(e);return((e,t)=>{const r=new ArrayBuffer(e.length),o=new Uint8Array(r);for(let n=0;n<e.length;n++)o[n]=e.charCodeAt(n);return Tr(r,t)})((e=>atob((e=>e.split(",")[1].replace(/\s/g,""))(e)))(e),t)},Rr=e=>{if(!/^content-disposition:/i.test(e))return null;const t=e.split(/filename=|filename\*=.+''/).splice(1).map((e=>e.trim().replace(/^["']|[;"']{0,2}$/g,""))).filter((e=>e.length));return t.length?decodeURI(t[t.length-1]):null},Ar=e=>{if(/content-length:/i.test(e)){const t=e.match(/[0-9]+/)[0];return t?parseInt(t,10):null}return null},Or=e=>{if(/x-content-transfer-id:/i.test(e)){return(e.split(":")[1]||"").trim()||null}return null},Dr=e=>{const t={source:null,name:null,size:null},r=e.split("\n");for(let o of r){const e=Rr(o);if(e){t.name=e;continue}const r=Ar(o);if(r){t.size=r;continue}const n=Or(o);n&&(t.source=n)}return t},wr=e=>{const t={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},r=r=>{e?(t.timestamp=Date.now(),t.request=e(r,(e=>{t.duration=Date.now()-t.timestamp,t.complete=!0,e instanceof Blob&&(e=gr(e,e.name||hr(r))),o.fire("load",e instanceof Blob?e:e?e.body:null)}),(e=>{o.fire("error","string"==typeof e?{type:"error",code:0,body:e}:e)}),((e,r,n)=>{n&&(t.size=n),t.duration=Date.now()-t.timestamp,e?(t.progress=r/n,o.fire("progress",t.progress)):t.progress=null}),(()=>{o.fire("abort")}),(e=>{const r=Dr("string"==typeof e?e:e.headers);o.fire("meta",{size:t.size||r.size,filename:r.name,source:r.source})}))):o.fire("error",{type:"error",body:"Can't load URL",code:400})},o=l(a({},St()),{setSource:e=>t.source=e,getProgress:()=>t.progress,abort:()=>{t.request&&t.request.abort&&t.request.abort()},load:()=>{const e=t.source;var n,i;o.fire("init",e),e instanceof File?o.fire("load",e):e instanceof Blob?o.fire("load",gr(e,e.name)):fr(e)?o.fire("load",gr(yr(e),n,null,i)):r(e)}});return o},vr=e=>/GET|HEAD/.test(e),Sr=(e,t,r)=>{const o={onheaders:()=>{},onprogress:()=>{},onload:()=>{},ontimeout:()=>{},onerror:()=>{},onabort:()=>{},abort:()=>{n=!0,s.abort()}};let n=!1,i=!1;r=a({method:"POST",headers:{},withCredentials:!1},r),t=encodeURI(t),vr(r.method)&&e&&(t=`${t}${encodeURIComponent("string"==typeof e?e:JSON.stringify(e))}`);const s=new XMLHttpRequest;return(vr(r.method)?s:s.upload).onprogress=e=>{n||o.onprogress(e.lengthComputable,e.loaded,e.total)},s.onreadystatechange=()=>{s.readyState<2||4===s.readyState&&0===s.status||i||(i=!0,o.onheaders(s))},s.onload=()=>{s.status>=200&&s.status<300?o.onload(s):o.onerror(s)},s.onerror=()=>o.onerror(s),s.onabort=()=>{n=!0,o.onabort()},s.ontimeout=()=>o.ontimeout(s),s.open(r.method,t,!0),lt(r.timeout)&&(s.timeout=r.timeout),Object.keys(r.headers).forEach((e=>{const t=unescape(encodeURIComponent(r.headers[e]));s.setRequestHeader(e,t)})),r.responseType&&(s.responseType=r.responseType),r.withCredentials&&(s.withCredentials=!0),s.send(e),o},Mr=(e,t,r,o)=>({type:e,code:t,body:r,headers:o}),br=e=>t=>{e(Mr("error",0,"Timeout",t.getAllResponseHeaders()))},Pr=e=>/\?/.test(e),Lr=(...e)=>{let t="";return e.forEach((e=>{t+=Pr(t)&&Pr(e)?e.replace(/\?/,"&"):e})),t},Cr=(e="",t)=>{if("function"==typeof t)return t;if(!t||!nt(t.url))return null;const r=t.onload||(e=>e),o=t.onerror||(e=>null);return(n,i,s,c,d,u)=>{const p=Sr(n,Lr(e,t.url),l(a({},t),{responseType:"blob"}));return p.onload=e=>{const o=e.getAllResponseHeaders(),s=Dr(o).name||hr(n);i(Mr("load",e.status,"HEAD"===t.method?null:gr(r(e.response),s),o))},p.onerror=e=>{s(Mr("error",e.status,o(e.response)||e.statusText,e.getAllResponseHeaders()))},p.onheaders=e=>{u(Mr("headers",e.status,null,e.getAllResponseHeaders()))},p.ontimeout=br(s),p.onprogress=c,p.onabort=d,p}},Nr=0,Gr=1,xr=2,Fr=3,Ur=4,qr=(e,t,r,o,n,i,s,c,d,u,p)=>{const f=[],{chunkTransferId:h,chunkServer:E,chunkSize:m,chunkRetryDelays:_}=p,g={serverId:h,aborted:!1},T=t.ondata||(e=>e),I=t.onload||((e,t)=>"HEAD"===t?e.getResponseHeader("Upload-Offset"):e.response),y=t.onerror||(e=>null),R=Math.floor(o.size/m);for(let a=0;a<=R;a++){const e=a*m,t=o.slice(e,e+m,"application/offset+octet-stream");f[a]={index:a,size:t.size,offset:e,data:t,file:o,progress:0,retries:[..._],status:Nr,error:null,request:null,timeout:null}}const A=e=>e.status===Nr||e.status===Fr,O=t=>{if(g.aborted)return;if(!(t=t||f.find(A)))return void(f.every((e=>e.status===Gr))&&i(g.serverId));t.status=xr,t.progress=null;const r=E.ondata||(e=>e),n=E.onerror||(e=>null),c=Lr(e,E.url,g.serverId),u="function"==typeof E.headers?E.headers(t):l(a({},E.headers),{"Content-Type":"application/offset+octet-stream","Upload-Offset":t.offset,"Upload-Length":o.size,"Upload-Name":o.name}),p=t.request=Sr(r(t.data),c,l(a({},E),{headers:u}));p.onload=()=>{t.status=Gr,t.request=null,v()},p.onprogress=(e,r,o)=>{t.progress=e?r:null,w()},p.onerror=e=>{t.status=Fr,t.request=null,t.error=n(e.response)||e.statusText,D(t)||s(Mr("error",e.status,n(e.response)||e.statusText,e.getAllResponseHeaders()))},p.ontimeout=e=>{t.status=Fr,t.request=null,D(t)||br(s)(e)},p.onabort=()=>{t.status=Nr,t.request=null,d()}},D=e=>0!==e.retries.length&&(e.status=Ur,clearTimeout(e.timeout),e.timeout=setTimeout((()=>{O(e)}),e.retries.shift()),!0),w=()=>{const e=f.reduce(((e,t)=>null===e||null===t.progress?null:e+t.progress),0);if(null===e)return c(!1,0,0);const t=f.reduce(((e,t)=>e+t.size),0);c(!0,e,t)},v=()=>{f.filter((e=>e.status===xr)).length>=1||O()};return g.serverId?(r=>{const o=Lr(e,E.url,g.serverId),n={headers:"function"==typeof t.headers?t.headers(g.serverId):a({},t.headers),method:"HEAD"},i=Sr(null,o,n);i.onload=e=>r(I(e,n.method)),i.onerror=e=>s(Mr("error",e.status,y(e.response)||e.statusText,e.getAllResponseHeaders())),i.ontimeout=br(s)})((e=>{g.aborted||(f.filter((t=>t.offset<e)).forEach((e=>{e.status=Gr,e.progress=e.size})),v())})):(i=>{const c=new FormData;ft(n)&&c.append(r,JSON.stringify(n));const d="function"==typeof t.headers?t.headers(o,n):l(a({},t.headers),{"Upload-Length":o.size}),u=l(a({},t),{headers:d}),p=Sr(T(c),Lr(e,t.url),u);p.onload=e=>i(I(e,u.method)),p.onerror=e=>s(Mr("error",e.status,y(e.response)||e.statusText,e.getAllResponseHeaders())),p.ontimeout=br(s)})((e=>{g.aborted||(u(e),g.serverId=e,v())})),{abort:()=>{g.aborted=!0,f.forEach((e=>{clearTimeout(e.timeout),e.request&&e.request.abort()}))}}},Br=(e="",t,r,o)=>"function"==typeof t?(...e)=>t(r,...e,o):t&&nt(t.url)?((e,t,r,o)=>(n,i,s,c,d,u,p)=>{if(!n)return;const f=o.chunkUploads,h=f&&n.size>o.chunkSize,E=f&&(h||o.chunkForce);if(n instanceof Blob&&E)return qr(e,t,r,n,i,s,c,d,u,p,o);const m=t.ondata||(e=>e),_=t.onload||(e=>e),g=t.onerror||(e=>null),T="function"==typeof t.headers?t.headers(n,i)||{}:a({},t.headers),I=l(a({},t),{headers:T});var y=new FormData;ft(i)&&y.append(r,JSON.stringify(i)),(n instanceof Blob?[{name:null,file:n}]:n).forEach((e=>{y.append(r,e.file,null===e.name?e.file.name:`${e.name}${e.file.name}`)}));const R=Sr(m(y),Lr(e,t.url),I);return R.onload=e=>{s(Mr("load",e.status,_(e.response),e.getAllResponseHeaders()))},R.onerror=e=>{c(Mr("error",e.status,g(e.response)||e.statusText,e.getAllResponseHeaders()))},R.ontimeout=br(c),R.onprogress=d,R.onabort=u,R})(e,t,r,o):null,Vr=(e="",t)=>{if("function"==typeof t)return t;if(!t||!nt(t.url))return(e,t)=>t();const r=t.onload||(e=>e),o=t.onerror||(e=>null);return(n,i,s)=>{const a=Sr(n,e+t.url,t);return a.onload=e=>{i(Mr("load",e.status,r(e.response),e.getAllResponseHeaders()))},a.onerror=e=>{s(Mr("error",e.status,o(e.response)||e.statusText,e.getAllResponseHeaders()))},a.ontimeout=br(s),a}},$r=(e=0,t=1)=>e+Math.random()*(t-e),kr=(e,t)=>{const r={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},{allowMinimumUploadDuration:o}=t,n=()=>{r.request&&(r.perceivedPerformanceUpdater.clear(),r.request.abort&&r.request.abort(),r.complete=!0)},i=o?()=>r.progress?Math.min(r.progress,r.perceivedProgress):null:()=>r.progress||null,s=o?()=>Math.min(r.duration,r.perceivedDuration):()=>r.duration,c=l(a({},St()),{process:(t,n)=>{const i=()=>{0!==r.duration&&null!==r.progress&&c.fire("progress",c.getProgress())},s=()=>{r.complete=!0,c.fire("load-perceived",r.response.body)};c.fire("start"),r.timestamp=Date.now(),r.perceivedPerformanceUpdater=((e,t=1e3,r=0,o=25,n=250)=>{let i=null;const s=Date.now(),a=()=>{let r=Date.now()-s,l=$r(o,n);r+l>t&&(l=r+l-t);let c=r/t;c>=1||document.hidden?e(1):(e(c),i=setTimeout(a,l))};return t>0&&a(),{clear:()=>{clearTimeout(i)}}})((e=>{r.perceivedProgress=e,r.perceivedDuration=Date.now()-r.timestamp,i(),r.response&&1===r.perceivedProgress&&!r.complete&&s()}),o?$r(750,1500):0),r.request=e(t,n,(e=>{r.response=ft(e)?e:{type:"load",code:200,body:`${e}`,headers:{}},r.duration=Date.now()-r.timestamp,r.progress=1,c.fire("load",r.response.body),(!o||o&&1===r.perceivedProgress)&&s()}),(e=>{r.perceivedPerformanceUpdater.clear(),c.fire("error",ft(e)?e:{type:"error",code:0,body:`${e}`})}),((e,t,o)=>{r.duration=Date.now()-r.timestamp,r.progress=e?t/o:null,i()}),(()=>{r.perceivedPerformanceUpdater.clear(),c.fire("abort",r.response?r.response.body:null)}),(e=>{c.fire("transfer",e)}))},abort:n,getProgress:i,getDuration:s,reset:()=>{n(),r.complete=!1,r.perceivedProgress=0,r.progress=0,r.timestamp=null,r.perceivedDuration=0,r.duration=0,r.request=null,r.response=null}});return c},Yr=e=>e.substr(0,e.lastIndexOf("."))||e,Hr=e=>!!(e instanceof File||e instanceof Blob&&e.name),Wr=e=>{if(!ft(e))return e;const t=Ke(e)?[]:{};for(const r in e){if(!e.hasOwnProperty(r))continue;const o=e[r];t[r]=o&&ft(o)?Wr(o):o}return t},zr=(e=null,t=null,r=null)=>{const o=wt(),n={archived:!1,frozen:!1,released:!1,source:null,file:r,serverFileReference:t,transferId:null,processingAborted:!1,status:t?xt:Lt,activeLoader:null,activeProcessor:null};let i=null;const s={},c=e=>n.status=e,d=(e,...t)=>{n.released||n.frozen||f.fire(e,...t)},u=(e,t)=>{if(n.processingAborted)return void(n.processingAborted=!1);if(c(Gt),i=null,!(n.file instanceof Blob))return void f.on("load",(()=>{u(e,t)}));e.on("load",(e=>{n.transferId=null,n.serverFileReference=e})),e.on("transfer",(e=>{n.transferId=e})),e.on("load-perceived",(e=>{n.activeProcessor=null,n.transferId=null,n.serverFileReference=e,c(xt),d("process-complete",e)})),e.on("start",(()=>{d("process-start")})),e.on("error",(e=>{n.activeProcessor=null,c(Ft),d("process-error",e)})),e.on("abort",(e=>{n.activeProcessor=null,n.transferId=null,n.serverFileReference=e,c(Ct),d("process-abort"),i&&i()})),e.on("progress",(e=>{d("process-progress",e)}));const r=console.error;t(n.file,(t=>{n.archived||e.process(t,a({},s))}),r),n.activeProcessor=e},p=(e,t,r)=>{const o=e.split("."),n=o[0],i=o.pop();let a=s;o.forEach((e=>a=a[e])),JSON.stringify(a[i])!==JSON.stringify(t)&&(a[i]=t,d("metadata-update",{key:n,value:s[n],silent:r}))},f=l(a({id:{get:()=>o},origin:{get:()=>e,set:t=>e=t},serverId:{get:()=>n.serverFileReference},transferId:{get:()=>n.transferId},status:{get:()=>n.status},filename:{get:()=>n.file.name},filenameWithoutExtension:{get:()=>Yr(n.file.name)},fileExtension:{get:()=>Er(n.file.name)},fileType:{get:()=>n.file.type},fileSize:{get:()=>n.file.size},file:{get:()=>n.file},relativePath:{get:()=>n.file._relativePath},source:{get:()=>n.source},getMetadata:e=>Wr(e?s[e]:s),setMetadata:(e,t,r)=>{if(ft(e)){const r=e;return Object.keys(r).forEach((e=>{p(e,r[e],t)})),e}return p(e,t,r),t},extend:(e,t)=>h[e]=t,abortLoad:()=>{n.activeLoader?n.activeLoader.abort():(c(Lt),d("load-abort"))},retryLoad:()=>{n.activeLoader&&n.activeLoader.load()},requestProcessing:()=>{n.processingAborted=!1,c(Nt)},abortProcessing:()=>new Promise((e=>{if(!n.activeProcessor)return n.processingAborted=!0,c(Ct),d("process-abort"),void e();i=()=>{e()},n.activeProcessor.abort()})),load:(t,r,o)=>{n.source=t,f.fireSync("init"),n.file?f.fireSync("load-skip"):(n.file=(e=>{let t=[e.name,e.size,e.type];return e instanceof Blob||fr(e)?t[0]=e.name||_r():fr(e)?(t[1]=e.length,t[2]=Ir(e)):nt(e)&&(t[0]=hr(e),t[1]=0,t[2]="application/octet-stream"),{name:t[0],size:t[1],type:t[2]}})(t),r.on("init",(()=>{d("load-init")})),r.on("meta",(t=>{n.file.size=t.size,n.file.filename=t.filename,t.source&&(e=$t,n.serverFileReference=t.source,n.status=xt),d("load-meta")})),r.on("progress",(e=>{c(qt),d("load-progress",e)})),r.on("error",(e=>{c(Bt),d("load-request-error",e)})),r.on("abort",(()=>{c(Lt),d("load-abort")})),r.on("load",(t=>{n.activeLoader=null;const r=t=>{n.file=Hr(t)?t:n.file,e===$t&&n.serverFileReference?c(xt):c(Ct),d("load")};n.serverFileReference?r(t):o(t,r,(e=>{n.file=t,d("load-meta"),c(Bt),d("load-file-error",e)}))})),r.setSource(t),n.activeLoader=r,r.load())},process:u,revert:(e,t)=>new Promise(((r,o)=>{null!==n.serverFileReference?(e(n.serverFileReference,(()=>{n.serverFileReference=null,r()}),(e=>{t?(c(Ut),d("process-revert-error"),o(e)):r()})),c(Ct),d("process-revert")):r()}))},St()),{freeze:()=>n.frozen=!0,release:()=>n.released=!0,released:{get:()=>n.released},archive:()=>n.archived=!0,archived:{get:()=>n.archived}}),h=De(f);return h},Xr=(e,t)=>{const r=((e,t)=>Je(t)?0:nt(t)?e.findIndex((e=>e.id===t)):-1)(e,t);if(!(r<0))return e[r]||null},jr=(e,t,r,o,n,i)=>{const s=Sr(null,e,{method:"GET",responseType:"blob"});return s.onload=r=>{const o=r.getAllResponseHeaders(),n=Dr(o).name||hr(e);t(Mr("load",r.status,gr(r.response,n),o))},s.onerror=e=>{r(Mr("error",e.status,e.statusText,e.getAllResponseHeaders()))},s.onheaders=e=>{i(Mr("headers",e.status,null,e.getAllResponseHeaders()))},s.ontimeout=br(r),s.onprogress=o,s.onabort=n,s},Qr=e=>(0===e.indexOf("//")&&(e=location.protocol+e),e.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]),Zr=e=>(...t)=>dt(e)?e(...t):e,Kr=(e,t)=>{clearTimeout(t.listUpdateTimeout),t.listUpdateTimeout=setTimeout((()=>{e("DID_UPDATE_ITEMS",{items:tr(t.items)})}),0)},Jr=(e,...t)=>new Promise((r=>{if(!e)return r(!0);const o=e(...t);return null==o?r(!0):"boolean"==typeof o?r(o):void("function"==typeof o.then&&o.then(r))})),eo=(e,t)=>{e.items.sort(((e,r)=>t(Pt(e),Pt(r))))},to=(e,t)=>(r={})=>{var s=r,{query:a,success:l=(()=>{}),failure:c=(()=>{})}=s,d=((e,t)=>{var r={};for(var s in e)n.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&o)for(var s of o(e))t.indexOf(s)<0&&i.call(e,s)&&(r[s]=e[s]);return r})(s,["query","success","failure"]);const u=Jt(e.items,a);u?t(u,l,c,d||{}):c({error:Mr("error",0,"Item not found"),file:null})},ro=(e,t,r)=>({ABORT_ALL:()=>{tr(r.items).forEach((e=>{e.freeze(),e.abortLoad(),e.abortProcessing()}))},DID_SET_FILES:({value:t=[]})=>{const o=t.map((e=>({source:e.source?e.source:e,options:e.options})));let n=tr(r.items);n.forEach((t=>{o.find((e=>e.source===t.source||e.source===t.file))||e("REMOVE_ITEM",{query:t,remove:!1})})),n=tr(r.items),o.forEach(((t,r)=>{n.find((e=>e.source===t.source||e.file===t.source))||e("ADD_ITEM",l(a({},t),{interactionMethod:Dt,index:r}))}))},DID_UPDATE_ITEM_METADATA:({id:o,action:n,change:i})=>{i.silent||(clearTimeout(r.itemUpdateTimeout),r.itemUpdateTimeout=setTimeout((()=>{const s=Xr(r.items,o);if(!t("IS_ASYNC"))return void Xt("SHOULD_PREPARE_OUTPUT",!1,{item:s,query:t,action:n,change:i}).then((r=>{const n=t("GET_BEFORE_PREPARE_FILE");n&&(r=n(s,r)),r&&e("REQUEST_PREPARE_OUTPUT",{query:o,item:s,success:t=>{e("DID_PREPARE_OUTPUT",{id:o,file:t})}},!0)}));s.origin===kt&&e("DID_LOAD_ITEM",{id:s.id,error:null,serverFileReference:s.source});const a=()=>{setTimeout((()=>{e("REQUEST_ITEM_PROCESSING",{query:o})}),32)};return s.status===xt?(l=r.options.instantUpload,void s.revert(Vr(r.options.server.url,r.options.server.revert),t("GET_FORCE_REVERT")).then(l?a:()=>{}).catch((()=>{}))):s.status===Gt?(e=>{s.abortProcessing().then(e?a:()=>{})})(r.options.instantUpload):void(r.options.instantUpload&&a());var l}),0))},MOVE_ITEM:({query:e,index:t})=>{const o=Jt(r.items,e);if(!o)return;const n=r.items.indexOf(o);n!==(t=pr(t,0,r.items.length-1))&&r.items.splice(t,0,r.items.splice(n,1)[0])},SORT:({compare:o})=>{eo(r,o),e("DID_SORT_ITEMS",{items:t("GET_ACTIVE_ITEMS")})},ADD_ITEMS:({items:r,index:o,interactionMethod:n,success:i=(()=>{}),failure:s=(()=>{})})=>{let a=o;if(-1===o||void 0===o){const e=t("GET_ITEM_INSERT_LOCATION"),r=t("GET_TOTAL_ITEMS");a="before"===e?0:r}const l=t("GET_IGNORED_FILES"),c=r.filter((e=>Hr(e)?!l.includes(e.name.toLowerCase()):!Je(e))).map((t=>new Promise(((r,o)=>{e("ADD_ITEM",{interactionMethod:n,source:t.source||t,success:r,failure:o,index:a++,options:t.options||{}})}))));Promise.all(c).then(i).catch(s)},ADD_ITEM:({source:o,index:n=-1,interactionMethod:i,success:s=(()=>{}),failure:a=(()=>{}),options:l={}})=>{if(Je(o))return void a({error:Mr("error",0,"No source"),file:null});if(Hr(o)&&r.options.ignoredFiles.includes(o.name.toLowerCase()))return;if(!(e=>{const t=tr(e.items).length;if(!e.options.allowMultiple)return 0===t;const r=e.options.maxFiles;return null===r||t<r})(r)){if(r.options.allowMultiple||!r.options.allowMultiple&&!r.options.allowReplace){const t=Mr("warning",0,"Max files");return e("DID_THROW_MAX_FILES",{source:o,error:t}),void a({error:t,file:null})}const c=tr(r.items)[0];if(c.status===xt||c.status===Ut){const d=t("GET_FORCE_REVERT");if(c.revert(Vr(r.options.server.url,r.options.server.revert),d).then((()=>{d&&e("ADD_ITEM",{source:o,index:n,interactionMethod:i,success:s,failure:a,options:l})})).catch((()=>{})),d)return}e("REMOVE_ITEM",{query:c.id})}const c="local"===l.type?kt:"limbo"===l.type?$t:Vt,d=zr(c,c===Vt?null:o,l.file);Object.keys(l.metadata||{}).forEach((e=>{d.setMetadata(e,l.metadata[e])})),jt("DID_CREATE_ITEM",d,{query:t,dispatch:e});const u=t("GET_ITEM_INSERT_LOCATION");r.options.itemInsertLocationFreedom||(n="before"===u?-1:r.items.length),((e,t,r)=>{Je(t)||(void 0===r?e.push(t):((e,t,r)=>{e.splice(t,0,r)})(e,r=pr(r,0,e.length),t))})(r.items,d,n),dt(u)&&o&&eo(r,u);const p=d.id;d.on("init",(()=>{e("DID_INIT_ITEM",{id:p})})),d.on("load-init",(()=>{e("DID_START_ITEM_LOAD",{id:p})})),d.on("load-meta",(()=>{e("DID_UPDATE_ITEM_META",{id:p})})),d.on("load-progress",(t=>{e("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:p,progress:t})})),d.on("load-request-error",(t=>{const o=Zr(r.options.labelFileLoadError)(t);if(t.code>=400&&t.code<500)return e("DID_THROW_ITEM_INVALID",{id:p,error:t,status:{main:o,sub:`${t.code} (${t.body})`}}),void a({error:t,file:Pt(d)});e("DID_THROW_ITEM_LOAD_ERROR",{id:p,error:t,status:{main:o,sub:r.options.labelTapToRetry}})})),d.on("load-file-error",(t=>{e("DID_THROW_ITEM_INVALID",{id:p,error:t.status,status:t.status}),a({error:t.status,file:Pt(d)})})),d.on("load-abort",(()=>{e("REMOVE_ITEM",{query:p})})),d.on("load-skip",(()=>{e("COMPLETE_LOAD_ITEM",{query:p,item:d,data:{source:o,success:s}})})),d.on("load",(()=>{const n=n=>{n?(d.on("metadata-update",(t=>{e("DID_UPDATE_ITEM_METADATA",{id:p,change:t})})),Xt("SHOULD_PREPARE_OUTPUT",!1,{item:d,query:t}).then((n=>{const i=t("GET_BEFORE_PREPARE_FILE");i&&(n=i(d,n));const a=()=>{e("COMPLETE_LOAD_ITEM",{query:p,item:d,data:{source:o,success:s}}),Kr(e,r)};n?e("REQUEST_PREPARE_OUTPUT",{query:p,item:d,success:t=>{e("DID_PREPARE_OUTPUT",{id:p,file:t}),a()}},!0):a()}))):e("REMOVE_ITEM",{query:p})};Xt("DID_LOAD_ITEM",d,{query:t,dispatch:e}).then((()=>{Jr(t("GET_BEFORE_ADD_FILE"),Pt(d)).then(n)})).catch((()=>{n(!1)}))})),d.on("process-start",(()=>{e("DID_START_ITEM_PROCESSING",{id:p})})),d.on("process-progress",(t=>{e("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:p,progress:t})})),d.on("process-error",(t=>{e("DID_THROW_ITEM_PROCESSING_ERROR",{id:p,error:t,status:{main:Zr(r.options.labelFileProcessingError)(t),sub:r.options.labelTapToRetry}})})),d.on("process-revert-error",(t=>{e("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:p,error:t,status:{main:Zr(r.options.labelFileProcessingRevertError)(t),sub:r.options.labelTapToRetry}})})),d.on("process-complete",(t=>{e("DID_COMPLETE_ITEM_PROCESSING",{id:p,error:null,serverFileReference:t}),e("DID_DEFINE_VALUE",{id:p,value:t})})),d.on("process-abort",(()=>{e("DID_ABORT_ITEM_PROCESSING",{id:p})})),d.on("process-revert",(()=>{e("DID_REVERT_ITEM_PROCESSING",{id:p}),e("DID_DEFINE_VALUE",{id:p,value:null})})),e("DID_ADD_ITEM",{id:p,index:n,interactionMethod:i}),Kr(e,r);const{url:f,load:h,restore:E,fetch:m}=r.options.server||{};d.load(o,wr(c===Vt?nt(o)&&(e=>(e.indexOf(":")>-1||e.indexOf("//")>-1)&&Qr(location.href)!==Qr(e))(o)&&m?Cr(f,m):jr:Cr(f,c===$t?E:h)),((e,r,o)=>{Xt("LOAD_FILE",e,{query:t}).then(r).catch(o)}))},REQUEST_PREPARE_OUTPUT:({item:e,success:r,failure:o=(()=>{})})=>{const n={error:Mr("error",0,"Item not found"),file:null};if(e.archived)return o(n);Xt("PREPARE_OUTPUT",e.file,{query:t,item:e}).then((i=>{Xt("COMPLETE_PREPARE_OUTPUT",i,{query:t,item:e}).then((t=>{if(e.archived)return o(n);r(t)}))}))},COMPLETE_LOAD_ITEM:({item:o,data:n})=>{const{success:i,source:s}=n,a=t("GET_ITEM_INSERT_LOCATION");if(dt(a)&&s&&eo(r,a),e("DID_LOAD_ITEM",{id:o.id,error:null,serverFileReference:o.origin===Vt?null:s}),i(Pt(o)),o.origin!==kt)return o.origin===$t?(e("DID_COMPLETE_ITEM_PROCESSING",{id:o.id,error:null,serverFileReference:s}),void e("DID_DEFINE_VALUE",{id:o.id,value:o.serverId||s})):void(t("IS_ASYNC")&&r.options.instantUpload&&e("REQUEST_ITEM_PROCESSING",{query:o.id}));e("DID_LOAD_LOCAL_ITEM",{id:o.id})},RETRY_ITEM_LOAD:to(r,(e=>{e.retryLoad()})),REQUEST_ITEM_PREPARE:to(r,((t,r,o)=>{e("REQUEST_PREPARE_OUTPUT",{query:t.id,item:t,success:o=>{e("DID_PREPARE_OUTPUT",{id:t.id,file:o}),r({file:t,output:o})},failure:o},!0)})),REQUEST_ITEM_PROCESSING:to(r,((o,n,i)=>{if(o.status===Ct||o.status===Ft)o.status!==Nt&&(o.requestProcessing(),e("DID_REQUEST_ITEM_PROCESSING",{id:o.id}),e("PROCESS_ITEM",{query:o,success:n,failure:i},!0));else{const s=()=>e("REQUEST_ITEM_PROCESSING",{query:o,success:n,failure:i}),a=()=>document.hidden?s():setTimeout(s,32);o.status===xt||o.status===Ut?o.revert(Vr(r.options.server.url,r.options.server.revert),t("GET_FORCE_REVERT")).then(a).catch((()=>{})):o.status===Gt&&o.abortProcessing().then(a)}})),PROCESS_ITEM:to(r,((o,n,i)=>{const s=t("GET_MAX_PARALLEL_UPLOADS");if(t("GET_ITEMS_BY_STATUS",Gt).length===s)return void r.processingQueue.push({id:o.id,success:n,failure:i});if(o.status===Gt)return;const a=()=>{const t=r.processingQueue.shift();if(!t)return;const{id:o,success:n,failure:i}=t,s=Jt(r.items,o);s&&!s.archived?e("PROCESS_ITEM",{query:o,success:n,failure:i},!0):a()};o.onOnce("process-complete",(()=>{n(Pt(o)),a();const i=r.options.server;if(r.options.instantUpload&&o.origin===kt&&dt(i.remove)){const e=()=>{};o.origin=$t,r.options.server.remove(o.source,e,e)}t("GET_ITEMS_BY_STATUS",xt).length===r.items.length&&e("DID_COMPLETE_ITEM_PROCESSING_ALL")})),o.onOnce("process-error",(e=>{i({error:e,file:Pt(o)}),a()}));const l=r.options;o.process(kr(Br(l.server.url,l.server.process,l.name,{chunkTransferId:o.transferId,chunkServer:l.server.patch,chunkUploads:l.chunkUploads,chunkForce:l.chunkForce,chunkSize:l.chunkSize,chunkRetryDelays:l.chunkRetryDelays}),{allowMinimumUploadDuration:t("GET_ALLOW_MINIMUM_UPLOAD_DURATION")}),((r,n,i)=>{Xt("PREPARE_OUTPUT",r,{query:t,item:o}).then((t=>{e("DID_PREPARE_OUTPUT",{id:o.id,file:t}),n(t)})).catch(i)}))})),RETRY_ITEM_PROCESSING:to(r,(t=>{e("REQUEST_ITEM_PROCESSING",{query:t})})),REQUEST_REMOVE_ITEM:to(r,(r=>{Jr(t("GET_BEFORE_REMOVE_FILE"),Pt(r)).then((t=>{t&&e("REMOVE_ITEM",{query:r})}))})),RELEASE_ITEM:to(r,(e=>{e.release()})),REMOVE_ITEM:to(r,((o,n,i,s)=>{const a=()=>{const t=o.id;Xr(r.items,t).archive(),e("DID_REMOVE_ITEM",{error:null,id:t,item:o}),Kr(e,r),n(Pt(o))},l=r.options.server;o.origin===kt&&l&&dt(l.remove)&&!1!==s.remove?(e("DID_START_ITEM_REMOVE",{id:o.id}),l.remove(o.source,(()=>a()),(t=>{e("DID_THROW_ITEM_REMOVE_ERROR",{id:o.id,error:Mr("error",0,t,null),status:{main:Zr(r.options.labelFileRemoveError)(t),sub:r.options.labelTapToRetry}})}))):(s.revert&&o.origin!==kt&&null!==o.serverId&&o.revert(Vr(r.options.server.url,r.options.server.revert),t("GET_FORCE_REVERT")),a())})),ABORT_ITEM_LOAD:to(r,(e=>{e.abortLoad()})),ABORT_ITEM_PROCESSING:to(r,(t=>{t.serverId?e("REVERT_ITEM_PROCESSING",{id:t.id}):t.abortProcessing().then((()=>{r.options.instantUpload&&e("REMOVE_ITEM",{query:t.id})}))})),REQUEST_REVERT_ITEM_PROCESSING:to(r,(o=>{if(!r.options.instantUpload)return void e("REVERT_ITEM_PROCESSING",{query:o});const n=t=>{t&&e("REVERT_ITEM_PROCESSING",{query:o})},i=t("GET_BEFORE_REMOVE_FILE");if(!i)return n(!0);const s=i(Pt(o));return null==s?n(!0):"boolean"==typeof s?n(s):void("function"==typeof s.then&&s.then(n))})),REVERT_ITEM_PROCESSING:to(r,(o=>{o.revert(Vr(r.options.server.url,r.options.server.revert),t("GET_FORCE_REVERT")).then((()=>{(r.options.instantUpload||(e=>!Hr(e.file))(o))&&e("REMOVE_ITEM",{query:o.id})})).catch((()=>{}))})),SET_OPTIONS:({options:t})=>{Oe(t,((t,r)=>{e(`SET_${gt(t,"_").toUpperCase()}`,{value:r})}))}}),oo=e=>document.createElement(e),no=(e,t)=>{let r=e.childNodes[0];r?t!==r.nodeValue&&(r.nodeValue=t):(r=document.createTextNode(t),e.appendChild(r))},io=(e,t,r,o)=>{const n=(o%360-90)*Math.PI/180;return{x:e+r*Math.cos(n),y:t+r*Math.sin(n)}},so=(e,t,r,o,n)=>{let i=1;return n>o&&n-o<=.5&&(i=0),o>n&&o-n>=.5&&(i=0),((e,t,r,o,n,i)=>{const s=io(e,t,r,n),a=io(e,t,r,o);return["M",s.x,s.y,"A",r,r,0,i,0,a.x,a.y].join(" ")})(e,t,r,360*Math.min(.9999,o),360*Math.min(.9999,n),i)},ao=Xe({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:({root:e,props:t})=>{t.spin=!1,t.progress=0,t.opacity=0;const r=Me("svg");e.ref.path=Me("path",{"stroke-width":2,"stroke-linecap":"round"}),r.appendChild(e.ref.path),e.ref.svg=r,e.appendChild(r)},write:({root:e,props:t})=>{if(0===t.opacity)return;t.align&&(e.element.dataset.align=t.align);const r=parseInt(we(e.ref.path,"stroke-width"),10),o=.5*e.rect.element.width;let n=0,i=0;t.spin?(n=0,i=.5):(n=0,i=t.progress);const s=so(o,o,o-r,n,i);we(e.ref.path,"d",s),we(e.ref.path,"stroke-opacity",t.spin||t.progress>0?1:0)},mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),lo=Xe({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:({root:e,props:t})=>{e.element.innerHTML=(t.icon||"")+`<span>${t.label}</span>`,t.isDisabled=!1},write:({root:e,props:t})=>{const{isDisabled:r}=t,o=e.query("GET_DISABLED")||0===t.opacity;o&&!r?(t.isDisabled=!0,we(e.element,"disabled","disabled")):!o&&r&&(t.isDisabled=!1,e.element.removeAttribute("disabled"))}}),co=(e,t=".",r=1e3)=>{const o=r,n=r*r,i=r*r*r;return(e=Math.round(Math.abs(e)))<o?`${e} bytes`:e<n?`${Math.floor(e/o)} KB`:e<i?`${uo(e/n,1,t)} MB`:`${uo(e/i,2,t)} GB`},uo=(e,t,r)=>e.toFixed(t).split(".").filter((e=>"0"!==e)).join(r),po=({root:e,props:t})=>{no(e.ref.fileSize,co(e.query("GET_ITEM_SIZE",t.id),".",e.query("GET_FILE_SIZE_BASE"))),no(e.ref.fileName,e.query("GET_ITEM_NAME",t.id))},fo=({root:e,props:t})=>{lt(e.query("GET_ITEM_SIZE",t.id))||no(e.ref.fileSize,e.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},ho=Xe({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:je({DID_LOAD_ITEM:po,DID_UPDATE_ITEM_META:po,DID_THROW_ITEM_LOAD_ERROR:fo,DID_THROW_ITEM_INVALID:fo}),didCreateView:e=>{jt("CREATE_VIEW",l(a({},e),{view:e}))},create:({root:e,props:t})=>{const r=oo("span");r.className="filepond--file-info-main",we(r,"aria-hidden","true"),e.appendChild(r),e.ref.fileName=r;const o=oo("span");o.className="filepond--file-info-sub",e.appendChild(o),e.ref.fileSize=o,no(o,e.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),no(r,e.query("GET_ITEM_NAME",t.id))},mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),Eo=e=>Math.round(100*e),mo=({root:e,action:t})=>{const r=null===t.progress?e.query("GET_LABEL_FILE_LOADING"):`${e.query("GET_LABEL_FILE_LOADING")} ${Eo(t.progress)}%`;no(e.ref.main,r),no(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},_o=({root:e})=>{no(e.ref.main,""),no(e.ref.sub,"")},go=({root:e,action:t})=>{no(e.ref.main,t.status.main),no(e.ref.sub,t.status.sub)},To=Xe({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:je({DID_LOAD_ITEM:_o,DID_REVERT_ITEM_PROCESSING:_o,DID_REQUEST_ITEM_PROCESSING:({root:e})=>{no(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING")),no(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},DID_ABORT_ITEM_PROCESSING:({root:e})=>{no(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_ABORTED")),no(e.ref.sub,e.query("GET_LABEL_TAP_TO_RETRY"))},DID_COMPLETE_ITEM_PROCESSING:({root:e})=>{no(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),no(e.ref.sub,e.query("GET_LABEL_TAP_TO_UNDO"))},DID_UPDATE_ITEM_PROCESS_PROGRESS:({root:e,action:t})=>{const r=null===t.progress?e.query("GET_LABEL_FILE_PROCESSING"):`${e.query("GET_LABEL_FILE_PROCESSING")} ${Eo(t.progress)}%`;no(e.ref.main,r),no(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},DID_UPDATE_ITEM_LOAD_PROGRESS:mo,DID_THROW_ITEM_LOAD_ERROR:go,DID_THROW_ITEM_INVALID:go,DID_THROW_ITEM_PROCESSING_ERROR:go,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:go,DID_THROW_ITEM_REMOVE_ERROR:go}),didCreateView:e=>{jt("CREATE_VIEW",l(a({},e),{view:e}))},create:({root:e})=>{const t=oo("span");t.className="filepond--file-status-main",e.appendChild(t),e.ref.main=t;const r=oo("span");r.className="filepond--file-status-sub",e.appendChild(r),e.ref.sub=r,mo({root:e,action:{progress:null}})},mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),Io={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},yo=[];Oe(Io,(e=>{yo.push(e)}));const Ro=e=>{if("right"===wo(e))return 0;const t=e.ref.buttonRemoveItem.rect.element;return t.hidden?null:t.width+t.left},Ao=e=>e.ref.buttonAbortItemLoad.rect.element.width,Oo=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.height/4),Do=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.left/2),wo=e=>e.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION"),vo={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:e=>e.query("GET_STYLE_LOAD_INDICATOR_POSITION")},processProgressIndicator:{opacity:0,align:e=>e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},So={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:Ro},status:{translateX:Ro}},Mo={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},bo={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:Ro},status:{translateX:Ro,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:Ro},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:wo},info:{translateX:Ro},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:wo},buttonRemoveItem:{opacity:1},info:{translateX:Ro},status:{opacity:1,translateX:Ro}},DID_LOAD_ITEM:So,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:Ro},status:{translateX:Ro}},DID_START_ITEM_PROCESSING:Mo,DID_REQUEST_ITEM_PROCESSING:Mo,DID_UPDATE_ITEM_PROCESS_PROGRESS:Mo,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:Ro}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:Ro},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:So},Po=Xe({create:({root:e})=>{e.element.innerHTML=e.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),Lo=je({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:({root:e,action:t})=>{e.ref.buttonAbortItemProcessing.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:({root:e,action:t})=>{e.ref.buttonAbortItemLoad.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:({root:e,action:t})=>{e.ref.buttonAbortItemRemoval.label=t.value},DID_REQUEST_ITEM_PROCESSING:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:({root:e})=>{e.ref.loadProgressIndicator.spin=!0,e.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:({root:e,action:t})=>{e.ref.loadProgressIndicator.spin=!1,e.ref.loadProgressIndicator.progress=t.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:({root:e,action:t})=>{e.ref.processProgressIndicator.spin=!1,e.ref.processProgressIndicator.progress=t.progress}}),Co=Xe({create:({root:e,props:t})=>{const r=Object.keys(Io).reduce(((e,t)=>(e[t]=a({},Io[t]),e)),{}),{id:o}=t,n=e.query("GET_ALLOW_REVERT"),i=e.query("GET_ALLOW_REMOVE"),s=e.query("GET_ALLOW_PROCESS"),l=e.query("GET_INSTANT_UPLOAD"),c=e.query("IS_ASYNC"),d=e.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN");let u;c?s&&!n?u=e=>!/RevertItemProcessing/.test(e):!s&&n?u=e=>!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(e):s||n||(u=e=>!/Process/.test(e)):u=e=>!/Process/.test(e);const p=u?yo.filter(u):yo.concat();if(l&&n&&(r.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",r.RevertItemProcessing.icon="GET_ICON_REMOVE"),c&&!n){const e=bo.DID_COMPLETE_ITEM_PROCESSING;e.info.translateX=Do,e.info.translateY=Oo,e.status.translateY=Oo,e.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(c&&!s&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach((e=>{bo[e].status.translateY=Oo})),bo.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=Ao),d&&n){r.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";const e=bo.DID_COMPLETE_ITEM_PROCESSING;e.info.translateX=Ro,e.status.translateY=Oo,e.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}i||(r.RemoveItem.disabled=!0),Oe(r,((t,r)=>{const n=e.createChildView(lo,{label:e.query(r.label),icon:e.query(r.icon),opacity:0});p.includes(t)&&e.appendChildView(n),r.disabled&&(n.element.setAttribute("disabled","disabled"),n.element.setAttribute("hidden","hidden")),n.element.dataset.align=e.query(`GET_STYLE_${r.align}`),n.element.classList.add(r.className),n.on("click",(t=>{t.stopPropagation(),r.disabled||e.dispatch(r.action,{query:o})})),e.ref[`button${t}`]=n})),e.ref.processingCompleteIndicator=e.appendChildView(e.createChildView(Po)),e.ref.processingCompleteIndicator.element.dataset.align=e.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),e.ref.info=e.appendChildView(e.createChildView(ho,{id:o})),e.ref.status=e.appendChildView(e.createChildView(To,{id:o}));const f=e.appendChildView(e.createChildView(ao,{opacity:0,align:e.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));f.element.classList.add("filepond--load-indicator"),e.ref.loadProgressIndicator=f;const h=e.appendChildView(e.createChildView(ao,{opacity:0,align:e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));h.element.classList.add("filepond--process-indicator"),e.ref.processProgressIndicator=h,e.ref.activeStyles=[]},write:({root:e,actions:t,props:r})=>{Lo({root:e,actions:t,props:r});let o=t.concat().filter((e=>/^DID_/.test(e.type))).reverse().find((e=>bo[e.type]));if(o){e.ref.activeStyles=[];const t=bo[o.type];Oe(vo,((r,o)=>{const n=e.ref[r];Oe(o,((o,i)=>{const s=t[r]&&void 0!==t[r][o]?t[r][o]:i;e.ref.activeStyles.push({control:n,key:o,value:s})}))}))}e.ref.activeStyles.forEach((({control:t,key:r,value:o})=>{t[r]="function"==typeof o?o(e):o}))},didCreateView:e=>{jt("CREATE_VIEW",l(a({},e),{view:e}))},name:"file"}),No=Xe({create:({root:e,props:t})=>{e.ref.fileName=oo("legend"),e.appendChild(e.ref.fileName),e.ref.file=e.appendChildView(e.createChildView(Co,{id:t.id})),e.ref.data=!1},ignoreRect:!0,write:je({DID_LOAD_ITEM:({root:e,props:t})=>{no(e.ref.fileName,e.query("GET_ITEM_NAME",t.id))}}),didCreateView:e=>{jt("CREATE_VIEW",l(a({},e),{view:e}))},tag:"fieldset",name:"file-wrapper"}),Go={type:"spring",damping:.6,mass:7},xo=(e,t,r)=>{const o=Xe({name:`panel-${t.name} filepond--${r}`,mixins:t.mixins,ignoreRectUpdate:!0}),n=e.createChildView(o,t.props);e.ref[t.name]=e.appendChildView(n)},Fo=Xe({name:"panel",read:({root:e,props:t})=>t.heightCurrent=e.ref.bottom.translateY,write:({root:e,props:t})=>{if(null!==e.ref.scalable&&t.scalable===e.ref.scalable||(e.ref.scalable=!rt(t.scalable)||t.scalable,e.element.dataset.scalable=e.ref.scalable),!t.height)return;const r=e.ref.top.rect.element,o=e.ref.bottom.rect.element,n=Math.max(r.height+o.height,t.height);e.ref.center.translateY=r.height,e.ref.center.scaleY=(n-r.height-o.height)/100,e.ref.bottom.translateY=n-o.height},create:({root:e,props:t})=>{[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:Go},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:Go},styles:["translateY"]}}].forEach((r=>{xo(e,r,t.name)})),e.element.classList.add(`filepond--${t.name}`),e.ref.scalable=null},ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),Uo={type:"spring",stiffness:.75,damping:.45,mass:10},qo={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},Bo=je({DID_UPDATE_PANEL_HEIGHT:({root:e,action:t})=>{e.height=t.height}}),Vo=je({DID_GRAB_ITEM:({root:e,props:t})=>{t.dragOrigin={x:e.translateX,y:e.translateY}},DID_DRAG_ITEM:({root:e})=>{e.element.dataset.dragState="drag"},DID_DROP_ITEM:({root:e,props:t})=>{t.dragOffset=null,t.dragOrigin=null,e.element.dataset.dragState="drop"}},(({root:e,actions:t,props:r,shouldOptimize:o})=>{"drop"===e.element.dataset.dragState&&e.scaleX<=1&&(e.element.dataset.dragState="idle");let n=t.concat().filter((e=>/^DID_/.test(e.type))).reverse().find((e=>qo[e.type]));n&&n.type!==r.currentState&&(r.currentState=n.type,e.element.dataset.filepondItemState=qo[r.currentState]||"");const i=e.query("GET_ITEM_PANEL_ASPECT_RATIO")||e.query("GET_PANEL_ASPECT_RATIO");i?o||(e.height=e.rect.element.width*i):(Bo({root:e,actions:t,props:r}),!e.height&&e.ref.container.rect.element.height>0&&(e.height=e.ref.container.rect.element.height)),o&&(e.ref.panel.height=null),e.ref.panel.height=e.height})),$o=Xe({create:({root:e,props:t})=>{if(e.ref.handleClick=r=>e.dispatch("DID_ACTIVATE_ITEM",{id:t.id}),e.element.id=`filepond--item-${t.id}`,e.element.addEventListener("click",e.ref.handleClick),e.ref.container=e.appendChildView(e.createChildView(No,{id:t.id})),e.ref.panel=e.appendChildView(e.createChildView(Fo,{name:"item-panel"})),e.ref.panel.height=null,t.markedForRemoval=!1,!e.query("GET_ALLOW_REORDER"))return;e.element.dataset.dragState="idle";e.element.addEventListener("pointerdown",(r=>{if(!r.isPrimary)return;let o=!1;const n=r.pageX,i=r.pageY;t.dragOrigin={x:e.translateX,y:e.translateY},t.dragCenter={x:r.offsetX,y:r.offsetY};const s=(e=>{const t=e.map((e=>e.id));let r;return{setIndex:e=>{r=e},getIndex:()=>r,getItemIndex:e=>t.indexOf(e.id)}})(e.query("GET_ACTIVE_ITEMS"));e.dispatch("DID_GRAB_ITEM",{id:t.id,dragState:s});const a=r=>{if(!r.isPrimary)return;r.stopPropagation(),r.preventDefault(),t.dragOffset={x:r.pageX-n,y:r.pageY-i};t.dragOffset.x*t.dragOffset.x+t.dragOffset.y*t.dragOffset.y>16&&!o&&(o=!0,e.element.removeEventListener("click",e.ref.handleClick)),e.dispatch("DID_DRAG_ITEM",{id:t.id,dragState:s})},l=r=>{r.isPrimary&&(document.removeEventListener("pointermove",a),document.removeEventListener("pointerup",l),t.dragOffset={x:r.pageX-n,y:r.pageY-i},e.dispatch("DID_DROP_ITEM",{id:t.id,dragState:s}),o&&setTimeout((()=>e.element.addEventListener("click",e.ref.handleClick)),0))};document.addEventListener("pointermove",a),document.addEventListener("pointerup",l)}))},write:Vo,destroy:({root:e,props:t})=>{e.element.removeEventListener("click",e.ref.handleClick),e.dispatch("RELEASE_ITEM",{query:t.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:"spring",scaleY:"spring",translateX:Uo,translateY:Uo,opacity:{type:"tween",duration:150}}}});var ko=(e,t)=>Math.max(1,Math.floor((e+1)/t));const Yo=(e,t,r)=>{if(!r)return;const o=e.rect.element.width,n=t.length;let i=null;if(0===n||r.top<t[0].rect.element.top)return-1;const s=t[0].rect.element,a=s.marginLeft+s.marginRight,l=s.width+a,c=ko(o,l);if(1===c){for(let e=0;e<n;e++){const o=t[e],n=o.rect.outer.top+.5*o.rect.element.height;if(r.top<n)return e}return n}const d=s.marginTop+s.marginBottom,u=s.height+d;for(let p=0;p<n;p++){const e=p%c*l,t=Math.floor(p/c)*u,o=t-s.marginTop,a=e+l,d=t+u+s.marginBottom;if(r.top<d&&r.top>o){if(r.left<a)return p;i=p!==n-1?p:null}}return null!==i?i:n},Ho={height:0,width:0,get getHeight(){return this.height},set setHeight(e){0!==this.height&&0!==e||(this.height=e)},get getWidth(){return this.width},set setWidth(e){0!==this.width&&0!==e||(this.width=e)},setDimensions:function(e,t){0!==this.height&&0!==e||(this.height=e),0!==this.width&&0!==t||(this.width=t)}},Wo=(e,t,r,o=0,n=1)=>{e.dragOffset?(e.translateX=null,e.translateY=null,e.translateX=e.dragOrigin.x+e.dragOffset.x,e.translateY=e.dragOrigin.y+e.dragOffset.y,e.scaleX=1.025,e.scaleY=1.025):(e.translateX=t,e.translateY=r,Date.now()>e.spawnDate&&(0===e.opacity&&zo(e,t,r,o,n),e.scaleX=1,e.scaleY=1,e.opacity=1))},zo=(e,t,r,o,n)=>{e.interactionMethod===Dt?(e.translateX=null,e.translateX=t,e.translateY=null,e.translateY=r):e.interactionMethod===Rt?(e.translateX=null,e.translateX=t-20*o,e.translateY=null,e.translateY=r-10*n,e.scaleX=.8,e.scaleY=.8):e.interactionMethod===At?(e.translateY=null,e.translateY=r-30):e.interactionMethod===yt&&(e.translateX=null,e.translateX=t-30,e.translateY=null)},Xo=e=>e.rect.element.height+.5*e.rect.element.marginBottom+.5*e.rect.element.marginTop,jo=je({DID_ADD_ITEM:({root:e,action:t})=>{const{id:r,index:o,interactionMethod:n}=t;e.ref.addIndex=o;const i=Date.now();let s=i,a=1;if(n!==Dt){a=0;const t=e.query("GET_ITEM_INSERT_INTERVAL"),r=i-e.ref.lastItemSpanwDate;s=r<t?i+(t-r):i}e.ref.lastItemSpanwDate=s,e.appendChildView(e.createChildView($o,{spawnDate:s,id:r,opacity:a,interactionMethod:n}),o)},DID_REMOVE_ITEM:({root:e,action:t})=>{const{id:r}=t,o=e.childViews.find((e=>e.id===r));o&&(o.scaleX=.9,o.scaleY=.9,o.opacity=0,o.markedForRemoval=!0)},DID_DRAG_ITEM:({root:e,action:t})=>{const{id:r,dragState:o}=t,n=e.query("GET_ITEM",{id:r}),i=e.childViews.find((e=>e.id===r)),s=e.childViews.length,a=o.getItemIndex(n);if(!i)return;const l=i.dragOrigin.x+i.dragOffset.x+i.dragCenter.x,c=i.dragOrigin.y+i.dragOffset.y+i.dragCenter.y,d=Xo(i),u=(p=i).rect.element.width+.5*p.rect.element.marginLeft+.5*p.rect.element.marginRight;var p;let f=Math.floor(e.rect.outer.width/u);f>s&&(f=s);const h=Math.floor(s/f+1);Ho.setHeight=d*h,Ho.setWidth=u*f;var E={y:Math.floor(c/d),x:Math.floor(l/u),getGridIndex:function(){return c>Ho.getHeight||c<0||l>Ho.getWidth||l<0?a:this.y*f+this.x},getColIndex:function(){const t=e.query("GET_ACTIVE_ITEMS"),r=e.childViews.filter((e=>e.rect.element.height)),o=t.map((e=>r.find((t=>t.id===e.id)))),n=o.findIndex((e=>e===i)),s=Xo(i),a=o.length;let l=a,d=0,u=0,p=0;for(let e=0;e<a;e++)if(d=Xo(o[e]),p=u,u=p+d,c<u){if(n>e){if(c<p+s){l=e;break}continue}l=e;break}return l}};const m=f>1?E.getGridIndex():E.getColIndex();e.dispatch("MOVE_ITEM",{query:i,index:m});const _=o.getIndex();if(void 0===_||_!==m){if(o.setIndex(m),void 0===_)return;e.dispatch("DID_REORDER_ITEMS",{items:e.query("GET_ACTIVE_ITEMS"),origin:a,target:m})}}}),Qo=Xe({create:({root:e})=>{we(e.element,"role","list"),e.ref.lastItemSpanwDate=Date.now()},write:({root:e,props:t,actions:r,shouldOptimize:o})=>{jo({root:e,props:t,actions:r});const{dragCoordinates:n}=t,i=e.rect.element.width,s=e.childViews.filter((e=>e.rect.element.height)),a=e.query("GET_ACTIVE_ITEMS").map((e=>s.find((t=>t.id===e.id)))).filter((e=>e)),l=n?Yo(e,a,n):null,c=e.ref.addIndex||null;e.ref.addIndex=null;let d=0,u=0,p=0;if(0===a.length)return;const f=a[0].rect.element,h=f.marginTop+f.marginBottom,E=f.marginLeft+f.marginRight,m=f.width+E,_=f.height+h,g=ko(i,m);if(1===g){let e=0,t=0;a.forEach(((r,n)=>{if(l){let e=n-l;t=-2===e?.25*-h:-1===e?.75*-h:0===e?.75*h:1===e?.25*h:0}o&&(r.translateX=null,r.translateY=null),r.markedForRemoval||Wo(r,0,e+t);let i=(r.rect.element.height+h)*(r.markedForRemoval?r.opacity:1);e+=i}))}else{let e=0,t=0;a.forEach(((r,n)=>{n===l&&(d=1),n===c&&(p+=1),r.markedForRemoval&&r.opacity<.5&&(u-=1);const i=n+p+d+u,s=i%g,a=Math.floor(i/g),f=s*m,h=a*_,E=Math.sign(f-e),T=Math.sign(h-t);e=f,t=h,r.markedForRemoval||(o&&(r.translateX=null,r.translateY=null),Wo(r,f,h,E,T))}))}},tag:"ul",name:"list",didWriteView:({root:e})=>{e.childViews.filter((e=>e.markedForRemoval&&0===e.opacity&&e.resting)).forEach((t=>{t._destroy(),e.removeChildView(t)}))},filterFrameActionsForChild:(e,t)=>t.filter((t=>!t.data||!t.data.id||e.id===t.data.id)),mixins:{apis:["dragCoordinates"]}}),Zo=je({DID_DRAG:({root:e,props:t,action:r})=>{e.query("GET_ITEM_INSERT_LOCATION_FREEDOM")&&(t.dragCoordinates={left:r.position.scopeLeft-e.ref.list.rect.element.left,top:r.position.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},DID_END_DRAG:({props:e})=>{e.dragCoordinates=null}}),Ko=Xe({create:({root:e,props:t})=>{e.ref.list=e.appendChildView(e.createChildView(Qo)),t.dragCoordinates=null,t.overflowing=!1},write:({root:e,props:t,actions:r})=>{if(Zo({root:e,props:t,actions:r}),e.ref.list.dragCoordinates=t.dragCoordinates,t.overflowing&&!t.overflow&&(t.overflowing=!1,e.element.dataset.state="",e.height=null),t.overflow){const r=Math.round(t.overflow);r!==e.height&&(t.overflowing=!0,e.element.dataset.state="overflow",e.height=r)}},name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),Jo=(e,t,r,o="")=>{r?we(e,t,o):e.removeAttribute(t)},en=({root:e,action:t})=>{e.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")&&Jo(e.element,"accept",!!t.value,t.value?t.value.join(","):"")},tn=({root:e,action:t})=>{Jo(e.element,"multiple",t.value)},rn=({root:e,action:t})=>{Jo(e.element,"webkitdirectory",t.value)},on=({root:e})=>{const t=e.query("GET_DISABLED"),r=e.query("GET_ALLOW_BROWSE"),o=t||!r;Jo(e.element,"disabled",o)},nn=({root:e,action:t})=>{t.value?0===e.query("GET_TOTAL_ITEMS")&&Jo(e.element,"required",!0):Jo(e.element,"required",!1)},sn=({root:e,action:t})=>{Jo(e.element,"capture",!!t.value,!0===t.value?"":t.value)},an=({root:e})=>{const{element:t}=e;if(e.query("GET_TOTAL_ITEMS")>0)Jo(t,"required",!1),Jo(t,"name",!1);else{Jo(t,"name",!0,e.query("GET_NAME"));e.query("GET_CHECK_VALIDITY")&&t.setCustomValidity(""),e.query("GET_REQUIRED")&&Jo(t,"required",!0)}},ln=Xe({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:({root:e,props:t})=>{e.element.id=`filepond--browser-${t.id}`,we(e.element,"name",e.query("GET_NAME")),we(e.element,"aria-controls",`filepond--assistant-${t.id}`),we(e.element,"aria-labelledby",`filepond--drop-label-${t.id}`),en({root:e,action:{value:e.query("GET_ACCEPTED_FILE_TYPES")}}),tn({root:e,action:{value:e.query("GET_ALLOW_MULTIPLE")}}),rn({root:e,action:{value:e.query("GET_ALLOW_DIRECTORIES_ONLY")}}),on({root:e}),nn({root:e,action:{value:e.query("GET_REQUIRED")}}),sn({root:e,action:{value:e.query("GET_CAPTURE_METHOD")}}),e.ref.handleChange=r=>{if(!e.element.value)return;const o=Array.from(e.element.files).map((e=>(e._relativePath=e.webkitRelativePath,e)));setTimeout((()=>{t.onload(o),(e=>{if(e&&""!==e.value){try{e.value=""}catch(t){}if(e.value){const t=oo("form"),r=e.parentNode,o=e.nextSibling;t.appendChild(e),t.reset(),o?r.insertBefore(e,o):r.appendChild(e)}}})(e.element)}),250)},e.element.addEventListener("change",e.ref.handleChange)},destroy:({root:e})=>{e.element.removeEventListener("change",e.ref.handleChange)},write:je({DID_LOAD_ITEM:an,DID_REMOVE_ITEM:an,DID_THROW_ITEM_INVALID:({root:e})=>{e.query("GET_CHECK_VALIDITY")&&e.element.setCustomValidity(e.query("GET_LABEL_INVALID_FIELD"))},DID_SET_DISABLED:on,DID_SET_ALLOW_BROWSE:on,DID_SET_ALLOW_DIRECTORIES_ONLY:rn,DID_SET_ALLOW_MULTIPLE:tn,DID_SET_ACCEPTED_FILE_TYPES:en,DID_SET_CAPTURE_METHOD:sn,DID_SET_REQUIRED:nn})}),cn=13,dn=32,un=(e,t)=>{e.innerHTML=t;const r=e.querySelector(".filepond--label-action");return r&&we(r,"tabindex","0"),t},pn=Xe({name:"drop-label",ignoreRect:!0,create:({root:e,props:t})=>{const r=oo("label");we(r,"for",`filepond--browser-${t.id}`),we(r,"id",`filepond--drop-label-${t.id}`),we(r,"aria-hidden","true"),e.ref.handleKeyDown=t=>{(t.keyCode===cn||t.keyCode===dn)&&(t.preventDefault(),e.ref.label.click())},e.ref.handleClick=t=>{t.target===r||r.contains(t.target)||e.ref.label.click()},r.addEventListener("keydown",e.ref.handleKeyDown),e.element.addEventListener("click",e.ref.handleClick),un(r,t.caption),e.appendChild(r),e.ref.label=r},destroy:({root:e})=>{e.ref.label.addEventListener("keydown",e.ref.handleKeyDown),e.element.removeEventListener("click",e.ref.handleClick)},write:je({DID_SET_LABEL_IDLE:({root:e,action:t})=>{un(e.ref.label,t.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),fn=Xe({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),hn=je({DID_DRAG:({root:e,action:t})=>{e.ref.blob?(e.ref.blob.translateX=t.position.scopeLeft,e.ref.blob.translateY=t.position.scopeTop,e.ref.blob.scaleX=1,e.ref.blob.scaleY=1,e.ref.blob.opacity=1):(({root:e})=>{const t=.5*e.rect.element.width,r=.5*e.rect.element.height;e.ref.blob=e.appendChildView(e.createChildView(fn,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:t,translateY:r}))})({root:e})},DID_DROP:({root:e})=>{e.ref.blob&&(e.ref.blob.scaleX=2.5,e.ref.blob.scaleY=2.5,e.ref.blob.opacity=0)},DID_END_DRAG:({root:e})=>{e.ref.blob&&(e.ref.blob.opacity=0)}}),En=Xe({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:({root:e,props:t,actions:r})=>{hn({root:e,props:t,actions:r});const{blob:o}=e.ref;0===r.length&&o&&0===o.opacity&&(e.removeChildView(o),e.ref.blob=null)}}),mn=(e,t)=>{try{const r=new DataTransfer;t.forEach((e=>{e instanceof File?r.items.add(e):r.items.add(new File([e],e.name,{type:e.type}))})),e.files=r.files}catch(r){return!1}return!0},_n=(e,t)=>e.ref.fields[t],gn=e=>{e.query("GET_ACTIVE_ITEMS").forEach((t=>{e.ref.fields[t.id]&&e.element.appendChild(e.ref.fields[t.id])}))},Tn=({root:e})=>gn(e),In=je({DID_SET_DISABLED:({root:e})=>{e.element.disabled=e.query("GET_DISABLED")},DID_ADD_ITEM:({root:e,action:t})=>{const r=!(e.query("GET_ITEM",t.id).origin===kt)&&e.query("SHOULD_UPDATE_FILE_INPUT"),o=oo("input");o.type=r?"file":"hidden",o.name=e.query("GET_NAME"),o.disabled=e.query("GET_DISABLED"),e.ref.fields[t.id]=o,gn(e)},DID_LOAD_ITEM:({root:e,action:t})=>{const r=_n(e,t.id);if(!r)return;if(null!==t.serverFileReference&&(r.value=t.serverFileReference),!e.query("SHOULD_UPDATE_FILE_INPUT"))return;const o=e.query("GET_ITEM",t.id);mn(r,[o.file])},DID_REMOVE_ITEM:({root:e,action:t})=>{const r=_n(e,t.id);r&&(r.parentNode&&r.parentNode.removeChild(r),delete e.ref.fields[t.id])},DID_DEFINE_VALUE:({root:e,action:t})=>{const r=_n(e,t.id);r&&(null===t.value?r.removeAttribute("value"):r.value=t.value,gn(e))},DID_PREPARE_OUTPUT:({root:e,action:t})=>{e.query("SHOULD_UPDATE_FILE_INPUT")&&setTimeout((()=>{const r=_n(e,t.id);r&&mn(r,[t.file])}),0)},DID_REORDER_ITEMS:Tn,DID_SORT_ITEMS:Tn}),yn=Xe({tag:"fieldset",name:"data",create:({root:e})=>e.ref.fields={},write:In,ignoreRect:!0}),Rn=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],An=["css","csv","html","txt"],On={zip:"zip|compressed",epub:"application/epub+zip"},Dn=(e="")=>(e=e.toLowerCase(),Rn.includes(e)?"image/"+("jpg"===e?"jpeg":"svg"===e?"svg+xml":e):An.includes(e)?"text/"+e:On[e]||""),wn=e=>new Promise(((t,r)=>{const o=xn(e);if(o.length&&!vn(e))return t(o);Sn(e).then(t)})),vn=e=>!!e.files&&e.files.length>0,Sn=e=>new Promise(((t,r)=>{const o=(e.items?Array.from(e.items):[]).filter((e=>Mn(e))).map((e=>bn(e)));o.length?Promise.all(o).then((e=>{const r=[];e.forEach((e=>{r.push.apply(r,e)})),t(r.filter((e=>e)).map((e=>(e._relativePath||(e._relativePath=e.webkitRelativePath),e))))})).catch(console.error):t(e.files?Array.from(e.files):[])})),Mn=e=>{if(Nn(e)){const t=Gn(e);if(t)return t.isFile||t.isDirectory}return"file"===e.kind},bn=e=>new Promise(((t,r)=>{Cn(e)?Pn(Gn(e)).then(t).catch(r):t([e.getAsFile()])})),Pn=e=>new Promise(((t,r)=>{const o=[];let n=0,i=0;const s=()=>{0===i&&0===n&&t(o)},a=e=>{n++;const t=e.createReader(),l=()=>{t.readEntries((e=>{if(0===e.length)return n--,void s();e.forEach((e=>{e.isDirectory?a(e):(i++,e.file((t=>{const r=Ln(t);e.fullPath&&(r._relativePath=e.fullPath),o.push(r),i--,s()})))})),l()}),r)};l()};a(e)})),Ln=e=>{if(e.type.length)return e;const t=e.lastModifiedDate,r=e.name,o=Dn(Er(e.name));return o.length?((e=e.slice(0,e.size,o)).name=r,e.lastModifiedDate=t,e):e},Cn=e=>Nn(e)&&(Gn(e)||{}).isDirectory,Nn=e=>"webkitGetAsEntry"in e,Gn=e=>e.webkitGetAsEntry(),xn=e=>{let t=[];try{if(t=Un(e),t.length)return t;t=Fn(e)}catch(r){}return t},Fn=e=>{let t=e.getData("url");return"string"==typeof t&&t.length?[t]:[]},Un=e=>{let t=e.getData("text/html");if("string"==typeof t&&t.length){const e=t.match(/src\s*=\s*"(.+?)"/);if(e)return[e[1]]}return[]},qn=[],Bn=e=>({pageLeft:e.pageX,pageTop:e.pageY,scopeLeft:e.offsetX||e.layerX,scopeTop:e.offsetY||e.layerY}),Vn=e=>{const t=qn.find((t=>t.element===e));if(t)return t;const r=$n(e);return qn.push(r),r},$n=e=>{const t=[],r={dragenter:Wn,dragover:zn,dragleave:jn,drop:Xn},o={};Oe(r,((r,n)=>{o[r]=n(e,t),e.addEventListener(r,o[r],!1)}));const n={element:e,addListener:i=>(t.push(i),()=>{t.splice(t.indexOf(i),1),0===t.length&&(qn.splice(qn.indexOf(n),1),Oe(r,(t=>{e.removeEventListener(t,o[t],!1)})))})};return n},kn=(e,t)=>{var r;const o=((e,t)=>("elementFromPoint"in e||(e=document),e.elementFromPoint(t.x,t.y)))("getRootNode"in(r=t)?r.getRootNode():document,{x:e.pageX-window.pageXOffset,y:e.pageY-window.pageYOffset});return o===t||t.contains(o)};let Yn=null;const Hn=(e,t)=>{try{e.dropEffect=t}catch(r){}},Wn=(e,t)=>e=>{e.preventDefault(),Yn=e.target,t.forEach((t=>{const{element:r,onenter:o}=t;kn(e,r)&&(t.state="enter",o(Bn(e)))}))},zn=(e,t)=>e=>{e.preventDefault();const r=e.dataTransfer;wn(r).then((o=>{let n=!1;t.some((t=>{const{filterElement:i,element:s,onenter:a,onexit:l,ondrag:c,allowdrop:d}=t;Hn(r,"copy");const u=d(o);if(u)if(kn(e,s)){if(n=!0,null===t.state)return t.state="enter",void a(Bn(e));if(t.state="over",i&&!u)return void Hn(r,"none");c(Bn(e))}else i&&!n&&Hn(r,"none"),t.state&&(t.state=null,l(Bn(e)));else Hn(r,"none")}))}))},Xn=(e,t)=>e=>{e.preventDefault();const r=e.dataTransfer;wn(r).then((r=>{t.forEach((t=>{const{filterElement:o,element:n,ondrop:i,onexit:s,allowdrop:a}=t;if(t.state=null,!o||kn(e,n))return a(r)?void i(Bn(e),r):s(Bn(e))}))}))},jn=(e,t)=>e=>{Yn===e.target&&t.forEach((t=>{const{onexit:r}=t;t.state=null,r(Bn(e))}))},Qn=(e,t,r)=>{e.classList.add("filepond--hopper");const{catchesDropsOnPage:o,requiresDropOnElement:n,filterItems:i=(e=>e)}=r,s=((e,t,r)=>{const o=Vn(t),n={element:e,filterElement:r,state:null,ondrop:()=>{},onenter:()=>{},ondrag:()=>{},onexit:()=>{},onload:()=>{},allowdrop:()=>{}};return n.destroy=o.addListener(n),n})(e,o?document.documentElement:e,n);let a="",l="";s.allowdrop=e=>t(i(e)),s.ondrop=(e,r)=>{const o=i(r);t(o)?(l="drag-drop",c.onload(o,e)):c.ondragend(e)},s.ondrag=e=>{c.ondrag(e)},s.onenter=e=>{l="drag-over",c.ondragstart(e)},s.onexit=e=>{l="drag-exit",c.ondragend(e)};const c={updateHopperState:()=>{a!==l&&(e.dataset.hopperState=l,a=l)},onload:()=>{},ondragstart:()=>{},ondrag:()=>{},ondragend:()=>{},destroy:()=>{s.destroy()}};return c};let Zn=!1;const Kn=[],Jn=e=>{const t=document.activeElement;if(t&&/textarea|input/i.test(t.nodeName)){let e=!1,r=t;for(;r!==document.body;){if(r.classList.contains("filepond--root")){e=!0;break}r=r.parentNode}if(!e)return}wn(e.clipboardData).then((e=>{e.length&&Kn.forEach((t=>t(e)))}))},ei=()=>{const e=e=>{t.onload(e)},t={destroy:()=>{var t;t=e,vt(Kn,Kn.indexOf(t)),0===Kn.length&&(document.removeEventListener("paste",Jn),Zn=!1)},onload:()=>{}};return(e=>{Kn.includes(e)||(Kn.push(e),Zn||(Zn=!0,document.addEventListener("paste",Jn)))})(e),t};let ti=null,ri=null;const oi=[],ni=(e,t)=>{e.element.textContent=t},ii=(e,t,r)=>{const o=e.query("GET_TOTAL_ITEMS");ni(e,`${r} ${t}, ${o} ${1===o?e.query("GET_LABEL_FILE_COUNT_SINGULAR"):e.query("GET_LABEL_FILE_COUNT_PLURAL")}`),clearTimeout(ri),ri=setTimeout((()=>{(e=>{e.element.textContent=""})(e)}),1500)},si=e=>e.element.parentNode.contains(document.activeElement),ai=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename,o=e.query("GET_LABEL_FILE_PROCESSING_ABORTED");ni(e,`${r} ${o}`)},li=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename;ni(e,`${t.status.main} ${r} ${t.status.sub}`)},ci=Xe({create:({root:e,props:t})=>{e.element.id=`filepond--assistant-${t.id}`,we(e.element,"role","status"),we(e.element,"aria-live","polite"),we(e.element,"aria-relevant","additions")},ignoreRect:!0,ignoreRectUpdate:!0,write:je({DID_LOAD_ITEM:({root:e,action:t})=>{if(!si(e))return;e.element.textContent="";const r=e.query("GET_ITEM",t.id);oi.push(r.filename),clearTimeout(ti),ti=setTimeout((()=>{ii(e,oi.join(", "),e.query("GET_LABEL_FILE_ADDED")),oi.length=0}),750)},DID_REMOVE_ITEM:({root:e,action:t})=>{if(!si(e))return;const r=t.item;ii(e,r.filename,e.query("GET_LABEL_FILE_REMOVED"))},DID_COMPLETE_ITEM_PROCESSING:({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename,o=e.query("GET_LABEL_FILE_PROCESSING_COMPLETE");ni(e,`${r} ${o}`)},DID_ABORT_ITEM_PROCESSING:ai,DID_REVERT_ITEM_PROCESSING:ai,DID_THROW_ITEM_REMOVE_ERROR:li,DID_THROW_ITEM_LOAD_ERROR:li,DID_THROW_ITEM_INVALID:li,DID_THROW_ITEM_PROCESSING_ERROR:li}),tag:"span",name:"assistant"}),di=(e,t="-")=>e.replace(new RegExp(`${t}.`,"g"),(e=>e.charAt(1).toUpperCase())),ui=(e,t=16,r=!0)=>{let o=Date.now(),n=null;return(...i)=>{clearTimeout(n);const s=Date.now()-o,a=()=>{o=Date.now(),e(...i)};s<t?r||(n=setTimeout(a,t-s)):a()}},pi=e=>e.preventDefault(),fi=e=>{const t=e.ref.list.childViews[0].childViews[0];return t?{top:t.rect.element.marginTop,bottom:t.rect.element.marginBottom}:{top:0,bottom:0}},hi=e=>{let t=0,r=0;const o=e.ref.list,n=o.childViews[0],i=n.childViews.filter((e=>e.rect.element.height)),s=e.query("GET_ACTIVE_ITEMS").map((e=>i.find((t=>t.id===e.id)))).filter((e=>e));if(0===s.length)return{visual:t,bounds:r};const a=n.rect.element.width,l=Yo(n,s,o.dragCoordinates),c=s[0].rect.element,d=c.marginTop+c.marginBottom,u=c.marginLeft+c.marginRight,p=c.width+u,f=c.height+d,h=void 0!==l&&l>=0?1:0,E=s.find((e=>e.markedForRemoval&&e.opacity<.45))?-1:0,m=s.length+h+E,_=ko(a,p);return 1===_?s.forEach((e=>{const o=e.rect.element.height+d;r+=o,t+=o*e.opacity})):(r=Math.ceil(m/_)*f,t=r),{visual:t,bounds:r}},Ei=e=>{const t=e.ref.measureHeight||null;return{cappedHeight:parseInt(e.style.maxHeight,10)||null,fixedHeight:0===t?null:t}},mi=(e,t)=>{const r=e.query("GET_ALLOW_REPLACE"),o=e.query("GET_ALLOW_MULTIPLE"),n=e.query("GET_TOTAL_ITEMS");let i=e.query("GET_MAX_FILES");const s=t.length;if(!o&&s>1)return!0;i=o||r?i:1;return!!(lt(i)&&n+s>i)&&(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:Mr("warning",0,"Max files")}),!0)},_i=(e,t,r)=>{const o=e.childViews[0];return Yo(o,t,{left:r.scopeLeft-o.rect.element.left,top:r.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},gi=e=>{const t=e.query("GET_ALLOW_DROP"),r=e.query("GET_DISABLED"),o=t&&!r;if(o&&!e.ref.hopper){const t=Qn(e.element,(t=>{const r=e.query("GET_BEFORE_DROP_FILE")||(()=>!0);return!e.query("GET_DROP_VALIDATION")||t.every((t=>jt("ALLOW_HOPPER_ITEM",t,{query:e.query}).every((e=>!0===e))&&r(t)))}),{filterItems:t=>{const r=e.query("GET_IGNORED_FILES");return t.filter((e=>!Hr(e)||!r.includes(e.name.toLowerCase())))},catchesDropsOnPage:e.query("GET_DROP_ON_PAGE"),requiresDropOnElement:e.query("GET_DROP_ON_ELEMENT")});t.onload=(t,r)=>{const o=e.ref.list.childViews[0].childViews.filter((e=>e.rect.element.height)),n=e.query("GET_ACTIVE_ITEMS").map((e=>o.find((t=>t.id===e.id)))).filter((e=>e));Xt("ADD_ITEMS",t,{dispatch:e.dispatch}).then((t=>{if(mi(e,t))return!1;e.dispatch("ADD_ITEMS",{items:t,index:_i(e.ref.list,n,r),interactionMethod:Rt})})),e.dispatch("DID_DROP",{position:r}),e.dispatch("DID_END_DRAG",{position:r})},t.ondragstart=t=>{e.dispatch("DID_START_DRAG",{position:t})},t.ondrag=ui((t=>{e.dispatch("DID_DRAG",{position:t})})),t.ondragend=t=>{e.dispatch("DID_END_DRAG",{position:t})},e.ref.hopper=t,e.ref.drip=e.appendChildView(e.createChildView(En))}else!o&&e.ref.hopper&&(e.ref.hopper.destroy(),e.ref.hopper=null,e.removeChildView(e.ref.drip))},Ti=(e,t)=>{const r=e.query("GET_ALLOW_BROWSE"),o=e.query("GET_DISABLED"),n=r&&!o;n&&!e.ref.browser?e.ref.browser=e.appendChildView(e.createChildView(ln,l(a({},t),{onload:t=>{Xt("ADD_ITEMS",t,{dispatch:e.dispatch}).then((t=>{if(mi(e,t))return!1;e.dispatch("ADD_ITEMS",{items:t,index:-1,interactionMethod:At})}))}})),0):!n&&e.ref.browser&&(e.removeChildView(e.ref.browser),e.ref.browser=null)},Ii=e=>{const t=e.query("GET_ALLOW_PASTE"),r=e.query("GET_DISABLED"),o=t&&!r;o&&!e.ref.paster?(e.ref.paster=ei(),e.ref.paster.onload=t=>{Xt("ADD_ITEMS",t,{dispatch:e.dispatch}).then((t=>{if(mi(e,t))return!1;e.dispatch("ADD_ITEMS",{items:t,index:-1,interactionMethod:Ot})}))}):!o&&e.ref.paster&&(e.ref.paster.destroy(),e.ref.paster=null)},yi=je({DID_SET_ALLOW_BROWSE:({root:e,props:t})=>{Ti(e,t)},DID_SET_ALLOW_DROP:({root:e})=>{gi(e)},DID_SET_ALLOW_PASTE:({root:e})=>{Ii(e)},DID_SET_DISABLED:({root:e,props:t})=>{gi(e),Ii(e),Ti(e,t);e.query("GET_DISABLED")?e.element.dataset.disabled="disabled":e.element.removeAttribute("data-disabled")}}),Ri=Xe({name:"root",read:({root:e})=>{e.ref.measure&&(e.ref.measureHeight=e.ref.measure.offsetHeight)},create:({root:e,props:t})=>{const r=e.query("GET_ID");r&&(e.element.id=r);const o=e.query("GET_CLASS_NAME");o&&o.split(" ").filter((e=>e.length)).forEach((t=>{e.element.classList.add(t)})),e.ref.label=e.appendChildView(e.createChildView(pn,l(a({},t),{translateY:null,caption:e.query("GET_LABEL_IDLE")}))),e.ref.list=e.appendChildView(e.createChildView(Ko,{translateY:null})),e.ref.panel=e.appendChildView(e.createChildView(Fo,{name:"panel-root"})),e.ref.assistant=e.appendChildView(e.createChildView(ci,a({},t))),e.ref.data=e.appendChildView(e.createChildView(yn,a({},t))),e.ref.measure=oo("div"),e.ref.measure.style.height="100%",e.element.appendChild(e.ref.measure),e.ref.bounds=null,e.query("GET_STYLES").filter((e=>!Je(e.value))).map((({name:t,value:r})=>{e.element.dataset[t]=r})),e.ref.widthPrevious=null,e.ref.widthUpdated=ui((()=>{e.ref.updateHistory=[],e.dispatch("DID_RESIZE_ROOT")}),250),e.ref.previousAspectRatio=null,e.ref.updateHistory=[];const n=window.matchMedia("(pointer: fine) and (hover: hover)").matches,i="PointerEvent"in window;e.query("GET_ALLOW_REORDER")&&i&&!n&&(e.element.addEventListener("touchmove",pi,{passive:!1}),e.element.addEventListener("gesturestart",pi));const s=e.query("GET_CREDITS");if(2===s.length){const t=document.createElement("a");t.className="filepond--credits",t.setAttribute("aria-hidden","true"),t.href=s[0],t.tabindex=-1,t.target="_blank",t.rel="noopener noreferrer",t.textContent=s[1],e.element.appendChild(t),e.ref.credits=t}},write:({root:e,props:t,actions:r})=>{if(yi({root:e,props:t,actions:r}),r.filter((e=>/^DID_SET_STYLE_/.test(e.type))).filter((e=>!Je(e.data.value))).map((({type:t,data:r})=>{const o=di(t.substr(8).toLowerCase(),"_");e.element.dataset[o]=r.value,e.invalidateLayout()})),e.rect.element.hidden)return;e.rect.element.width!==e.ref.widthPrevious&&(e.ref.widthPrevious=e.rect.element.width,e.ref.widthUpdated());let o=e.ref.bounds;o||(o=e.ref.bounds=Ei(e),e.element.removeChild(e.ref.measure),e.ref.measure=null);const{hopper:n,label:i,list:s,panel:a}=e.ref;n&&n.updateHopperState();const l=e.query("GET_PANEL_ASPECT_RATIO"),c=e.query("GET_ALLOW_MULTIPLE"),d=e.query("GET_TOTAL_ITEMS"),u=d===(c?e.query("GET_MAX_FILES")||1e6:1),p=r.find((e=>"DID_ADD_ITEM"===e.type));if(u&&p){const e=p.data.interactionMethod;i.opacity=0,c?i.translateY=-40:e===yt?i.translateX=40:i.translateY=e===At?40:30}else u||(i.opacity=1,i.translateX=0,i.translateY=0);const f=fi(e),h=hi(e),E=i.rect.element.height,m=!c||u?0:E,_=u?s.rect.element.marginTop:0,g=0===d?0:s.rect.element.marginBottom,T=m+_+h.visual+g,I=m+_+h.bounds+g;if(s.translateY=Math.max(0,m-s.rect.element.marginTop)-f.top,l){const t=e.rect.element.width,r=t*l;l!==e.ref.previousAspectRatio&&(e.ref.previousAspectRatio=l,e.ref.updateHistory=[]);const o=e.ref.updateHistory;o.push(t);const n=2;if(o.length>2*n){const e=o.length,t=e-10;let r=0;for(let i=e;i>=t;i--)if(o[i]===o[i-2]&&r++,r>=n)return}a.scalable=!1,a.height=r;const i=r-m-(g-f.bottom)-(u?_:0);h.visual>i?s.overflow=i:s.overflow=null,e.height=r}else if(o.fixedHeight){a.scalable=!1;const e=o.fixedHeight-m-(g-f.bottom)-(u?_:0);h.visual>e?s.overflow=e:s.overflow=null}else if(o.cappedHeight){const t=T>=o.cappedHeight,r=Math.min(o.cappedHeight,T);a.scalable=!0,a.height=t?r:r-f.top-f.bottom;const n=r-m-(g-f.bottom)-(u?_:0);T>o.cappedHeight&&h.visual>n?s.overflow=n:s.overflow=null,e.height=Math.min(o.cappedHeight,I-f.top-f.bottom)}else{const t=d>0?f.top+f.bottom:0;a.scalable=!0,a.height=Math.max(E,T-t),e.height=Math.max(E,I-t)}e.ref.credits&&a.heightCurrent&&(e.ref.credits.style.transform=`translateY(${a.heightCurrent}px)`)},destroy:({root:e})=>{e.ref.paster&&e.ref.paster.destroy(),e.ref.hopper&&e.ref.hopper.destroy(),e.element.removeEventListener("touchmove",pi),e.element.removeEventListener("gesturestart",pi)},mixins:{styles:["height"]}}),Ai=(e={})=>{let t=null;const r=Zt(),o=((e,t=[],r=[])=>{const o=a({},e),n=[],i=[],s=(e,t,r)=>{!r||document.hidden?(u[e]&&u[e](t),n.push({type:e,data:t})):i.push({type:e,data:t})},l=(e,...t)=>d[e]?d[e](...t):null,c={getState:()=>a({},o),processActionQueue:()=>{const e=[...n];return n.length=0,e},processDispatchQueue:()=>{const e=[...i];i.length=0,e.forEach((({type:e,data:t})=>{s(e,t)}))},dispatch:s,query:l};let d={};t.forEach((e=>{d=a(a({},e(o)),d)}));let u={};return r.forEach((e=>{u=a(a({},e(s,l,o)),u)})),c})({items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:_t(r)},[ur,It(r)],[ro,Tt(r)]);o.dispatch("SET_OPTIONS",{options:e});const n=()=>{document.hidden||o.dispatch("KICK")};document.addEventListener("visibilitychange",n);let i=null,s=!1,c=!1,d=null,u=null;const p=()=>{s||(s=!0),clearTimeout(i),i=setTimeout((()=>{s=!1,d=null,u=null,c&&(c=!1,o.dispatch("DID_STOP_RESIZE"))}),500)};window.addEventListener("resize",p);const f=Ri(o,{id:wt()});let h=!1,E=!1;const m={_read:()=>{s&&(u=window.innerWidth,d||(d=u),c||u===d||(o.dispatch("DID_START_RESIZE"),c=!0)),E&&h&&(h=null===f.element.offsetParent),h||(f._read(),E=f.rect.element.hidden)},_write:e=>{const t=o.processActionQueue().filter((e=>!/^SET_/.test(e.type)));var r;h&&!t.length||(I(t),h=f._write(e,t,c),(r=o.query("GET_ITEMS")).forEach(((e,t)=>{e.released&&vt(r,t)})),h&&o.processDispatchQueue())}},_=e=>t=>{const r={type:e};if(!t)return r;if(t.hasOwnProperty("error")&&(r.error=t.error?a({},t.error):null),t.status&&(r.status=a({},t.status)),t.file&&(r.output=t.file),t.source)r.file=t.source;else if(t.item||t.id){const e=t.item?t.item:o.query("GET_ITEM",t.id);r.file=e?Pt(e):null}return t.items&&(r.items=t.items.map(Pt)),/progress/.test(e)&&(r.progress=t.progress),t.hasOwnProperty("origin")&&t.hasOwnProperty("target")&&(r.origin=t.origin,r.target=t.target),r},g={DID_DESTROY:_("destroy"),DID_INIT:_("init"),DID_THROW_MAX_FILES:_("warning"),DID_INIT_ITEM:_("initfile"),DID_START_ITEM_LOAD:_("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:_("addfileprogress"),DID_LOAD_ITEM:_("addfile"),DID_THROW_ITEM_INVALID:[_("error"),_("addfile")],DID_THROW_ITEM_LOAD_ERROR:[_("error"),_("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[_("error"),_("removefile")],DID_PREPARE_OUTPUT:_("preparefile"),DID_START_ITEM_PROCESSING:_("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:_("processfileprogress"),DID_ABORT_ITEM_PROCESSING:_("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:_("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:_("processfiles"),DID_REVERT_ITEM_PROCESSING:_("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[_("error"),_("processfile")],DID_REMOVE_ITEM:_("removefile"),DID_UPDATE_ITEMS:_("updatefiles"),DID_ACTIVATE_ITEM:_("activatefile"),DID_REORDER_ITEMS:_("reorderfiles")},T=e=>{const t=a({pond:w},e);delete t.type,f.element.dispatchEvent(new CustomEvent(`FilePond:${e.type}`,{detail:t,bubbles:!0,cancelable:!0,composed:!0}));const r=[];e.hasOwnProperty("error")&&r.push(e.error),e.hasOwnProperty("file")&&r.push(e.file);const n=["type","error","file"];Object.keys(e).filter((e=>!n.includes(e))).forEach((t=>r.push(e[t]))),w.fire(e.type,...r);const i=o.query(`GET_ON${e.type.toUpperCase()}`);i&&i(...r)},I=e=>{e.length&&e.filter((e=>g[e.type])).forEach((e=>{const t=g[e.type];(Array.isArray(t)?t:[t]).forEach((t=>{"DID_INIT_ITEM"===e.type?T(t(e.data)):setTimeout((()=>{T(t(e.data))}),0)}))}))},y=e=>new Promise(((t,r)=>{o.dispatch("REQUEST_ITEM_PREPARE",{query:e,success:e=>{t(e)},failure:e=>{r(e)}})})),R=(e,t)=>{var r;return"object"!=typeof e||(r=e).file&&r.id||t||(t=e,e=void 0),o.dispatch("REMOVE_ITEM",l(a({},t),{query:e})),null===o.query("GET_ACTIVE_ITEM",e)},A=(...e)=>new Promise(((t,r)=>{const n=[],i={};if(Ke(e[0]))n.push.apply(n,e[0]),Object.assign(i,e[1]||{});else{const t=e[e.length-1];"object"!=typeof t||t instanceof Blob||Object.assign(i,e.pop()),n.push(...e)}o.dispatch("ADD_ITEMS",{items:n,index:i.index,interactionMethod:yt,success:t,failure:r})})),O=()=>o.query("GET_ACTIVE_ITEMS"),D=e=>new Promise(((t,r)=>{o.dispatch("REQUEST_ITEM_PROCESSING",{query:e,success:e=>{t(e)},failure:e=>{r(e)}})})),w=l(a(a(a({},St()),m),((e,t)=>{const r={};return Oe(t,(t=>{r[t]={get:()=>e.getState().options[t],set:r=>{e.dispatch(`SET_${gt(t,"_").toUpperCase()}`,{value:r})}}})),r})(o,r)),{setOptions:e=>o.dispatch("SET_OPTIONS",{options:e}),addFile:(e,t={})=>new Promise(((r,o)=>{A([{source:e,options:t}],{index:t.index}).then((e=>r(e&&e[0]))).catch(o)})),addFiles:A,getFile:e=>o.query("GET_ACTIVE_ITEM",e),processFile:D,prepareFile:y,removeFile:R,moveFile:(e,t)=>o.dispatch("MOVE_ITEM",{query:e,index:t}),getFiles:O,processFiles:(...e)=>{const t=Array.isArray(e[0])?e[0]:e;if(!t.length){const e=O().filter((e=>!(e.status===Ct&&e.origin===kt)&&e.status!==Gt&&e.status!==xt&&e.status!==Ut));return Promise.all(e.map(D))}return Promise.all(t.map(D))},removeFiles:(...e)=>{const t=Array.isArray(e[0])?e[0]:e;let r;"object"==typeof t[t.length-1]?r=t.pop():Array.isArray(e[0])&&(r=e[1]);const o=O();if(!t.length)return Promise.all(o.map((e=>R(e,r))));return t.map((e=>Ue(e)?o[e]?o[e].id:null:e)).filter((e=>e)).map((e=>R(e,r)))},prepareFiles:(...e)=>{const t=Array.isArray(e[0])?e[0]:e,r=t.length?t:O();return Promise.all(r.map(y))},sort:e=>o.dispatch("SORT",{compare:e}),browse:()=>{var e=f.element.querySelector("input[type=file]");e&&e.click()},destroy:()=>{w.fire("destroy",f.element),o.dispatch("ABORT_ALL"),f._destroy(),window.removeEventListener("resize",p),document.removeEventListener("visibilitychange",n),o.dispatch("DID_DESTROY")},insertBefore:e=>Qe(f.element,e),insertAfter:e=>Ze(f.element,e),appendTo:e=>e.appendChild(f.element),replaceElement:e=>{Qe(f.element,e),e.parentNode.removeChild(e),t=e},restoreElement:()=>{t&&(Ze(t,f.element),f.element.parentNode.removeChild(f.element),t=null)},isAttachedTo:e=>f.element===e||t===e,element:{get:()=>f.element},status:{get:()=>o.query("GET_STATUS")}});return o.dispatch("DID_INIT"),De(w)},Oi=(e={})=>{const t={};Oe(Zt(),((e,r)=>{t[e]=r[0]}));return Ai(a(a({},t),e))},Di=(e,t)=>{Oe(t,((t,r)=>{Oe(e,((o,n)=>{const i=new RegExp(t);if(!i.test(o))return;if(delete e[o],!1===r)return;if(nt(r))return void(e[r]=n);const s=r.group;var a;ft(r)&&!e[s]&&(e[s]={}),e[s][(a=o.replace(i,""),a.charAt(0).toLowerCase()+a.slice(1))]=n})),r.mapping&&Di(e[r.group],r.mapping)}))},wi=(e,t={})=>{const r=[];Oe(e.attributes,(t=>{r.push(e.attributes[t])}));const o=r.filter((e=>e.name)).reduce(((t,r)=>{const o=we(e,r.name);var n;return t[(n=r.name,di(n.replace(/^data-/,"")))]=o===r.name||o,t}),{});return Di(o,t),o},vi=(...e)=>e[0]instanceof HTMLElement?((e,t={})=>{const r={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};jt("SET_ATTRIBUTE_TO_OPTION_MAP",r);const o=a({},t),n=wi("FIELDSET"===e.nodeName?e.querySelector("input[type=file]"):e,r);Object.keys(n).forEach((e=>{ft(n[e])?(ft(o[e])||(o[e]={}),Object.assign(o[e],n[e])):o[e]=n[e]})),o.files=(t.files||[]).concat(Array.from(e.querySelectorAll("input:not([type=file])")).map((e=>({source:e.value,options:{type:e.dataset.type}}))));const i=Oi(o);return e.files&&Array.from(e.files).forEach((e=>{i.addFile(e)})),i.replaceElement(e),i})(...e):Oi(...e),Si=["fire","_read","_write"],Mi=e=>{const t={};return Mt(e,t,Si),t},bi=(e,t)=>e.replace(/(?:{([a-zA-Z]+)})/g,((e,r)=>t[r])),Pi=e=>{const t=new Blob(["(",e.toString(),")()"],{type:"application/javascript"}),r=URL.createObjectURL(t),o=new Worker(r);return{transfer:(e,t)=>{},post:(e,t,r)=>{const n=wt();o.onmessage=e=>{e.data.id===n&&t(e.data.message)},o.postMessage({id:n,message:e},r)},terminate:()=>{o.terminate(),URL.revokeObjectURL(r)}}},Li=e=>new Promise(((t,r)=>{const o=new Image;o.onload=()=>{t(o)},o.onerror=e=>{r(e)},o.src=e})),Ci=(e,t)=>{const r=e.slice(0,e.size,e.type);return r.lastModifiedDate=e.lastModifiedDate,r.name=t,r},Ni=e=>Ci(e,e.name),Gi=[],xi=e=>{if(Gi.includes(e))return;Gi.push(e);const t=e({addFilter:Qt,utils:{Type:Wt,forin:Oe,isString:nt,isFile:Hr,toNaturalFileSize:co,replaceInString:bi,getExtensionFromFilename:Er,getFilenameWithoutExtension:Yr,guesstimateMimeType:Dn,getFileFromBlob:gr,getFilenameFromURL:hr,createRoute:je,createWorker:Pi,createView:Xe,createItemAPI:Pt,loadImage:Li,copyFile:Ni,renameFile:Ci,createBlob:Tr,applyFilterChain:Xt,text:no,getNumericAspectRatioFromString:er},views:{fileActionButton:lo}});var r;r=t.options,Object.assign(Kt,r)},Fi=(()=>{const e=Ce()&&!("[object OperaMini]"===Object.prototype.toString.call(window.operamini))&&"visibilityState"in document&&"Promise"in window&&"slice"in Blob.prototype&&"URL"in window&&"createObjectURL"in window.URL&&"performance"in window&&("supports"in(window.CSS||{})||/MSIE|Trident/.test(window.navigator.userAgent));return()=>e})(),Ui={apps:[]},qi=()=>{};let Bi={},Vi=qi,$i=qi,ki=qi,Yi=qi,Hi=qi,Wi=qi,zi=qi;if(Fi()){((e,t,r=60)=>{const o="__framePainter";if(window[o])return window[o].readers.push(e),void window[o].writers.push(t);window[o]={readers:[e],writers:[t]};const n=window[o],i=1e3/r;let s=null,a=null,l=null,c=null;const d=()=>{document.hidden?(l=()=>window.setTimeout((()=>u(performance.now())),i),c=()=>window.clearTimeout(a)):(l=()=>window.requestAnimationFrame(u),c=()=>window.cancelAnimationFrame(a))};document.addEventListener("visibilitychange",(()=>{c&&c(),d(),u(performance.now())}));const u=e=>{a=l(u),s||(s=e);const t=e-s;t<=i||(s=e-t%i,n.readers.forEach((e=>e())),n.writers.forEach((t=>t(e))))};d(),u(performance.now())})((()=>{Ui.apps.forEach((e=>e._read()))}),(e=>{Ui.apps.forEach((t=>t._write(e)))}));const e=()=>{document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:Fi,create:Vi,destroy:$i,parse:ki,find:Yi,registerPlugin:Hi,setOptions:zi}})),document.removeEventListener("DOMContentLoaded",e)};"loading"!==document.readyState?setTimeout((()=>e()),0):document.addEventListener("DOMContentLoaded",e);const t=()=>Oe(Zt(),((e,t)=>{Bi[e]=t[1]}));Bi={},t(),Vi=(...e)=>{const t=vi(...e);return t.on("destroy",$i),Ui.apps.push(t),Mi(t)},$i=e=>{const t=Ui.apps.findIndex((t=>t.isAttachedTo(e)));if(t>=0){return Ui.apps.splice(t,1)[0].restoreElement(),!0}return!1},ki=e=>Array.from(e.querySelectorAll(".filepond")).filter((e=>!Ui.apps.find((t=>t.isAttachedTo(e))))).map((e=>Vi(e))),Yi=e=>{const t=Ui.apps.find((t=>t.isAttachedTo(e)));return t?Mi(t):null},Hi=(...e)=>{e.forEach(xi),t()},Wi=()=>{const e={};return Oe(Zt(),((t,r)=>{e[t]=r[0]})),e},zi=e=>(ft(e)&&(Ui.apps.forEach((t=>{t.setOptions(e)})),(e=>{Oe(e,((e,t)=>{Kt[e]&&(Kt[e][0]=mt(t,Kt[e][0],Kt[e][1]))}))})(e)),Wi())}function Xi(e){let t,r;return{c(){t=b("div"),r=b("input"),this.h()},l(e){t=U(e,"DIV",{class:!0});var o=x(t);r=U(o,"INPUT",{type:!0,id:!0,name:!0,class:!0,accept:!0,capture:!0}),o.forEach(M),this.h()},h(){G(r,"type","file"),G(r,"id",e[1]),G(r,"name",e[2]),G(r,"class",e[0]),G(r,"accept",e[6]),r.multiple=e[3],r.required=e[4],G(r,"capture",e[5]),G(t,"class","filepond--wrapper")},m(o,n){S(o,t,n),v(t,r),e[24](r)},p(e,[t]){2&t&&G(r,"id",e[1]),4&t&&G(r,"name",e[2]),1&t&&G(r,"class",e[0]),64&t&&G(r,"accept",e[6]),8&t&&(r.multiple=e[3]),16&t&&(r.required=e[4]),32&t&&G(r,"capture",e[5])},i:c,o:c,d(r){r&&M(t),e[24](null)}}}function ji(e,t,r){const o=Hi,n=Fi();let i,s,{class:l}=t,{id:c}=t,{name:u}=t,{allowMultiple:p}=t,{required:f}=t,{captureMethod:h}=t,{acceptedFileTypes:E}=t;const m=()=>{};let{addFile:_=m}=t,{addFiles:g=m}=t,{browse:T=m}=t,{fireSync:I=m}=t,{getFile:y=m}=t,{getFiles:R=m}=t,{moveFile:O=m}=t,{prepareFile:D=m}=t,{prepareFiles:w=m}=t,{processFile:v=m}=t,{processFiles:S=m}=t,{removeFile:M=m}=t,{removeFiles:b=m}=t,{sort:P=m}=t;var L;return X((()=>{n&&(s?s.setOptions(t):(s=Vi(i,a({},t)),r(8,_=s.addFile),r(9,g=s.addFiles),r(19,M=s.removeFile),r(20,b=s.removeFiles),r(10,T=s.browse),r(11,I=s.fireSync),r(12,y=s.getFile),r(13,R=s.getFiles),r(14,O=s.moveFile),r(15,D=s.prepareFile),r(16,w=s.prepareFiles),r(17,v=s.processFile),r(18,S=s.processFiles),r(19,M=s.removeFile),r(20,b=s.removeFiles),r(21,P=s.sort)))})),L=()=>{s&&(s.destroy(),s=void 0)},W().$$.on_destroy.push(L),e.$$set=e=>{r(27,t=d(d({},t),A(e))),"class"in e&&r(0,l=e.class),"id"in e&&r(1,c=e.id),"name"in e&&r(2,u=e.name),"allowMultiple"in e&&r(3,p=e.allowMultiple),"required"in e&&r(4,f=e.required),"captureMethod"in e&&r(5,h=e.captureMethod),"acceptedFileTypes"in e&&r(6,E=e.acceptedFileTypes),"addFile"in e&&r(8,_=e.addFile),"addFiles"in e&&r(9,g=e.addFiles),"browse"in e&&r(10,T=e.browse),"fireSync"in e&&r(11,I=e.fireSync),"getFile"in e&&r(12,y=e.getFile),"getFiles"in e&&r(13,R=e.getFiles),"moveFile"in e&&r(14,O=e.moveFile),"prepareFile"in e&&r(15,D=e.prepareFile),"prepareFiles"in e&&r(16,w=e.prepareFiles),"processFile"in e&&r(17,v=e.processFile),"processFiles"in e&&r(18,S=e.processFiles),"removeFile"in e&&r(19,M=e.removeFile),"removeFiles"in e&&r(20,b=e.removeFiles),"sort"in e&&r(21,P=e.sort)},t=A(t),[l,c,u,p,f,h,E,i,_,g,T,I,y,R,O,D,w,v,S,M,b,P,o,n,function(e){Z[e?"unshift":"push"]((()=>{i=e,r(7,i)}))}]}class Qi extends ye{constructor(e){super(),Ie(this,e,ji,Xi,E,{registerPlugin:22,isSupported:23,class:0,id:1,name:2,allowMultiple:3,required:4,captureMethod:5,acceptedFileTypes:6,addFile:8,addFiles:9,browse:10,fireSync:11,getFile:12,getFiles:13,moveFile:14,prepareFile:15,prepareFiles:16,processFile:17,processFiles:18,removeFile:19,removeFiles:20,sort:21})}get registerPlugin(){return this.$$.ctx[22]}get isSupported(){return this.$$.ctx[23]}get class(){return this.$$.ctx[0]}set class(e){this.$$set({class:e}),ie()}get id(){return this.$$.ctx[1]}set id(e){this.$$set({id:e}),ie()}get name(){return this.$$.ctx[2]}set name(e){this.$$set({name:e}),ie()}get allowMultiple(){return this.$$.ctx[3]}set allowMultiple(e){this.$$set({allowMultiple:e}),ie()}get required(){return this.$$.ctx[4]}set required(e){this.$$set({required:e}),ie()}get captureMethod(){return this.$$.ctx[5]}set captureMethod(e){this.$$set({captureMethod:e}),ie()}get acceptedFileTypes(){return this.$$.ctx[6]}set acceptedFileTypes(e){this.$$set({acceptedFileTypes:e}),ie()}get addFile(){return this.$$.ctx[8]}set addFile(e){this.$$set({addFile:e}),ie()}get addFiles(){return this.$$.ctx[9]}set addFiles(e){this.$$set({addFiles:e}),ie()}get browse(){return this.$$.ctx[10]}set browse(e){this.$$set({browse:e}),ie()}get fireSync(){return this.$$.ctx[11]}set fireSync(e){this.$$set({fireSync:e}),ie()}get getFile(){return this.$$.ctx[12]}set getFile(e){this.$$set({getFile:e}),ie()}get getFiles(){return this.$$.ctx[13]}set getFiles(e){this.$$set({getFiles:e}),ie()}get moveFile(){return this.$$.ctx[14]}set moveFile(e){this.$$set({moveFile:e}),ie()}get prepareFile(){return this.$$.ctx[15]}set prepareFile(e){this.$$set({prepareFile:e}),ie()}get prepareFiles(){return this.$$.ctx[16]}set prepareFiles(e){this.$$set({prepareFiles:e}),ie()}get processFile(){return this.$$.ctx[17]}set processFile(e){this.$$set({processFile:e}),ie()}get processFiles(){return this.$$.ctx[18]}set processFiles(e){this.$$set({processFiles:e}),ie()}get removeFile(){return this.$$.ctx[19]}set removeFile(e){this.$$set({removeFile:e}),ie()}get removeFiles(){return this.$$.ctx[20]}set removeFiles(e){this.$$set({removeFiles:e}),ie()}get sort(){return this.$$.ctx[21]}set sort(e){this.$$set({sort:e}),ie()}}
/*!
 * FilePondPluginImageExifOrientation 1.0.11
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const Zi=65496,Ki=65505,Ji=1165519206,es=18761,ts=274,rs=65280,os=(e,t,r=!1)=>e.getUint16(t,r),ns=(e,t,r=!1)=>e.getUint32(t,r);let is;const ss="undefined"!=typeof window&&void 0!==window.document?new Image:{};ss.onload=()=>is=ss.naturalWidth>ss.naturalHeight,ss.src="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=";const as=({addFilter:e,utils:t})=>{const{Type:r,isFile:o}=t;return e("DID_LOAD_ITEM",((e,{query:t})=>new Promise(((r,n)=>{const i=e.file;if(!(o(i)&&(e=>/^image\/jpeg/.test(e.type))(i)&&t("GET_ALLOW_IMAGE_EXIF_ORIENTATION")&&is))return r(e);(e=>new Promise(((t,r)=>{const o=new FileReader;o.onload=function(e){const r=new DataView(e.target.result);if(os(r,0)!==Zi)return void t(-1);const o=r.byteLength;let n=2;for(;n<o;){const e=os(r,n);if(n+=2,e===Ki){if(ns(r,n+=2)!==Ji)break;const e=os(r,n+=6)===es;n+=ns(r,n+4,e);const o=os(r,n,e);n+=2;for(let i=0;i<o;i++)if(os(r,n+12*i,e)===ts)return void t(os(r,n+12*i+8,e))}else{if((e&rs)!==rs)break;n+=os(r,n)}}t(-1)},o.readAsArrayBuffer(e.slice(0,65536))})))(i).then((t=>{e.setMetadata("exif",{orientation:t}),r(e)}))})))),{options:{allowImageExifOrientation:[!0,r.BOOLEAN]}}};"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:as}))
/*!
 * FilePondPluginImagePreview 4.6.7
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */;const ls=(e,t)=>us(e.x*t,e.y*t),cs=(e,t)=>us(e.x+t.x,e.y+t.y),ds=(e,t,r)=>{const o=Math.cos(t),n=Math.sin(t),i=us(e.x-r.x,e.y-r.y);return us(r.x+o*i.x-n*i.y,r.y+n*i.x+o*i.y)},us=(e=0,t=0)=>({x:e,y:t}),ps=(e,t,r=1,o)=>"string"==typeof e?parseFloat(e)*r:"number"==typeof e?e*(o?t[o]:Math.min(t.width,t.height)):void 0,fs=e=>null!=e,hs=(e,t)=>Object.keys(t).forEach((r=>e.setAttribute(r,t[r]))),Es=(e,t)=>{const r=document.createElementNS("http://www.w3.org/2000/svg",e);return t&&hs(r,t),r},ms={contain:"xMidYMid meet",cover:"xMidYMid slice"},_s={left:"start",center:"middle",right:"end"},gs=e=>t=>Es(e,{id:t.id}),Ts={image:e=>{const t=Es("image",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return t.onload=()=>{t.setAttribute("opacity",e.opacity||1)},t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.src),t},rect:gs("rect"),ellipse:gs("ellipse"),text:gs("text"),path:gs("path"),line:e=>{const t=Es("g",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round"}),r=Es("line");t.appendChild(r);const o=Es("path");t.appendChild(o);const n=Es("path");return t.appendChild(n),t}},Is={rect:e=>hs(e,a(a({},e.rect),e.styles)),ellipse:e=>{const t=e.rect.x+.5*e.rect.width,r=e.rect.y+.5*e.rect.height,o=.5*e.rect.width,n=.5*e.rect.height;return hs(e,a({cx:t,cy:r,rx:o,ry:n},e.styles))},image:(e,t)=>{hs(e,l(a(a({},e.rect),e.styles),{preserveAspectRatio:ms[t.fit]||"none"}))},text:(e,t,r,o)=>{const n=ps(t.fontSize,r,o),i=t.fontFamily||"sans-serif",s=t.fontWeight||"normal",c=_s[t.textAlign]||"start";hs(e,l(a(a({},e.rect),e.styles),{"stroke-width":0,"font-weight":s,"font-size":n,"font-family":i,"text-anchor":c})),e.text!==t.text&&(e.text=t.text,e.textContent=t.text.length?t.text:" ")},path:(e,t,r,o)=>{var n;hs(e,l(a({},e.styles),{fill:"none",d:(n=t.points.map((e=>({x:ps(e.x,r,o,"width"),y:ps(e.y,r,o,"height")}))),n.map(((e,t)=>`${0===t?"M":"L"} ${e.x} ${e.y}`)).join(" "))}))},line:(e,t,r,o)=>{hs(e,l(a(a({},e.rect),e.styles),{fill:"none"}));const n=e.childNodes[0],i=e.childNodes[1],s=e.childNodes[2],c=e.rect,d={x:e.rect.x+e.rect.width,y:e.rect.y+e.rect.height};if(hs(n,{x1:c.x,y1:c.y,x2:d.x,y2:d.y}),!t.lineDecoration)return;i.style.display="none",s.style.display="none";const u=(e=>{const t=Math.sqrt(e.x*e.x+e.y*e.y);return 0===t?{x:0,y:0}:us(e.x/t,e.y/t)})({x:d.x-c.x,y:d.y-c.y}),p=ps(.05,r,o);if(-1!==t.lineDecoration.indexOf("arrow-begin")){const e=ls(u,p),t=cs(c,e),r=ds(c,2,t),o=ds(c,-2,t);hs(i,{style:"display:block;",d:`M${r.x},${r.y} L${c.x},${c.y} L${o.x},${o.y}`})}if(-1!==t.lineDecoration.indexOf("arrow-end")){const e=ls(u,-p),t=cs(d,e),r=ds(d,2,t),o=ds(d,-2,t);hs(s,{style:"display:block;",d:`M${r.x},${r.y} L${d.x},${d.y} L${o.x},${o.y}`})}}},ys=(e,t,r,o,n)=>{"path"!==t&&(e.rect=((e,t,r=1)=>{let o=ps(e.x,t,r,"width")||ps(e.left,t,r,"width"),n=ps(e.y,t,r,"height")||ps(e.top,t,r,"height"),i=ps(e.width,t,r,"width"),s=ps(e.height,t,r,"height"),a=ps(e.right,t,r,"width"),l=ps(e.bottom,t,r,"height");return fs(n)||(n=fs(s)&&fs(l)?t.height-s-l:l),fs(o)||(o=fs(i)&&fs(a)?t.width-i-a:a),fs(i)||(i=fs(o)&&fs(a)?t.width-o-a:0),fs(s)||(s=fs(n)&&fs(l)?t.height-n-l:0),{x:o||0,y:n||0,width:i||0,height:s||0}})(r,o,n)),e.styles=((e,t,r)=>{const o=e.borderStyle||e.lineStyle||"solid",n=e.backgroundColor||e.fontColor||"transparent",i=e.borderColor||e.lineColor||"transparent",s=ps(e.borderWidth||e.lineWidth,t,r);return{"stroke-linecap":e.lineCap||"round","stroke-linejoin":e.lineJoin||"round","stroke-width":s||0,"stroke-dasharray":"string"==typeof o?"":o.map((e=>ps(e,t,r))).join(","),stroke:i,fill:n,opacity:e.opacity||1}})(r,o,n),Is[t](e,r,o,n)},Rs=["x","y","left","top","right","bottom","width","height"],As=e=>{const[t,r]=e,o=r.points?{}:Rs.reduce(((e,t)=>{var o;return e[t]="string"==typeof(o=r[t])&&/%/.test(o)?parseFloat(o)/100:o,e}),{});return[t,a(a({zIndex:0},r),o)]},Os=(e,t)=>e[1].zIndex>t[1].zIndex?1:e[1].zIndex<t[1].zIndex?-1:0,Ds=e=>e.utils.createView({name:"image-preview-markup",tag:"svg",ignoreRect:!0,mixins:{apis:["width","height","crop","markup","resize","dirty"]},write:({root:e,props:t})=>{if(!t.dirty)return;const{crop:r,resize:o,markup:n}=t,i=t.width,s=t.height;let a=r.width,l=r.height;if(o){const{size:e}=o;let t=e&&e.width,r=e&&e.height;const n=o.mode,i=o.upscale;t&&!r&&(r=t),r&&!t&&(t=r);const s=a<t&&l<r;if(!s||s&&i){let e=t/a,o=r/l;if("force"===n)a=t,l=r;else{let t;"cover"===n?t=Math.max(e,o):"contain"===n&&(t=Math.min(e,o)),a*=t,l*=t}}}const c={width:i,height:s};e.element.setAttribute("width",c.width),e.element.setAttribute("height",c.height);const d=Math.min(i/a,s/l);e.element.innerHTML="";const u=e.query("GET_IMAGE_PREVIEW_MARKUP_FILTER");n.filter(u).map(As).sort(Os).forEach((t=>{const[r,o]=t,n=((e,t)=>Ts[e](t))(r,o);ys(n,r,o,c,d),e.element.appendChild(n)}))}}),ws=(e,t)=>({x:e,y:t}),vs=(e,t)=>ws(e.x-t.x,e.y-t.y),Ss=(e,t)=>Math.sqrt(((e,t)=>((e,t)=>e.x*t.x+e.y*t.y)(vs(e,t),vs(e,t)))(e,t)),Ms=(e,t)=>{const r=e,o=t,n=1.5707963267948966-t,i=Math.sin(1.5707963267948966),s=Math.sin(o),a=Math.sin(n),l=Math.cos(n),c=r/i;return ws(l*(c*s),l*(c*a))},bs=(e,t,r,o)=>{const n=o.x>.5?1-o.x:o.x,i=o.y>.5?1-o.y:o.y,s=2*n*e.width,a=2*i*e.height,l=((e,t)=>{const r=e.width,o=e.height,n=Ms(r,t),i=Ms(o,t),s=ws(e.x+Math.abs(n.x),e.y-Math.abs(n.y)),a=ws(e.x+e.width+Math.abs(i.y),e.y+Math.abs(i.x)),l=ws(e.x-Math.abs(i.y),e.y+e.height-Math.abs(i.x));return{width:Ss(s,a),height:Ss(s,l)}})(t,r);return Math.max(l.width/s,l.height/a)},Ps=(e,t)=>{let r=e.width,o=r*t;o>e.height&&(o=e.height,r=o/t);return{x:.5*(e.width-r),y:.5*(e.height-o),width:r,height:o}},Ls=(e,t={})=>{let{zoom:r,rotation:o,center:n,aspectRatio:i}=t;i||(i=e.height/e.width);const s=((e,t,r=1)=>{const o=e.height/e.width;let n=t,i=1,s=o;s>n&&(s=n,i=s/o);const a=Math.max(1/i,n/s),l=e.width/(r*a*i);return{width:l,height:l*t}})(e,i,r),a={x:.5*s.width,y:.5*s.height},l={x:0,y:0,width:s.width,height:s.height,center:a},c=void 0===t.scaleToFit||t.scaleToFit,d=r*bs(e,Ps(l,i),o,c?n:{x:.5,y:.5});return{widthFloat:s.width/d,heightFloat:s.height/d,width:Math.round(s.width/d),height:Math.round(s.height/d)}},Cs={type:"spring",stiffness:.5,damping:.45,mass:10},Ns=e=>e.utils.createView({name:"image-clip",tag:"div",ignoreRect:!0,mixins:{apis:["crop","markup","resize","width","height","dirty","background"],styles:["width","height","opacity"],animations:{opacity:{type:"tween",duration:250}}},didWriteView:function({root:e,props:t}){t.background&&(e.element.style.backgroundColor=t.background)},create:({root:t,props:r})=>{t.ref.image=t.appendChildView(t.createChildView((e=>e.utils.createView({name:"image-canvas-wrapper",tag:"div",ignoreRect:!0,mixins:{apis:["crop","width","height"],styles:["originX","originY","translateX","translateY","scaleX","scaleY","rotateZ"],animations:{originX:Cs,originY:Cs,scaleX:Cs,scaleY:Cs,translateX:Cs,translateY:Cs,rotateZ:Cs}},create:({root:t,props:r})=>{r.width=r.image.width,r.height=r.image.height,t.ref.bitmap=t.appendChildView(t.createChildView((e=>e.utils.createView({name:"image-bitmap",ignoreRect:!0,mixins:{styles:["scaleX","scaleY"]},create:({root:e,props:t})=>{e.appendChild(t.image)}}))(e),{image:r.image}))},write:({root:e,props:t})=>{const{flip:r}=t.crop,{bitmap:o}=e.ref;o.scaleX=r.horizontal?-1:1,o.scaleY=r.vertical?-1:1}}))(e),Object.assign({},r))),t.ref.createMarkup=()=>{t.ref.markup||(t.ref.markup=t.appendChildView(t.createChildView(Ds(e),Object.assign({},r))))},t.ref.destroyMarkup=()=>{t.ref.markup&&(t.removeChildView(t.ref.markup),t.ref.markup=null)};const o=t.query("GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR");null!==o&&(t.element.dataset.transparencyIndicator="grid"===o?o:"color")},write:({root:e,props:t,shouldOptimize:r})=>{const{crop:o,markup:n,resize:i,dirty:s,width:a,height:l}=t;e.ref.image.crop=o;const c={x:0,y:0,width:a,height:l,center:{x:.5*a,y:.5*l}},d={width:e.ref.image.width,height:e.ref.image.height},u={x:o.center.x*d.width,y:o.center.y*d.height},p={x:c.center.x-d.width*o.center.x,y:c.center.y-d.height*o.center.y},f=2*Math.PI+o.rotation%(2*Math.PI),h=o.aspectRatio||d.height/d.width,E=void 0===o.scaleToFit||o.scaleToFit,m=bs(d,Ps(c,h),f,E?o.center:{x:.5,y:.5}),_=o.zoom*m;n&&n.length?(e.ref.createMarkup(),e.ref.markup.width=a,e.ref.markup.height=l,e.ref.markup.resize=i,e.ref.markup.dirty=s,e.ref.markup.markup=n,e.ref.markup.crop=Ls(d,o)):e.ref.markup&&e.ref.destroyMarkup();const g=e.ref.image;if(r)return g.originX=null,g.originY=null,g.translateX=null,g.translateY=null,g.rotateZ=null,g.scaleX=null,void(g.scaleY=null);g.originX=u.x,g.originY=u.y,g.translateX=p.x,g.translateY=p.y,g.rotateZ=f,g.scaleX=_,g.scaleY=_}});let Gs='<svg width="500" height="200" viewBox="0 0 500 200" preserveAspectRatio="none">\n    <defs>\n        <radialGradient id="gradient-__UID__" cx=".5" cy="1.25" r="1.15">\n            <stop offset=\'50%\' stop-color=\'#000000\'/>\n            <stop offset=\'56%\' stop-color=\'#0a0a0a\'/>\n            <stop offset=\'63%\' stop-color=\'#262626\'/>\n            <stop offset=\'69%\' stop-color=\'#4f4f4f\'/>\n            <stop offset=\'75%\' stop-color=\'#808080\'/>\n            <stop offset=\'81%\' stop-color=\'#b1b1b1\'/>\n            <stop offset=\'88%\' stop-color=\'#dadada\'/>\n            <stop offset=\'94%\' stop-color=\'#f6f6f6\'/>\n            <stop offset=\'100%\' stop-color=\'#ffffff\'/>\n        </radialGradient>\n        <mask id="mask-__UID__">\n            <rect x="0" y="0" width="500" height="200" fill="url(#gradient-__UID__)"></rect>\n        </mask>\n    </defs>\n    <rect x="0" width="500" height="200" fill="currentColor" mask="url(#mask-__UID__)"></rect>\n</svg>',xs=0;const Fs=function(){self.onmessage=e=>{createImageBitmap(e.data.message.file).then((t=>{self.postMessage({id:e.data.id,message:t},[t])}))}},Us=function(){self.onmessage=e=>{const t=e.data.message.imageData,r=e.data.message.colorMatrix,o=t.data,n=o.length,i=r[0],s=r[1],a=r[2],l=r[3],c=r[4],d=r[5],u=r[6],p=r[7],f=r[8],h=r[9],E=r[10],m=r[11],_=r[12],g=r[13],T=r[14],I=r[15],y=r[16],R=r[17],A=r[18],O=r[19];let D=0,w=0,v=0,S=0,M=0;for(;D<n;D+=4)w=o[D]/255,v=o[D+1]/255,S=o[D+2]/255,M=o[D+3]/255,o[D]=Math.max(0,Math.min(255*(w*i+v*s+S*a+M*l+c),255)),o[D+1]=Math.max(0,Math.min(255*(w*d+v*u+S*p+M*f+h),255)),o[D+2]=Math.max(0,Math.min(255*(w*E+v*m+S*_+M*g+T),255)),o[D+3]=Math.max(0,Math.min(255*(w*I+v*y+S*R+M*A+O),255));self.postMessage({id:e.data.id,message:t},[t.data.buffer])}},qs={1:()=>[1,0,0,1,0,0],2:e=>[-1,0,0,1,e,0],3:(e,t)=>[-1,0,0,-1,e,t],4:(e,t)=>[1,0,0,-1,0,t],5:()=>[0,1,1,0,0,0],6:(e,t)=>[0,1,-1,0,t,0],7:(e,t)=>[0,-1,-1,0,t,e],8:e=>[0,-1,1,0,0,e]},Bs=(e,t,r,o)=>{t=Math.round(t),r=Math.round(r);const n=document.createElement("canvas");n.width=t,n.height=r;const i=n.getContext("2d");return o>=5&&o<=8&&([t,r]=[r,t]),((e,t,r,o)=>{-1!==o&&e.transform.apply(e,qs[o](t,r))})(i,t,r,o),i.drawImage(e,0,0,t,r),n},Vs=e=>/^image/.test(e.type)&&!/svg/.test(e.type),$s=(e,t)=>Math.floor(Math.sqrt(e/(t/4))),ks=(e,t)=>{(t=t||document.createElement("canvas")).width=e.width,t.height=e.height;return t.getContext("2d").drawImage(e,0,0),t},Ys=e=>{const t=e.utils.createView({name:"image-preview-overlay",tag:"div",ignoreRect:!0,create:({root:e,props:t})=>{if(document.querySelector("base")){const e=window.location.href.replace(window.location.hash,"");Gs=Gs.replace(/url\(\#/g,"url("+e+"#")}xs++,e.element.classList.add(`filepond--image-preview-overlay-${t.status}`),e.element.innerHTML=Gs.replace(/__UID__/g,xs)},mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:25}}}});const r=(e=>e.utils.createView({name:"image-preview",tag:"div",ignoreRect:!0,mixins:{apis:["image","crop","markup","resize","dirty","background"],styles:["translateY","scaleX","scaleY","opacity"],animations:{scaleX:Cs,scaleY:Cs,translateY:Cs,opacity:{type:"tween",duration:400}}},create:({root:t,props:r})=>{t.ref.clip=t.appendChildView(t.createChildView(Ns(e),{id:r.id,image:r.image,crop:r.crop,markup:r.markup,resize:r.resize,dirty:r.dirty,background:r.background}))},write:({root:e,props:t,shouldOptimize:r})=>{const{clip:o}=e.ref,{image:n,crop:i,markup:s,resize:a,dirty:l}=t;if(o.crop=i,o.markup=s,o.resize=a,o.dirty=l,o.opacity=r?0:1,r||e.rect.element.hidden)return;const c=n.height/n.width;let d=i.aspectRatio||c;const u=e.rect.inner.width,p=e.rect.inner.height;let f=e.query("GET_IMAGE_PREVIEW_HEIGHT");const h=e.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),E=e.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),m=e.query("GET_PANEL_ASPECT_RATIO"),_=e.query("GET_ALLOW_MULTIPLE");m&&!_&&(f=u*m,d=m);let g=null!==f?f:Math.max(h,Math.min(u*d,E)),T=g/d;T>u&&(T=u,g=T*d),g>p&&(g=p,T=p/d),o.width=T,o.height=g}}))(e),{createWorker:o}=e.utils,n=(e,t,r)=>new Promise((n=>{e.ref.imageData||(e.ref.imageData=r.getContext("2d").getImageData(0,0,r.width,r.height));const i=(e=>{let t;try{t=new ImageData(e.width,e.height)}catch(r){t=document.createElement("canvas").getContext("2d").createImageData(e.width,e.height)}return t.data.set(new Uint8ClampedArray(e.data)),t})(e.ref.imageData);if(!t||20!==t.length)return r.getContext("2d").putImageData(i,0,0),n();const s=o(Us);s.post({imageData:i,colorMatrix:t},(e=>{r.getContext("2d").putImageData(e,0,0),s.terminate(),n()}),[i.data.buffer])})),i=({root:e,props:t,image:o})=>{const n=t.id,i=e.query("GET_ITEM",{id:n});if(!i)return;const s=i.getMetadata("crop")||{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},zoom:1,rotation:0,aspectRatio:null},a=e.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR");let l,c,d=!1;e.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(l=i.getMetadata("markup")||[],c=i.getMetadata("resize"),d=!0);const u=e.appendChildView(e.createChildView(r,{id:n,image:o,crop:s,resize:c,markup:l,dirty:d,background:a,opacity:0,scaleX:1.15,scaleY:1.15,translateY:15}),e.childViews.length);e.ref.images.push(u),u.opacity=1,u.scaleX=1,u.scaleY=1,u.translateY=0,setTimeout((()=>{e.dispatch("DID_IMAGE_PREVIEW_SHOW",{id:n})}),250)},s=({root:e})=>{e.ref.overlayShadow.opacity=1,e.ref.overlayError.opacity=0,e.ref.overlaySuccess.opacity=0},a=({root:e})=>{e.ref.overlayShadow.opacity=.25,e.ref.overlayError.opacity=1};return e.utils.createView({name:"image-preview-wrapper",create:({root:e})=>{e.ref.images=[],e.ref.imageData=null,e.ref.imageViewBin=[],e.ref.overlayShadow=e.appendChildView(e.createChildView(t,{opacity:0,status:"idle"})),e.ref.overlaySuccess=e.appendChildView(e.createChildView(t,{opacity:0,status:"success"})),e.ref.overlayError=e.appendChildView(e.createChildView(t,{opacity:0,status:"failure"}))},styles:["height"],apis:["height"],destroy:({root:e})=>{e.ref.images.forEach((e=>{e.image.width=1,e.image.height=1}))},didWriteView:({root:e})=>{e.ref.images.forEach((e=>{e.dirty=!1}))},write:e.utils.createRoute({DID_IMAGE_PREVIEW_DRAW:({root:e})=>{const t=e.ref.images[e.ref.images.length-1];t.translateY=0,t.scaleX=1,t.scaleY=1,t.opacity=1},DID_IMAGE_PREVIEW_CONTAINER_CREATE:({root:e,props:t})=>{const{id:r}=t,o=e.query("GET_ITEM",r);if(!o)return;((e,t)=>{let r=new Image;r.onload=()=>{const e=r.naturalWidth,o=r.naturalHeight;r=null,t(e,o)},r.src=e})(URL.createObjectURL(o.file),((t,o)=>{e.dispatch("DID_IMAGE_PREVIEW_CALCULATE_SIZE",{id:r,width:t,height:o})}))},DID_FINISH_CALCULATE_PREVIEWSIZE:({root:e,props:t})=>{const{id:r}=t,s=e.query("GET_ITEM",r);if(!s)return;const a=URL.createObjectURL(s.file),l=()=>{var e;(e=a,new Promise(((t,r)=>{const o=new Image;o.crossOrigin="Anonymous",o.onload=()=>{t(o)},o.onerror=e=>{r(e)},o.src=e}))).then(c)},c=r=>{URL.revokeObjectURL(a);const o=(s.getMetadata("exif")||{}).orientation||-1;let{width:l,height:c}=r;if(!l||!c)return;o>=5&&o<=8&&([l,c]=[c,l]);const d=Math.max(1,.75*window.devicePixelRatio),u=e.query("GET_IMAGE_PREVIEW_ZOOM_FACTOR")*d,p=c/l,f=e.rect.element.width,h=e.rect.element.height;let E=f,m=E*p;p>1?(E=Math.min(l,f*u),m=E*p):(m=Math.min(c,h*u),E=m/p);const _=Bs(r,E,m,o),g=()=>{const o=e.query("GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR")?(e=>{const t=Math.min(10/e.width,10/e.height),r=document.createElement("canvas"),o=r.getContext("2d"),n=r.width=Math.ceil(e.width*t),i=r.height=Math.ceil(e.height*t);o.drawImage(e,0,0,n,i);let s=null;try{s=o.getImageData(0,0,n,i).data}catch(p){return null}const a=s.length;let l=0,c=0,d=0,u=0;for(;u<a;u+=4)l+=s[u]*s[u],c+=s[u+1]*s[u+1],d+=s[u+2]*s[u+2];return l=$s(l,a),c=$s(c,a),d=$s(d,a),{r:l,g:c,b:d}})(data):null;s.setMetadata("color",o,!0),"close"in r&&r.close(),e.ref.overlayShadow.opacity=1,i({root:e,props:t,image:_})},T=s.getMetadata("filter");T?n(e,T,_).then(g):g()};if((e=>{const t=window.navigator.userAgent.match(/Firefox\/([0-9]+)\./);return!((t?parseInt(t[1]):null)<=58)&&"createImageBitmap"in window&&Vs(e)})(s.file)){const e=o(Fs);e.post({file:s.file},(t=>{e.terminate(),t?c(t):l()}))}else l()},DID_UPDATE_ITEM_METADATA:({root:e,props:t,action:r})=>{if(!/crop|filter|markup|resize/.test(r.change.key))return;if(!e.ref.images.length)return;const o=e.query("GET_ITEM",{id:t.id});if(o)if(/filter/.test(r.change.key)){const t=e.ref.images[e.ref.images.length-1];n(e,r.change.value,t.image)}else if(/crop|markup|resize/.test(r.change.key)){const r=o.getMetadata("crop"),n=e.ref.images[e.ref.images.length-1];if(Math.abs(r.aspectRatio-n.crop.aspectRatio)>1e-5){const r=(({root:e})=>{const t=e.ref.images.shift();return t.opacity=0,t.translateY=-15,e.ref.imageViewBin.push(t),t})({root:e});i({root:e,props:t,image:ks(r.image)})}else(({root:e,props:t})=>{const r=e.query("GET_ITEM",{id:t.id});if(!r)return;const o=e.ref.images[e.ref.images.length-1];o.crop=r.getMetadata("crop"),o.background=e.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR"),e.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(o.dirty=!0,o.resize=r.getMetadata("resize"),o.markup=r.getMetadata("markup"))})({root:e,props:t})}},DID_THROW_ITEM_LOAD_ERROR:a,DID_THROW_ITEM_PROCESSING_ERROR:a,DID_THROW_ITEM_INVALID:a,DID_COMPLETE_ITEM_PROCESSING:({root:e})=>{e.ref.overlayShadow.opacity=.25,e.ref.overlaySuccess.opacity=1},DID_START_ITEM_PROCESSING:s,DID_REVERT_ITEM_PROCESSING:s},(({root:e})=>{const t=e.ref.imageViewBin.filter((e=>0===e.opacity));e.ref.imageViewBin=e.ref.imageViewBin.filter((e=>e.opacity>0)),t.forEach((t=>((e,t)=>{e.removeChildView(t),t.image.width=1,t.image.height=1,t._destroy()})(e,t))),t.length=0}))})},Hs=e=>{const{addFilter:t,utils:r}=e,{Type:o,createRoute:n,isFile:i}=r,s=Ys(e);return t("CREATE_VIEW",(e=>{const{is:t,view:r,query:o}=e;if(!t("file")||!o("GET_ALLOW_IMAGE_PREVIEW"))return;const a=({root:e})=>{e.ref.shouldRescale=!0};r.registerWriter(n({DID_RESIZE_ROOT:a,DID_STOP_RESIZE:a,DID_LOAD_ITEM:({root:e,props:t})=>{const{id:n}=t,a=o("GET_ITEM",n);if(!a||!i(a.file)||a.archived)return;const l=a.file;if(!(e=>/^image/.test(e.type))(l))return;if(!o("GET_IMAGE_PREVIEW_FILTER_ITEM")(a))return;const c="createImageBitmap"in(window||{}),d=o("GET_IMAGE_PREVIEW_MAX_FILE_SIZE");if(!c&&d&&l.size>d)return;e.ref.imagePreview=r.appendChildView(r.createChildView(s,{id:n}));const u=e.query("GET_IMAGE_PREVIEW_HEIGHT");u&&e.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:a.id,height:u});const p=!c&&l.size>o("GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE");e.dispatch("DID_IMAGE_PREVIEW_CONTAINER_CREATE",{id:n},p)},DID_IMAGE_PREVIEW_CALCULATE_SIZE:({root:e,action:t})=>{e.ref.imageWidth=t.width,e.ref.imageHeight=t.height,e.ref.shouldRescale=!0,e.ref.shouldDrawPreview=!0,e.dispatch("KICK")},DID_UPDATE_ITEM_METADATA:({root:e,action:t})=>{"crop"===t.change.key&&(e.ref.shouldRescale=!0)}},(({root:e,props:t})=>{e.ref.imagePreview&&(e.rect.element.hidden||(e.ref.shouldRescale&&(((e,t)=>{if(!e.ref.imagePreview)return;let{id:r}=t;const o=e.query("GET_ITEM",{id:r});if(!o)return;const n=e.query("GET_PANEL_ASPECT_RATIO"),i=e.query("GET_ITEM_PANEL_ASPECT_RATIO"),s=e.query("GET_IMAGE_PREVIEW_HEIGHT");if(n||i||s)return;let{imageWidth:a,imageHeight:l}=e.ref;if(!a||!l)return;const c=e.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),d=e.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),u=(o.getMetadata("exif")||{}).orientation||-1;if(u>=5&&u<=8&&([a,l]=[l,a]),!Vs(o.file)||e.query("GET_IMAGE_PREVIEW_UPSCALE")){const e=2048/a;a*=e,l*=e}const p=l/a,f=(o.getMetadata("crop")||{}).aspectRatio||p;let h=Math.max(c,Math.min(l,d));const E=e.rect.element.width,m=Math.min(E*f,h);e.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:o.id,height:m})})(e,t),e.ref.shouldRescale=!1),e.ref.shouldDrawPreview&&(requestAnimationFrame((()=>{e.dispatch("DID_FINISH_CALCULATE_PREVIEWSIZE",{id:t.id})})),e.ref.shouldDrawPreview=!1)))})))})),{options:{allowImagePreview:[!0,o.BOOLEAN],imagePreviewFilterItem:[()=>!0,o.FUNCTION],imagePreviewHeight:[null,o.INT],imagePreviewMinHeight:[44,o.INT],imagePreviewMaxHeight:[256,o.INT],imagePreviewMaxFileSize:[null,o.INT],imagePreviewZoomFactor:[2,o.INT],imagePreviewUpscale:[!1,o.BOOLEAN],imagePreviewMaxInstantPreviewFileSize:[1e6,o.INT],imagePreviewTransparencyIndicator:[null,o.STRING],imagePreviewCalculateAverageImageColor:[!1,o.BOOLEAN],imagePreviewMarkupShow:[!0,o.BOOLEAN],imagePreviewMarkupFilter:[()=>!0,o.FUNCTION]}}};"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Hs}));var Ws={exports:{}},zs=function(e,t){return function(){for(var r=new Array(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];return e.apply(t,r)}},Xs=zs,js=Object.prototype.toString;function Qs(e){return"[object Array]"===js.call(e)}function Zs(e){return void 0===e}function Ks(e){return null!==e&&"object"==typeof e}function Js(e){if("[object Object]"!==js.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function ea(e){return"[object Function]"===js.call(e)}function ta(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),Qs(e))for(var r=0,o=e.length;r<o;r++)t.call(null,e[r],r,e);else for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(null,e[n],n,e)}var ra={isArray:Qs,isArrayBuffer:function(e){return"[object ArrayBuffer]"===js.call(e)},isBuffer:function(e){return null!==e&&!Zs(e)&&null!==e.constructor&&!Zs(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:Ks,isPlainObject:Js,isUndefined:Zs,isDate:function(e){return"[object Date]"===js.call(e)},isFile:function(e){return"[object File]"===js.call(e)},isBlob:function(e){return"[object Blob]"===js.call(e)},isFunction:ea,isStream:function(e){return Ks(e)&&ea(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:ta,merge:function e(){var t={};function r(r,o){Js(t[o])&&Js(r)?t[o]=e(t[o],r):Js(r)?t[o]=e({},r):Qs(r)?t[o]=r.slice():t[o]=r}for(var o=0,n=arguments.length;o<n;o++)ta(arguments[o],r);return t},extend:function(e,t,r){return ta(t,(function(t,o){e[o]=r&&"function"==typeof t?Xs(t,r):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}},oa=ra;function na(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var ia=function(e,t,r){if(!t)return e;var o;if(r)o=r(t);else if(oa.isURLSearchParams(t))o=t.toString();else{var n=[];oa.forEach(t,(function(e,t){null!=e&&(oa.isArray(e)?t+="[]":e=[e],oa.forEach(e,(function(e){oa.isDate(e)?e=e.toISOString():oa.isObject(e)&&(e=JSON.stringify(e)),n.push(na(t)+"="+na(e))})))})),o=n.join("&")}if(o){var i=e.indexOf("#");-1!==i&&(e=e.slice(0,i)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e},sa=ra;function aa(){this.handlers=[]}aa.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},aa.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},aa.prototype.forEach=function(e){sa.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var la=aa,ca=ra,da=function(e){return!(!e||!e.__CANCEL__)},ua=ra,pa=function(e,t,r,o,n){return e.config=t,r&&(e.code=r),e.request=o,e.response=n,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e},fa=function(e,t,r,o,n){var i=new Error(e);return pa(i,t,r,o,n)},ha=fa,Ea=ra,ma=Ea.isStandardBrowserEnv()?{write:function(e,t,r,o,n,i){var s=[];s.push(e+"="+encodeURIComponent(t)),Ea.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),Ea.isString(o)&&s.push("path="+o),Ea.isString(n)&&s.push("domain="+n),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},_a=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)},ga=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e},Ta=ra,Ia=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],ya=ra,Ra=ya.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function o(e){var o=e;return t&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=o(window.location.href),function(t){var r=ya.isString(t)?o(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0},Aa=ra,Oa=function(e,t,r){var o=r.config.validateStatus;r.status&&o&&!o(r.status)?t(ha("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)},Da=ma,wa=ia,va=function(e,t){return e&&!_a(t)?ga(e,t):t},Sa=function(e){var t,r,o,n={};return e?(Ta.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=Ta.trim(e.substr(0,o)).toLowerCase(),r=Ta.trim(e.substr(o+1)),t){if(n[t]&&Ia.indexOf(t)>=0)return;n[t]="set-cookie"===t?(n[t]?n[t]:[]).concat([r]):n[t]?n[t]+", "+r:r}})),n):n},Ma=Ra,ba=fa,Pa=function(e){return new Promise((function(t,r){var o=e.data,n=e.headers;Aa.isFormData(o)&&delete n["Content-Type"];var i=new XMLHttpRequest;if(e.auth){var s=e.auth.username||"",a=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";n.Authorization="Basic "+btoa(s+":"+a)}var l=va(e.baseURL,e.url);if(i.open(e.method.toUpperCase(),wa(l,e.params,e.paramsSerializer),!0),i.timeout=e.timeout,i.onreadystatechange=function(){if(i&&4===i.readyState&&(0!==i.status||i.responseURL&&0===i.responseURL.indexOf("file:"))){var o="getAllResponseHeaders"in i?Sa(i.getAllResponseHeaders()):null,n={data:e.responseType&&"text"!==e.responseType?i.response:i.responseText,status:i.status,statusText:i.statusText,headers:o,config:e,request:i};Oa(t,r,n),i=null}},i.onabort=function(){i&&(r(ba("Request aborted",e,"ECONNABORTED",i)),i=null)},i.onerror=function(){r(ba("Network Error",e,null,i)),i=null},i.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),r(ba(t,e,"ECONNABORTED",i)),i=null},Aa.isStandardBrowserEnv()){var c=(e.withCredentials||Ma(l))&&e.xsrfCookieName?Da.read(e.xsrfCookieName):void 0;c&&(n[e.xsrfHeaderName]=c)}if("setRequestHeader"in i&&Aa.forEach(n,(function(e,t){void 0===o&&"content-type"===t.toLowerCase()?delete n[t]:i.setRequestHeader(t,e)})),Aa.isUndefined(e.withCredentials)||(i.withCredentials=!!e.withCredentials),e.responseType)try{i.responseType=e.responseType}catch(d){if("json"!==e.responseType)throw d}"function"==typeof e.onDownloadProgress&&i.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&i.upload&&i.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){i&&(i.abort(),r(e),i=null)})),o||(o=null),i.send(o)}))},La=ra,Ca=function(e,t){ua.forEach(e,(function(r,o){o!==t&&o.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[o])}))},Na={"Content-Type":"application/x-www-form-urlencoded"};function Ga(e,t){!La.isUndefined(e)&&La.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var xa,Fa={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(xa=Pa),xa),transformRequest:[function(e,t){return Ca(t,"Accept"),Ca(t,"Content-Type"),La.isFormData(e)||La.isArrayBuffer(e)||La.isBuffer(e)||La.isStream(e)||La.isFile(e)||La.isBlob(e)?e:La.isArrayBufferView(e)?e.buffer:La.isURLSearchParams(e)?(Ga(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):La.isObject(e)?(Ga(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(t){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};Fa.headers={common:{Accept:"application/json, text/plain, */*"}},La.forEach(["delete","get","head"],(function(e){Fa.headers[e]={}})),La.forEach(["post","put","patch"],(function(e){Fa.headers[e]=La.merge(Na)}));var Ua=Fa,qa=ra,Ba=function(e,t,r){return ca.forEach(r,(function(r){e=r(e,t)})),e},Va=da,$a=Ua;function ka(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var Ya=ra,Ha=function(e,t){t=t||{};var r={},o=["url","method","data"],n=["headers","auth","proxy","params"],i=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function a(e,t){return Ya.isPlainObject(e)&&Ya.isPlainObject(t)?Ya.merge(e,t):Ya.isPlainObject(t)?Ya.merge({},t):Ya.isArray(t)?t.slice():t}function l(o){Ya.isUndefined(t[o])?Ya.isUndefined(e[o])||(r[o]=a(void 0,e[o])):r[o]=a(e[o],t[o])}Ya.forEach(o,(function(e){Ya.isUndefined(t[e])||(r[e]=a(void 0,t[e]))})),Ya.forEach(n,l),Ya.forEach(i,(function(o){Ya.isUndefined(t[o])?Ya.isUndefined(e[o])||(r[o]=a(void 0,e[o])):r[o]=a(void 0,t[o])})),Ya.forEach(s,(function(o){o in t?r[o]=a(e[o],t[o]):o in e&&(r[o]=a(void 0,e[o]))}));var c=o.concat(n).concat(i).concat(s),d=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===c.indexOf(e)}));return Ya.forEach(d,l),r},Wa=ra,za=ia,Xa=la,ja=function(e){return ka(e),e.headers=e.headers||{},e.data=Ba(e.data,e.headers,e.transformRequest),e.headers=qa.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),qa.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||$a.adapter)(e).then((function(t){return ka(e),t.data=Ba(t.data,t.headers,e.transformResponse),t}),(function(t){return Va(t)||(ka(e),t&&t.response&&(t.response.data=Ba(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},Qa=Ha;function Za(e){this.defaults=e,this.interceptors={request:new Xa,response:new Xa}}Za.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=Qa(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[ja,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)r=r.then(t.shift(),t.shift());return r},Za.prototype.getUri=function(e){return e=Qa(this.defaults,e),za(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},Wa.forEach(["delete","get","head","options"],(function(e){Za.prototype[e]=function(t,r){return this.request(Qa(r||{},{method:e,url:t,data:(r||{}).data}))}})),Wa.forEach(["post","put","patch"],(function(e){Za.prototype[e]=function(t,r,o){return this.request(Qa(o||{},{method:e,url:t,data:r}))}}));var Ka=Za;function Ja(e){this.message=e}Ja.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Ja.prototype.__CANCEL__=!0;var el=Ja,tl=el;function rl(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;e((function(e){r.reason||(r.reason=new tl(e),t(r.reason))}))}rl.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},rl.source=function(){var e;return{token:new rl((function(t){e=t})),cancel:e}};var ol=rl,nl=ra,il=zs,sl=Ka,al=Ha;function ll(e){var t=new sl(e),r=il(sl.prototype.request,t);return nl.extend(r,sl.prototype,t),nl.extend(r,t),r}var cl=ll(Ua);cl.Axios=sl,cl.create=function(e){return ll(al(cl.defaults,e))},cl.Cancel=el,cl.CancelToken=ol,cl.isCancel=da,cl.all=function(e){return Promise.all(e)},cl.spread=function(e){return function(t){return e.apply(null,t)}},cl.isAxiosError=function(e){return"object"==typeof e&&!0===e.isAxiosError},Ws.exports=cl,Ws.exports.default=cl;var dl=Ws.exports;export{z as A,d as B,Ae as C,g as D,y as E,R as F,I as G,v as H,c as I,_ as J,Y as K,k as L,Qi as M,Hi as N,as as O,Hs as P,$ as Q,N as R,ye as S,f as T,dl as U,x as a,G as b,U as c,M as d,b as e,S as f,q as g,V as h,Ie as i,Ee as j,L as k,C as l,me as m,B as n,_e as o,fe as p,he as q,ce as r,E as s,P as t,pe as u,ge as v,de as w,ue as x,j as y,X as z};
